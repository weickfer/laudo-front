var Jj=Object.defineProperty;var Qj=(n,e,t)=>e in n?Jj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var GE=(n,e,t)=>Qj(n,typeof e!="symbol"?e+"":e,t);function e5(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function jm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L0={exports:{}},uh={},F0={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function t5(){if(WE)return lt;WE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function g(N){return N===null||typeof N!="object"?null:(N=f&&N[f]||N["@@iterator"],typeof N=="function"?N:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function w(N,q,L){this.props=N,this.context=q,this.refs=x,this.updater=L||m}w.prototype.isReactComponent={},w.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},w.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function C(){}C.prototype=w.prototype;function b(N,q,L){this.props=N,this.context=q,this.refs=x,this.updater=L||m}var k=b.prototype=new C;k.constructor=b,v(k,w.prototype),k.isPureReactComponent=!0;var R=Array.isArray,P=Object.prototype.hasOwnProperty,A={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function D(N,q,L){var ee,be={},pe=null,ce=null;if(q!=null)for(ee in q.ref!==void 0&&(ce=q.ref),q.key!==void 0&&(pe=""+q.key),q)P.call(q,ee)&&!O.hasOwnProperty(ee)&&(be[ee]=q[ee]);var ve=arguments.length-2;if(ve===1)be.children=L;else if(1<ve){for(var Se=Array(ve),Ce=0;Ce<ve;Ce++)Se[Ce]=arguments[Ce+2];be.children=Se}if(N&&N.defaultProps)for(ee in ve=N.defaultProps,ve)be[ee]===void 0&&(be[ee]=ve[ee]);return{$$typeof:n,type:N,key:pe,ref:ce,props:be,_owner:A.current}}function j(N,q){return{$$typeof:n,type:N.type,key:q,ref:N.ref,props:N.props,_owner:N._owner}}function Q(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function X(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(L){return q[L]})}var W=/\/+/g;function G(N,q){return typeof N=="object"&&N!==null&&N.key!=null?X(""+N.key):q.toString(36)}function V(N,q,L,ee,be){var pe=typeof N;(pe==="undefined"||pe==="boolean")&&(N=null);var ce=!1;if(N===null)ce=!0;else switch(pe){case"string":case"number":ce=!0;break;case"object":switch(N.$$typeof){case n:case e:ce=!0}}if(ce)return ce=N,be=be(ce),N=ee===""?"."+G(ce,0):ee,R(be)?(L="",N!=null&&(L=N.replace(W,"$&/")+"/"),V(be,q,L,"",function(Ce){return Ce})):be!=null&&(Q(be)&&(be=j(be,L+(!be.key||ce&&ce.key===be.key?"":(""+be.key).replace(W,"$&/")+"/")+N)),q.push(be)),1;if(ce=0,ee=ee===""?".":ee+":",R(N))for(var ve=0;ve<N.length;ve++){pe=N[ve];var Se=ee+G(pe,ve);ce+=V(pe,q,L,Se,be)}else if(Se=g(N),typeof Se=="function")for(N=Se.call(N),ve=0;!(pe=N.next()).done;)pe=pe.value,Se=ee+G(pe,ve++),ce+=V(pe,q,L,Se,be);else if(pe==="object")throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ce}function ne(N,q,L){if(N==null)return N;var ee=[],be=0;return V(N,ee,"","",function(pe){return q.call(L,pe,be++)}),ee}function U(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(L){(N._status===0||N._status===-1)&&(N._status=1,N._result=L)},function(L){(N._status===0||N._status===-1)&&(N._status=2,N._result=L)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var oe={current:null},F={transition:null},K={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:F,ReactCurrentOwner:A};function I(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:ne,forEach:function(N,q,L){ne(N,function(){q.apply(this,arguments)},L)},count:function(N){var q=0;return ne(N,function(){q++}),q},toArray:function(N){return ne(N,function(q){return q})||[]},only:function(N){if(!Q(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},lt.Component=w,lt.Fragment=t,lt.Profiler=i,lt.PureComponent=b,lt.StrictMode=r,lt.Suspense=l,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,lt.act=I,lt.cloneElement=function(N,q,L){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ee=v({},N.props),be=N.key,pe=N.ref,ce=N._owner;if(q!=null){if(q.ref!==void 0&&(pe=q.ref,ce=A.current),q.key!==void 0&&(be=""+q.key),N.type&&N.type.defaultProps)var ve=N.type.defaultProps;for(Se in q)P.call(q,Se)&&!O.hasOwnProperty(Se)&&(ee[Se]=q[Se]===void 0&&ve!==void 0?ve[Se]:q[Se])}var Se=arguments.length-2;if(Se===1)ee.children=L;else if(1<Se){ve=Array(Se);for(var Ce=0;Ce<Se;Ce++)ve[Ce]=arguments[Ce+2];ee.children=ve}return{$$typeof:n,type:N.type,key:be,ref:pe,props:ee,_owner:ce}},lt.createContext=function(N){return N={$$typeof:o,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:s,_context:N},N.Consumer=N},lt.createElement=D,lt.createFactory=function(N){var q=D.bind(null,N);return q.type=N,q},lt.createRef=function(){return{current:null}},lt.forwardRef=function(N){return{$$typeof:a,render:N}},lt.isValidElement=Q,lt.lazy=function(N){return{$$typeof:d,_payload:{_status:-1,_result:N},_init:U}},lt.memo=function(N,q){return{$$typeof:u,type:N,compare:q===void 0?null:q}},lt.startTransition=function(N){var q=F.transition;F.transition={};try{N()}finally{F.transition=q}},lt.unstable_act=I,lt.useCallback=function(N,q){return oe.current.useCallback(N,q)},lt.useContext=function(N){return oe.current.useContext(N)},lt.useDebugValue=function(){},lt.useDeferredValue=function(N){return oe.current.useDeferredValue(N)},lt.useEffect=function(N,q){return oe.current.useEffect(N,q)},lt.useId=function(){return oe.current.useId()},lt.useImperativeHandle=function(N,q,L){return oe.current.useImperativeHandle(N,q,L)},lt.useInsertionEffect=function(N,q){return oe.current.useInsertionEffect(N,q)},lt.useLayoutEffect=function(N,q){return oe.current.useLayoutEffect(N,q)},lt.useMemo=function(N,q){return oe.current.useMemo(N,q)},lt.useReducer=function(N,q,L){return oe.current.useReducer(N,q,L)},lt.useRef=function(N){return oe.current.useRef(N)},lt.useState=function(N){return oe.current.useState(N)},lt.useSyncExternalStore=function(N,q,L){return oe.current.useSyncExternalStore(N,q,L)},lt.useTransition=function(){return oe.current.useTransition()},lt.version="18.3.1",lt}var $E;function Ww(){return $E||($E=1,F0.exports=t5()),F0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function n5(){if(UE)return uh;UE=1;var n=Ww(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var d,f={},g=null,m=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)r.call(l,d)&&!s.hasOwnProperty(d)&&(f[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:e,type:a,key:g,ref:m,props:f,_owner:i.current}}return uh.Fragment=t,uh.jsx=o,uh.jsxs=o,uh}var HE;function r5(){return HE||(HE=1,L0.exports=n5()),L0.exports}var _=r5(),hg={},N0={exports:{}},kr={},j0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function i5(){return XE||(XE=1,function(n){function e(F,K){var I=F.length;F.push(K);e:for(;0<I;){var N=I-1>>>1,q=F[N];if(0<i(q,K))F[N]=K,F[I]=q,I=N;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var K=F[0],I=F.pop();if(I!==K){F[0]=I;e:for(var N=0,q=F.length,L=q>>>1;N<L;){var ee=2*(N+1)-1,be=F[ee],pe=ee+1,ce=F[pe];if(0>i(be,I))pe<q&&0>i(ce,be)?(F[N]=ce,F[pe]=I,N=pe):(F[N]=be,F[ee]=I,N=ee);else if(pe<q&&0>i(ce,I))F[N]=ce,F[pe]=I,N=pe;else break e}}return K}function i(F,K){var I=F.sortIndex-K.sortIndex;return I!==0?I:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,g=3,m=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(F){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=F)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function R(F){if(x=!1,k(F),!v)if(t(l)!==null)v=!0,U(P);else{var K=t(u);K!==null&&oe(R,K.startTime-F)}}function P(F,K){v=!1,x&&(x=!1,C(D),D=-1),m=!0;var I=g;try{for(k(K),f=t(l);f!==null&&(!(f.expirationTime>K)||F&&!X());){var N=f.callback;if(typeof N=="function"){f.callback=null,g=f.priorityLevel;var q=N(f.expirationTime<=K);K=n.unstable_now(),typeof q=="function"?f.callback=q:f===t(l)&&r(l),k(K)}else r(l);f=t(l)}if(f!==null)var L=!0;else{var ee=t(u);ee!==null&&oe(R,ee.startTime-K),L=!1}return L}finally{f=null,g=I,m=!1}}var A=!1,O=null,D=-1,j=5,Q=-1;function X(){return!(n.unstable_now()-Q<j)}function W(){if(O!==null){var F=n.unstable_now();Q=F;var K=!0;try{K=O(!0,F)}finally{K?G():(A=!1,O=null)}}else A=!1}var G;if(typeof b=="function")G=function(){b(W)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ne=V.port2;V.port1.onmessage=W,G=function(){ne.postMessage(null)}}else G=function(){w(W,0)};function U(F){O=F,A||(A=!0,G())}function oe(F,K){D=w(function(){F(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,U(P))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var I=g;g=K;try{return F()}finally{g=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var I=g;g=F;try{return K()}finally{g=I}},n.unstable_scheduleCallback=function(F,K,I){var N=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?N+I:N):I=N,F){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=I+q,F={id:d++,callback:K,priorityLevel:F,startTime:I,expirationTime:q,sortIndex:-1},I>N?(F.sortIndex=I,e(u,F),t(l)===null&&F===t(u)&&(x?(C(D),D=-1):x=!0,oe(R,I-N))):(F.sortIndex=q,e(l,F),v||m||(v=!0,U(P))),F},n.unstable_shouldYield=X,n.unstable_wrapCallback=function(F){var K=g;return function(){var I=g;g=K;try{return F.apply(this,arguments)}finally{g=I}}}}(z0)),z0}var YE;function s5(){return YE||(YE=1,j0.exports=i5()),j0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function o5(){if(KE)return kr;KE=1;var n=Ww(),e=s5();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,p=1;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function g(c){return l.call(f,c)?!0:l.call(d,c)?!1:u.test(c)?f[c]=!0:(d[c]=!0,!1)}function m(c,h,p,y){if(p!==null&&p.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,p,y){if(h===null||typeof h>"u"||m(c,h,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function x(c,h,p,y,S,T,M){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=c,this.type=h,this.sanitizeURL=T,this.removeEmptyString=M}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new x(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];w[h]=new x(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new x(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new x(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new x(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new x(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new x(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new x(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new x(c,5,!1,c.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function b(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(C,b);w[h]=new x(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(C,b);w[h]=new x(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(C,b);w[h]=new x(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new x(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new x(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,h,p,y){var S=w.hasOwnProperty(h)?w[h]:null;(S!==null?S.type!==0:y||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,p,S,y)&&(p=null),y||S===null?g(h)&&(p===null?c.removeAttribute(h):c.setAttribute(h,""+p)):S.mustUseProperty?c[S.propertyName]=p===null?S.type===3?!1:"":p:(h=S.attributeName,y=S.attributeNamespace,p===null?c.removeAttribute(h):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,y?c.setAttributeNS(y,h,p):c.setAttribute(h,p))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),X=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),F=Symbol.iterator;function K(c){return c===null||typeof c!="object"?null:(c=F&&c[F]||c["@@iterator"],typeof c=="function"?c:null)}var I=Object.assign,N;function q(c){if(N===void 0)try{throw Error()}catch(p){var h=p.stack.trim().match(/\n( *(at )?)/);N=h&&h[1]||""}return`
`+N+c}var L=!1;function ee(c,h){if(!c||L)return"";L=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(le){var y=le}Reflect.construct(c,[],h)}else{try{h.call()}catch(le){y=le}c.call(h.prototype)}else{try{throw Error()}catch(le){y=le}c()}}catch(le){if(le&&y&&typeof le.stack=="string"){for(var S=le.stack.split(`
`),T=y.stack.split(`
`),M=S.length-1,z=T.length-1;1<=M&&0<=z&&S[M]!==T[z];)z--;for(;1<=M&&0<=z;M--,z--)if(S[M]!==T[z]){if(M!==1||z!==1)do if(M--,z--,0>z||S[M]!==T[z]){var $=`
`+S[M].replace(" at new "," at ");return c.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",c.displayName)),$}while(1<=M&&0<=z);break}}}finally{L=!1,Error.prepareStackTrace=p}return(c=c?c.displayName||c.name:"")?q(c):""}function be(c){switch(c.tag){case 5:return q(c.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return c=ee(c.type,!1),c;case 11:return c=ee(c.type.render,!1),c;case 1:return c=ee(c.type,!0),c;default:return""}}function pe(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case O:return"Fragment";case A:return"Portal";case j:return"Profiler";case D:return"StrictMode";case G:return"Suspense";case V:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case X:return(c.displayName||"Context")+".Consumer";case Q:return(c._context.displayName||"Context")+".Provider";case W:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ne:return h=c.displayName||null,h!==null?h:pe(c.type)||"Memo";case U:h=c._payload,c=c._init;try{return pe(c(h))}catch{}}return null}function ce(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(h);case 8:return h===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function ve(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Se(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ce(c){var h=Se(c)?"checked":"value",p=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),y=""+c[h];if(!c.hasOwnProperty(h)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,T=p.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return S.call(this)},set:function(M){y=""+M,T.call(this,M)}}),Object.defineProperty(c,h,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Ue(c){c._valueTracker||(c._valueTracker=Ce(c))}function Ke(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var p=h.getValue(),y="";return c&&(y=Se(c)?c.checked?"true":"false":c.value),c=y,c!==p?(h.setValue(c),!0):!1}function Dt(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Mt(c,h){var p=h.checked;return I({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??c._wrapperState.initialChecked})}function xn(c,h){var p=h.defaultValue==null?"":h.defaultValue,y=h.checked!=null?h.checked:h.defaultChecked;p=ve(h.value!=null?h.value:p),c._wrapperState={initialChecked:y,initialValue:p,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Ht(c,h){h=h.checked,h!=null&&k(c,"checked",h,!1)}function nn(c,h){Ht(c,h);var p=ve(h.value),y=h.type;if(p!=null)y==="number"?(p===0&&c.value===""||c.value!=p)&&(c.value=""+p):c.value!==""+p&&(c.value=""+p);else if(y==="submit"||y==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Dn(c,h.type,p):h.hasOwnProperty("defaultValue")&&Dn(c,h.type,ve(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Br(c,h,p){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var y=h.type;if(!(y!=="submit"&&y!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,p||h===c.value||(c.value=h),c.defaultValue=h}p=c.name,p!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,p!==""&&(c.name=p)}function Dn(c,h,p){(h!=="number"||Dt(c.ownerDocument)!==c)&&(p==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+p&&(c.defaultValue=""+p))}var rn=Array.isArray;function Bt(c,h,p,y){if(c=c.options,h){h={};for(var S=0;S<p.length;S++)h["$"+p[S]]=!0;for(p=0;p<c.length;p++)S=h.hasOwnProperty("$"+c[p].value),c[p].selected!==S&&(c[p].selected=S),S&&y&&(c[p].defaultSelected=!0)}else{for(p=""+ve(p),h=null,S=0;S<c.length;S++){if(c[S].value===p){c[S].selected=!0,y&&(c[S].defaultSelected=!0);return}h!==null||c[S].disabled||(h=c[S])}h!==null&&(h.selected=!0)}}function B(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return I({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function ie(c,h){var p=h.value;if(p==null){if(p=h.children,h=h.defaultValue,p!=null){if(h!=null)throw Error(t(92));if(rn(p)){if(1<p.length)throw Error(t(93));p=p[0]}h=p}h==null&&(h=""),p=h}c._wrapperState={initialValue:ve(p)}}function ue(c,h){var p=ve(h.value),y=ve(h.defaultValue);p!=null&&(p=""+p,p!==c.value&&(c.value=p),h.defaultValue==null&&c.defaultValue!==p&&(c.defaultValue=p)),y!=null&&(c.defaultValue=""+y)}function Ee(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function H(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function te(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?H(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var he,_e=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,p,y,S){MSApp.execUnsafeLocalFunction(function(){return c(h,p,y,S)})}:c}(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(he=he||document.createElement("div"),he.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=he.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function Ve(c,h){if(h){var p=c.firstChild;if(p&&p===c.lastChild&&p.nodeType===3){p.nodeValue=h;return}}c.textContent=h}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xr=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(c){xr.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),ut[h]=ut[c]})});function dn(c,h,p){return h==null||typeof h=="boolean"||h===""?"":p||typeof h!="number"||h===0||ut.hasOwnProperty(c)&&ut[c]?(""+h).trim():h+"px"}function _r(c,h){c=c.style;for(var p in h)if(h.hasOwnProperty(p)){var y=p.indexOf("--")===0,S=dn(p,h[p],y);p==="float"&&(p="cssFloat"),y?c.setProperty(p,S):c[p]=S}}var Ei=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xt(c,h){if(h){if(Ei[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function sr(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fn=null;function Al(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Va=null,si=null,oi=null;function Po(c){if(c=Ku(c)){if(typeof Va!="function")throw Error(t(280));var h=c.stateNode;h&&(h=Tf(h),Va(c.stateNode,c.type,h))}}function Pu(c){si?oi?oi.push(c):oi=[c]:si=c}function Iu(){if(si){var c=si,h=oi;if(oi=si=null,Po(c),h)for(c=0;c<h.length;c++)Po(h[c])}}function or(c,h){return c(h)}function rs(){}var Gn=!1;function Gr(c,h,p){if(Gn)return c(h,p);Gn=!0;try{return or(c,h,p)}finally{Gn=!1,(si!==null||oi!==null)&&(rs(),Iu())}}function Tn(c,h){var p=c.stateNode;if(p===null)return null;var y=Tf(p);if(y===null)return null;p=y[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(p&&typeof p!="function")throw Error(t(231,h,typeof p));return p}var Wr=!1;if(a)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Wr=!1}function Gt(c,h,p,y,S,T,M,z,$){var le=Array.prototype.slice.call(arguments,3);try{h.apply(p,le)}catch(ge){this.onError(ge)}}var sn=!1,wr=null,Ol=!1,ev=null,sN={onError:function(c){sn=!0,wr=c}};function oN(c,h,p,y,S,T,M,z,$){sn=!1,wr=null,Gt.apply(sN,arguments)}function aN(c,h,p,y,S,T,M,z,$){if(oN.apply(this,arguments),sn){if(sn){var le=wr;sn=!1,wr=null}else throw Error(t(198));Ol||(Ol=!0,ev=le)}}function Ba(c){var h=c,p=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(p=h.return),c=h.return;while(c)}return h.tag===3?p:null}function h1(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function d1(c){if(Ba(c)!==c)throw Error(t(188))}function lN(c){var h=c.alternate;if(!h){if(h=Ba(c),h===null)throw Error(t(188));return h!==c?null:c}for(var p=c,y=h;;){var S=p.return;if(S===null)break;var T=S.alternate;if(T===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===p)return d1(S),c;if(T===y)return d1(S),h;T=T.sibling}throw Error(t(188))}if(p.return!==y.return)p=S,y=T;else{for(var M=!1,z=S.child;z;){if(z===p){M=!0,p=S,y=T;break}if(z===y){M=!0,y=S,p=T;break}z=z.sibling}if(!M){for(z=T.child;z;){if(z===p){M=!0,p=T,y=S;break}if(z===y){M=!0,y=T,p=S;break}z=z.sibling}if(!M)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?c:h}function f1(c){return c=lN(c),c!==null?g1(c):null}function g1(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=g1(c);if(h!==null)return h;c=c.sibling}return null}var p1=e.unstable_scheduleCallback,m1=e.unstable_cancelCallback,cN=e.unstable_shouldYield,uN=e.unstable_requestPaint,on=e.unstable_now,hN=e.unstable_getCurrentPriorityLevel,tv=e.unstable_ImmediatePriority,y1=e.unstable_UserBlockingPriority,of=e.unstable_NormalPriority,dN=e.unstable_LowPriority,v1=e.unstable_IdlePriority,af=null,is=null;function fN(c){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(af,c,void 0,(c.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:mN,gN=Math.log,pN=Math.LN2;function mN(c){return c>>>=0,c===0?32:31-(gN(c)/pN|0)|0}var lf=64,cf=4194304;function Mu(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function uf(c,h){var p=c.pendingLanes;if(p===0)return 0;var y=0,S=c.suspendedLanes,T=c.pingedLanes,M=p&268435455;if(M!==0){var z=M&~S;z!==0?y=Mu(z):(T&=M,T!==0&&(y=Mu(T)))}else M=p&~S,M!==0?y=Mu(M):T!==0&&(y=Mu(T));if(y===0)return 0;if(h!==0&&h!==y&&(h&S)===0&&(S=y&-y,T=h&-h,S>=T||S===16&&(T&4194240)!==0))return h;if((y&4)!==0&&(y|=p&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=y;0<h;)p=31-Ti(h),S=1<<p,y|=c[p],h&=~S;return y}function yN(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vN(c,h){for(var p=c.suspendedLanes,y=c.pingedLanes,S=c.expirationTimes,T=c.pendingLanes;0<T;){var M=31-Ti(T),z=1<<M,$=S[M];$===-1?((z&p)===0||(z&y)!==0)&&(S[M]=yN(z,h)):$<=h&&(c.expiredLanes|=z),T&=~z}}function nv(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function x1(){var c=lf;return lf<<=1,(lf&4194240)===0&&(lf=64),c}function rv(c){for(var h=[],p=0;31>p;p++)h.push(c);return h}function Au(c,h,p){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Ti(h),c[h]=p}function xN(c,h){var p=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var y=c.eventTimes;for(c=c.expirationTimes;0<p;){var S=31-Ti(p),T=1<<S;h[S]=0,y[S]=-1,c[S]=-1,p&=~T}}function iv(c,h){var p=c.entangledLanes|=h;for(c=c.entanglements;p;){var y=31-Ti(p),S=1<<y;S&h|c[y]&h&&(c[y]|=h),p&=~S}}var Rt=0;function _1(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var w1,sv,C1,S1,b1,ov=!1,hf=[],Io=null,Mo=null,Ao=null,Ou=new Map,Du=new Map,Oo=[],_N="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E1(c,h){switch(c){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":Ou.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(h.pointerId)}}function Lu(c,h,p,y,S,T){return c===null||c.nativeEvent!==T?(c={blockedOn:h,domEventName:p,eventSystemFlags:y,nativeEvent:T,targetContainers:[S]},h!==null&&(h=Ku(h),h!==null&&sv(h)),c):(c.eventSystemFlags|=y,h=c.targetContainers,S!==null&&h.indexOf(S)===-1&&h.push(S),c)}function wN(c,h,p,y,S){switch(h){case"focusin":return Io=Lu(Io,c,h,p,y,S),!0;case"dragenter":return Mo=Lu(Mo,c,h,p,y,S),!0;case"mouseover":return Ao=Lu(Ao,c,h,p,y,S),!0;case"pointerover":var T=S.pointerId;return Ou.set(T,Lu(Ou.get(T)||null,c,h,p,y,S)),!0;case"gotpointercapture":return T=S.pointerId,Du.set(T,Lu(Du.get(T)||null,c,h,p,y,S)),!0}return!1}function T1(c){var h=Ga(c.target);if(h!==null){var p=Ba(h);if(p!==null){if(h=p.tag,h===13){if(h=h1(p),h!==null){c.blockedOn=h,b1(c.priority,function(){C1(p)});return}}else if(h===3&&p.stateNode.current.memoizedState.isDehydrated){c.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}c.blockedOn=null}function df(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var p=lv(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(p===null){p=c.nativeEvent;var y=new p.constructor(p.type,p);fn=y,p.target.dispatchEvent(y),fn=null}else return h=Ku(p),h!==null&&sv(h),c.blockedOn=p,!1;h.shift()}return!0}function k1(c,h,p){df(c)&&p.delete(h)}function CN(){ov=!1,Io!==null&&df(Io)&&(Io=null),Mo!==null&&df(Mo)&&(Mo=null),Ao!==null&&df(Ao)&&(Ao=null),Ou.forEach(k1),Du.forEach(k1)}function Fu(c,h){c.blockedOn===h&&(c.blockedOn=null,ov||(ov=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CN)))}function Nu(c){function h(S){return Fu(S,c)}if(0<hf.length){Fu(hf[0],c);for(var p=1;p<hf.length;p++){var y=hf[p];y.blockedOn===c&&(y.blockedOn=null)}}for(Io!==null&&Fu(Io,c),Mo!==null&&Fu(Mo,c),Ao!==null&&Fu(Ao,c),Ou.forEach(h),Du.forEach(h),p=0;p<Oo.length;p++)y=Oo[p],y.blockedOn===c&&(y.blockedOn=null);for(;0<Oo.length&&(p=Oo[0],p.blockedOn===null);)T1(p),p.blockedOn===null&&Oo.shift()}var Dl=R.ReactCurrentBatchConfig,ff=!0;function SN(c,h,p,y){var S=Rt,T=Dl.transition;Dl.transition=null;try{Rt=1,av(c,h,p,y)}finally{Rt=S,Dl.transition=T}}function bN(c,h,p,y){var S=Rt,T=Dl.transition;Dl.transition=null;try{Rt=4,av(c,h,p,y)}finally{Rt=S,Dl.transition=T}}function av(c,h,p,y){if(ff){var S=lv(c,h,p,y);if(S===null)Ev(c,h,y,gf,p),E1(c,y);else if(wN(S,c,h,p,y))y.stopPropagation();else if(E1(c,y),h&4&&-1<_N.indexOf(c)){for(;S!==null;){var T=Ku(S);if(T!==null&&w1(T),T=lv(c,h,p,y),T===null&&Ev(c,h,y,gf,p),T===S)break;S=T}S!==null&&y.stopPropagation()}else Ev(c,h,y,null,p)}}var gf=null;function lv(c,h,p,y){if(gf=null,c=Al(y),c=Ga(c),c!==null)if(h=Ba(c),h===null)c=null;else if(p=h.tag,p===13){if(c=h1(h),c!==null)return c;c=null}else if(p===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return gf=c,null}function R1(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hN()){case tv:return 1;case y1:return 4;case of:case dN:return 16;case v1:return 536870912;default:return 16}default:return 16}}var Do=null,cv=null,pf=null;function P1(){if(pf)return pf;var c,h=cv,p=h.length,y,S="value"in Do?Do.value:Do.textContent,T=S.length;for(c=0;c<p&&h[c]===S[c];c++);var M=p-c;for(y=1;y<=M&&h[p-y]===S[T-y];y++);return pf=S.slice(c,1<y?1-y:void 0)}function mf(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function yf(){return!0}function I1(){return!1}function $r(c){function h(p,y,S,T,M){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=T,this.target=M,this.currentTarget=null;for(var z in c)c.hasOwnProperty(z)&&(p=c[z],this[z]=p?p(T):T[z]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?yf:I1,this.isPropagationStopped=I1,this}return I(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=yf)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=yf)},persist:function(){},isPersistent:yf}),h}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=$r(Ll),ju=I({},Ll,{view:0,detail:0}),EN=$r(ju),hv,dv,zu,vf=I({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gv,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zu&&(zu&&c.type==="mousemove"?(hv=c.screenX-zu.screenX,dv=c.screenY-zu.screenY):dv=hv=0,zu=c),hv)},movementY:function(c){return"movementY"in c?c.movementY:dv}}),M1=$r(vf),TN=I({},vf,{dataTransfer:0}),kN=$r(TN),RN=I({},ju,{relatedTarget:0}),fv=$r(RN),PN=I({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),IN=$r(PN),MN=I({},Ll,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),AN=$r(MN),ON=I({},Ll,{data:0}),A1=$r(ON),DN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NN(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=FN[c])?!!h[c]:!1}function gv(){return NN}var jN=I({},ju,{key:function(c){if(c.key){var h=DN[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=mf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?LN[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gv,charCode:function(c){return c.type==="keypress"?mf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?mf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),zN=$r(jN),VN=I({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O1=$r(VN),BN=I({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gv}),GN=$r(BN),WN=I({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),$N=$r(WN),UN=I({},vf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),HN=$r(UN),XN=[9,13,27,32],pv=a&&"CompositionEvent"in window,Vu=null;a&&"documentMode"in document&&(Vu=document.documentMode);var YN=a&&"TextEvent"in window&&!Vu,D1=a&&(!pv||Vu&&8<Vu&&11>=Vu),L1=" ",F1=!1;function N1(c,h){switch(c){case"keyup":return XN.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j1(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Fl=!1;function KN(c,h){switch(c){case"compositionend":return j1(h);case"keypress":return h.which!==32?null:(F1=!0,L1);case"textInput":return c=h.data,c===L1&&F1?null:c;default:return null}}function qN(c,h){if(Fl)return c==="compositionend"||!pv&&N1(c,h)?(c=P1(),pf=cv=Do=null,Fl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return D1&&h.locale!=="ko"?null:h.data;default:return null}}var ZN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z1(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!ZN[c.type]:h==="textarea"}function V1(c,h,p,y){Pu(y),h=Sf(h,"onChange"),0<h.length&&(p=new uv("onChange","change",null,p,y),c.push({event:p,listeners:h}))}var Bu=null,Gu=null;function JN(c){ib(c,0)}function xf(c){var h=Bl(c);if(Ke(h))return c}function QN(c,h){if(c==="change")return h}var B1=!1;if(a){var mv;if(a){var yv="oninput"in document;if(!yv){var G1=document.createElement("div");G1.setAttribute("oninput","return;"),yv=typeof G1.oninput=="function"}mv=yv}else mv=!1;B1=mv&&(!document.documentMode||9<document.documentMode)}function W1(){Bu&&(Bu.detachEvent("onpropertychange",$1),Gu=Bu=null)}function $1(c){if(c.propertyName==="value"&&xf(Gu)){var h=[];V1(h,Gu,c,Al(c)),Gr(JN,h)}}function ej(c,h,p){c==="focusin"?(W1(),Bu=h,Gu=p,Bu.attachEvent("onpropertychange",$1)):c==="focusout"&&W1()}function tj(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return xf(Gu)}function nj(c,h){if(c==="click")return xf(h)}function rj(c,h){if(c==="input"||c==="change")return xf(h)}function ij(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var ki=typeof Object.is=="function"?Object.is:ij;function Wu(c,h){if(ki(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var p=Object.keys(c),y=Object.keys(h);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!l.call(h,S)||!ki(c[S],h[S]))return!1}return!0}function U1(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function H1(c,h){var p=U1(c);c=0;for(var y;p;){if(p.nodeType===3){if(y=c+p.textContent.length,c<=h&&y>=h)return{node:p,offset:h-c};c=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=U1(p)}}function X1(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?X1(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function Y1(){for(var c=window,h=Dt();h instanceof c.HTMLIFrameElement;){try{var p=typeof h.contentWindow.location.href=="string"}catch{p=!1}if(p)c=h.contentWindow;else break;h=Dt(c.document)}return h}function vv(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function sj(c){var h=Y1(),p=c.focusedElem,y=c.selectionRange;if(h!==p&&p&&p.ownerDocument&&X1(p.ownerDocument.documentElement,p)){if(y!==null&&vv(p)){if(h=y.start,c=y.end,c===void 0&&(c=h),"selectionStart"in p)p.selectionStart=h,p.selectionEnd=Math.min(c,p.value.length);else if(c=(h=p.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var S=p.textContent.length,T=Math.min(y.start,S);y=y.end===void 0?T:Math.min(y.end,S),!c.extend&&T>y&&(S=y,y=T,T=S),S=H1(p,T);var M=H1(p,y);S&&M&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==M.node||c.focusOffset!==M.offset)&&(h=h.createRange(),h.setStart(S.node,S.offset),c.removeAllRanges(),T>y?(c.addRange(h),c.extend(M.node,M.offset)):(h.setEnd(M.node,M.offset),c.addRange(h)))}}for(h=[],c=p;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<h.length;p++)c=h[p],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var oj=a&&"documentMode"in document&&11>=document.documentMode,Nl=null,xv=null,$u=null,_v=!1;function K1(c,h,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;_v||Nl==null||Nl!==Dt(y)||(y=Nl,"selectionStart"in y&&vv(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),$u&&Wu($u,y)||($u=y,y=Sf(xv,"onSelect"),0<y.length&&(h=new uv("onSelect","select",null,h,p),c.push({event:h,listeners:y}),h.target=Nl)))}function _f(c,h){var p={};return p[c.toLowerCase()]=h.toLowerCase(),p["Webkit"+c]="webkit"+h,p["Moz"+c]="moz"+h,p}var jl={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},wv={},q1={};a&&(q1=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function wf(c){if(wv[c])return wv[c];if(!jl[c])return c;var h=jl[c],p;for(p in h)if(h.hasOwnProperty(p)&&p in q1)return wv[c]=h[p];return c}var Z1=wf("animationend"),J1=wf("animationiteration"),Q1=wf("animationstart"),eb=wf("transitionend"),tb=new Map,nb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(c,h){tb.set(c,h),s(h,[c])}for(var Cv=0;Cv<nb.length;Cv++){var Sv=nb[Cv],aj=Sv.toLowerCase(),lj=Sv[0].toUpperCase()+Sv.slice(1);Lo(aj,"on"+lj)}Lo(Z1,"onAnimationEnd"),Lo(J1,"onAnimationIteration"),Lo(Q1,"onAnimationStart"),Lo("dblclick","onDoubleClick"),Lo("focusin","onFocus"),Lo("focusout","onBlur"),Lo(eb,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uu));function rb(c,h,p){var y=c.type||"unknown-event";c.currentTarget=p,aN(y,h,void 0,c),c.currentTarget=null}function ib(c,h){h=(h&4)!==0;for(var p=0;p<c.length;p++){var y=c[p],S=y.event;y=y.listeners;e:{var T=void 0;if(h)for(var M=y.length-1;0<=M;M--){var z=y[M],$=z.instance,le=z.currentTarget;if(z=z.listener,$!==T&&S.isPropagationStopped())break e;rb(S,z,le),T=$}else for(M=0;M<y.length;M++){if(z=y[M],$=z.instance,le=z.currentTarget,z=z.listener,$!==T&&S.isPropagationStopped())break e;rb(S,z,le),T=$}}}if(Ol)throw c=ev,Ol=!1,ev=null,c}function jt(c,h){var p=h[Mv];p===void 0&&(p=h[Mv]=new Set);var y=c+"__bubble";p.has(y)||(sb(h,c,2,!1),p.add(y))}function bv(c,h,p){var y=0;h&&(y|=4),sb(p,c,y,h)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function Hu(c){if(!c[Cf]){c[Cf]=!0,r.forEach(function(p){p!=="selectionchange"&&(cj.has(p)||bv(p,!1,c),bv(p,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Cf]||(h[Cf]=!0,bv("selectionchange",!1,h))}}function sb(c,h,p,y){switch(R1(h)){case 1:var S=SN;break;case 4:S=bN;break;default:S=av}p=S.bind(null,h,p,c),S=void 0,!Wr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(S=!0),y?S!==void 0?c.addEventListener(h,p,{capture:!0,passive:S}):c.addEventListener(h,p,!0):S!==void 0?c.addEventListener(h,p,{passive:S}):c.addEventListener(h,p,!1)}function Ev(c,h,p,y,S){var T=y;if((h&1)===0&&(h&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var z=y.stateNode.containerInfo;if(z===S||z.nodeType===8&&z.parentNode===S)break;if(M===4)for(M=y.return;M!==null;){var $=M.tag;if(($===3||$===4)&&($=M.stateNode.containerInfo,$===S||$.nodeType===8&&$.parentNode===S))return;M=M.return}for(;z!==null;){if(M=Ga(z),M===null)return;if($=M.tag,$===5||$===6){y=T=M;continue e}z=z.parentNode}}y=y.return}Gr(function(){var le=T,ge=Al(p),me=[];e:{var fe=tb.get(c);if(fe!==void 0){var Re=uv,Ae=c;switch(c){case"keypress":if(mf(p)===0)break e;case"keydown":case"keyup":Re=zN;break;case"focusin":Ae="focus",Re=fv;break;case"focusout":Ae="blur",Re=fv;break;case"beforeblur":case"afterblur":Re=fv;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=M1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=kN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=GN;break;case Z1:case J1:case Q1:Re=IN;break;case eb:Re=$N;break;case"scroll":Re=EN;break;case"wheel":Re=HN;break;case"copy":case"cut":case"paste":Re=AN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=O1}var Fe=(h&4)!==0,an=!Fe&&c==="scroll",re=Fe?fe!==null?fe+"Capture":null:fe;Fe=[];for(var J=le,se;J!==null;){se=J;var we=se.stateNode;if(se.tag===5&&we!==null&&(se=we,re!==null&&(we=Tn(J,re),we!=null&&Fe.push(Xu(J,we,se)))),an)break;J=J.return}0<Fe.length&&(fe=new Re(fe,Ae,null,p,ge),me.push({event:fe,listeners:Fe}))}}if((h&7)===0){e:{if(fe=c==="mouseover"||c==="pointerover",Re=c==="mouseout"||c==="pointerout",fe&&p!==fn&&(Ae=p.relatedTarget||p.fromElement)&&(Ga(Ae)||Ae[Ds]))break e;if((Re||fe)&&(fe=ge.window===ge?ge:(fe=ge.ownerDocument)?fe.defaultView||fe.parentWindow:window,Re?(Ae=p.relatedTarget||p.toElement,Re=le,Ae=Ae?Ga(Ae):null,Ae!==null&&(an=Ba(Ae),Ae!==an||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Re=null,Ae=le),Re!==Ae)){if(Fe=M1,we="onMouseLeave",re="onMouseEnter",J="mouse",(c==="pointerout"||c==="pointerover")&&(Fe=O1,we="onPointerLeave",re="onPointerEnter",J="pointer"),an=Re==null?fe:Bl(Re),se=Ae==null?fe:Bl(Ae),fe=new Fe(we,J+"leave",Re,p,ge),fe.target=an,fe.relatedTarget=se,we=null,Ga(ge)===le&&(Fe=new Fe(re,J+"enter",Ae,p,ge),Fe.target=se,Fe.relatedTarget=an,we=Fe),an=we,Re&&Ae)t:{for(Fe=Re,re=Ae,J=0,se=Fe;se;se=zl(se))J++;for(se=0,we=re;we;we=zl(we))se++;for(;0<J-se;)Fe=zl(Fe),J--;for(;0<se-J;)re=zl(re),se--;for(;J--;){if(Fe===re||re!==null&&Fe===re.alternate)break t;Fe=zl(Fe),re=zl(re)}Fe=null}else Fe=null;Re!==null&&ob(me,fe,Re,Fe,!1),Ae!==null&&an!==null&&ob(me,an,Ae,Fe,!0)}}e:{if(fe=le?Bl(le):window,Re=fe.nodeName&&fe.nodeName.toLowerCase(),Re==="select"||Re==="input"&&fe.type==="file")var Ne=QN;else if(z1(fe))if(B1)Ne=rj;else{Ne=tj;var Ge=ej}else(Re=fe.nodeName)&&Re.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ne=nj);if(Ne&&(Ne=Ne(c,le))){V1(me,Ne,p,ge);break e}Ge&&Ge(c,fe,le),c==="focusout"&&(Ge=fe._wrapperState)&&Ge.controlled&&fe.type==="number"&&Dn(fe,"number",fe.value)}switch(Ge=le?Bl(le):window,c){case"focusin":(z1(Ge)||Ge.contentEditable==="true")&&(Nl=Ge,xv=le,$u=null);break;case"focusout":$u=xv=Nl=null;break;case"mousedown":_v=!0;break;case"contextmenu":case"mouseup":case"dragend":_v=!1,K1(me,p,ge);break;case"selectionchange":if(oj)break;case"keydown":case"keyup":K1(me,p,ge)}var We;if(pv)e:{switch(c){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Fl?N1(c,p)&&(qe="onCompositionEnd"):c==="keydown"&&p.keyCode===229&&(qe="onCompositionStart");qe&&(D1&&p.locale!=="ko"&&(Fl||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Fl&&(We=P1()):(Do=ge,cv="value"in Do?Do.value:Do.textContent,Fl=!0)),Ge=Sf(le,qe),0<Ge.length&&(qe=new A1(qe,c,null,p,ge),me.push({event:qe,listeners:Ge}),We?qe.data=We:(We=j1(p),We!==null&&(qe.data=We)))),(We=YN?KN(c,p):qN(c,p))&&(le=Sf(le,"onBeforeInput"),0<le.length&&(ge=new A1("onBeforeInput","beforeinput",null,p,ge),me.push({event:ge,listeners:le}),ge.data=We))}ib(me,h)})}function Xu(c,h,p){return{instance:c,listener:h,currentTarget:p}}function Sf(c,h){for(var p=h+"Capture",y=[];c!==null;){var S=c,T=S.stateNode;S.tag===5&&T!==null&&(S=T,T=Tn(c,p),T!=null&&y.unshift(Xu(c,T,S)),T=Tn(c,h),T!=null&&y.push(Xu(c,T,S))),c=c.return}return y}function zl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function ob(c,h,p,y,S){for(var T=h._reactName,M=[];p!==null&&p!==y;){var z=p,$=z.alternate,le=z.stateNode;if($!==null&&$===y)break;z.tag===5&&le!==null&&(z=le,S?($=Tn(p,T),$!=null&&M.unshift(Xu(p,$,z))):S||($=Tn(p,T),$!=null&&M.push(Xu(p,$,z)))),p=p.return}M.length!==0&&c.push({event:h,listeners:M})}var uj=/\r\n?/g,hj=/\u0000|\uFFFD/g;function ab(c){return(typeof c=="string"?c:""+c).replace(uj,`
`).replace(hj,"")}function bf(c,h,p){if(h=ab(h),ab(c)!==h&&p)throw Error(t(425))}function Ef(){}var Tv=null,kv=null;function Rv(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,dj=typeof clearTimeout=="function"?clearTimeout:void 0,lb=typeof Promise=="function"?Promise:void 0,fj=typeof queueMicrotask=="function"?queueMicrotask:typeof lb<"u"?function(c){return lb.resolve(null).then(c).catch(gj)}:Pv;function gj(c){setTimeout(function(){throw c})}function Iv(c,h){var p=h,y=0;do{var S=p.nextSibling;if(c.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(y===0){c.removeChild(S),Nu(h);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=S}while(p);Nu(h)}function Fo(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function cb(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var p=c.data;if(p==="$"||p==="$!"||p==="$?"){if(h===0)return c;h--}else p==="/$"&&h++}c=c.previousSibling}return null}var Vl=Math.random().toString(36).slice(2),ss="__reactFiber$"+Vl,Yu="__reactProps$"+Vl,Ds="__reactContainer$"+Vl,Mv="__reactEvents$"+Vl,pj="__reactListeners$"+Vl,mj="__reactHandles$"+Vl;function Ga(c){var h=c[ss];if(h)return h;for(var p=c.parentNode;p;){if(h=p[Ds]||p[ss]){if(p=h.alternate,h.child!==null||p!==null&&p.child!==null)for(c=cb(c);c!==null;){if(p=c[ss])return p;c=cb(c)}return h}c=p,p=c.parentNode}return null}function Ku(c){return c=c[ss]||c[Ds],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Bl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Tf(c){return c[Yu]||null}var Av=[],Gl=-1;function No(c){return{current:c}}function zt(c){0>Gl||(c.current=Av[Gl],Av[Gl]=null,Gl--)}function Lt(c,h){Gl++,Av[Gl]=c.current,c.current=h}var jo={},Wn=No(jo),Cr=No(!1),Wa=jo;function Wl(c,h){var p=c.type.contextTypes;if(!p)return jo;var y=c.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===h)return y.__reactInternalMemoizedMaskedChildContext;var S={},T;for(T in p)S[T]=h[T];return y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=S),S}function Sr(c){return c=c.childContextTypes,c!=null}function kf(){zt(Cr),zt(Wn)}function ub(c,h,p){if(Wn.current!==jo)throw Error(t(168));Lt(Wn,h),Lt(Cr,p)}function hb(c,h,p){var y=c.stateNode;if(h=h.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var S in y)if(!(S in h))throw Error(t(108,ce(c)||"Unknown",S));return I({},p,y)}function Rf(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||jo,Wa=Wn.current,Lt(Wn,c),Lt(Cr,Cr.current),!0}function db(c,h,p){var y=c.stateNode;if(!y)throw Error(t(169));p?(c=hb(c,h,Wa),y.__reactInternalMemoizedMergedChildContext=c,zt(Cr),zt(Wn),Lt(Wn,c)):zt(Cr),Lt(Cr,p)}var Ls=null,Pf=!1,Ov=!1;function fb(c){Ls===null?Ls=[c]:Ls.push(c)}function yj(c){Pf=!0,fb(c)}function zo(){if(!Ov&&Ls!==null){Ov=!0;var c=0,h=Rt;try{var p=Ls;for(Rt=1;c<p.length;c++){var y=p[c];do y=y(!0);while(y!==null)}Ls=null,Pf=!1}catch(S){throw Ls!==null&&(Ls=Ls.slice(c+1)),p1(tv,zo),S}finally{Rt=h,Ov=!1}}return null}var $l=[],Ul=0,If=null,Mf=0,ai=[],li=0,$a=null,Fs=1,Ns="";function Ua(c,h){$l[Ul++]=Mf,$l[Ul++]=If,If=c,Mf=h}function gb(c,h,p){ai[li++]=Fs,ai[li++]=Ns,ai[li++]=$a,$a=c;var y=Fs;c=Ns;var S=32-Ti(y)-1;y&=~(1<<S),p+=1;var T=32-Ti(h)+S;if(30<T){var M=S-S%5;T=(y&(1<<M)-1).toString(32),y>>=M,S-=M,Fs=1<<32-Ti(h)+S|p<<S|y,Ns=T+c}else Fs=1<<T|p<<S|y,Ns=c}function Dv(c){c.return!==null&&(Ua(c,1),gb(c,1,0))}function Lv(c){for(;c===If;)If=$l[--Ul],$l[Ul]=null,Mf=$l[--Ul],$l[Ul]=null;for(;c===$a;)$a=ai[--li],ai[li]=null,Ns=ai[--li],ai[li]=null,Fs=ai[--li],ai[li]=null}var Ur=null,Hr=null,Wt=!1,Ri=null;function pb(c,h){var p=di(5,null,null,0);p.elementType="DELETED",p.stateNode=h,p.return=c,h=c.deletions,h===null?(c.deletions=[p],c.flags|=16):h.push(p)}function mb(c,h){switch(c.tag){case 5:var p=c.type;return h=h.nodeType!==1||p.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Ur=c,Hr=Fo(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Ur=c,Hr=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(p=$a!==null?{id:Fs,overflow:Ns}:null,c.memoizedState={dehydrated:h,treeContext:p,retryLane:1073741824},p=di(18,null,null,0),p.stateNode=h,p.return=c,c.child=p,Ur=c,Hr=null,!0):!1;default:return!1}}function Fv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Nv(c){if(Wt){var h=Hr;if(h){var p=h;if(!mb(c,h)){if(Fv(c))throw Error(t(418));h=Fo(p.nextSibling);var y=Ur;h&&mb(c,h)?pb(y,p):(c.flags=c.flags&-4097|2,Wt=!1,Ur=c)}}else{if(Fv(c))throw Error(t(418));c.flags=c.flags&-4097|2,Wt=!1,Ur=c}}}function yb(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ur=c}function Af(c){if(c!==Ur)return!1;if(!Wt)return yb(c),Wt=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!Rv(c.type,c.memoizedProps)),h&&(h=Hr)){if(Fv(c))throw vb(),Error(t(418));for(;h;)pb(c,h),h=Fo(h.nextSibling)}if(yb(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var p=c.data;if(p==="/$"){if(h===0){Hr=Fo(c.nextSibling);break e}h--}else p!=="$"&&p!=="$!"&&p!=="$?"||h++}c=c.nextSibling}Hr=null}}else Hr=Ur?Fo(c.stateNode.nextSibling):null;return!0}function vb(){for(var c=Hr;c;)c=Fo(c.nextSibling)}function Hl(){Hr=Ur=null,Wt=!1}function jv(c){Ri===null?Ri=[c]:Ri.push(c)}var vj=R.ReactCurrentBatchConfig;function qu(c,h,p){if(c=p.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,c));var S=y,T=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===T?h.ref:(h=function(M){var z=S.refs;M===null?delete z[T]:z[T]=M},h._stringRef=T,h)}if(typeof c!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,c))}return c}function Of(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function xb(c){var h=c._init;return h(c._payload)}function _b(c){function h(re,J){if(c){var se=re.deletions;se===null?(re.deletions=[J],re.flags|=16):se.push(J)}}function p(re,J){if(!c)return null;for(;J!==null;)h(re,J),J=J.sibling;return null}function y(re,J){for(re=new Map;J!==null;)J.key!==null?re.set(J.key,J):re.set(J.index,J),J=J.sibling;return re}function S(re,J){return re=Xo(re,J),re.index=0,re.sibling=null,re}function T(re,J,se){return re.index=se,c?(se=re.alternate,se!==null?(se=se.index,se<J?(re.flags|=2,J):se):(re.flags|=2,J)):(re.flags|=1048576,J)}function M(re){return c&&re.alternate===null&&(re.flags|=2),re}function z(re,J,se,we){return J===null||J.tag!==6?(J=P0(se,re.mode,we),J.return=re,J):(J=S(J,se),J.return=re,J)}function $(re,J,se,we){var Ne=se.type;return Ne===O?ge(re,J,se.props.children,we,se.key):J!==null&&(J.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&xb(Ne)===J.type)?(we=S(J,se.props),we.ref=qu(re,J,se),we.return=re,we):(we=rg(se.type,se.key,se.props,null,re.mode,we),we.ref=qu(re,J,se),we.return=re,we)}function le(re,J,se,we){return J===null||J.tag!==4||J.stateNode.containerInfo!==se.containerInfo||J.stateNode.implementation!==se.implementation?(J=I0(se,re.mode,we),J.return=re,J):(J=S(J,se.children||[]),J.return=re,J)}function ge(re,J,se,we,Ne){return J===null||J.tag!==7?(J=Qa(se,re.mode,we,Ne),J.return=re,J):(J=S(J,se),J.return=re,J)}function me(re,J,se){if(typeof J=="string"&&J!==""||typeof J=="number")return J=P0(""+J,re.mode,se),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case P:return se=rg(J.type,J.key,J.props,null,re.mode,se),se.ref=qu(re,null,J),se.return=re,se;case A:return J=I0(J,re.mode,se),J.return=re,J;case U:var we=J._init;return me(re,we(J._payload),se)}if(rn(J)||K(J))return J=Qa(J,re.mode,se,null),J.return=re,J;Of(re,J)}return null}function fe(re,J,se,we){var Ne=J!==null?J.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Ne!==null?null:z(re,J,""+se,we);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case P:return se.key===Ne?$(re,J,se,we):null;case A:return se.key===Ne?le(re,J,se,we):null;case U:return Ne=se._init,fe(re,J,Ne(se._payload),we)}if(rn(se)||K(se))return Ne!==null?null:ge(re,J,se,we,null);Of(re,se)}return null}function Re(re,J,se,we,Ne){if(typeof we=="string"&&we!==""||typeof we=="number")return re=re.get(se)||null,z(J,re,""+we,Ne);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case P:return re=re.get(we.key===null?se:we.key)||null,$(J,re,we,Ne);case A:return re=re.get(we.key===null?se:we.key)||null,le(J,re,we,Ne);case U:var Ge=we._init;return Re(re,J,se,Ge(we._payload),Ne)}if(rn(we)||K(we))return re=re.get(se)||null,ge(J,re,we,Ne,null);Of(J,we)}return null}function Ae(re,J,se,we){for(var Ne=null,Ge=null,We=J,qe=J=0,Pn=null;We!==null&&qe<se.length;qe++){We.index>qe?(Pn=We,We=null):Pn=We.sibling;var xt=fe(re,We,se[qe],we);if(xt===null){We===null&&(We=Pn);break}c&&We&&xt.alternate===null&&h(re,We),J=T(xt,J,qe),Ge===null?Ne=xt:Ge.sibling=xt,Ge=xt,We=Pn}if(qe===se.length)return p(re,We),Wt&&Ua(re,qe),Ne;if(We===null){for(;qe<se.length;qe++)We=me(re,se[qe],we),We!==null&&(J=T(We,J,qe),Ge===null?Ne=We:Ge.sibling=We,Ge=We);return Wt&&Ua(re,qe),Ne}for(We=y(re,We);qe<se.length;qe++)Pn=Re(We,re,qe,se[qe],we),Pn!==null&&(c&&Pn.alternate!==null&&We.delete(Pn.key===null?qe:Pn.key),J=T(Pn,J,qe),Ge===null?Ne=Pn:Ge.sibling=Pn,Ge=Pn);return c&&We.forEach(function(Yo){return h(re,Yo)}),Wt&&Ua(re,qe),Ne}function Fe(re,J,se,we){var Ne=K(se);if(typeof Ne!="function")throw Error(t(150));if(se=Ne.call(se),se==null)throw Error(t(151));for(var Ge=Ne=null,We=J,qe=J=0,Pn=null,xt=se.next();We!==null&&!xt.done;qe++,xt=se.next()){We.index>qe?(Pn=We,We=null):Pn=We.sibling;var Yo=fe(re,We,xt.value,we);if(Yo===null){We===null&&(We=Pn);break}c&&We&&Yo.alternate===null&&h(re,We),J=T(Yo,J,qe),Ge===null?Ne=Yo:Ge.sibling=Yo,Ge=Yo,We=Pn}if(xt.done)return p(re,We),Wt&&Ua(re,qe),Ne;if(We===null){for(;!xt.done;qe++,xt=se.next())xt=me(re,xt.value,we),xt!==null&&(J=T(xt,J,qe),Ge===null?Ne=xt:Ge.sibling=xt,Ge=xt);return Wt&&Ua(re,qe),Ne}for(We=y(re,We);!xt.done;qe++,xt=se.next())xt=Re(We,re,qe,xt.value,we),xt!==null&&(c&&xt.alternate!==null&&We.delete(xt.key===null?qe:xt.key),J=T(xt,J,qe),Ge===null?Ne=xt:Ge.sibling=xt,Ge=xt);return c&&We.forEach(function(Zj){return h(re,Zj)}),Wt&&Ua(re,qe),Ne}function an(re,J,se,we){if(typeof se=="object"&&se!==null&&se.type===O&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case P:e:{for(var Ne=se.key,Ge=J;Ge!==null;){if(Ge.key===Ne){if(Ne=se.type,Ne===O){if(Ge.tag===7){p(re,Ge.sibling),J=S(Ge,se.props.children),J.return=re,re=J;break e}}else if(Ge.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&xb(Ne)===Ge.type){p(re,Ge.sibling),J=S(Ge,se.props),J.ref=qu(re,Ge,se),J.return=re,re=J;break e}p(re,Ge);break}else h(re,Ge);Ge=Ge.sibling}se.type===O?(J=Qa(se.props.children,re.mode,we,se.key),J.return=re,re=J):(we=rg(se.type,se.key,se.props,null,re.mode,we),we.ref=qu(re,J,se),we.return=re,re=we)}return M(re);case A:e:{for(Ge=se.key;J!==null;){if(J.key===Ge)if(J.tag===4&&J.stateNode.containerInfo===se.containerInfo&&J.stateNode.implementation===se.implementation){p(re,J.sibling),J=S(J,se.children||[]),J.return=re,re=J;break e}else{p(re,J);break}else h(re,J);J=J.sibling}J=I0(se,re.mode,we),J.return=re,re=J}return M(re);case U:return Ge=se._init,an(re,J,Ge(se._payload),we)}if(rn(se))return Ae(re,J,se,we);if(K(se))return Fe(re,J,se,we);Of(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,J!==null&&J.tag===6?(p(re,J.sibling),J=S(J,se),J.return=re,re=J):(p(re,J),J=P0(se,re.mode,we),J.return=re,re=J),M(re)):p(re,J)}return an}var Xl=_b(!0),wb=_b(!1),Df=No(null),Lf=null,Yl=null,zv=null;function Vv(){zv=Yl=Lf=null}function Bv(c){var h=Df.current;zt(Df),c._currentValue=h}function Gv(c,h,p){for(;c!==null;){var y=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,y!==null&&(y.childLanes|=h)):y!==null&&(y.childLanes&h)!==h&&(y.childLanes|=h),c===p)break;c=c.return}}function Kl(c,h){Lf=c,zv=Yl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(br=!0),c.firstContext=null)}function ci(c){var h=c._currentValue;if(zv!==c)if(c={context:c,memoizedValue:h,next:null},Yl===null){if(Lf===null)throw Error(t(308));Yl=c,Lf.dependencies={lanes:0,firstContext:c}}else Yl=Yl.next=c;return h}var Ha=null;function Wv(c){Ha===null?Ha=[c]:Ha.push(c)}function Cb(c,h,p,y){var S=h.interleaved;return S===null?(p.next=p,Wv(h)):(p.next=S.next,S.next=p),h.interleaved=p,js(c,y)}function js(c,h){c.lanes|=h;var p=c.alternate;for(p!==null&&(p.lanes|=h),p=c,c=c.return;c!==null;)c.childLanes|=h,p=c.alternate,p!==null&&(p.childLanes|=h),p=c,c=c.return;return p.tag===3?p.stateNode:null}var Vo=!1;function $v(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sb(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function zs(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Bo(c,h,p){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(gt&2)!==0){var S=y.pending;return S===null?h.next=h:(h.next=S.next,S.next=h),y.pending=h,js(c,p)}return S=y.interleaved,S===null?(h.next=h,Wv(y)):(h.next=S.next,S.next=h),y.interleaved=h,js(c,p)}function Ff(c,h,p){if(h=h.updateQueue,h!==null&&(h=h.shared,(p&4194240)!==0)){var y=h.lanes;y&=c.pendingLanes,p|=y,h.lanes=p,iv(c,p)}}function bb(c,h){var p=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,T=null;if(p=p.firstBaseUpdate,p!==null){do{var M={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};T===null?S=T=M:T=T.next=M,p=p.next}while(p!==null);T===null?S=T=h:T=T.next=h}else S=T=h;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:y.shared,effects:y.effects},c.updateQueue=p;return}c=p.lastBaseUpdate,c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=h}function Nf(c,h,p,y){var S=c.updateQueue;Vo=!1;var T=S.firstBaseUpdate,M=S.lastBaseUpdate,z=S.shared.pending;if(z!==null){S.shared.pending=null;var $=z,le=$.next;$.next=null,M===null?T=le:M.next=le,M=$;var ge=c.alternate;ge!==null&&(ge=ge.updateQueue,z=ge.lastBaseUpdate,z!==M&&(z===null?ge.firstBaseUpdate=le:z.next=le,ge.lastBaseUpdate=$))}if(T!==null){var me=S.baseState;M=0,ge=le=$=null,z=T;do{var fe=z.lane,Re=z.eventTime;if((y&fe)===fe){ge!==null&&(ge=ge.next={eventTime:Re,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Ae=c,Fe=z;switch(fe=h,Re=p,Fe.tag){case 1:if(Ae=Fe.payload,typeof Ae=="function"){me=Ae.call(Re,me,fe);break e}me=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Fe.payload,fe=typeof Ae=="function"?Ae.call(Re,me,fe):Ae,fe==null)break e;me=I({},me,fe);break e;case 2:Vo=!0}}z.callback!==null&&z.lane!==0&&(c.flags|=64,fe=S.effects,fe===null?S.effects=[z]:fe.push(z))}else Re={eventTime:Re,lane:fe,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ge===null?(le=ge=Re,$=me):ge=ge.next=Re,M|=fe;if(z=z.next,z===null){if(z=S.shared.pending,z===null)break;fe=z,z=fe.next,fe.next=null,S.lastBaseUpdate=fe,S.shared.pending=null}}while(!0);if(ge===null&&($=me),S.baseState=$,S.firstBaseUpdate=le,S.lastBaseUpdate=ge,h=S.shared.interleaved,h!==null){S=h;do M|=S.lane,S=S.next;while(S!==h)}else T===null&&(S.shared.lanes=0);Ka|=M,c.lanes=M,c.memoizedState=me}}function Eb(c,h,p){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var y=c[h],S=y.callback;if(S!==null){if(y.callback=null,y=p,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var Zu={},os=No(Zu),Ju=No(Zu),Qu=No(Zu);function Xa(c){if(c===Zu)throw Error(t(174));return c}function Uv(c,h){switch(Lt(Qu,h),Lt(Ju,c),Lt(os,Zu),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:te(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=te(h,c)}zt(os),Lt(os,h)}function ql(){zt(os),zt(Ju),zt(Qu)}function Tb(c){Xa(Qu.current);var h=Xa(os.current),p=te(h,c.type);h!==p&&(Lt(Ju,c),Lt(os,p))}function Hv(c){Ju.current===c&&(zt(os),zt(Ju))}var Yt=No(0);function jf(c){for(var h=c;h!==null;){if(h.tag===13){var p=h.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Xv=[];function Yv(){for(var c=0;c<Xv.length;c++)Xv[c]._workInProgressVersionPrimary=null;Xv.length=0}var zf=R.ReactCurrentDispatcher,Kv=R.ReactCurrentBatchConfig,Ya=0,Kt=null,_n=null,kn=null,Vf=!1,eh=!1,th=0,xj=0;function $n(){throw Error(t(321))}function qv(c,h){if(h===null)return!1;for(var p=0;p<h.length&&p<c.length;p++)if(!ki(c[p],h[p]))return!1;return!0}function Zv(c,h,p,y,S,T){if(Ya=T,Kt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,zf.current=c===null||c.memoizedState===null?Sj:bj,c=p(y,S),eh){T=0;do{if(eh=!1,th=0,25<=T)throw Error(t(301));T+=1,kn=_n=null,h.updateQueue=null,zf.current=Ej,c=p(y,S)}while(eh)}if(zf.current=Wf,h=_n!==null&&_n.next!==null,Ya=0,kn=_n=Kt=null,Vf=!1,h)throw Error(t(300));return c}function Jv(){var c=th!==0;return th=0,c}function as(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Kt.memoizedState=kn=c:kn=kn.next=c,kn}function ui(){if(_n===null){var c=Kt.alternate;c=c!==null?c.memoizedState:null}else c=_n.next;var h=kn===null?Kt.memoizedState:kn.next;if(h!==null)kn=h,_n=c;else{if(c===null)throw Error(t(310));_n=c,c={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},kn===null?Kt.memoizedState=kn=c:kn=kn.next=c}return kn}function nh(c,h){return typeof h=="function"?h(c):h}function Qv(c){var h=ui(),p=h.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=c;var y=_n,S=y.baseQueue,T=p.pending;if(T!==null){if(S!==null){var M=S.next;S.next=T.next,T.next=M}y.baseQueue=S=T,p.pending=null}if(S!==null){T=S.next,y=y.baseState;var z=M=null,$=null,le=T;do{var ge=le.lane;if((Ya&ge)===ge)$!==null&&($=$.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),y=le.hasEagerState?le.eagerState:c(y,le.action);else{var me={lane:ge,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};$===null?(z=$=me,M=y):$=$.next=me,Kt.lanes|=ge,Ka|=ge}le=le.next}while(le!==null&&le!==T);$===null?M=y:$.next=z,ki(y,h.memoizedState)||(br=!0),h.memoizedState=y,h.baseState=M,h.baseQueue=$,p.lastRenderedState=y}if(c=p.interleaved,c!==null){S=c;do T=S.lane,Kt.lanes|=T,Ka|=T,S=S.next;while(S!==c)}else S===null&&(p.lanes=0);return[h.memoizedState,p.dispatch]}function e0(c){var h=ui(),p=h.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=c;var y=p.dispatch,S=p.pending,T=h.memoizedState;if(S!==null){p.pending=null;var M=S=S.next;do T=c(T,M.action),M=M.next;while(M!==S);ki(T,h.memoizedState)||(br=!0),h.memoizedState=T,h.baseQueue===null&&(h.baseState=T),p.lastRenderedState=T}return[T,y]}function kb(){}function Rb(c,h){var p=Kt,y=ui(),S=h(),T=!ki(y.memoizedState,S);if(T&&(y.memoizedState=S,br=!0),y=y.queue,t0(Mb.bind(null,p,y,c),[c]),y.getSnapshot!==h||T||kn!==null&&kn.memoizedState.tag&1){if(p.flags|=2048,rh(9,Ib.bind(null,p,y,S,h),void 0,null),Rn===null)throw Error(t(349));(Ya&30)!==0||Pb(p,h,S)}return S}function Pb(c,h,p){c.flags|=16384,c={getSnapshot:h,value:p},h=Kt.updateQueue,h===null?(h={lastEffect:null,stores:null},Kt.updateQueue=h,h.stores=[c]):(p=h.stores,p===null?h.stores=[c]:p.push(c))}function Ib(c,h,p,y){h.value=p,h.getSnapshot=y,Ab(h)&&Ob(c)}function Mb(c,h,p){return p(function(){Ab(h)&&Ob(c)})}function Ab(c){var h=c.getSnapshot;c=c.value;try{var p=h();return!ki(c,p)}catch{return!0}}function Ob(c){var h=js(c,1);h!==null&&Ai(h,c,1,-1)}function Db(c){var h=as();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:c},h.queue=c,c=c.dispatch=Cj.bind(null,Kt,c),[h.memoizedState,c]}function rh(c,h,p,y){return c={tag:c,create:h,destroy:p,deps:y,next:null},h=Kt.updateQueue,h===null?(h={lastEffect:null,stores:null},Kt.updateQueue=h,h.lastEffect=c.next=c):(p=h.lastEffect,p===null?h.lastEffect=c.next=c:(y=p.next,p.next=c,c.next=y,h.lastEffect=c)),c}function Lb(){return ui().memoizedState}function Bf(c,h,p,y){var S=as();Kt.flags|=c,S.memoizedState=rh(1|h,p,void 0,y===void 0?null:y)}function Gf(c,h,p,y){var S=ui();y=y===void 0?null:y;var T=void 0;if(_n!==null){var M=_n.memoizedState;if(T=M.destroy,y!==null&&qv(y,M.deps)){S.memoizedState=rh(h,p,T,y);return}}Kt.flags|=c,S.memoizedState=rh(1|h,p,T,y)}function Fb(c,h){return Bf(8390656,8,c,h)}function t0(c,h){return Gf(2048,8,c,h)}function Nb(c,h){return Gf(4,2,c,h)}function jb(c,h){return Gf(4,4,c,h)}function zb(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function Vb(c,h,p){return p=p!=null?p.concat([c]):null,Gf(4,4,zb.bind(null,h,c),p)}function n0(){}function Bb(c,h){var p=ui();h=h===void 0?null:h;var y=p.memoizedState;return y!==null&&h!==null&&qv(h,y[1])?y[0]:(p.memoizedState=[c,h],c)}function Gb(c,h){var p=ui();h=h===void 0?null:h;var y=p.memoizedState;return y!==null&&h!==null&&qv(h,y[1])?y[0]:(c=c(),p.memoizedState=[c,h],c)}function Wb(c,h,p){return(Ya&21)===0?(c.baseState&&(c.baseState=!1,br=!0),c.memoizedState=p):(ki(p,h)||(p=x1(),Kt.lanes|=p,Ka|=p,c.baseState=!0),h)}function _j(c,h){var p=Rt;Rt=p!==0&&4>p?p:4,c(!0);var y=Kv.transition;Kv.transition={};try{c(!1),h()}finally{Rt=p,Kv.transition=y}}function $b(){return ui().memoizedState}function wj(c,h,p){var y=Uo(c);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Ub(c))Hb(h,p);else if(p=Cb(c,h,p,y),p!==null){var S=cr();Ai(p,c,y,S),Xb(p,h,y)}}function Cj(c,h,p){var y=Uo(c),S={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ub(c))Hb(h,S);else{var T=c.alternate;if(c.lanes===0&&(T===null||T.lanes===0)&&(T=h.lastRenderedReducer,T!==null))try{var M=h.lastRenderedState,z=T(M,p);if(S.hasEagerState=!0,S.eagerState=z,ki(z,M)){var $=h.interleaved;$===null?(S.next=S,Wv(h)):(S.next=$.next,$.next=S),h.interleaved=S;return}}catch{}finally{}p=Cb(c,h,S,y),p!==null&&(S=cr(),Ai(p,c,y,S),Xb(p,h,y))}}function Ub(c){var h=c.alternate;return c===Kt||h!==null&&h===Kt}function Hb(c,h){eh=Vf=!0;var p=c.pending;p===null?h.next=h:(h.next=p.next,p.next=h),c.pending=h}function Xb(c,h,p){if((p&4194240)!==0){var y=h.lanes;y&=c.pendingLanes,p|=y,h.lanes=p,iv(c,p)}}var Wf={readContext:ci,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},Sj={readContext:ci,useCallback:function(c,h){return as().memoizedState=[c,h===void 0?null:h],c},useContext:ci,useEffect:Fb,useImperativeHandle:function(c,h,p){return p=p!=null?p.concat([c]):null,Bf(4194308,4,zb.bind(null,h,c),p)},useLayoutEffect:function(c,h){return Bf(4194308,4,c,h)},useInsertionEffect:function(c,h){return Bf(4,2,c,h)},useMemo:function(c,h){var p=as();return h=h===void 0?null:h,c=c(),p.memoizedState=[c,h],c},useReducer:function(c,h,p){var y=as();return h=p!==void 0?p(h):h,y.memoizedState=y.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},y.queue=c,c=c.dispatch=wj.bind(null,Kt,c),[y.memoizedState,c]},useRef:function(c){var h=as();return c={current:c},h.memoizedState=c},useState:Db,useDebugValue:n0,useDeferredValue:function(c){return as().memoizedState=c},useTransition:function(){var c=Db(!1),h=c[0];return c=_j.bind(null,c[1]),as().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,p){var y=Kt,S=as();if(Wt){if(p===void 0)throw Error(t(407));p=p()}else{if(p=h(),Rn===null)throw Error(t(349));(Ya&30)!==0||Pb(y,h,p)}S.memoizedState=p;var T={value:p,getSnapshot:h};return S.queue=T,Fb(Mb.bind(null,y,T,c),[c]),y.flags|=2048,rh(9,Ib.bind(null,y,T,p,h),void 0,null),p},useId:function(){var c=as(),h=Rn.identifierPrefix;if(Wt){var p=Ns,y=Fs;p=(y&~(1<<32-Ti(y)-1)).toString(32)+p,h=":"+h+"R"+p,p=th++,0<p&&(h+="H"+p.toString(32)),h+=":"}else p=xj++,h=":"+h+"r"+p.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},bj={readContext:ci,useCallback:Bb,useContext:ci,useEffect:t0,useImperativeHandle:Vb,useInsertionEffect:Nb,useLayoutEffect:jb,useMemo:Gb,useReducer:Qv,useRef:Lb,useState:function(){return Qv(nh)},useDebugValue:n0,useDeferredValue:function(c){var h=ui();return Wb(h,_n.memoizedState,c)},useTransition:function(){var c=Qv(nh)[0],h=ui().memoizedState;return[c,h]},useMutableSource:kb,useSyncExternalStore:Rb,useId:$b,unstable_isNewReconciler:!1},Ej={readContext:ci,useCallback:Bb,useContext:ci,useEffect:t0,useImperativeHandle:Vb,useInsertionEffect:Nb,useLayoutEffect:jb,useMemo:Gb,useReducer:e0,useRef:Lb,useState:function(){return e0(nh)},useDebugValue:n0,useDeferredValue:function(c){var h=ui();return _n===null?h.memoizedState=c:Wb(h,_n.memoizedState,c)},useTransition:function(){var c=e0(nh)[0],h=ui().memoizedState;return[c,h]},useMutableSource:kb,useSyncExternalStore:Rb,useId:$b,unstable_isNewReconciler:!1};function Pi(c,h){if(c&&c.defaultProps){h=I({},h),c=c.defaultProps;for(var p in c)h[p]===void 0&&(h[p]=c[p]);return h}return h}function r0(c,h,p,y){h=c.memoizedState,p=p(y,h),p=p==null?h:I({},h,p),c.memoizedState=p,c.lanes===0&&(c.updateQueue.baseState=p)}var $f={isMounted:function(c){return(c=c._reactInternals)?Ba(c)===c:!1},enqueueSetState:function(c,h,p){c=c._reactInternals;var y=cr(),S=Uo(c),T=zs(y,S);T.payload=h,p!=null&&(T.callback=p),h=Bo(c,T,S),h!==null&&(Ai(h,c,S,y),Ff(h,c,S))},enqueueReplaceState:function(c,h,p){c=c._reactInternals;var y=cr(),S=Uo(c),T=zs(y,S);T.tag=1,T.payload=h,p!=null&&(T.callback=p),h=Bo(c,T,S),h!==null&&(Ai(h,c,S,y),Ff(h,c,S))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var p=cr(),y=Uo(c),S=zs(p,y);S.tag=2,h!=null&&(S.callback=h),h=Bo(c,S,y),h!==null&&(Ai(h,c,y,p),Ff(h,c,y))}};function Yb(c,h,p,y,S,T,M){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,T,M):h.prototype&&h.prototype.isPureReactComponent?!Wu(p,y)||!Wu(S,T):!0}function Kb(c,h,p){var y=!1,S=jo,T=h.contextType;return typeof T=="object"&&T!==null?T=ci(T):(S=Sr(h)?Wa:Wn.current,y=h.contextTypes,T=(y=y!=null)?Wl(c,S):jo),h=new h(p,T),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=$f,c.stateNode=h,h._reactInternals=c,y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=T),h}function qb(c,h,p,y){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(p,y),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(p,y),h.state!==c&&$f.enqueueReplaceState(h,h.state,null)}function i0(c,h,p,y){var S=c.stateNode;S.props=p,S.state=c.memoizedState,S.refs={},$v(c);var T=h.contextType;typeof T=="object"&&T!==null?S.context=ci(T):(T=Sr(h)?Wa:Wn.current,S.context=Wl(c,T)),S.state=c.memoizedState,T=h.getDerivedStateFromProps,typeof T=="function"&&(r0(c,h,T,p),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(h=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),h!==S.state&&$f.enqueueReplaceState(S,S.state,null),Nf(c,p,S,y),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Zl(c,h){try{var p="",y=h;do p+=be(y),y=y.return;while(y);var S=p}catch(T){S=`
Error generating stack: `+T.message+`
`+T.stack}return{value:c,source:h,stack:S,digest:null}}function s0(c,h,p){return{value:c,source:null,stack:p??null,digest:h??null}}function o0(c,h){try{console.error(h.value)}catch(p){setTimeout(function(){throw p})}}var Tj=typeof WeakMap=="function"?WeakMap:Map;function Zb(c,h,p){p=zs(-1,p),p.tag=3,p.payload={element:null};var y=h.value;return p.callback=function(){Zf||(Zf=!0,w0=y),o0(c,h)},p}function Jb(c,h,p){p=zs(-1,p),p.tag=3;var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var S=h.value;p.payload=function(){return y(S)},p.callback=function(){o0(c,h)}}var T=c.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(p.callback=function(){o0(c,h),typeof y!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})}),p}function Qb(c,h,p){var y=c.pingCache;if(y===null){y=c.pingCache=new Tj;var S=new Set;y.set(h,S)}else S=y.get(h),S===void 0&&(S=new Set,y.set(h,S));S.has(p)||(S.add(p),c=Vj.bind(null,c,h,p),h.then(c,c))}function eE(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function tE(c,h,p,y,S){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(h=zs(-1,1),h.tag=2,Bo(p,h,1))),p.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var kj=R.ReactCurrentOwner,br=!1;function lr(c,h,p,y){h.child=c===null?wb(h,null,p,y):Xl(h,c.child,p,y)}function nE(c,h,p,y,S){p=p.render;var T=h.ref;return Kl(h,S),y=Zv(c,h,p,y,T,S),p=Jv(),c!==null&&!br?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,Vs(c,h,S)):(Wt&&p&&Dv(h),h.flags|=1,lr(c,h,y,S),h.child)}function rE(c,h,p,y,S){if(c===null){var T=p.type;return typeof T=="function"&&!R0(T)&&T.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(h.tag=15,h.type=T,iE(c,h,T,y,S)):(c=rg(p.type,null,y,h,h.mode,S),c.ref=h.ref,c.return=h,h.child=c)}if(T=c.child,(c.lanes&S)===0){var M=T.memoizedProps;if(p=p.compare,p=p!==null?p:Wu,p(M,y)&&c.ref===h.ref)return Vs(c,h,S)}return h.flags|=1,c=Xo(T,y),c.ref=h.ref,c.return=h,h.child=c}function iE(c,h,p,y,S){if(c!==null){var T=c.memoizedProps;if(Wu(T,y)&&c.ref===h.ref)if(br=!1,h.pendingProps=y=T,(c.lanes&S)!==0)(c.flags&131072)!==0&&(br=!0);else return h.lanes=c.lanes,Vs(c,h,S)}return a0(c,h,p,y,S)}function sE(c,h,p){var y=h.pendingProps,S=y.children,T=c!==null?c.memoizedState:null;if(y.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Ql,Xr),Xr|=p;else{if((p&1073741824)===0)return c=T!==null?T.baseLanes|p:p,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Lt(Ql,Xr),Xr|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:p,Lt(Ql,Xr),Xr|=y}else T!==null?(y=T.baseLanes|p,h.memoizedState=null):y=p,Lt(Ql,Xr),Xr|=y;return lr(c,h,S,p),h.child}function oE(c,h){var p=h.ref;(c===null&&p!==null||c!==null&&c.ref!==p)&&(h.flags|=512,h.flags|=2097152)}function a0(c,h,p,y,S){var T=Sr(p)?Wa:Wn.current;return T=Wl(h,T),Kl(h,S),p=Zv(c,h,p,y,T,S),y=Jv(),c!==null&&!br?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,Vs(c,h,S)):(Wt&&y&&Dv(h),h.flags|=1,lr(c,h,p,S),h.child)}function aE(c,h,p,y,S){if(Sr(p)){var T=!0;Rf(h)}else T=!1;if(Kl(h,S),h.stateNode===null)Hf(c,h),Kb(h,p,y),i0(h,p,y,S),y=!0;else if(c===null){var M=h.stateNode,z=h.memoizedProps;M.props=z;var $=M.context,le=p.contextType;typeof le=="object"&&le!==null?le=ci(le):(le=Sr(p)?Wa:Wn.current,le=Wl(h,le));var ge=p.getDerivedStateFromProps,me=typeof ge=="function"||typeof M.getSnapshotBeforeUpdate=="function";me||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==y||$!==le)&&qb(h,M,y,le),Vo=!1;var fe=h.memoizedState;M.state=fe,Nf(h,y,M,S),$=h.memoizedState,z!==y||fe!==$||Cr.current||Vo?(typeof ge=="function"&&(r0(h,p,ge,y),$=h.memoizedState),(z=Vo||Yb(h,p,z,y,fe,$,le))?(me||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(h.flags|=4194308)):(typeof M.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=y,h.memoizedState=$),M.props=y,M.state=$,M.context=le,y=z):(typeof M.componentDidMount=="function"&&(h.flags|=4194308),y=!1)}else{M=h.stateNode,Sb(c,h),z=h.memoizedProps,le=h.type===h.elementType?z:Pi(h.type,z),M.props=le,me=h.pendingProps,fe=M.context,$=p.contextType,typeof $=="object"&&$!==null?$=ci($):($=Sr(p)?Wa:Wn.current,$=Wl(h,$));var Re=p.getDerivedStateFromProps;(ge=typeof Re=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==me||fe!==$)&&qb(h,M,y,$),Vo=!1,fe=h.memoizedState,M.state=fe,Nf(h,y,M,S);var Ae=h.memoizedState;z!==me||fe!==Ae||Cr.current||Vo?(typeof Re=="function"&&(r0(h,p,Re,y),Ae=h.memoizedState),(le=Vo||Yb(h,p,le,y,fe,Ae,$)||!1)?(ge||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,Ae,$),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,Ae,$)),typeof M.componentDidUpdate=="function"&&(h.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof M.componentDidUpdate!="function"||z===c.memoizedProps&&fe===c.memoizedState||(h.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===c.memoizedProps&&fe===c.memoizedState||(h.flags|=1024),h.memoizedProps=y,h.memoizedState=Ae),M.props=y,M.state=Ae,M.context=$,y=le):(typeof M.componentDidUpdate!="function"||z===c.memoizedProps&&fe===c.memoizedState||(h.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===c.memoizedProps&&fe===c.memoizedState||(h.flags|=1024),y=!1)}return l0(c,h,p,y,T,S)}function l0(c,h,p,y,S,T){oE(c,h);var M=(h.flags&128)!==0;if(!y&&!M)return S&&db(h,p,!1),Vs(c,h,T);y=h.stateNode,kj.current=h;var z=M&&typeof p.getDerivedStateFromError!="function"?null:y.render();return h.flags|=1,c!==null&&M?(h.child=Xl(h,c.child,null,T),h.child=Xl(h,null,z,T)):lr(c,h,z,T),h.memoizedState=y.state,S&&db(h,p,!0),h.child}function lE(c){var h=c.stateNode;h.pendingContext?ub(c,h.pendingContext,h.pendingContext!==h.context):h.context&&ub(c,h.context,!1),Uv(c,h.containerInfo)}function cE(c,h,p,y,S){return Hl(),jv(S),h.flags|=256,lr(c,h,p,y),h.child}var c0={dehydrated:null,treeContext:null,retryLane:0};function u0(c){return{baseLanes:c,cachePool:null,transitions:null}}function uE(c,h,p){var y=h.pendingProps,S=Yt.current,T=!1,M=(h.flags&128)!==0,z;if((z=M)||(z=c!==null&&c.memoizedState===null?!1:(S&2)!==0),z?(T=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),Lt(Yt,S&1),c===null)return Nv(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(M=y.children,c=y.fallback,T?(y=h.mode,T=h.child,M={mode:"hidden",children:M},(y&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=M):T=ig(M,y,0,null),c=Qa(c,y,p,null),T.return=h,c.return=h,T.sibling=c,h.child=T,h.child.memoizedState=u0(p),h.memoizedState=c0,c):h0(h,M));if(S=c.memoizedState,S!==null&&(z=S.dehydrated,z!==null))return Rj(c,h,M,y,z,S,p);if(T){T=y.fallback,M=h.mode,S=c.child,z=S.sibling;var $={mode:"hidden",children:y.children};return(M&1)===0&&h.child!==S?(y=h.child,y.childLanes=0,y.pendingProps=$,h.deletions=null):(y=Xo(S,$),y.subtreeFlags=S.subtreeFlags&14680064),z!==null?T=Xo(z,T):(T=Qa(T,M,p,null),T.flags|=2),T.return=h,y.return=h,y.sibling=T,h.child=y,y=T,T=h.child,M=c.child.memoizedState,M=M===null?u0(p):{baseLanes:M.baseLanes|p,cachePool:null,transitions:M.transitions},T.memoizedState=M,T.childLanes=c.childLanes&~p,h.memoizedState=c0,y}return T=c.child,c=T.sibling,y=Xo(T,{mode:"visible",children:y.children}),(h.mode&1)===0&&(y.lanes=p),y.return=h,y.sibling=null,c!==null&&(p=h.deletions,p===null?(h.deletions=[c],h.flags|=16):p.push(c)),h.child=y,h.memoizedState=null,y}function h0(c,h){return h=ig({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function Uf(c,h,p,y){return y!==null&&jv(y),Xl(h,c.child,null,p),c=h0(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function Rj(c,h,p,y,S,T,M){if(p)return h.flags&256?(h.flags&=-257,y=s0(Error(t(422))),Uf(c,h,M,y)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(T=y.fallback,S=h.mode,y=ig({mode:"visible",children:y.children},S,0,null),T=Qa(T,S,M,null),T.flags|=2,y.return=h,T.return=h,y.sibling=T,h.child=y,(h.mode&1)!==0&&Xl(h,c.child,null,M),h.child.memoizedState=u0(M),h.memoizedState=c0,T);if((h.mode&1)===0)return Uf(c,h,M,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var z=y.dgst;return y=z,T=Error(t(419)),y=s0(T,y,void 0),Uf(c,h,M,y)}if(z=(M&c.childLanes)!==0,br||z){if(y=Rn,y!==null){switch(M&-M){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|M))!==0?0:S,S!==0&&S!==T.retryLane&&(T.retryLane=S,js(c,S),Ai(y,c,S,-1))}return k0(),y=s0(Error(t(421))),Uf(c,h,M,y)}return S.data==="$?"?(h.flags|=128,h.child=c.child,h=Bj.bind(null,c),S._reactRetry=h,null):(c=T.treeContext,Hr=Fo(S.nextSibling),Ur=h,Wt=!0,Ri=null,c!==null&&(ai[li++]=Fs,ai[li++]=Ns,ai[li++]=$a,Fs=c.id,Ns=c.overflow,$a=h),h=h0(h,y.children),h.flags|=4096,h)}function hE(c,h,p){c.lanes|=h;var y=c.alternate;y!==null&&(y.lanes|=h),Gv(c.return,h,p)}function d0(c,h,p,y,S){var T=c.memoizedState;T===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(T.isBackwards=h,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=p,T.tailMode=S)}function dE(c,h,p){var y=h.pendingProps,S=y.revealOrder,T=y.tail;if(lr(c,h,y.children,p),y=Yt.current,(y&2)!==0)y=y&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&hE(c,p,h);else if(c.tag===19)hE(c,p,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}if(Lt(Yt,y),(h.mode&1)===0)h.memoizedState=null;else switch(S){case"forwards":for(p=h.child,S=null;p!==null;)c=p.alternate,c!==null&&jf(c)===null&&(S=p),p=p.sibling;p=S,p===null?(S=h.child,h.child=null):(S=p.sibling,p.sibling=null),d0(h,!1,S,p,T);break;case"backwards":for(p=null,S=h.child,h.child=null;S!==null;){if(c=S.alternate,c!==null&&jf(c)===null){h.child=S;break}c=S.sibling,S.sibling=p,p=S,S=c}d0(h,!0,p,null,T);break;case"together":d0(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Hf(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function Vs(c,h,p){if(c!==null&&(h.dependencies=c.dependencies),Ka|=h.lanes,(p&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,p=Xo(c,c.pendingProps),h.child=p,p.return=h;c.sibling!==null;)c=c.sibling,p=p.sibling=Xo(c,c.pendingProps),p.return=h;p.sibling=null}return h.child}function Pj(c,h,p){switch(h.tag){case 3:lE(h),Hl();break;case 5:Tb(h);break;case 1:Sr(h.type)&&Rf(h);break;case 4:Uv(h,h.stateNode.containerInfo);break;case 10:var y=h.type._context,S=h.memoizedProps.value;Lt(Df,y._currentValue),y._currentValue=S;break;case 13:if(y=h.memoizedState,y!==null)return y.dehydrated!==null?(Lt(Yt,Yt.current&1),h.flags|=128,null):(p&h.child.childLanes)!==0?uE(c,h,p):(Lt(Yt,Yt.current&1),c=Vs(c,h,p),c!==null?c.sibling:null);Lt(Yt,Yt.current&1);break;case 19:if(y=(p&h.childLanes)!==0,(c.flags&128)!==0){if(y)return dE(c,h,p);h.flags|=128}if(S=h.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Lt(Yt,Yt.current),y)break;return null;case 22:case 23:return h.lanes=0,sE(c,h,p)}return Vs(c,h,p)}var fE,f0,gE,pE;fE=function(c,h){for(var p=h.child;p!==null;){if(p.tag===5||p.tag===6)c.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},f0=function(){},gE=function(c,h,p,y){var S=c.memoizedProps;if(S!==y){c=h.stateNode,Xa(os.current);var T=null;switch(p){case"input":S=Mt(c,S),y=Mt(c,y),T=[];break;case"select":S=I({},S,{value:void 0}),y=I({},y,{value:void 0}),T=[];break;case"textarea":S=B(c,S),y=B(c,y),T=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(c.onclick=Ef)}Xt(p,y);var M;p=null;for(le in S)if(!y.hasOwnProperty(le)&&S.hasOwnProperty(le)&&S[le]!=null)if(le==="style"){var z=S[le];for(M in z)z.hasOwnProperty(M)&&(p||(p={}),p[M]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(i.hasOwnProperty(le)?T||(T=[]):(T=T||[]).push(le,null));for(le in y){var $=y[le];if(z=S!=null?S[le]:void 0,y.hasOwnProperty(le)&&$!==z&&($!=null||z!=null))if(le==="style")if(z){for(M in z)!z.hasOwnProperty(M)||$&&$.hasOwnProperty(M)||(p||(p={}),p[M]="");for(M in $)$.hasOwnProperty(M)&&z[M]!==$[M]&&(p||(p={}),p[M]=$[M])}else p||(T||(T=[]),T.push(le,p)),p=$;else le==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,z=z?z.__html:void 0,$!=null&&z!==$&&(T=T||[]).push(le,$)):le==="children"?typeof $!="string"&&typeof $!="number"||(T=T||[]).push(le,""+$):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(i.hasOwnProperty(le)?($!=null&&le==="onScroll"&&jt("scroll",c),T||z===$||(T=[])):(T=T||[]).push(le,$))}p&&(T=T||[]).push("style",p);var le=T;(h.updateQueue=le)&&(h.flags|=4)}},pE=function(c,h,p,y){p!==y&&(h.flags|=4)};function ih(c,h){if(!Wt)switch(c.tailMode){case"hidden":h=c.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c.tail=null:p.sibling=null;break;case"collapsed":p=c.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function Un(c){var h=c.alternate!==null&&c.alternate.child===c.child,p=0,y=0;if(h)for(var S=c.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=y,c.childLanes=p,h}function Ij(c,h,p){var y=h.pendingProps;switch(Lv(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(h),null;case 1:return Sr(h.type)&&kf(),Un(h),null;case 3:return y=h.stateNode,ql(),zt(Cr),zt(Wn),Yv(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(Af(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ri!==null&&(b0(Ri),Ri=null))),f0(c,h),Un(h),null;case 5:Hv(h);var S=Xa(Qu.current);if(p=h.type,c!==null&&h.stateNode!=null)gE(c,h,p,y,S),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!y){if(h.stateNode===null)throw Error(t(166));return Un(h),null}if(c=Xa(os.current),Af(h)){y=h.stateNode,p=h.type;var T=h.memoizedProps;switch(y[ss]=h,y[Yu]=T,c=(h.mode&1)!==0,p){case"dialog":jt("cancel",y),jt("close",y);break;case"iframe":case"object":case"embed":jt("load",y);break;case"video":case"audio":for(S=0;S<Uu.length;S++)jt(Uu[S],y);break;case"source":jt("error",y);break;case"img":case"image":case"link":jt("error",y),jt("load",y);break;case"details":jt("toggle",y);break;case"input":xn(y,T),jt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!T.multiple},jt("invalid",y);break;case"textarea":ie(y,T),jt("invalid",y)}Xt(p,T),S=null;for(var M in T)if(T.hasOwnProperty(M)){var z=T[M];M==="children"?typeof z=="string"?y.textContent!==z&&(T.suppressHydrationWarning!==!0&&bf(y.textContent,z,c),S=["children",z]):typeof z=="number"&&y.textContent!==""+z&&(T.suppressHydrationWarning!==!0&&bf(y.textContent,z,c),S=["children",""+z]):i.hasOwnProperty(M)&&z!=null&&M==="onScroll"&&jt("scroll",y)}switch(p){case"input":Ue(y),Br(y,T,!0);break;case"textarea":Ue(y),Ee(y);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(y.onclick=Ef)}y=S,h.updateQueue=y,y!==null&&(h.flags|=4)}else{M=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=H(p)),c==="http://www.w3.org/1999/xhtml"?p==="script"?(c=M.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof y.is=="string"?c=M.createElement(p,{is:y.is}):(c=M.createElement(p),p==="select"&&(M=c,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):c=M.createElementNS(c,p),c[ss]=h,c[Yu]=y,fE(c,h,!1,!1),h.stateNode=c;e:{switch(M=sr(p,y),p){case"dialog":jt("cancel",c),jt("close",c),S=y;break;case"iframe":case"object":case"embed":jt("load",c),S=y;break;case"video":case"audio":for(S=0;S<Uu.length;S++)jt(Uu[S],c);S=y;break;case"source":jt("error",c),S=y;break;case"img":case"image":case"link":jt("error",c),jt("load",c),S=y;break;case"details":jt("toggle",c),S=y;break;case"input":xn(c,y),S=Mt(c,y),jt("invalid",c);break;case"option":S=y;break;case"select":c._wrapperState={wasMultiple:!!y.multiple},S=I({},y,{value:void 0}),jt("invalid",c);break;case"textarea":ie(c,y),S=B(c,y),jt("invalid",c);break;default:S=y}Xt(p,S),z=S;for(T in z)if(z.hasOwnProperty(T)){var $=z[T];T==="style"?_r(c,$):T==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&_e(c,$)):T==="children"?typeof $=="string"?(p!=="textarea"||$!=="")&&Ve(c,$):typeof $=="number"&&Ve(c,""+$):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?$!=null&&T==="onScroll"&&jt("scroll",c):$!=null&&k(c,T,$,M))}switch(p){case"input":Ue(c),Br(c,y,!1);break;case"textarea":Ue(c),Ee(c);break;case"option":y.value!=null&&c.setAttribute("value",""+ve(y.value));break;case"select":c.multiple=!!y.multiple,T=y.value,T!=null?Bt(c,!!y.multiple,T,!1):y.defaultValue!=null&&Bt(c,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=Ef)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Un(h),null;case 6:if(c&&h.stateNode!=null)pE(c,h,c.memoizedProps,y);else{if(typeof y!="string"&&h.stateNode===null)throw Error(t(166));if(p=Xa(Qu.current),Xa(os.current),Af(h)){if(y=h.stateNode,p=h.memoizedProps,y[ss]=h,(T=y.nodeValue!==p)&&(c=Ur,c!==null))switch(c.tag){case 3:bf(y.nodeValue,p,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&bf(y.nodeValue,p,(c.mode&1)!==0)}T&&(h.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[ss]=h,h.stateNode=y}return Un(h),null;case 13:if(zt(Yt),y=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Wt&&Hr!==null&&(h.mode&1)!==0&&(h.flags&128)===0)vb(),Hl(),h.flags|=98560,T=!1;else if(T=Af(h),y!==null&&y.dehydrated!==null){if(c===null){if(!T)throw Error(t(318));if(T=h.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[ss]=h}else Hl(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Un(h),T=!1}else Ri!==null&&(b0(Ri),Ri=null),T=!0;if(!T)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=p,h):(y=y!==null,y!==(c!==null&&c.memoizedState!==null)&&y&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Yt.current&1)!==0?wn===0&&(wn=3):k0())),h.updateQueue!==null&&(h.flags|=4),Un(h),null);case 4:return ql(),f0(c,h),c===null&&Hu(h.stateNode.containerInfo),Un(h),null;case 10:return Bv(h.type._context),Un(h),null;case 17:return Sr(h.type)&&kf(),Un(h),null;case 19:if(zt(Yt),T=h.memoizedState,T===null)return Un(h),null;if(y=(h.flags&128)!==0,M=T.rendering,M===null)if(y)ih(T,!1);else{if(wn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(M=jf(c),M!==null){for(h.flags|=128,ih(T,!1),y=M.updateQueue,y!==null&&(h.updateQueue=y,h.flags|=4),h.subtreeFlags=0,y=p,p=h.child;p!==null;)T=p,c=y,T.flags&=14680066,M=T.alternate,M===null?(T.childLanes=0,T.lanes=c,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=M.childLanes,T.lanes=M.lanes,T.child=M.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=M.memoizedProps,T.memoizedState=M.memoizedState,T.updateQueue=M.updateQueue,T.type=M.type,c=M.dependencies,T.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),p=p.sibling;return Lt(Yt,Yt.current&1|2),h.child}c=c.sibling}T.tail!==null&&on()>ec&&(h.flags|=128,y=!0,ih(T,!1),h.lanes=4194304)}else{if(!y)if(c=jf(M),c!==null){if(h.flags|=128,y=!0,p=c.updateQueue,p!==null&&(h.updateQueue=p,h.flags|=4),ih(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!Wt)return Un(h),null}else 2*on()-T.renderingStartTime>ec&&p!==1073741824&&(h.flags|=128,y=!0,ih(T,!1),h.lanes=4194304);T.isBackwards?(M.sibling=h.child,h.child=M):(p=T.last,p!==null?p.sibling=M:h.child=M,T.last=M)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=on(),h.sibling=null,p=Yt.current,Lt(Yt,y?p&1|2:p&1),h):(Un(h),null);case 22:case 23:return T0(),y=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==y&&(h.flags|=8192),y&&(h.mode&1)!==0?(Xr&1073741824)!==0&&(Un(h),h.subtreeFlags&6&&(h.flags|=8192)):Un(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function Mj(c,h){switch(Lv(h),h.tag){case 1:return Sr(h.type)&&kf(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return ql(),zt(Cr),zt(Wn),Yv(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return Hv(h),null;case 13:if(zt(Yt),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));Hl()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return zt(Yt),null;case 4:return ql(),null;case 10:return Bv(h.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var Xf=!1,Hn=!1,Aj=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Jl(c,h){var p=c.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Jt(c,h,y)}else p.current=null}function g0(c,h,p){try{p()}catch(y){Jt(c,h,y)}}var mE=!1;function Oj(c,h){if(Tv=ff,c=Y1(),vv(c)){if("selectionStart"in c)var p={start:c.selectionStart,end:c.selectionEnd};else e:{p=(p=c.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{p.nodeType,T.nodeType}catch{p=null;break e}var M=0,z=-1,$=-1,le=0,ge=0,me=c,fe=null;t:for(;;){for(var Re;me!==p||S!==0&&me.nodeType!==3||(z=M+S),me!==T||y!==0&&me.nodeType!==3||($=M+y),me.nodeType===3&&(M+=me.nodeValue.length),(Re=me.firstChild)!==null;)fe=me,me=Re;for(;;){if(me===c)break t;if(fe===p&&++le===S&&(z=M),fe===T&&++ge===y&&($=M),(Re=me.nextSibling)!==null)break;me=fe,fe=me.parentNode}me=Re}p=z===-1||$===-1?null:{start:z,end:$}}else p=null}p=p||{start:0,end:0}}else p=null;for(kv={focusedElem:c,selectionRange:p},ff=!1,Me=h;Me!==null;)if(h=Me,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Me=c;else for(;Me!==null;){h=Me;try{var Ae=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Fe=Ae.memoizedProps,an=Ae.memoizedState,re=h.stateNode,J=re.getSnapshotBeforeUpdate(h.elementType===h.type?Fe:Pi(h.type,Fe),an);re.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var se=h.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(we){Jt(h,h.return,we)}if(c=h.sibling,c!==null){c.return=h.return,Me=c;break}Me=h.return}return Ae=mE,mE=!1,Ae}function sh(c,h,p){var y=h.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&c)===c){var T=S.destroy;S.destroy=void 0,T!==void 0&&g0(h,p,T)}S=S.next}while(S!==y)}}function Yf(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&c)===c){var y=p.create;p.destroy=y()}p=p.next}while(p!==h)}}function p0(c){var h=c.ref;if(h!==null){var p=c.stateNode;switch(c.tag){case 5:c=p;break;default:c=p}typeof h=="function"?h(c):h.current=c}}function yE(c){var h=c.alternate;h!==null&&(c.alternate=null,yE(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[ss],delete h[Yu],delete h[Mv],delete h[pj],delete h[mj])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function vE(c){return c.tag===5||c.tag===3||c.tag===4}function xE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||vE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function m0(c,h,p){var y=c.tag;if(y===5||y===6)c=c.stateNode,h?p.nodeType===8?p.parentNode.insertBefore(c,h):p.insertBefore(c,h):(p.nodeType===8?(h=p.parentNode,h.insertBefore(c,p)):(h=p,h.appendChild(c)),p=p._reactRootContainer,p!=null||h.onclick!==null||(h.onclick=Ef));else if(y!==4&&(c=c.child,c!==null))for(m0(c,h,p),c=c.sibling;c!==null;)m0(c,h,p),c=c.sibling}function y0(c,h,p){var y=c.tag;if(y===5||y===6)c=c.stateNode,h?p.insertBefore(c,h):p.appendChild(c);else if(y!==4&&(c=c.child,c!==null))for(y0(c,h,p),c=c.sibling;c!==null;)y0(c,h,p),c=c.sibling}var Ln=null,Ii=!1;function Go(c,h,p){for(p=p.child;p!==null;)_E(c,h,p),p=p.sibling}function _E(c,h,p){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(af,p)}catch{}switch(p.tag){case 5:Hn||Jl(p,h);case 6:var y=Ln,S=Ii;Ln=null,Go(c,h,p),Ln=y,Ii=S,Ln!==null&&(Ii?(c=Ln,p=p.stateNode,c.nodeType===8?c.parentNode.removeChild(p):c.removeChild(p)):Ln.removeChild(p.stateNode));break;case 18:Ln!==null&&(Ii?(c=Ln,p=p.stateNode,c.nodeType===8?Iv(c.parentNode,p):c.nodeType===1&&Iv(c,p),Nu(c)):Iv(Ln,p.stateNode));break;case 4:y=Ln,S=Ii,Ln=p.stateNode.containerInfo,Ii=!0,Go(c,h,p),Ln=y,Ii=S;break;case 0:case 11:case 14:case 15:if(!Hn&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var T=S,M=T.destroy;T=T.tag,M!==void 0&&((T&2)!==0||(T&4)!==0)&&g0(p,h,M),S=S.next}while(S!==y)}Go(c,h,p);break;case 1:if(!Hn&&(Jl(p,h),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(z){Jt(p,h,z)}Go(c,h,p);break;case 21:Go(c,h,p);break;case 22:p.mode&1?(Hn=(y=Hn)||p.memoizedState!==null,Go(c,h,p),Hn=y):Go(c,h,p);break;default:Go(c,h,p)}}function wE(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var p=c.stateNode;p===null&&(p=c.stateNode=new Aj),h.forEach(function(y){var S=Gj.bind(null,c,y);p.has(y)||(p.add(y),y.then(S,S))})}}function Mi(c,h){var p=h.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y];try{var T=c,M=h,z=M;e:for(;z!==null;){switch(z.tag){case 5:Ln=z.stateNode,Ii=!1;break e;case 3:Ln=z.stateNode.containerInfo,Ii=!0;break e;case 4:Ln=z.stateNode.containerInfo,Ii=!0;break e}z=z.return}if(Ln===null)throw Error(t(160));_E(T,M,S),Ln=null,Ii=!1;var $=S.alternate;$!==null&&($.return=null),S.return=null}catch(le){Jt(S,h,le)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)CE(h,c),h=h.sibling}function CE(c,h){var p=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Mi(h,c),ls(c),y&4){try{sh(3,c,c.return),Yf(3,c)}catch(Fe){Jt(c,c.return,Fe)}try{sh(5,c,c.return)}catch(Fe){Jt(c,c.return,Fe)}}break;case 1:Mi(h,c),ls(c),y&512&&p!==null&&Jl(p,p.return);break;case 5:if(Mi(h,c),ls(c),y&512&&p!==null&&Jl(p,p.return),c.flags&32){var S=c.stateNode;try{Ve(S,"")}catch(Fe){Jt(c,c.return,Fe)}}if(y&4&&(S=c.stateNode,S!=null)){var T=c.memoizedProps,M=p!==null?p.memoizedProps:T,z=c.type,$=c.updateQueue;if(c.updateQueue=null,$!==null)try{z==="input"&&T.type==="radio"&&T.name!=null&&Ht(S,T),sr(z,M);var le=sr(z,T);for(M=0;M<$.length;M+=2){var ge=$[M],me=$[M+1];ge==="style"?_r(S,me):ge==="dangerouslySetInnerHTML"?_e(S,me):ge==="children"?Ve(S,me):k(S,ge,me,le)}switch(z){case"input":nn(S,T);break;case"textarea":ue(S,T);break;case"select":var fe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!T.multiple;var Re=T.value;Re!=null?Bt(S,!!T.multiple,Re,!1):fe!==!!T.multiple&&(T.defaultValue!=null?Bt(S,!!T.multiple,T.defaultValue,!0):Bt(S,!!T.multiple,T.multiple?[]:"",!1))}S[Yu]=T}catch(Fe){Jt(c,c.return,Fe)}}break;case 6:if(Mi(h,c),ls(c),y&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,T=c.memoizedProps;try{S.nodeValue=T}catch(Fe){Jt(c,c.return,Fe)}}break;case 3:if(Mi(h,c),ls(c),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Nu(h.containerInfo)}catch(Fe){Jt(c,c.return,Fe)}break;case 4:Mi(h,c),ls(c);break;case 13:Mi(h,c),ls(c),S=c.child,S.flags&8192&&(T=S.memoizedState!==null,S.stateNode.isHidden=T,!T||S.alternate!==null&&S.alternate.memoizedState!==null||(_0=on())),y&4&&wE(c);break;case 22:if(ge=p!==null&&p.memoizedState!==null,c.mode&1?(Hn=(le=Hn)||ge,Mi(h,c),Hn=le):Mi(h,c),ls(c),y&8192){if(le=c.memoizedState!==null,(c.stateNode.isHidden=le)&&!ge&&(c.mode&1)!==0)for(Me=c,ge=c.child;ge!==null;){for(me=Me=ge;Me!==null;){switch(fe=Me,Re=fe.child,fe.tag){case 0:case 11:case 14:case 15:sh(4,fe,fe.return);break;case 1:Jl(fe,fe.return);var Ae=fe.stateNode;if(typeof Ae.componentWillUnmount=="function"){y=fe,p=fe.return;try{h=y,Ae.props=h.memoizedProps,Ae.state=h.memoizedState,Ae.componentWillUnmount()}catch(Fe){Jt(y,p,Fe)}}break;case 5:Jl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){EE(me);continue}}Re!==null?(Re.return=fe,Me=Re):EE(me)}ge=ge.sibling}e:for(ge=null,me=c;;){if(me.tag===5){if(ge===null){ge=me;try{S=me.stateNode,le?(T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(z=me.stateNode,$=me.memoizedProps.style,M=$!=null&&$.hasOwnProperty("display")?$.display:null,z.style.display=dn("display",M))}catch(Fe){Jt(c,c.return,Fe)}}}else if(me.tag===6){if(ge===null)try{me.stateNode.nodeValue=le?"":me.memoizedProps}catch(Fe){Jt(c,c.return,Fe)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===c)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===c)break e;for(;me.sibling===null;){if(me.return===null||me.return===c)break e;ge===me&&(ge=null),me=me.return}ge===me&&(ge=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Mi(h,c),ls(c),y&4&&wE(c);break;case 21:break;default:Mi(h,c),ls(c)}}function ls(c){var h=c.flags;if(h&2){try{e:{for(var p=c.return;p!==null;){if(vE(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(Ve(S,""),y.flags&=-33);var T=xE(c);y0(c,T,S);break;case 3:case 4:var M=y.stateNode.containerInfo,z=xE(c);m0(c,z,M);break;default:throw Error(t(161))}}catch($){Jt(c,c.return,$)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function Dj(c,h,p){Me=c,SE(c)}function SE(c,h,p){for(var y=(c.mode&1)!==0;Me!==null;){var S=Me,T=S.child;if(S.tag===22&&y){var M=S.memoizedState!==null||Xf;if(!M){var z=S.alternate,$=z!==null&&z.memoizedState!==null||Hn;z=Xf;var le=Hn;if(Xf=M,(Hn=$)&&!le)for(Me=S;Me!==null;)M=Me,$=M.child,M.tag===22&&M.memoizedState!==null?TE(S):$!==null?($.return=M,Me=$):TE(S);for(;T!==null;)Me=T,SE(T),T=T.sibling;Me=S,Xf=z,Hn=le}bE(c)}else(S.subtreeFlags&8772)!==0&&T!==null?(T.return=S,Me=T):bE(c)}}function bE(c){for(;Me!==null;){var h=Me;if((h.flags&8772)!==0){var p=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Hn||Yf(5,h);break;case 1:var y=h.stateNode;if(h.flags&4&&!Hn)if(p===null)y.componentDidMount();else{var S=h.elementType===h.type?p.memoizedProps:Pi(h.type,p.memoizedProps);y.componentDidUpdate(S,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=h.updateQueue;T!==null&&Eb(h,T,y);break;case 3:var M=h.updateQueue;if(M!==null){if(p=null,h.child!==null)switch(h.child.tag){case 5:p=h.child.stateNode;break;case 1:p=h.child.stateNode}Eb(h,M,p)}break;case 5:var z=h.stateNode;if(p===null&&h.flags&4){p=z;var $=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&p.focus();break;case"img":$.src&&(p.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var le=h.alternate;if(le!==null){var ge=le.memoizedState;if(ge!==null){var me=ge.dehydrated;me!==null&&Nu(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Hn||h.flags&512&&p0(h)}catch(fe){Jt(h,h.return,fe)}}if(h===c){Me=null;break}if(p=h.sibling,p!==null){p.return=h.return,Me=p;break}Me=h.return}}function EE(c){for(;Me!==null;){var h=Me;if(h===c){Me=null;break}var p=h.sibling;if(p!==null){p.return=h.return,Me=p;break}Me=h.return}}function TE(c){for(;Me!==null;){var h=Me;try{switch(h.tag){case 0:case 11:case 15:var p=h.return;try{Yf(4,h)}catch($){Jt(h,p,$)}break;case 1:var y=h.stateNode;if(typeof y.componentDidMount=="function"){var S=h.return;try{y.componentDidMount()}catch($){Jt(h,S,$)}}var T=h.return;try{p0(h)}catch($){Jt(h,T,$)}break;case 5:var M=h.return;try{p0(h)}catch($){Jt(h,M,$)}}}catch($){Jt(h,h.return,$)}if(h===c){Me=null;break}var z=h.sibling;if(z!==null){z.return=h.return,Me=z;break}Me=h.return}}var Lj=Math.ceil,Kf=R.ReactCurrentDispatcher,v0=R.ReactCurrentOwner,hi=R.ReactCurrentBatchConfig,gt=0,Rn=null,gn=null,Fn=0,Xr=0,Ql=No(0),wn=0,oh=null,Ka=0,qf=0,x0=0,ah=null,Er=null,_0=0,ec=1/0,Bs=null,Zf=!1,w0=null,Wo=null,Jf=!1,$o=null,Qf=0,lh=0,C0=null,eg=-1,tg=0;function cr(){return(gt&6)!==0?on():eg!==-1?eg:eg=on()}function Uo(c){return(c.mode&1)===0?1:(gt&2)!==0&&Fn!==0?Fn&-Fn:vj.transition!==null?(tg===0&&(tg=x1()),tg):(c=Rt,c!==0||(c=window.event,c=c===void 0?16:R1(c.type)),c)}function Ai(c,h,p,y){if(50<lh)throw lh=0,C0=null,Error(t(185));Au(c,p,y),((gt&2)===0||c!==Rn)&&(c===Rn&&((gt&2)===0&&(qf|=p),wn===4&&Ho(c,Fn)),Tr(c,y),p===1&&gt===0&&(h.mode&1)===0&&(ec=on()+500,Pf&&zo()))}function Tr(c,h){var p=c.callbackNode;vN(c,h);var y=uf(c,c===Rn?Fn:0);if(y===0)p!==null&&m1(p),c.callbackNode=null,c.callbackPriority=0;else if(h=y&-y,c.callbackPriority!==h){if(p!=null&&m1(p),h===1)c.tag===0?yj(RE.bind(null,c)):fb(RE.bind(null,c)),fj(function(){(gt&6)===0&&zo()}),p=null;else{switch(_1(y)){case 1:p=tv;break;case 4:p=y1;break;case 16:p=of;break;case 536870912:p=v1;break;default:p=of}p=FE(p,kE.bind(null,c))}c.callbackPriority=h,c.callbackNode=p}}function kE(c,h){if(eg=-1,tg=0,(gt&6)!==0)throw Error(t(327));var p=c.callbackNode;if(tc()&&c.callbackNode!==p)return null;var y=uf(c,c===Rn?Fn:0);if(y===0)return null;if((y&30)!==0||(y&c.expiredLanes)!==0||h)h=ng(c,y);else{h=y;var S=gt;gt|=2;var T=IE();(Rn!==c||Fn!==h)&&(Bs=null,ec=on()+500,Za(c,h));do try{jj();break}catch(z){PE(c,z)}while(!0);Vv(),Kf.current=T,gt=S,gn!==null?h=0:(Rn=null,Fn=0,h=wn)}if(h!==0){if(h===2&&(S=nv(c),S!==0&&(y=S,h=S0(c,S))),h===1)throw p=oh,Za(c,0),Ho(c,y),Tr(c,on()),p;if(h===6)Ho(c,y);else{if(S=c.current.alternate,(y&30)===0&&!Fj(S)&&(h=ng(c,y),h===2&&(T=nv(c),T!==0&&(y=T,h=S0(c,T))),h===1))throw p=oh,Za(c,0),Ho(c,y),Tr(c,on()),p;switch(c.finishedWork=S,c.finishedLanes=y,h){case 0:case 1:throw Error(t(345));case 2:Ja(c,Er,Bs);break;case 3:if(Ho(c,y),(y&130023424)===y&&(h=_0+500-on(),10<h)){if(uf(c,0)!==0)break;if(S=c.suspendedLanes,(S&y)!==y){cr(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=Pv(Ja.bind(null,c,Er,Bs),h);break}Ja(c,Er,Bs);break;case 4:if(Ho(c,y),(y&4194240)===y)break;for(h=c.eventTimes,S=-1;0<y;){var M=31-Ti(y);T=1<<M,M=h[M],M>S&&(S=M),y&=~T}if(y=S,y=on()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*Lj(y/1960))-y,10<y){c.timeoutHandle=Pv(Ja.bind(null,c,Er,Bs),y);break}Ja(c,Er,Bs);break;case 5:Ja(c,Er,Bs);break;default:throw Error(t(329))}}}return Tr(c,on()),c.callbackNode===p?kE.bind(null,c):null}function S0(c,h){var p=ah;return c.current.memoizedState.isDehydrated&&(Za(c,h).flags|=256),c=ng(c,h),c!==2&&(h=Er,Er=p,h!==null&&b0(h)),c}function b0(c){Er===null?Er=c:Er.push.apply(Er,c)}function Fj(c){for(var h=c;;){if(h.flags&16384){var p=h.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var S=p[y],T=S.getSnapshot;S=S.value;try{if(!ki(T(),S))return!1}catch{return!1}}}if(p=h.child,h.subtreeFlags&16384&&p!==null)p.return=h,h=p;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ho(c,h){for(h&=~x0,h&=~qf,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var p=31-Ti(h),y=1<<p;c[p]=-1,h&=~y}}function RE(c){if((gt&6)!==0)throw Error(t(327));tc();var h=uf(c,0);if((h&1)===0)return Tr(c,on()),null;var p=ng(c,h);if(c.tag!==0&&p===2){var y=nv(c);y!==0&&(h=y,p=S0(c,y))}if(p===1)throw p=oh,Za(c,0),Ho(c,h),Tr(c,on()),p;if(p===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Ja(c,Er,Bs),Tr(c,on()),null}function E0(c,h){var p=gt;gt|=1;try{return c(h)}finally{gt=p,gt===0&&(ec=on()+500,Pf&&zo())}}function qa(c){$o!==null&&$o.tag===0&&(gt&6)===0&&tc();var h=gt;gt|=1;var p=hi.transition,y=Rt;try{if(hi.transition=null,Rt=1,c)return c()}finally{Rt=y,hi.transition=p,gt=h,(gt&6)===0&&zo()}}function T0(){Xr=Ql.current,zt(Ql)}function Za(c,h){c.finishedWork=null,c.finishedLanes=0;var p=c.timeoutHandle;if(p!==-1&&(c.timeoutHandle=-1,dj(p)),gn!==null)for(p=gn.return;p!==null;){var y=p;switch(Lv(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&kf();break;case 3:ql(),zt(Cr),zt(Wn),Yv();break;case 5:Hv(y);break;case 4:ql();break;case 13:zt(Yt);break;case 19:zt(Yt);break;case 10:Bv(y.type._context);break;case 22:case 23:T0()}p=p.return}if(Rn=c,gn=c=Xo(c.current,null),Fn=Xr=h,wn=0,oh=null,x0=qf=Ka=0,Er=ah=null,Ha!==null){for(h=0;h<Ha.length;h++)if(p=Ha[h],y=p.interleaved,y!==null){p.interleaved=null;var S=y.next,T=p.pending;if(T!==null){var M=T.next;T.next=S,y.next=M}p.pending=y}Ha=null}return c}function PE(c,h){do{var p=gn;try{if(Vv(),zf.current=Wf,Vf){for(var y=Kt.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}Vf=!1}if(Ya=0,kn=_n=Kt=null,eh=!1,th=0,v0.current=null,p===null||p.return===null){wn=1,oh=h,gn=null;break}e:{var T=c,M=p.return,z=p,$=h;if(h=Fn,z.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var le=$,ge=z,me=ge.tag;if((ge.mode&1)===0&&(me===0||me===11||me===15)){var fe=ge.alternate;fe?(ge.updateQueue=fe.updateQueue,ge.memoizedState=fe.memoizedState,ge.lanes=fe.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Re=eE(M);if(Re!==null){Re.flags&=-257,tE(Re,M,z,T,h),Re.mode&1&&Qb(T,le,h),h=Re,$=le;var Ae=h.updateQueue;if(Ae===null){var Fe=new Set;Fe.add($),h.updateQueue=Fe}else Ae.add($);break e}else{if((h&1)===0){Qb(T,le,h),k0();break e}$=Error(t(426))}}else if(Wt&&z.mode&1){var an=eE(M);if(an!==null){(an.flags&65536)===0&&(an.flags|=256),tE(an,M,z,T,h),jv(Zl($,z));break e}}T=$=Zl($,z),wn!==4&&(wn=2),ah===null?ah=[T]:ah.push(T),T=M;do{switch(T.tag){case 3:T.flags|=65536,h&=-h,T.lanes|=h;var re=Zb(T,$,h);bb(T,re);break e;case 1:z=$;var J=T.type,se=T.stateNode;if((T.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Wo===null||!Wo.has(se)))){T.flags|=65536,h&=-h,T.lanes|=h;var we=Jb(T,z,h);bb(T,we);break e}}T=T.return}while(T!==null)}AE(p)}catch(Ne){h=Ne,gn===p&&p!==null&&(gn=p=p.return);continue}break}while(!0)}function IE(){var c=Kf.current;return Kf.current=Wf,c===null?Wf:c}function k0(){(wn===0||wn===3||wn===2)&&(wn=4),Rn===null||(Ka&268435455)===0&&(qf&268435455)===0||Ho(Rn,Fn)}function ng(c,h){var p=gt;gt|=2;var y=IE();(Rn!==c||Fn!==h)&&(Bs=null,Za(c,h));do try{Nj();break}catch(S){PE(c,S)}while(!0);if(Vv(),gt=p,Kf.current=y,gn!==null)throw Error(t(261));return Rn=null,Fn=0,wn}function Nj(){for(;gn!==null;)ME(gn)}function jj(){for(;gn!==null&&!cN();)ME(gn)}function ME(c){var h=LE(c.alternate,c,Xr);c.memoizedProps=c.pendingProps,h===null?AE(c):gn=h,v0.current=null}function AE(c){var h=c;do{var p=h.alternate;if(c=h.return,(h.flags&32768)===0){if(p=Ij(p,h,Xr),p!==null){gn=p;return}}else{if(p=Mj(p,h),p!==null){p.flags&=32767,gn=p;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{wn=6,gn=null;return}}if(h=h.sibling,h!==null){gn=h;return}gn=h=c}while(h!==null);wn===0&&(wn=5)}function Ja(c,h,p){var y=Rt,S=hi.transition;try{hi.transition=null,Rt=1,zj(c,h,p,y)}finally{hi.transition=S,Rt=y}return null}function zj(c,h,p,y){do tc();while($o!==null);if((gt&6)!==0)throw Error(t(327));p=c.finishedWork;var S=c.finishedLanes;if(p===null)return null;if(c.finishedWork=null,c.finishedLanes=0,p===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var T=p.lanes|p.childLanes;if(xN(c,T),c===Rn&&(gn=Rn=null,Fn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Jf||(Jf=!0,FE(of,function(){return tc(),null})),T=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||T){T=hi.transition,hi.transition=null;var M=Rt;Rt=1;var z=gt;gt|=4,v0.current=null,Oj(c,p),CE(p,c),sj(kv),ff=!!Tv,kv=Tv=null,c.current=p,Dj(p),uN(),gt=z,Rt=M,hi.transition=T}else c.current=p;if(Jf&&(Jf=!1,$o=c,Qf=S),T=c.pendingLanes,T===0&&(Wo=null),fN(p.stateNode),Tr(c,on()),h!==null)for(y=c.onRecoverableError,p=0;p<h.length;p++)S=h[p],y(S.value,{componentStack:S.stack,digest:S.digest});if(Zf)throw Zf=!1,c=w0,w0=null,c;return(Qf&1)!==0&&c.tag!==0&&tc(),T=c.pendingLanes,(T&1)!==0?c===C0?lh++:(lh=0,C0=c):lh=0,zo(),null}function tc(){if($o!==null){var c=_1(Qf),h=hi.transition,p=Rt;try{if(hi.transition=null,Rt=16>c?16:c,$o===null)var y=!1;else{if(c=$o,$o=null,Qf=0,(gt&6)!==0)throw Error(t(331));var S=gt;for(gt|=4,Me=c.current;Me!==null;){var T=Me,M=T.child;if((Me.flags&16)!==0){var z=T.deletions;if(z!==null){for(var $=0;$<z.length;$++){var le=z[$];for(Me=le;Me!==null;){var ge=Me;switch(ge.tag){case 0:case 11:case 15:sh(8,ge,T)}var me=ge.child;if(me!==null)me.return=ge,Me=me;else for(;Me!==null;){ge=Me;var fe=ge.sibling,Re=ge.return;if(yE(ge),ge===le){Me=null;break}if(fe!==null){fe.return=Re,Me=fe;break}Me=Re}}}var Ae=T.alternate;if(Ae!==null){var Fe=Ae.child;if(Fe!==null){Ae.child=null;do{var an=Fe.sibling;Fe.sibling=null,Fe=an}while(Fe!==null)}}Me=T}}if((T.subtreeFlags&2064)!==0&&M!==null)M.return=T,Me=M;else e:for(;Me!==null;){if(T=Me,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:sh(9,T,T.return)}var re=T.sibling;if(re!==null){re.return=T.return,Me=re;break e}Me=T.return}}var J=c.current;for(Me=J;Me!==null;){M=Me;var se=M.child;if((M.subtreeFlags&2064)!==0&&se!==null)se.return=M,Me=se;else e:for(M=J;Me!==null;){if(z=Me,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Yf(9,z)}}catch(Ne){Jt(z,z.return,Ne)}if(z===M){Me=null;break e}var we=z.sibling;if(we!==null){we.return=z.return,Me=we;break e}Me=z.return}}if(gt=S,zo(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(af,c)}catch{}y=!0}return y}finally{Rt=p,hi.transition=h}}return!1}function OE(c,h,p){h=Zl(p,h),h=Zb(c,h,1),c=Bo(c,h,1),h=cr(),c!==null&&(Au(c,1,h),Tr(c,h))}function Jt(c,h,p){if(c.tag===3)OE(c,c,p);else for(;h!==null;){if(h.tag===3){OE(h,c,p);break}else if(h.tag===1){var y=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Wo===null||!Wo.has(y))){c=Zl(p,c),c=Jb(h,c,1),h=Bo(h,c,1),c=cr(),h!==null&&(Au(h,1,c),Tr(h,c));break}}h=h.return}}function Vj(c,h,p){var y=c.pingCache;y!==null&&y.delete(h),h=cr(),c.pingedLanes|=c.suspendedLanes&p,Rn===c&&(Fn&p)===p&&(wn===4||wn===3&&(Fn&130023424)===Fn&&500>on()-_0?Za(c,0):x0|=p),Tr(c,h)}function DE(c,h){h===0&&((c.mode&1)===0?h=1:(h=cf,cf<<=1,(cf&130023424)===0&&(cf=4194304)));var p=cr();c=js(c,h),c!==null&&(Au(c,h,p),Tr(c,p))}function Bj(c){var h=c.memoizedState,p=0;h!==null&&(p=h.retryLane),DE(c,p)}function Gj(c,h){var p=0;switch(c.tag){case 13:var y=c.stateNode,S=c.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=c.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(h),DE(c,p)}var LE;LE=function(c,h,p){if(c!==null)if(c.memoizedProps!==h.pendingProps||Cr.current)br=!0;else{if((c.lanes&p)===0&&(h.flags&128)===0)return br=!1,Pj(c,h,p);br=(c.flags&131072)!==0}else br=!1,Wt&&(h.flags&1048576)!==0&&gb(h,Mf,h.index);switch(h.lanes=0,h.tag){case 2:var y=h.type;Hf(c,h),c=h.pendingProps;var S=Wl(h,Wn.current);Kl(h,p),S=Zv(null,h,y,c,S,p);var T=Jv();return h.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Sr(y)?(T=!0,Rf(h)):T=!1,h.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,$v(h),S.updater=$f,h.stateNode=S,S._reactInternals=h,i0(h,y,c,p),h=l0(null,h,y,!0,T,p)):(h.tag=0,Wt&&T&&Dv(h),lr(null,h,S,p),h=h.child),h;case 16:y=h.elementType;e:{switch(Hf(c,h),c=h.pendingProps,S=y._init,y=S(y._payload),h.type=y,S=h.tag=$j(y),c=Pi(y,c),S){case 0:h=a0(null,h,y,c,p);break e;case 1:h=aE(null,h,y,c,p);break e;case 11:h=nE(null,h,y,c,p);break e;case 14:h=rE(null,h,y,Pi(y.type,c),p);break e}throw Error(t(306,y,""))}return h;case 0:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Pi(y,S),a0(c,h,y,S,p);case 1:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Pi(y,S),aE(c,h,y,S,p);case 3:e:{if(lE(h),c===null)throw Error(t(387));y=h.pendingProps,T=h.memoizedState,S=T.element,Sb(c,h),Nf(h,y,null,p);var M=h.memoizedState;if(y=M.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},h.updateQueue.baseState=T,h.memoizedState=T,h.flags&256){S=Zl(Error(t(423)),h),h=cE(c,h,y,p,S);break e}else if(y!==S){S=Zl(Error(t(424)),h),h=cE(c,h,y,p,S);break e}else for(Hr=Fo(h.stateNode.containerInfo.firstChild),Ur=h,Wt=!0,Ri=null,p=wb(h,null,y,p),h.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Hl(),y===S){h=Vs(c,h,p);break e}lr(c,h,y,p)}h=h.child}return h;case 5:return Tb(h),c===null&&Nv(h),y=h.type,S=h.pendingProps,T=c!==null?c.memoizedProps:null,M=S.children,Rv(y,S)?M=null:T!==null&&Rv(y,T)&&(h.flags|=32),oE(c,h),lr(c,h,M,p),h.child;case 6:return c===null&&Nv(h),null;case 13:return uE(c,h,p);case 4:return Uv(h,h.stateNode.containerInfo),y=h.pendingProps,c===null?h.child=Xl(h,null,y,p):lr(c,h,y,p),h.child;case 11:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Pi(y,S),nE(c,h,y,S,p);case 7:return lr(c,h,h.pendingProps,p),h.child;case 8:return lr(c,h,h.pendingProps.children,p),h.child;case 12:return lr(c,h,h.pendingProps.children,p),h.child;case 10:e:{if(y=h.type._context,S=h.pendingProps,T=h.memoizedProps,M=S.value,Lt(Df,y._currentValue),y._currentValue=M,T!==null)if(ki(T.value,M)){if(T.children===S.children&&!Cr.current){h=Vs(c,h,p);break e}}else for(T=h.child,T!==null&&(T.return=h);T!==null;){var z=T.dependencies;if(z!==null){M=T.child;for(var $=z.firstContext;$!==null;){if($.context===y){if(T.tag===1){$=zs(-1,p&-p),$.tag=2;var le=T.updateQueue;if(le!==null){le=le.shared;var ge=le.pending;ge===null?$.next=$:($.next=ge.next,ge.next=$),le.pending=$}}T.lanes|=p,$=T.alternate,$!==null&&($.lanes|=p),Gv(T.return,p,h),z.lanes|=p;break}$=$.next}}else if(T.tag===10)M=T.type===h.type?null:T.child;else if(T.tag===18){if(M=T.return,M===null)throw Error(t(341));M.lanes|=p,z=M.alternate,z!==null&&(z.lanes|=p),Gv(M,p,h),M=T.sibling}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===h){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}lr(c,h,S.children,p),h=h.child}return h;case 9:return S=h.type,y=h.pendingProps.children,Kl(h,p),S=ci(S),y=y(S),h.flags|=1,lr(c,h,y,p),h.child;case 14:return y=h.type,S=Pi(y,h.pendingProps),S=Pi(y.type,S),rE(c,h,y,S,p);case 15:return iE(c,h,h.type,h.pendingProps,p);case 17:return y=h.type,S=h.pendingProps,S=h.elementType===y?S:Pi(y,S),Hf(c,h),h.tag=1,Sr(y)?(c=!0,Rf(h)):c=!1,Kl(h,p),Kb(h,y,S),i0(h,y,S,p),l0(null,h,y,!0,c,p);case 19:return dE(c,h,p);case 22:return sE(c,h,p)}throw Error(t(156,h.tag))};function FE(c,h){return p1(c,h)}function Wj(c,h,p,y){this.tag=c,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(c,h,p,y){return new Wj(c,h,p,y)}function R0(c){return c=c.prototype,!(!c||!c.isReactComponent)}function $j(c){if(typeof c=="function")return R0(c)?1:0;if(c!=null){if(c=c.$$typeof,c===W)return 11;if(c===ne)return 14}return 2}function Xo(c,h){var p=c.alternate;return p===null?(p=di(c.tag,h,c.key,c.mode),p.elementType=c.elementType,p.type=c.type,p.stateNode=c.stateNode,p.alternate=c,c.alternate=p):(p.pendingProps=h,p.type=c.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=c.flags&14680064,p.childLanes=c.childLanes,p.lanes=c.lanes,p.child=c.child,p.memoizedProps=c.memoizedProps,p.memoizedState=c.memoizedState,p.updateQueue=c.updateQueue,h=c.dependencies,p.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},p.sibling=c.sibling,p.index=c.index,p.ref=c.ref,p}function rg(c,h,p,y,S,T){var M=2;if(y=c,typeof c=="function")R0(c)&&(M=1);else if(typeof c=="string")M=5;else e:switch(c){case O:return Qa(p.children,S,T,h);case D:M=8,S|=8;break;case j:return c=di(12,p,h,S|2),c.elementType=j,c.lanes=T,c;case G:return c=di(13,p,h,S),c.elementType=G,c.lanes=T,c;case V:return c=di(19,p,h,S),c.elementType=V,c.lanes=T,c;case oe:return ig(p,S,T,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Q:M=10;break e;case X:M=9;break e;case W:M=11;break e;case ne:M=14;break e;case U:M=16,y=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=di(M,p,h,S),h.elementType=c,h.type=y,h.lanes=T,h}function Qa(c,h,p,y){return c=di(7,c,y,h),c.lanes=p,c}function ig(c,h,p,y){return c=di(22,c,y,h),c.elementType=oe,c.lanes=p,c.stateNode={isHidden:!1},c}function P0(c,h,p){return c=di(6,c,null,h),c.lanes=p,c}function I0(c,h,p){return h=di(4,c.children!==null?c.children:[],c.key,h),h.lanes=p,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function Uj(c,h,p,y,S){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rv(0),this.expirationTimes=rv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rv(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function M0(c,h,p,y,S,T,M,z,$){return c=new Uj(c,h,p,z,$),h===1?(h=1,T===!0&&(h|=8)):h=0,T=di(3,null,null,h),c.current=T,T.stateNode=c,T.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},$v(T),c}function Hj(c,h,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:y==null?null:""+y,children:c,containerInfo:h,implementation:p}}function NE(c){if(!c)return jo;c=c._reactInternals;e:{if(Ba(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Sr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var p=c.type;if(Sr(p))return hb(c,p,h)}return h}function jE(c,h,p,y,S,T,M,z,$){return c=M0(p,y,!0,c,S,T,M,z,$),c.context=NE(null),p=c.current,y=cr(),S=Uo(p),T=zs(y,S),T.callback=h??null,Bo(p,T,S),c.current.lanes=S,Au(c,S,y),Tr(c,y),c}function sg(c,h,p,y){var S=h.current,T=cr(),M=Uo(S);return p=NE(p),h.context===null?h.context=p:h.pendingContext=p,h=zs(T,M),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=Bo(S,h,M),c!==null&&(Ai(c,S,M,T),Ff(c,S,M)),M}function og(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function zE(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var p=c.retryLane;c.retryLane=p!==0&&p<h?p:h}}function A0(c,h){zE(c,h),(c=c.alternate)&&zE(c,h)}function Xj(){return null}var VE=typeof reportError=="function"?reportError:function(c){console.error(c)};function O0(c){this._internalRoot=c}ag.prototype.render=O0.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));sg(c,h,null,null)},ag.prototype.unmount=O0.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;qa(function(){sg(null,c,null,null)}),h[Ds]=null}};function ag(c){this._internalRoot=c}ag.prototype.unstable_scheduleHydration=function(c){if(c){var h=S1();c={blockedOn:null,target:c,priority:h};for(var p=0;p<Oo.length&&h!==0&&h<Oo[p].priority;p++);Oo.splice(p,0,c),p===0&&T1(c)}};function D0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function lg(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function BE(){}function Yj(c,h,p,y,S){if(S){if(typeof y=="function"){var T=y;y=function(){var le=og(M);T.call(le)}}var M=jE(h,y,c,0,null,!1,!1,"",BE);return c._reactRootContainer=M,c[Ds]=M.current,Hu(c.nodeType===8?c.parentNode:c),qa(),M}for(;S=c.lastChild;)c.removeChild(S);if(typeof y=="function"){var z=y;y=function(){var le=og($);z.call(le)}}var $=M0(c,0,!1,null,null,!1,!1,"",BE);return c._reactRootContainer=$,c[Ds]=$.current,Hu(c.nodeType===8?c.parentNode:c),qa(function(){sg(h,$,p,y)}),$}function cg(c,h,p,y,S){var T=p._reactRootContainer;if(T){var M=T;if(typeof S=="function"){var z=S;S=function(){var $=og(M);z.call($)}}sg(h,M,c,S)}else M=Yj(p,h,c,S,y);return og(M)}w1=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var p=Mu(h.pendingLanes);p!==0&&(iv(h,p|1),Tr(h,on()),(gt&6)===0&&(ec=on()+500,zo()))}break;case 13:qa(function(){var y=js(c,1);if(y!==null){var S=cr();Ai(y,c,1,S)}}),A0(c,1)}},sv=function(c){if(c.tag===13){var h=js(c,134217728);if(h!==null){var p=cr();Ai(h,c,134217728,p)}A0(c,134217728)}},C1=function(c){if(c.tag===13){var h=Uo(c),p=js(c,h);if(p!==null){var y=cr();Ai(p,c,h,y)}A0(c,h)}},S1=function(){return Rt},b1=function(c,h){var p=Rt;try{return Rt=c,h()}finally{Rt=p}},Va=function(c,h,p){switch(h){case"input":if(nn(c,p),h=p.name,p.type==="radio"&&h!=null){for(p=c;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<p.length;h++){var y=p[h];if(y!==c&&y.form===c.form){var S=Tf(y);if(!S)throw Error(t(90));Ke(y),nn(y,S)}}}break;case"textarea":ue(c,p);break;case"select":h=p.value,h!=null&&Bt(c,!!p.multiple,h,!1)}},or=E0,rs=qa;var Kj={usingClientEntryPoint:!1,Events:[Ku,Bl,Tf,Pu,Iu,E0]},ch={findFiberByHostInstance:Ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qj={bundleType:ch.bundleType,version:ch.version,rendererPackageName:ch.rendererPackageName,rendererConfig:ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=f1(c),c===null?null:c.stateNode},findFiberByHostInstance:ch.findFiberByHostInstance||Xj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{af=ug.inject(qj),is=ug}catch{}}return kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kj,kr.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D0(h))throw Error(t(200));return Hj(c,h,null,p)},kr.createRoot=function(c,h){if(!D0(c))throw Error(t(299));var p=!1,y="",S=VE;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),h=M0(c,1,!1,null,null,p,!1,y,S),c[Ds]=h.current,Hu(c.nodeType===8?c.parentNode:c),new O0(h)},kr.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=f1(h),c=c===null?null:c.stateNode,c},kr.flushSync=function(c){return qa(c)},kr.hydrate=function(c,h,p){if(!lg(h))throw Error(t(200));return cg(null,c,h,!0,p)},kr.hydrateRoot=function(c,h,p){if(!D0(c))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,S=!1,T="",M=VE;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError)),h=jE(h,null,c,1,p??null,S,!1,T,M),c[Ds]=h.current,Hu(c),y)for(c=0;c<y.length;c++)p=y[c],S=p._getVersion,S=S(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,S]:h.mutableSourceEagerHydrationData.push(p,S);return new ag(h)},kr.render=function(c,h,p){if(!lg(h))throw Error(t(200));return cg(null,c,h,!1,p)},kr.unmountComponentAtNode=function(c){if(!lg(c))throw Error(t(40));return c._reactRootContainer?(qa(function(){cg(null,null,c,!1,function(){c._reactRootContainer=null,c[Ds]=null})}),!0):!1},kr.unstable_batchedUpdates=E0,kr.unstable_renderSubtreeIntoContainer=function(c,h,p,y){if(!lg(p))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return cg(c,h,p,!1,y)},kr.version="18.3.1-next-f1338f8080-20240426",kr}var qE;function P2(){if(qE)return N0.exports;qE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),N0.exports=o5(),N0.exports}var ZE;function a5(){if(ZE)return hg;ZE=1;var n=P2();return hg.createRoot=n.createRoot,hg.hydrateRoot=n.hydrateRoot,hg}var l5=a5(),E=Ww();const mn=jm(E),c5=e5({__proto__:null,default:mn},[E]);var hh={},JE;function u5(){if(JE)return hh;JE=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.parse=o,hh.serialize=u;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,m){const v=new s,x=g.length;if(x<2)return v;const w=(m==null?void 0:m.decode)||d;let C=0;do{const b=g.indexOf("=",C);if(b===-1)break;const k=g.indexOf(";",C),R=k===-1?x:k;if(b>R){C=g.lastIndexOf(";",b-1)+1;continue}const P=a(g,C,b),A=l(g,b,P),O=g.slice(P,A);if(v[O]===void 0){let D=a(g,b+1,R),j=l(g,R,D);const Q=w(g.slice(D,j));v[O]=Q}C=R+1}while(C<x);return v}function a(g,m,v){do{const x=g.charCodeAt(m);if(x!==32&&x!==9)return m}while(++m<v);return v}function l(g,m,v){for(;m>v;){const x=g.charCodeAt(--m);if(x!==32&&x!==9)return m+1}return v}function u(g,m,v){const x=(v==null?void 0:v.encode)||encodeURIComponent;if(!n.test(g))throw new TypeError(`argument name is invalid: ${g}`);const w=x(m);if(!e.test(w))throw new TypeError(`argument val is invalid: ${m}`);let C=g+"="+w;if(!v)return C;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);C+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);C+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);C+="; Path="+v.path}if(v.expires){if(!f(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);C+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(C+="; HttpOnly"),v.secure&&(C+="; Secure"),v.partitioned&&(C+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return C}function d(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function f(g){return i.call(g)==="[object Date]"}return hh}u5();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QE="popstate";function h5(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return c_("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:td(i)}return f5(e,t,null,n)}function Zt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ki(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d5(){return Math.random().toString(36).substring(2,10)}function eT(n,e){return{usr:n.state,key:n.key,idx:e}}function c_(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?su(e):e,state:t,key:e&&e.key||r||d5()}}function td({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function su(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function f5(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let w=d(),C=w==null?null:w-u;u=w,l&&l({action:a,location:x.location,delta:C})}function g(w,C){a="PUSH";let b=c_(x.location,w,C);u=d()+1;let k=eT(b,u),R=x.createHref(b);try{o.pushState(k,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(R)}s&&l&&l({action:a,location:x.location,delta:1})}function m(w,C){a="REPLACE";let b=c_(x.location,w,C);u=d();let k=eT(b,u),R=x.createHref(b);o.replaceState(k,"",R),s&&l&&l({action:a,location:x.location,delta:0})}function v(w){let C=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:td(w);return b=b.replace(/ $/,"%20"),Zt(C,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,C)}let x={get action(){return a},get location(){return n(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(QE,f),l=w,()=>{i.removeEventListener(QE,f),l=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let C=v(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:m,go(w){return o.go(w)}};return x}function I2(n,e,t="/"){return g5(n,e,t,!1)}function g5(n,e,t,r){let i=typeof e=="string"?su(e):e,s=go(i.pathname||"/",t);if(s==null)return null;let o=M2(n);p5(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=T5(s);a=b5(o[l],u,r)}return a}function M2(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Zt(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=ro([r,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(Zt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),M2(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:C5(u,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of A2(s.path))i(s,o,l)}),e}function A2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=A2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function p5(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:S5(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var m5=/^:[\w-]+$/,y5=3,v5=2,x5=1,_5=10,w5=-2,tT=n=>n==="*";function C5(n,e){let t=n.split("/"),r=t.length;return t.some(tT)&&(r+=w5),e&&(r+=v5),t.filter(i=>!tT(i)).reduce((i,s)=>i+(m5.test(s)?y5:s===""?x5:_5),r)}function S5(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function b5(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=zp({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),g=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=zp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:ro([s,f.pathname]),pathnameBase:I5(ro([s,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(s=ro([s,f.pathnameBase]))}return o}function zp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=E5(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},g)=>{if(d==="*"){let v=a[g]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[g];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function E5(n,e=!1,t=!0){Ki(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function T5(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ki(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function go(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function k5(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?su(n):n;return{pathname:t?t.startsWith("/")?t:R5(t,e):e,search:M5(r),hash:A5(i)}}function R5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function V0(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P5(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function O2(n){let e=P5(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function D2(n,e,t,r=!1){let i;typeof n=="string"?i=su(n):(i={...n},Zt(!i.pathname||!i.pathname.includes("?"),V0("?","pathname","search",i)),Zt(!i.pathname||!i.pathname.includes("#"),V0("#","pathname","hash",i)),Zt(!i.search||!i.search.includes("#"),V0("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}a=f>=0?e[f]:"/"}let l=k5(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var ro=n=>n.join("/").replace(/\/\/+/g,"/"),I5=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),M5=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,A5=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function O5(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var L2=["POST","PUT","PATCH","DELETE"];new Set(L2);var D5=["GET",...L2];new Set(D5);var ou=E.createContext(null);ou.displayName="DataRouter";var zm=E.createContext(null);zm.displayName="DataRouterState";var F2=E.createContext({isTransitioning:!1});F2.displayName="ViewTransition";var L5=E.createContext(new Map);L5.displayName="Fetchers";var F5=E.createContext(null);F5.displayName="Await";var Ps=E.createContext(null);Ps.displayName="Navigation";var Od=E.createContext(null);Od.displayName="Location";var Is=E.createContext({outlet:null,matches:[],isDataRoute:!1});Is.displayName="Route";var $w=E.createContext(null);$w.displayName="RouteError";function N5(n,{relative:e}={}){Zt(Dd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=E.useContext(Ps),{hash:i,pathname:s,search:o}=Ld(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:ro([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Dd(){return E.useContext(Od)!=null}function Ma(){return Zt(Dd(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Od).location}var N2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j2(n){E.useContext(Ps).static||E.useLayoutEffect(n)}function bl(){let{isDataRoute:n}=E.useContext(Is);return n?q5():j5()}function j5(){Zt(Dd(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(ou),{basename:e,navigator:t}=E.useContext(Ps),{matches:r}=E.useContext(Is),{pathname:i}=Ma(),s=JSON.stringify(O2(r)),o=E.useRef(!1);return j2(()=>{o.current=!0}),E.useCallback((l,u={})=>{if(Ki(o.current,N2),!o.current)return;if(typeof l=="number"){t.go(l);return}let d=D2(l,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ro([e,d.pathname])),(u.replace?t.replace:t.push)(d,u.state,u)},[e,t,s,i,n])}E.createContext(null);function Eo(){let{matches:n}=E.useContext(Is),e=n[n.length-1];return e?e.params:{}}function Ld(n,{relative:e}={}){let{matches:t}=E.useContext(Is),{pathname:r}=Ma(),i=JSON.stringify(O2(t));return E.useMemo(()=>D2(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function z5(n,e){return z2(n,e)}function z2(n,e,t,r){var b;Zt(Dd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=E.useContext(Ps),{matches:o}=E.useContext(Is),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let k=f&&f.path||"";V2(u,!f||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let g=Ma(),m;if(e){let k=typeof e=="string"?su(e):e;Zt(d==="/"||((b=k.pathname)==null?void 0:b.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${k.pathname}" was given in the \`location\` prop.`),m=k}else m=g;let v=m.pathname||"/",x=v;if(d!=="/"){let k=d.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=!s&&t&&t.matches&&t.matches.length>0?t.matches:I2(n,{pathname:x});Ki(f||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ki(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=$5(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:ro([d,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:ro([d,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,t,r);return e&&C?E.createElement(Od.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},C):C}function V5(){let n=K5(),e=O5(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:s},"ErrorBoundary")," or"," ",E.createElement("code",{style:s},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:i},t):null,o)}var B5=E.createElement(V5,null),G5=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?E.createElement(Is.Provider,{value:this.props.routeContext},E.createElement($w.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function W5({routeContext:n,match:e,children:t}){let r=E.useContext(ou);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(Is.Provider,{value:n},t)}function $5(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Zt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:d,errors:f}=t,g=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||g){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,d)=>{let f,g=!1,m=null,v=null;t&&(f=s&&u.route.id?s[u.route.id]:void 0,m=u.route.errorElement||B5,o&&(a<0&&d===0?(V2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):a===d&&(g=!0,v=u.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,d+1)),w=()=>{let C;return f?C=m:g?C=v:u.route.Component?C=E.createElement(u.route.Component,null):u.route.element?C=u.route.element:C=l,E.createElement(W5,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:t!=null},children:C})};return t&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?E.createElement(G5,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}function Uw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U5(n){let e=E.useContext(ou);return Zt(e,Uw(n)),e}function H5(n){let e=E.useContext(zm);return Zt(e,Uw(n)),e}function X5(n){let e=E.useContext(Is);return Zt(e,Uw(n)),e}function Hw(n){let e=X5(n),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Y5(){return Hw("useRouteId")}function K5(){var r;let n=E.useContext($w),e=H5("useRouteError"),t=Hw("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function q5(){let{router:n}=U5("useNavigate"),e=Hw("useNavigate"),t=E.useRef(!1);return j2(()=>{t.current=!0}),E.useCallback(async(i,s={})=>{Ki(t.current,N2),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var nT={};function V2(n,e,t){!e&&!nT[n]&&(nT[n]=!0,Ki(!1,t))}E.memo(Z5);function Z5({routes:n,future:e,state:t}){return z2(n,void 0,t,e)}function yc(n){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function J5({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Zt(!Dd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=E.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=su(t));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:g="default"}=t,m=E.useMemo(()=>{let v=go(l,o);return v==null?null:{location:{pathname:v,search:u,hash:d,state:f,key:g},navigationType:r}},[o,l,u,d,f,g,r]);return Ki(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:E.createElement(Ps.Provider,{value:a},E.createElement(Od.Provider,{children:e,value:m}))}function Q5({children:n,location:e}){return z5(u_(n),e)}function u_(n,e=[]){let t=[];return E.Children.forEach(n,(r,i)=>{if(!E.isValidElement(r))return;let s=[...e,i];if(r.type===E.Fragment){t.push.apply(t,u_(r.props.children,s));return}Zt(r.type===yc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=u_(r.props.children,s)),t.push(o)}),t}var xp="get",_p="application/x-www-form-urlencoded";function Vm(n){return n!=null&&typeof n.tagName=="string"}function ez(n){return Vm(n)&&n.tagName.toLowerCase()==="button"}function tz(n){return Vm(n)&&n.tagName.toLowerCase()==="form"}function nz(n){return Vm(n)&&n.tagName.toLowerCase()==="input"}function rz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iz(n,e){return n.button===0&&(!e||e==="_self")&&!rz(n)}function h_(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function sz(n,e){let t=h_(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}var dg=null;function oz(){if(dg===null)try{new FormData(document.createElement("form"),0),dg=!1}catch{dg=!0}return dg}var az=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B0(n){return n!=null&&!az.has(n)?(Ki(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_p}"`),null):n}function lz(n,e){let t,r,i,s,o;if(tz(n)){let a=n.getAttribute("action");r=a?go(a,e):null,t=n.getAttribute("method")||xp,i=B0(n.getAttribute("enctype"))||_p,s=new FormData(n)}else if(ez(n)||nz(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?go(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||xp,i=B0(n.getAttribute("formenctype"))||B0(a.getAttribute("enctype"))||_p,s=new FormData(a,n),!oz()){let{name:u,type:d,value:f}=n;if(d==="image"){let g=u?`${u}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else u&&s.append(u,f)}}else{if(Vm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xp,r=null,i=_p,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}function Xw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function cz(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uz(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hz(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await cz(s,t);return o.links?o.links():[]}return[]}));return pz(r.flat(1).filter(uz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rT(n,e,t,r,i,s){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var d;return t[u].pathname!==l.pathname||((d=t[u].route.path)==null?void 0:d.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function dz(n,e,{includeHydrateFallback:t}={}){return fz(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function fz(n){return[...new Set(n)]}function gz(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function pz(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(gz(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function mz(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&go(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function B2(){let n=E.useContext(ou);return Xw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yz(){let n=E.useContext(zm);return Xw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Yw=E.createContext(void 0);Yw.displayName="FrameworkContext";function G2(){let n=E.useContext(Yw);return Xw(n,"You must render this element inside a <HydratedRouter> element"),n}function vz(n,e){let t=E.useContext(Yw),[r,i]=E.useState(!1),[s,o]=E.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,g=E.useRef(null);E.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let x=C=>{C.forEach(b=>{o(b.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[n]),E.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let m=()=>{i(!0)},v=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,g,{}]:[s,g,{onFocus:dh(a,m),onBlur:dh(l,v),onMouseEnter:dh(u,m),onMouseLeave:dh(d,v),onTouchStart:dh(f,m)}]:[!1,g,{}]}function dh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function xz({page:n,...e}){let{router:t}=B2(),r=E.useMemo(()=>I2(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?E.createElement(wz,{page:n,matches:r,...e}):null}function _z(n){let{manifest:e,routeModules:t}=G2(),[r,i]=E.useState([]);return E.useEffect(()=>{let s=!1;return hz(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function wz({page:n,matches:e,...t}){let r=Ma(),{manifest:i,routeModules:s}=G2(),{basename:o}=B2(),{loaderData:a,matches:l}=yz(),u=E.useMemo(()=>rT(n,e,l,i,r,"data"),[n,e,l,i,r]),d=E.useMemo(()=>rT(n,e,l,i,r,"assets"),[n,e,l,i,r]),f=E.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(C=>{var k;let b=i.routes[C.route.id];!b||!b.hasLoader||(!u.some(R=>R.route.id===C.route.id)&&C.route.id in a&&((k=s[C.route.id])!=null&&k.shouldRevalidate)||b.hasClientLoader?x=!0:v.add(C.route.id))}),v.size===0)return[];let w=mz(n,o);return x&&v.size>0&&w.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[w.pathname+w.search]},[o,a,r,i,u,e,n,s]),g=E.useMemo(()=>dz(d,i),[d,i]),m=_z(d);return E.createElement(E.Fragment,null,f.map(v=>E.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),g.map(v=>E.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),m.map(({key:v,link:x})=>E.createElement("link",{key:v,...x})))}function Cz(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var W2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{W2&&(window.__reactRouterVersion="7.5.0")}catch{}function Sz({basename:n,children:e,window:t}){let r=E.useRef();r.current==null&&(r.current=h5({window:t,v5Compat:!0}));let i=r.current,[s,o]=E.useState({action:i.action,location:i.location}),a=E.useCallback(l=>{E.startTransition(()=>o(l))},[o]);return E.useLayoutEffect(()=>i.listen(a),[i,a]),E.createElement(J5,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var $2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$c=E.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f,...g},m){let{basename:v}=E.useContext(Ps),x=typeof u=="string"&&$2.test(u),w,C=!1;if(typeof u=="string"&&x&&(w=u,W2))try{let j=new URL(window.location.href),Q=u.startsWith("//")?new URL(j.protocol+u):new URL(u),X=go(Q.pathname,v);Q.origin===j.origin&&X!=null?u=X+Q.search+Q.hash:C=!0}catch{Ki(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=N5(u,{relative:i}),[k,R,P]=vz(r,g),A=kz(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function O(j){e&&e(j),j.defaultPrevented||A(j)}let D=E.createElement("a",{...g,...P,href:w||b,onClick:C||s?e:O,ref:Cz(m,R),target:l,"data-discover":!x&&t==="render"?"true":void 0});return k&&!x?E.createElement(E.Fragment,null,D,E.createElement(xz,{page:b})):D});$c.displayName="Link";var bz=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},d){let f=Ld(o,{relative:u.relative}),g=Ma(),m=E.useContext(zm),{navigator:v,basename:x}=E.useContext(Ps),w=m!=null&&Az(f)&&a===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=g.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(b=b.toLowerCase(),k=k?k.toLowerCase():null,C=C.toLowerCase()),k&&x&&(k=go(k,x)||k);const R=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let P=b===C||!i&&b.startsWith(C)&&b.charAt(R)==="/",A=k!=null&&(k===C||!i&&k.startsWith(C)&&k.charAt(C.length)==="/"),O={isActive:P,isPending:A,isTransitioning:w},D=P?e:void 0,j;typeof r=="function"?j=r(O):j=[r,P?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let Q=typeof s=="function"?s(O):s;return E.createElement($c,{...u,"aria-current":D,className:j,ref:d,style:Q,to:o,viewTransition:a},typeof l=="function"?l(O):l)});bz.displayName="NavLink";var Ez=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=xp,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...g},m)=>{let v=Iz(),x=Mz(a,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",C=typeof a=="string"&&$2.test(a),b=k=>{if(l&&l(k),k.defaultPrevented)return;k.preventDefault();let R=k.nativeEvent.submitter,P=(R==null?void 0:R.getAttribute("formmethod"))||o;v(R||k.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:i,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return E.createElement("form",{ref:m,method:w,action:x,onSubmit:r?l:b,...g,"data-discover":!C&&n==="render"?"true":void 0})});Ez.displayName="Form";function Tz(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U2(n){let e=E.useContext(ou);return Zt(e,Tz(n)),e}function kz(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=bl(),l=Ma(),u=Ld(n,{relative:s});return E.useCallback(d=>{if(iz(d,e)){d.preventDefault();let f=t!==void 0?t:td(l)===td(u);a(n,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,t,r,e,n,i,s,o])}function Kw(n){Ki(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=E.useRef(h_(n)),t=E.useRef(!1),r=Ma(),i=E.useMemo(()=>sz(r.search,t.current?null:e.current),[r.search]),s=bl(),o=E.useCallback((a,l)=>{const u=h_(typeof a=="function"?a(i):a);t.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var Rz=0,Pz=()=>`__${String(++Rz)}__`;function Iz(){let{router:n}=U2("useSubmit"),{basename:e}=E.useContext(Ps),t=Y5();return E.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=lz(r,e);if(i.navigate===!1){let d=i.fetcherKey||Pz();await n.fetch(d,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function Mz(n,{relative:e}={}){let{basename:t}=E.useContext(Ps),r=E.useContext(Is);Zt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ld(n||".",{relative:e})},o=Ma();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();s.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:ro([t,s.pathname])),td(s)}function Az(n,e={}){let t=E.useContext(F2);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=U2("useViewTransitionState"),i=Ld(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=go(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=go(t.nextLocation.pathname,r)||t.nextLocation.pathname;return zp(i.pathname,o)!=null||zp(i.pathname,s)!=null}new TextEncoder;const Oz=1,Dz=1e6;let G0=0;function Lz(){return G0=(G0+1)%Number.MAX_SAFE_INTEGER,G0.toString()}const W0=new Map,iT=n=>{if(W0.has(n))return;const e=setTimeout(()=>{W0.delete(n),zh({type:"REMOVE_TOAST",toastId:n})},Dz);W0.set(n,e)},Fz=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,Oz)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?iT(t):n.toasts.forEach(r=>{iT(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},wp=[];let Cp={toasts:[]};function zh(n){Cp=Fz(Cp,n),wp.forEach(e=>{e(Cp)})}function Nz({...n}){const e=Lz(),t=i=>zh({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>zh({type:"DISMISS_TOAST",toastId:e});return zh({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function H2(){const[n,e]=E.useState(Cp);return E.useEffect(()=>(wp.push(e),()=>{const t=wp.indexOf(e);t>-1&&wp.splice(t,1)}),[n]),{...n,toast:Nz,dismiss:t=>zh({type:"DISMISS_TOAST",toastId:t})}}var au=P2();const jz=jm(au);function ke(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function sT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function qw(...n){return e=>{let t=!1;const r=n.map(i=>{const s=sT(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():sT(n[i],null)}}}}function kt(...n){return E.useCallback(qw(...n),n)}function zz(n,e){const t=E.createContext(e),r=s=>{const{children:o,...a}=s,l=E.useMemo(()=>a,Object.values(a));return _.jsx(t.Provider,{value:l,children:o})};r.displayName=n+"Provider";function i(s){const o=E.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function Ms(n,e=[]){let t=[];function r(s,o){const a=E.createContext(o),l=t.length;t=[...t,o];const u=f=>{var C;const{scope:g,children:m,...v}=f,x=((C=g==null?void 0:g[n])==null?void 0:C[l])||a,w=E.useMemo(()=>v,Object.values(v));return _.jsx(x.Provider,{value:w,children:m})};u.displayName=s+"Provider";function d(f,g){var x;const m=((x=g==null?void 0:g[n])==null?void 0:x[l])||a,v=E.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=t.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return E.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,Vz(i,...e)]}function Vz(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...a,...f}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function pl(n){const e=Gz(n),t=E.forwardRef((r,i)=>{const{children:s,...o}=r,a=E.Children.toArray(s),l=a.find($z);if(l){const u=l.props.children,d=a.map(f=>f===l?E.Children.count(u)>1?E.Children.only(null):E.isValidElement(u)?u.props.children:null:f);return _.jsx(e,{...o,ref:i,children:E.isValidElement(u)?E.cloneElement(u,void 0,d):null})}return _.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var Bz=pl("Slot");function Gz(n){const e=E.forwardRef((t,r)=>{const{children:i,...s}=t;if(E.isValidElement(i)){const o=Hz(i),a=Uz(s,i.props);return i.type!==E.Fragment&&(a.ref=r?qw(r,o):o),E.cloneElement(i,a)}return E.Children.count(i)>1?E.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Wz=Symbol("radix.slottable");function $z(n){return E.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Wz}function Uz(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function Hz(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Bm(n){const e=n+"CollectionProvider",[t,r]=Ms(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:w,children:C}=x,b=mn.useRef(null),k=mn.useRef(new Map).current;return _.jsx(i,{scope:w,itemMap:k,collectionRef:b,children:C})};o.displayName=e;const a=n+"CollectionSlot",l=pl(a),u=mn.forwardRef((x,w)=>{const{scope:C,children:b}=x,k=s(a,C),R=kt(w,k.collectionRef);return _.jsx(l,{ref:R,children:b})});u.displayName=a;const d=n+"CollectionItemSlot",f="data-radix-collection-item",g=pl(d),m=mn.forwardRef((x,w)=>{const{scope:C,children:b,...k}=x,R=mn.useRef(null),P=kt(w,R),A=s(d,C);return mn.useEffect(()=>(A.itemMap.set(R,{ref:R,...k}),()=>void A.itemMap.delete(R))),_.jsx(g,{[f]:"",ref:P,children:b})});m.displayName=d;function v(x){const w=s(n+"CollectionConsumer",x);return mn.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const k=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((A,O)=>k.indexOf(A.ref.current)-k.indexOf(O.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,r]}var Xz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qe=Xz.reduce((n,e)=>{const t=pl(`Primitive.${e}`),r=E.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Zw(n,e){n&&au.flushSync(()=>n.dispatchEvent(e))}function zn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Yz(n,e=globalThis==null?void 0:globalThis.document){const t=zn(n);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Kz="DismissableLayer",d_="dismissableLayer.update",qz="dismissableLayer.pointerDownOutside",Zz="dismissableLayer.focusOutside",oT,X2=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fd=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,u=E.useContext(X2),[d,f]=E.useState(null),g=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=E.useState({}),v=kt(e,O=>f(O)),x=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=x.indexOf(w),b=d?x.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,R=b>=C,P=Qz(O=>{const D=O.target,j=[...u.branches].some(Q=>Q.contains(D));!R||j||(i==null||i(O),o==null||o(O),O.defaultPrevented||a==null||a())},g),A=e3(O=>{const D=O.target;[...u.branches].some(Q=>Q.contains(D))||(s==null||s(O),o==null||o(O),O.defaultPrevented||a==null||a())},g);return Yz(O=>{b===u.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&a&&(O.preventDefault(),a()))},g),E.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(oT=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),aT(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=oT)}},[d,g,t,u]),E.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),aT())},[d,u]),E.useEffect(()=>{const O=()=>m({});return document.addEventListener(d_,O),()=>document.removeEventListener(d_,O)},[]),_.jsx(Qe.div,{...l,ref:v,style:{pointerEvents:k?R?"auto":"none":void 0,...n.style},onFocusCapture:ke(n.onFocusCapture,A.onFocusCapture),onBlurCapture:ke(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ke(n.onPointerDownCapture,P.onPointerDownCapture)})});Fd.displayName=Kz;var Jz="DismissableLayerBranch",Y2=E.forwardRef((n,e)=>{const t=E.useContext(X2),r=E.useRef(null),i=kt(e,r);return E.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),_.jsx(Qe.div,{...n,ref:i})});Y2.displayName=Jz;function Qz(n,e=globalThis==null?void 0:globalThis.document){const t=zn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){K2(qz,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function e3(n,e=globalThis==null?void 0:globalThis.document){const t=zn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!r.current&&K2(Zz,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aT(){const n=new CustomEvent(d_);document.dispatchEvent(n)}function K2(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Zw(i,s):i.dispatchEvent(s)}var t3=Fd,n3=Y2,rr=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},r3="Portal",Nd=E.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=E.useState(!1);rr(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?jz.createPortal(_.jsx(Qe.div,{...r,ref:e}),o):null});Nd.displayName=r3;function i3(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var es=n=>{const{present:e,children:t}=n,r=s3(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),s=kt(r.ref,o3(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:s}):null};es.displayName="Presence";function s3(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),s=E.useRef("none"),o=n?"mounted":"unmounted",[a,l]=i3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const u=fg(r.current);s.current=a==="mounted"?u:"none"},[a]),rr(()=>{const u=r.current,d=i.current;if(d!==n){const g=s.current,m=fg(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&g!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),rr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const x=fg(r.current).includes(m.animationName);if(m.target===e&&x&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},g=m=>{m.target===e&&(s.current=fg(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(u=>{u&&(r.current=getComputedStyle(u)),t(u)},[])}}function fg(n){return(n==null?void 0:n.animationName)||"none"}function o3(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ml({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=a3({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=zn(t),l=E.useCallback(u=>{if(s){const f=typeof u=="function"?u(n):u;f!==n&&a(f)}else i(u)},[s,n,i,a]);return[o,l]}function a3({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,i=E.useRef(r),s=zn(e);return E.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}var l3="VisuallyHidden",Gm=E.forwardRef((n,e)=>_.jsx(Qe.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Gm.displayName=l3;var Jw="ToastProvider",[Qw,c3,u3]=Bm("Toast"),[q2,Tee]=Ms("Toast",[u3]),[h3,Wm]=q2(Jw),Z2=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=E.useState(null),[u,d]=E.useState(0),f=E.useRef(!1),g=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jw}\`. Expected non-empty \`string\`.`),_.jsx(Qw.Provider,{scope:e,children:_.jsx(h3,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:E.useCallback(()=>d(m=>m+1),[]),onToastRemove:E.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:g,children:o})})};Z2.displayName=Jw;var J2="ToastViewport",d3=["F8"],f_="toast.viewportPause",g_="toast.viewportResume",Q2=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=d3,label:i="Notifications ({hotkey})",...s}=n,o=Wm(J2,t),a=c3(t),l=E.useRef(null),u=E.useRef(null),d=E.useRef(null),f=E.useRef(null),g=kt(e,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;E.useEffect(()=>{const w=C=>{var k;r.length!==0&&r.every(R=>C[R]||C.code===R)&&((k=f.current)==null||k.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),E.useEffect(()=>{const w=l.current,C=f.current;if(v&&w&&C){const b=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(f_);C.dispatchEvent(A),o.isClosePausedRef.current=!0}},k=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(g_);C.dispatchEvent(A),o.isClosePausedRef.current=!1}},R=A=>{!w.contains(A.relatedTarget)&&k()},P=()=>{w.contains(document.activeElement)||k()};return w.addEventListener("focusin",b),w.addEventListener("focusout",R),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",P),window.addEventListener("blur",b),window.addEventListener("focus",k),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",R),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",P),window.removeEventListener("blur",b),window.removeEventListener("focus",k)}}},[v,o.isClosePausedRef]);const x=E.useCallback(({tabbingDirection:w})=>{const b=a().map(k=>{const R=k.ref.current,P=[R,...E3(R)];return w==="forwards"?P:P.reverse()});return(w==="forwards"?b.reverse():b).flat()},[a]);return E.useEffect(()=>{const w=f.current;if(w){const C=b=>{var P,A,O;const k=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!k){const D=document.activeElement,j=b.shiftKey;if(b.target===w&&j){(P=u.current)==null||P.focus();return}const W=x({tabbingDirection:j?"backwards":"forwards"}),G=W.findIndex(V=>V===D);$0(W.slice(G+1))?b.preventDefault():j?(A=u.current)==null||A.focus():(O=d.current)==null||O.focus()}};return w.addEventListener("keydown",C),()=>w.removeEventListener("keydown",C)}},[a,x]),_.jsxs(n3,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&_.jsx(p_,{ref:u,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});$0(w)}}),_.jsx(Qw.Slot,{scope:t,children:_.jsx(Qe.ol,{tabIndex:-1,...s,ref:g})}),v&&_.jsx(p_,{ref:d,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});$0(w)}})]})});Q2.displayName=J2;var eP="ToastFocusProxy",p_=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Wm(eP,t);return _.jsx(Gm,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});p_.displayName=eP;var $m="Toast",f3="toast.swipeStart",g3="toast.swipeMove",p3="toast.swipeCancel",m3="toast.swipeEnd",tP=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a=!0,l]=ml({prop:r,defaultProp:i,onChange:s});return _.jsx(es,{present:t||a,children:_.jsx(x3,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:zn(n.onPause),onResume:zn(n.onResume),onSwipeStart:ke(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(n.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ke(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(n.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});tP.displayName=$m;var[y3,v3]=q2($m,{onClose(){}}),x3=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:g,onSwipeEnd:m,...v}=n,x=Wm($m,t),[w,C]=E.useState(null),b=kt(e,V=>C(V)),k=E.useRef(null),R=E.useRef(null),P=i||x.duration,A=E.useRef(0),O=E.useRef(P),D=E.useRef(0),{onToastAdd:j,onToastRemove:Q}=x,X=zn(()=>{var ne;(w==null?void 0:w.contains(document.activeElement))&&((ne=x.viewport)==null||ne.focus()),o()}),W=E.useCallback(V=>{!V||V===1/0||(window.clearTimeout(D.current),A.current=new Date().getTime(),D.current=window.setTimeout(X,V))},[X]);E.useEffect(()=>{const V=x.viewport;if(V){const ne=()=>{W(O.current),u==null||u()},U=()=>{const oe=new Date().getTime()-A.current;O.current=O.current-oe,window.clearTimeout(D.current),l==null||l()};return V.addEventListener(f_,U),V.addEventListener(g_,ne),()=>{V.removeEventListener(f_,U),V.removeEventListener(g_,ne)}}},[x.viewport,P,l,u,W]),E.useEffect(()=>{s&&!x.isClosePausedRef.current&&W(P)},[s,P,x.isClosePausedRef,W]),E.useEffect(()=>(j(),()=>Q()),[j,Q]);const G=E.useMemo(()=>w?lP(w):null,[w]);return x.viewport?_.jsxs(_.Fragment,{children:[G&&_.jsx(_3,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),_.jsx(y3,{scope:t,onClose:X,children:au.createPortal(_.jsx(Qw.ItemSlot,{scope:t,children:_.jsx(t3,{asChild:!0,onEscapeKeyDown:ke(a,()=>{x.isFocusedToastEscapeKeyDownRef.current||X(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(Qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ke(n.onKeyDown,V=>{V.key==="Escape"&&(a==null||a(V.nativeEvent),V.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:ke(n.onPointerDown,V=>{V.button===0&&(k.current={x:V.clientX,y:V.clientY})}),onPointerMove:ke(n.onPointerMove,V=>{if(!k.current)return;const ne=V.clientX-k.current.x,U=V.clientY-k.current.y,oe=!!R.current,F=["left","right"].includes(x.swipeDirection),K=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,I=F?K(0,ne):0,N=F?0:K(0,U),q=V.pointerType==="touch"?10:2,L={x:I,y:N},ee={originalEvent:V,delta:L};oe?(R.current=L,gg(g3,f,ee,{discrete:!1})):lT(L,x.swipeDirection,q)?(R.current=L,gg(f3,d,ee,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(ne)>q||Math.abs(U)>q)&&(k.current=null)}),onPointerUp:ke(n.onPointerUp,V=>{const ne=R.current,U=V.target;if(U.hasPointerCapture(V.pointerId)&&U.releasePointerCapture(V.pointerId),R.current=null,k.current=null,ne){const oe=V.currentTarget,F={originalEvent:V,delta:ne};lT(ne,x.swipeDirection,x.swipeThreshold)?gg(m3,m,F,{discrete:!0}):gg(p3,g,F,{discrete:!0}),oe.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),_3=n=>{const{__scopeToast:e,children:t,...r}=n,i=Wm($m,e),[s,o]=E.useState(!1),[a,l]=E.useState(!1);return S3(()=>o(!0)),E.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:_.jsx(Nd,{asChild:!0,children:_.jsx(Gm,{...r,children:s&&_.jsxs(_.Fragment,{children:[i.label," ",t]})})})},w3="ToastTitle",nP=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return _.jsx(Qe.div,{...r,ref:e})});nP.displayName=w3;var C3="ToastDescription",rP=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return _.jsx(Qe.div,{...r,ref:e})});rP.displayName=C3;var iP="ToastAction",sP=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?_.jsx(aP,{altText:t,asChild:!0,children:_.jsx(eC,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${iP}\`. Expected non-empty \`string\`.`),null)});sP.displayName=iP;var oP="ToastClose",eC=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=v3(oP,t);return _.jsx(aP,{asChild:!0,children:_.jsx(Qe.button,{type:"button",...r,ref:e,onClick:ke(n.onClick,i.onClose)})})});eC.displayName=oP;var aP=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return _.jsx(Qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function lP(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),b3(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...lP(r))}}),e}function gg(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Zw(i,s):i.dispatchEvent(s)}var lT=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function S3(n=()=>{}){const e=zn(n);rr(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function b3(n){return n.nodeType===n.ELEMENT_NODE}function E3(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function $0(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var T3=Z2,cP=Q2,uP=tP,hP=nP,dP=rP,fP=sP,gP=eC;function pP(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=pP(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Um(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=pP(n))&&(r&&(r+=" "),r+=e);return r}const cT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,uT=Um,jd=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return uT(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=t==null?void 0:t[u],f=s==null?void 0:s[u];if(d===null)return null;const g=cT(d)||cT(f);return i[u][g]}),a=t&&Object.entries(t).reduce((u,d)=>{let[f,g]=d;return g===void 0||(u[f]=g),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:g,...m}=d;return Object.entries(m).every(v=>{let[x,w]=v;return Array.isArray(w)?w.includes({...s,...a}[x]):{...s,...a}[x]===w})?[...u,f,g]:u},[]);return uT(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mP=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>E.createElement("svg",{ref:l,...R3,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:mP("lucide",i),...a},[...o.map(([u,d])=>E.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(n,e)=>{const t=E.forwardRef(({className:r,...i},s)=>E.createElement(P3,{ref:s,iconNode:e,className:mP(`lucide-${k3(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=vt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=vt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=vt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=vt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=vt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=vt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=vt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=vt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=vt("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=vt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=vt("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=vt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=vt("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=vt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=vt("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=vt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=vt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=vt("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=vt("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=vt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=vt("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=vt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=vt("Sparkle",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=vt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=vt("Spline",[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=vt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=vt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=vt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tC="-",q3=n=>{const e=J3(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(tC);return a[0]===""&&a.length!==1&&a.shift(),SP(a,e)||Z3(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},SP=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?SP(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(tC);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},fT=/^\[(.+)\]$/,Z3=n=>{if(fT.test(n)){const e=fT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},J3=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)y_(t[i],r,i,e);return r},y_=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:gT(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(Q3(i)){y_(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{y_(o,gT(e,s),t,r)})})},gT=(n,e)=>{let t=n;return e.split(tC).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Q3=n=>n.isThemeGetter,e4=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},v_="!",x_=":",t4=x_.length,n4=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const s=[];let o=0,a=0,l=0,u;for(let v=0;v<i.length;v++){let x=i[v];if(o===0&&a===0){if(x===x_){s.push(i.slice(l,v)),l=v+t4;continue}if(x==="/"){u=v;continue}}x==="["?o++:x==="]"?o--:x==="("?a++:x===")"&&a--}const d=s.length===0?i:i.substring(l),f=r4(d),g=f!==d,m=u&&u>l?u-l:void 0;return{modifiers:s,hasImportantModifier:g,baseClassName:f,maybePostfixModifierPosition:m}};if(e){const i=e+x_,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=s=>t({className:s,parseClassName:i})}return r},r4=n=>n.endsWith(v_)?n.substring(0,n.length-1):n.startsWith(v_)?n.substring(1):n,i4=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},s4=n=>({cache:e4(n.cacheSize),parseClassName:n4(n),sortModifiers:i4(n),...q3(n)}),o4=/\s+/,a4=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=n.trim().split(o4);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{isExternal:f,modifiers:g,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:x}=t(d);if(f){l=d+(l.length>0?" "+l:l);continue}let w=!!x,C=r(w?v.substring(0,x):v);if(!C){if(!w){l=d+(l.length>0?" "+l:l);continue}if(C=r(v),!C){l=d+(l.length>0?" "+l:l);continue}w=!1}const b=s(g).join(":"),k=m?b+v_:b,R=k+C;if(o.includes(R))continue;o.push(R);const P=i(C,w);for(let A=0;A<P.length;++A){const O=P[A];o.push(k+O)}l=d+(l.length>0?" "+l:l)}return l};function l4(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=bP(e))&&(r&&(r+=" "),r+=t);return r}const bP=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=bP(n[r]))&&(t&&(t+=" "),t+=e);return t};function c4(n,...e){let t,r,i,s=o;function o(l){const u=e.reduce((d,f)=>f(d),n());return t=s4(u),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=a4(l,t);return i(l,d),d}return function(){return s(l4.apply(null,arguments))}}const Cn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},EP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,TP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,u4=/^\d+\/\d+$/,h4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,g4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nc=n=>u4.test(n),st=n=>!!n&&!Number.isNaN(Number(n)),Ko=n=>!!n&&Number.isInteger(Number(n)),U0=n=>n.endsWith("%")&&st(n.slice(0,-1)),Gs=n=>h4.test(n),m4=()=>!0,y4=n=>d4.test(n)&&!f4.test(n),kP=()=>!1,v4=n=>g4.test(n),x4=n=>p4.test(n),_4=n=>!Oe(n)&&!De(n),w4=n=>lu(n,IP,kP),Oe=n=>EP.test(n),el=n=>lu(n,MP,y4),H0=n=>lu(n,T4,st),pT=n=>lu(n,RP,kP),C4=n=>lu(n,PP,x4),pg=n=>lu(n,AP,v4),De=n=>TP.test(n),fh=n=>cu(n,MP),S4=n=>cu(n,k4),mT=n=>cu(n,RP),b4=n=>cu(n,IP),E4=n=>cu(n,PP),mg=n=>cu(n,AP,!0),lu=(n,e,t)=>{const r=EP.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},cu=(n,e,t=!1)=>{const r=TP.exec(n);return r?r[1]?e(r[1]):t:!1},RP=n=>n==="position"||n==="percentage",PP=n=>n==="image"||n==="url",IP=n=>n==="length"||n==="size"||n==="bg-size",MP=n=>n==="length",T4=n=>n==="number",k4=n=>n==="family-name",AP=n=>n==="shadow",R4=()=>{const n=Cn("color"),e=Cn("font"),t=Cn("text"),r=Cn("font-weight"),i=Cn("tracking"),s=Cn("leading"),o=Cn("breakpoint"),a=Cn("container"),l=Cn("spacing"),u=Cn("radius"),d=Cn("shadow"),f=Cn("inset-shadow"),g=Cn("text-shadow"),m=Cn("drop-shadow"),v=Cn("blur"),x=Cn("perspective"),w=Cn("aspect"),C=Cn("ease"),b=Cn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...R(),De,Oe],A=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],D=()=>[De,Oe,l],j=()=>[nc,"full","auto",...D()],Q=()=>[Ko,"none","subgrid",De,Oe],X=()=>["auto",{span:["full",Ko,De,Oe]},Ko,De,Oe],W=()=>[Ko,"auto",De,Oe],G=()=>["auto","min","max","fr",De,Oe],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ne=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...D()],oe=()=>[nc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],F=()=>[n,De,Oe],K=()=>[...R(),mT,pT,{position:[De,Oe]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",b4,w4,{size:[De,Oe]}],q=()=>[U0,fh,el],L=()=>["","none","full",u,De,Oe],ee=()=>["",st,fh,el],be=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>[st,U0,mT,pT],ve=()=>["","none",v,De,Oe],Se=()=>["none",st,De,Oe],Ce=()=>["none",st,De,Oe],Ue=()=>[st,De,Oe],Ke=()=>[nc,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gs],breakpoint:[Gs],color:[m4],container:[Gs],"drop-shadow":[Gs],ease:["in","out","in-out"],font:[_4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gs],shadow:[Gs],spacing:["px",st],text:[Gs],"text-shadow":[Gs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nc,Oe,De,w]}],container:["container"],columns:[{columns:[st,Oe,De,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Ko,"auto",De,Oe]}],basis:[{basis:[nc,"full","auto",a,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[st,nc,"auto","initial","none",Oe]}],grow:[{grow:["",st,De,Oe]}],shrink:[{shrink:["",st,De,Oe]}],order:[{order:[Ko,"first","last","none",De,Oe]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...ne(),"normal"]}],"justify-self":[{"justify-self":["auto",...ne()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...ne(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ne(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...ne(),"baseline"]}],"place-self":[{"place-self":["auto",...ne()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[a,"screen",...oe()]}],"min-w":[{"min-w":[a,"screen","none",...oe()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...oe()]}],h:[{h:["screen",...oe()]}],"min-h":[{"min-h":["screen","none",...oe()]}],"max-h":[{"max-h":["screen",...oe()]}],"font-size":[{text:["base",t,fh,el]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,De,H0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",U0,Oe]}],"font-family":[{font:[S4,Oe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,De,Oe]}],"line-clamp":[{"line-clamp":[st,"none",De,H0]}],leading:[{leading:[s,...D()]}],"list-image":[{"list-image":["none",De,Oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,Oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...be(),"wavy"]}],"text-decoration-thickness":[{decoration:[st,"from-font","auto",De,el]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[st,"auto",De,Oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ko,De,Oe],radial:["",De,Oe],conic:[Ko,De,Oe]},E4,C4]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:L()}],"rounded-s":[{"rounded-s":L()}],"rounded-e":[{"rounded-e":L()}],"rounded-t":[{"rounded-t":L()}],"rounded-r":[{"rounded-r":L()}],"rounded-b":[{"rounded-b":L()}],"rounded-l":[{"rounded-l":L()}],"rounded-ss":[{"rounded-ss":L()}],"rounded-se":[{"rounded-se":L()}],"rounded-ee":[{"rounded-ee":L()}],"rounded-es":[{"rounded-es":L()}],"rounded-tl":[{"rounded-tl":L()}],"rounded-tr":[{"rounded-tr":L()}],"rounded-br":[{"rounded-br":L()}],"rounded-bl":[{"rounded-bl":L()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...be(),"hidden","none"]}],"divide-style":[{divide:[...be(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...be(),"none","hidden"]}],"outline-offset":[{"outline-offset":[st,De,Oe]}],"outline-w":[{outline:["",st,fh,el]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",d,mg,pg]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",f,mg,pg]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[st,el]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",g,mg,pg]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[st,De,Oe]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[st]}],"mask-image-linear-from-pos":[{"mask-linear-from":ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":ce()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ce()}],"mask-image-t-to-pos":[{"mask-t-to":ce()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ce()}],"mask-image-r-to-pos":[{"mask-r-to":ce()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ce()}],"mask-image-b-to-pos":[{"mask-b-to":ce()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ce()}],"mask-image-l-to-pos":[{"mask-l-to":ce()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ce()}],"mask-image-x-to-pos":[{"mask-x-to":ce()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ce()}],"mask-image-y-to-pos":[{"mask-y-to":ce()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[De,Oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":ce()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[st]}],"mask-image-conic-from-pos":[{"mask-conic-from":ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":ce()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,Oe]}],filter:[{filter:["","none",De,Oe]}],blur:[{blur:ve()}],brightness:[{brightness:[st,De,Oe]}],contrast:[{contrast:[st,De,Oe]}],"drop-shadow":[{"drop-shadow":["","none",m,mg,pg]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",st,De,Oe]}],"hue-rotate":[{"hue-rotate":[st,De,Oe]}],invert:[{invert:["",st,De,Oe]}],saturate:[{saturate:[st,De,Oe]}],sepia:[{sepia:["",st,De,Oe]}],"backdrop-filter":[{"backdrop-filter":["","none",De,Oe]}],"backdrop-blur":[{"backdrop-blur":ve()}],"backdrop-brightness":[{"backdrop-brightness":[st,De,Oe]}],"backdrop-contrast":[{"backdrop-contrast":[st,De,Oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",st,De,Oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[st,De,Oe]}],"backdrop-invert":[{"backdrop-invert":["",st,De,Oe]}],"backdrop-opacity":[{"backdrop-opacity":[st,De,Oe]}],"backdrop-saturate":[{"backdrop-saturate":[st,De,Oe]}],"backdrop-sepia":[{"backdrop-sepia":["",st,De,Oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,Oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[st,"initial",De,Oe]}],ease:[{ease:["linear","initial",C,De,Oe]}],delay:[{delay:[st,De,Oe]}],animate:[{animate:["none",b,De,Oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,De,Oe]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:Se()}],"rotate-x":[{"rotate-x":Se()}],"rotate-y":[{"rotate-y":Se()}],"rotate-z":[{"rotate-z":Se()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Ue()}],"skew-x":[{"skew-x":Ue()}],"skew-y":[{"skew-y":Ue()}],transform:[{transform:[De,Oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ke()}],"translate-x":[{"translate-x":Ke()}],"translate-y":[{"translate-y":Ke()}],"translate-z":[{"translate-z":Ke()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,Oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,Oe]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[st,fh,el,H0]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},nC=c4(R4);function ct(...n){return nC(Um(n))}const P4=T3,OP=E.forwardRef(({className:n,...e},t)=>_.jsx(cP,{ref:t,className:ct("fixed bottom-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));OP.displayName=cP.displayName;const I4=jd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),DP=E.forwardRef(({className:n,variant:e,...t},r)=>_.jsx(uP,{ref:r,className:ct(I4({variant:e}),n),...t}));DP.displayName=uP.displayName;const M4=E.forwardRef(({className:n,...e},t)=>_.jsx(fP,{ref:t,className:ct("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));M4.displayName=fP.displayName;const LP=E.forwardRef(({className:n,...e},t)=>_.jsx(gP,{ref:t,className:ct("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:_.jsx(K3,{className:"h-4 w-4"})}));LP.displayName=gP.displayName;const FP=E.forwardRef(({className:n,...e},t)=>_.jsx(hP,{ref:t,className:ct("text-sm font-semibold",n),...e}));FP.displayName=hP.displayName;const NP=E.forwardRef(({className:n,...e},t)=>_.jsx(dP,{ref:t,className:ct("text-sm opacity-90",n),...e}));NP.displayName=dP.displayName;function A4(){const{toasts:n}=H2();return _.jsxs(P4,{children:[n.map(function({id:e,title:t,description:r,action:i,close:s=!0,...o}){return _.jsxs(DP,{...o,children:[_.jsxs("div",{className:"grid gap-1",children:[t&&_.jsx(FP,{children:t}),r&&_.jsx(NP,{children:r})]}),i,s&&_.jsx(LP,{})]},e)}),_.jsx(OP,{})]})}function O4(){const[n,e]=E.useState([]),[t,r]=E.useState(null),[i,s]=E.useState({new:[],removed:[],updated:[]});return{attachments:n,watched:i,addAttachment:g=>{if(Array.isArray(g)){e(g);return}s(m=>({...m,new:[...m.new,g]})),e(m=>[...m,g])},updateAttachment:(g,m)=>{const v=t.id,x={id:v,vectors:g,url:t.url,updatedImage:m};if(e(C=>C.map(b=>b.id===v?{...b,vectors:g,updatedImage:m}:b)),r(null),!!i.new.find(C=>C.id===v)){s(C=>{const b=C.new.map(k=>k.id===v?x:k);return{...C,new:b}});return}s(C=>{const b=C.updated.some(k=>k.id===v)?C.updated.map(k=>k.id===v?x:k):[...C.updated,x];return{...C,updated:b}})},removeAttachment:({id:g,url:m})=>{if(e(x=>x.filter(w=>w.id!==g)),!!i.new.find(x=>x.id===g)){s(x=>({...x,new:x.new.filter(w=>w.id!==g)}));return}s(x=>({new:x.new.filter(w=>w.id!==g),updated:x.updated.filter(w=>w.id!==g),removed:[...x.removed,{id:g,url:m}]}))},clear:()=>{e([]),s({new:[],removed:[],updated:[]}),r(null)},currentAttachment:t,selectAttachment:g=>{r(g)},deselectAttachment:()=>{r(null)}}}const D4=()=>{const[n,e]=E.useState(null),t=E.useCallback(r=>{if(!r){e(null);return}if(typeof r!="function")throw new Error("O argumento deve ser uma função.");e(()=>r)},[]);return[n,t]},jP=E.createContext();function L4({children:n}){const e=D4(),{addAttachment:t,attachments:r,clear:i,currentAttachment:s,deselectAttachment:o,removeAttachment:a,selectAttachment:l,updateAttachment:u,watched:d}=O4();return _.jsx(jP.Provider,{value:{registerScreenshotFunction:e,attachments:r,watched:d,addAttachment:t,updateAttachment:u,removeAttachment:a,selectAttachment:l,currentAttachment:s,deselectAttachment:o,clear:i},children:n})}const rC=()=>E.useContext(jP),F4=jd("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function __({className:n,variant:e,...t}){return _.jsx("div",{className:ct(F4({variant:e}),n),...t})}const zP=jd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),tn=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?Bz:"button";return _.jsx(o,{className:ct(zP({variant:e,size:t,className:n})),ref:s,...i})});tn.displayName="Button";const fr=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ct("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));fr.displayName="Card";const Xm=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ct("flex flex-col space-y-1.5 p-6",n),...e}));Xm.displayName="CardHeader";const Ym=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ct("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ym.displayName="CardTitle";const Km=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ct("text-sm text-muted-foreground",n),...e}));Km.displayName="CardDescription";const Uc=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ct("p-6 pt-0",n),...e}));Uc.displayName="CardContent";const VP=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{ref:t,className:ct("flex items-center p-6 pt-0",n),...e}));VP.displayName="CardFooter";const iC="https://apilaudo.inbimplus.app.br/";async function er(n,e="GET",t=null){const r=await fetch(`${iC}${n}`,{method:e,body:t?JSON.stringify(t):null,headers:{"Content-Type":"application/json"}});return r.ok?await r.json():null}const N4={reportId:"AI-RPT-2025-0042"};function j4(){return _.jsx("div",{className:"h-screen bg-gray-100 py-8 px-4 sm:px-6 lg:px-8 font-serif",children:_.jsx("div",{className:"max-w-5xl h-full flex items-center justify-center mx-auto bg-white shadow-md",children:_.jsxs("div",{className:"text-center space-y-2",children:[_.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-blue-600 mx-auto"}),_.jsx("p",{className:"text-sm text-gray-600",children:"Carregando relatório..."})]})})})}function z4(){const{id:n}=Eo(),[e,t]=E.useState(null);return E.useEffect(()=>{er(`/api/v2/relatorios/${n}/ai-conclusao`,"POST").then(r=>{r!=null&&r.id&&t(r)})},[n]),e?_.jsx("div",{className:"min-h-screen bg-gray-50 py-6 px-4 sm:px-6 lg:px-8 font-sans",children:_.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-sm rounded-lg overflow-hidden",children:[_.jsx("div",{className:"border-b p-4 flex justify-between items-center",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 bg-blue-100 flex items-center justify-center rounded-md",children:_.jsx("span",{className:"text-blue-600 font-bold text-xs",children:"IA"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Conclusão Gerada por IA"}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(__,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:e==null?void 0:e.iaVersion}),_.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.criadoEm).toDateString()})]})]})]})}),_.jsxs("div",{className:"p-4 space-y-4",children:[_.jsxs("section",{className:"animate-fade-in",children:[_.jsx("h2",{className:"text-sm font-medium text-gray-700 mb-2",children:"Dados de Entrada"}),_.jsx(fr,{className:"overflow-hidden",children:_.jsx(Uc,{className:"p-3",children:_.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md",children:[_.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center mr-3",children:_.jsx(N3,{className:"h-4 w-4 text-amber-300"})}),_.jsx("div",{children:_.jsxs("p",{className:"text-xs text-gray-500",children:[e==null?void 0:e.numeroDeFotosUtilizadas," imagens"]})})]})})})]}),_.jsxs("section",{className:"animate-fade-in",children:[_.jsx("h2",{className:"text-sm font-medium text-gray-700 mb-2",children:"Conclusão"}),_.jsx(fr,{children:_.jsx(Uc,{className:"p-3",children:_.jsxs("div",{className:"space-y-3",children:[e==null?void 0:e.conclusao,_.jsx("div",{className:"text-xs text-gray-500 italic",children:"Esta é uma avaliação gerada por IA baseada em evidências fotográficas. Recomenda-se uma inspeção profissional no local para confirmar estas conclusões."})]})})})]})]}),_.jsxs("div",{className:"border-t p-3 flex justify-between items-center bg-gray-50",children:[_.jsxs("div",{className:"text-xs text-gray-500",children:["ID do Relatório: ",N4.reportId]}),_.jsx($c,{to:`/reports/${n}/view`,children:_.jsx(tn,{variant:"default",size:"sm",className:"h-8 bg-blue-600 hover:bg-blue-700",children:"Voltar ao relatório"})})]})]})}):_.jsx(j4,{})}function Y(n,e,t){return(e=function(r){var i=function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(r,"string");return typeof i=="symbol"?i:i+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Z(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yT(Object(t),!0).forEach(function(r){Y(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ut(n,e){if(n==null)return{};var t,r,i=function(o,a){if(o==null)return{};var l={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(a.indexOf(u)>=0)continue;l[u]=o[u]}return l}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Aa(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}let vT=class{constructor(){Y(this,"browserShadowBlurConstant",1),Y(this,"DPI",96),Y(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Y(this,"perfLimitSizeTotal",2097152),Y(this,"maxCacheSideLimit",4096),Y(this,"minCacheSideLimit",256),Y(this,"disableStyleCopyPaste",!1),Y(this,"enableGLFiltering",!0),Y(this,"textureSize",4096),Y(this,"forceGLPutImageData",!1),Y(this,"cachesBoundsOfCurve",!1),Y(this,"fontPaths",{}),Y(this,"NUM_FRACTION_DIGITS",4)}};const St=new class extends vT{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=Z(Z({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new vT,t=(n==null?void 0:n.reduce((r,i)=>(r[i]=e[i],r),{}))||e;this.configure(t)}},wa=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class ys extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class V4 extends ys{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class B4{}class G4 extends B4{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),wa("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const W4={};let xT;const Es=()=>xT||(xT={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new G4,dispose(){},copyPasteData:W4}),uu=()=>Es().document,sC=()=>Es().window,BP=()=>{var n;return Math.max((n=St.devicePixelRatio)!==null&&n!==void 0?n:sC().devicePixelRatio,1)},Vh=new class{constructor(){Y(this,"charWidthsCache",{}),Y(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],s="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=St,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},w_="6.6.2";function bp(){}const Vd=Math.PI/2,Vp=2*Math.PI,oC=Math.PI/180,mr=Object.freeze([1,0,0,1,0,0]),aC=16,qo=.4477152502,at="center",Tt="left",Or="top",C_="bottom",ln="right",Dr="none",lC=/\r?\n/,GP="moving",qm="scaling",WP="rotating",cC="rotate",$P="skewing",rd="resizing",$4="modifyPoly",U4="modifyPath",Bp="changed",Zm="scale",Nr="scaleX",Si="scaleY",hu="skewX",du="skewY",bn="fill",Lr="stroke",Gp="modified",rc="json",X0="svg",Ie=new class{constructor(){this[rc]=new Map,this[X0]=new Map}has(n){return this[rc].has(n)}getClass(n){const e=this[rc].get(n);if(!e)throw new ys("No class registered for ".concat(n));return e}setClass(n,e){e?this[rc].set(e,n):(this[rc].set(n.type,n),this[rc].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[X0].get(n)}setSVGClass(n,e){this[X0].set(e??n.type.toLowerCase(),n)}},Wp=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class H4{constructor(){Y(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[i,s]=r;this.on(i,s)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(i=>{let[s,o]=i;r.push(this.once(s,o))}),()=>r.forEach(i=>i())}if(t){const r=this.on(e,function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.call(this,...s),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],i=r.indexOf(t);i>-1&&r.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[i,s]=r;this._removeEventListener(i,s)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const vc=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},po=n=>{if(n===0)return 1;switch(Math.abs(n)/Vd){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},mo=n=>{if(n===0)return 0;const e=n/Vd,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class ae{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new ae(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new ae(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new ae(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new ae(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new ae(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new ae(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new ae(this.x/e.x,this.y/e.y)}scalarDivide(e){return new ae(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new ae(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new ae(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new ae(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new ae(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uC;const r=mo(e),i=po(e),s=this.subtract(t);return new ae(s.x*i-s.y*r,s.x*r+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new ae(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const uC=new ae(0,0),Ep=n=>!!n&&Array.isArray(n._objects);function UP(n){class e extends n{constructor(){super(...arguments),Y(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const u=r.indexOf(l);u!==-1&&(r.splice(u,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(r){this.getObjects().forEach((i,s,o)=>r(i,s,o))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return!!this._objects.includes(r)||!!i&&this._objects.some(s=>s instanceof e&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,i)=>r+=i.complexity?i.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(vc(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(vc(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return vc(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return vc(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r!==this._objects[i]&&(vc(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=[],d=new ae(i,s),f=d.add(new ae(o,a));for(let g=this._objects.length-1;g>=0;g--){const m=this._objects[g];m.selectable&&m.visible&&(l&&m.intersectsWithRect(d,f)||m.isContainedWithinRect(d,f)||l&&m.containsPoint(d)||l&&m.containsPoint(f))&&u.push(m)}return u}}return e}class HP extends H4{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Tp(n){return sC().requestAnimationFrame(n)}function X4(n){return sC().cancelAnimationFrame(n)}let Y4=0;const Ca=()=>Y4++,qi=()=>{const n=uu().createElement("canvas");if(!n||n.getContext===void 0)throw new ys("Failed to create `canvas` element");return n},K4=()=>uu().createElement("img"),bi=n=>{const e=qi();return e.width=n.width,e.height=n.height,e},XP=(n,e,t)=>n.toDataURL("image/".concat(e),t),YP=(n,e,t)=>new Promise((r,i)=>{n.toBlob(r,"image/".concat(e),t)}),cn=n=>n*oC,yo=n=>n/oC,q4=n=>n.every((e,t)=>e===mr[t]),Pr=(n,e,t)=>new ae(n).transform(e,t),Wi=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:i}=new ae(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-i,t},jn=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],hC=(n,e)=>n.reduceRight((t,r)=>r&&t?jn(r,t,e):r||t,void 0)||mr.concat(),KP=n=>{let[e,t]=n;return Math.atan2(t,e)},$p=n=>{const e=KP(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),i=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:yo(e),scaleX:r,scaleY:i,skewX:yo(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Bd=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function fu(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=cn(n),i=po(r),s=mo(r);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const dC=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},qP=n=>Math.tan(cn(n)),ZP=n=>[1,0,qP(n),1,0,0],JP=n=>[1,qP(n),0,1,0,0],Jm=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=n,a=dC(r?-e:e,i?-t:t);return s&&(a=jn(a,ZP(s),!0)),o&&(a=jn(a,JP(o),!0)),a},Z4=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let i=Bd(e,t);r&&(i=jn(i,fu({angle:r})));const s=Jm(n);return q4(s)||(i=jn(i,s)),i},kp=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,i){if(e&&e.aborted)return i(new V4("loadImage"));const s=K4();let o;e&&(o=function(l){s.src="",i(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(s)};n?(s.onload=a,s.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),i(new ys("Error loading ".concat(s.src)))},t&&(s.crossOrigin=t),s.src=n):a()})},id=function(n){let{signal:e,reviver:t=bp}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(n.map(o=>Ie.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),s.push(a),a)))).then(r).catch(o=>{s.forEach(a=>{a.dispose&&a.dispose()}),i(o)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},Qm=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const i=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&Ie.has(a.type)?id([a],{signal:e}).then(l=>{let[u]=l;return i.push(u),u}):a),o=Object.keys(n);Promise.all(s).then(a=>a.reduce((l,u,d)=>(l[o[d]]=u,l),{})).then(t).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},gu=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},fC=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),$t=(n,e)=>parseFloat(Number(n).toFixed(e)),sd=n=>"matrix("+n.map(e=>$t(e,St.NUM_FRACTION_DIGITS)).join(" ")+")",vi=n=>!!n&&n.toLive!==void 0,_T=n=>!!n&&typeof n.toObject=="function",wT=n=>!!n&&n.offsetX!==void 0&&"source"in n,il=n=>!!n&&"multiSelectionStacking"in n;function QP(n){const e=n&&Vi(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let i=n;const s=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===e?(t=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(t+=i.scrollLeft||0,r+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:t,top:r}}const Vi=n=>n.ownerDocument||null,eI=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},tI=function(n,e,t){let{width:r,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=i,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(i*s).toString()),e.scale(s,s))},S_=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function CT(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Dr,n}class nI{constructor(e){Y(this,"_originalCanvasStyle",void 0),Y(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&uu().getElementById(e)||qi();var r;if(t.hasAttribute("data-fabric"))throw new ys("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(r)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:i}=this.lower;tI(r,i,e,t)}setCSSDimensions(e){S_(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&Vi(e),i={left:0,top:0};if(!r)return i;const s=((t=eI(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=QP(e);return{left:o.left+l.left-(a.clientLeft||0)+i.left,top:o.top+l.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){Es().dispose(this.lower.el),delete this.lower}}const J4={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...mr]};class Gd extends UP(HP){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Gd.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new nI(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(wa("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?BP():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=Z({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,i=[...this.viewportTransform],s=Pr(e,Wi(i));i[0]=t,i[3]=t;const o=Pr(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new ae(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new ae(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Tp(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=Wi(this.viewportTransform),i=Pr({x:0,y:0},r),s=Pr({x:e,y:t},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new ae(a.x,o.y),bl:new ae(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(X4(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,i=t.length;r<i;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!i)return;const a=vi(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new ae(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new ae(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new ae(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new ae(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new ae(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Pr(this.getCenterPoint(),Wi(this.viewportTransform))}_centerObject(e,t){e.setXY(t,at,at),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Z(Z(Z({version:w_},gu(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,r){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return vi(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),vi(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=St.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat($t(-l[4]/l[0],s)," ").concat($t(-l[5]/l[3],s)," ").concat($t(this.width/l[0],s)," ").concat($t(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",w_,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ca()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(vi(t)){const r=this["".concat(e,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return t.toSVG(s,{additionalTransform:r?sd(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=St.fontPaths;this._objects.forEach(function s(o){e.push(o),Ep(o)&&o._objects.forEach(s)}),e.forEach(s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=s;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(u=>{Object.values(u).forEach(d=>{let{fontFamily:f=""}=d;!t[f]&&r[f]&&(t[f]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(vi(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this["".concat(t,"Vpt")]?sd(Wi(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!wT(r)?s:r.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!wT(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new ys("`json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:o,background:a,overlayImage:l,overlay:u,clipPath:d}=i,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([id(s,{reviver:t,signal:r}),Qm({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:u,clipPath:d},{signal:r})]).then(g=>{let[m,v]=g;return this.clear(),this.add(...m),this.set(i),this.set(v),this.renderOnAddRemove=f,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=bi(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return XP(this.toCanvasElement(o,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return YP(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,u=this.getZoom(),d=this.width,f=this.height,g=this.skipControlsDrawing,m=u*e,v=this.viewportTransform,x=[m,0,0,m,(v[4]-(i||0))*e,(v[5]-(s||0))*e],w=this.enableRetinaScaling,C=bi({width:a,height:l}),b=o?this._objects.filter(k=>o(k)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=x,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),b),this.viewportTransform=v,this.width=d,this.height=f,this.calcViewportBoundaries(),this.enableRetinaScaling=w,this.skipControlsDrawing=g,C}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Wp.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}Y(Gd,"ownDefaults",J4);const Q4=["touchstart","touchmove","touchend"],eV=n=>{const e=QP(n.target),t=function(r){const i=r.changedTouches;return i&&i[0]?i[0]:r}(n);return new ae(t.clientX+e.left,t.clientY+e.top)},b_=n=>Q4.includes(n.type)||n.pointerType==="touch",ST=n=>{n.preventDefault(),n.stopPropagation()},io=n=>{let e=0,t=0,r=0,i=0;for(let s=0,o=n.length;s<o;s++){const{x:a,y:l}=n[s];(a>r||!s)&&(r=a),(a<e||!s)&&(e=a),(l>i||!s)&&(i=l),(l<t||!s)&&(t=l)}return{left:e,top:t,width:r-e,height:i-t}},tV=["translateX","translateY","scaleX","scaleY"],nV=(n,e)=>Up(n,jn(e,n.calcOwnMatrix())),Up=(n,e)=>{const t=$p(e),{translateX:r,translateY:i,scaleX:s,scaleY:o}=t,a=Ut(t,tV),l=new ae(r,i);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(l,at,at)},rV=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},rI=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),gC=(n,e,t)=>{const r=n/2,i=e/2,s=[new ae(-r,-i),new ae(r,-i),new ae(-r,i),new ae(r,i)].map(a=>a.transform(t)),o=io(s);return new ae(o.width,o.height)},ey=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mr;return jn(Wi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:mr),n)},Oc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mr;return n.transform(ey(e,t))},iV=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mr;return n.transform(ey(e,t),!0)},sV=(n,e,t)=>{const r=ey(e,t);return Up(n,jn(r,n.calcOwnMatrix())),r},iI=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),Z(Z({},e),{},{target:r})),r.fire(n,e)},oV={left:-.5,top:-.5,center:0,bottom:.5,right:.5},vn=n=>typeof n=="string"?oV[n]:n-.5,Hp="not-allowed";function sI(n){return vn(n.originX)===vn(at)&&vn(n.originY)===vn(at)}function bT(n){return .5-vn(n)}const Hi=(n,e)=>n[e],oI=(n,e,t,r)=>({e:n,transform:e,pointer:new ae(t,r)});function aI(n,e){const t=n.getTotalAngle()+yo(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function pC(n,e,t,r,i){var s;let{target:o,corner:a}=n;const l=o.controls[a],u=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,d=o.padding/u,f=function(g,m,v,x){const w=g.getRelativeCenterPoint(),C=v!==void 0&&x!==void 0?g.translateToGivenOrigin(w,at,at,v,x):new ae(g.left,g.top);return(g.angle?m.rotate(-cn(g.angle),w):m).subtract(C)}(o,new ae(r,i),e,t);return f.x>=d&&(f.x-=d),f.x<=-d&&(f.x+=d),f.y>=d&&(f.y-=d),f.y<=d&&(f.y+=d),f.x-=l.offsetX,f.y-=l.offsetY,f}const aV=(n,e,t,r)=>{const{target:i,offsetX:s,offsetY:o}=e,a=t-s,l=r-o,u=!Hi(i,"lockMovementX")&&i.left!==a,d=!Hi(i,"lockMovementY")&&i.top!==l;return u&&i.set(Tt,a),d&&i.set(Or,l),(u||d)&&iI(GP,oI(n,e,t,r)),u||d},ET={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Y0=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),TT=(n,e,t,r)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),s=Math.min(n,e,t);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-t)/u+(e<t?6:0);break;case e:o=(t-n)/u+2;break;case t:o=(n-e)/u+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},kT=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},yg=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),RT=n=>{let[e,t,r,i=1]=n;const s=Math.round(.3*e+.59*t+.11*r);return[s,s,s,i]};class It{constructor(e){if(Y(this,"isUnrecognised",!1),e)if(e instanceof It)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,i,s=1]=e;this.setSource([t,r,i,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in ET&&(e=ET[e]),e==="transparent"?[255,255,255,0]:It.sourceFromHex(e)||It.sourceFromRgb(e)||It.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=TT(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,i]=TT(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,i]=this.getSource();return"".concat(yg(e)).concat(yg(t)).concat(yg(r)).concat(yg(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(RT(this.getSource())),this}toBlackWhite(e){const[t,,,r]=RT(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(e){e instanceof It||(e=new It(e));const t=this.getSource(),r=e.getSource(),[i,s,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([i,s,o,t[3]]),this}static fromRgb(e){return It.fromRgba(e)}static fromRgba(e){return new It(It.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,i,s]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,i,s,kT(t[4])]}}static fromHsl(e){return It.fromHsla(e)}static fromHsla(e){return new It(It.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(It.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const u=s<=.5?s*(i+1):s+i-s*i,d=2*s-u;o=Y0(d,u,r+1/3),a=Y0(d,u,r),l=Y0(d,u,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),kT(t[4])]}static fromHex(e){return new It(It.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[i,s,o,a=255]=r.map(l=>parseInt(l,16));return[i,s,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?yo(r):t.includes("turn")?360*r:r}}const Dc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aC;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),i=St.DPI;switch(t==null?void 0:t[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*e;default:return r}},lV=n=>{const[e,t]=n.trim().split(" "),[r,i]=(s=e)&&s!==Dr?[s.slice(1,4),s.slice(5,8)]:s===Dr?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:t||"meet",alignX:r,alignY:i}},od=function(n,e){let t,r,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const s=new It(e),o=s.getAlpha();t=s.toRgb(),o!==1&&(r=o.toString())}else t="none";return i?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};class lI{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):Dr,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",u=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",f=e?"":this.getSvgFilter(),g=od(bn,this.fill);return[od(Lr,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",g,"fill-rule: ",t,"; ","opacity: ",u,";",f,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(sd(r));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=l&&l.absolutePositioned,f=this.stroke,g=this.fill,m=this.shadow,v=[],x=e.indexOf("COMMON_PARTS");let w;l&&(l.clipPathId="CLIPPATH_".concat(Ca()),w='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),d&&v.push("<g ",a,this.getSvgCommons(),` >
`),v.push("<g ",this.getSvgTransform(!1),d?"":a+this.getSvgCommons(),` >
`);const C=[o,u,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[x]=C,vi(g)&&v.push(g.toSVG(this)),vi(f)&&v.push(f.toSVG(this)),m&&v.push(m.toSVG(this)),l&&v.push(w),v.push(e.join("")),v.push(`</g>
`),d&&v.push(`</g>
`),r?r(v.join("")):v.join("")}addPaintOrder(){return this.paintFirst!==bn?' paint-order="'.concat(this.paintFirst,'" '):""}}function ty(n){return new RegExp("^("+n.join("|")+")\\b","i")}var PT;const yl=String.raw(PT||(PT=Aa(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),cV=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+yl+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+yl+"))?\\s+(.*)"),uV={cx:Tt,x:Tt,r:"radius",cy:Or,y:Or,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},K0="font-size",q0="clip-path";ty(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);ty(["symbol","image","marker","pattern","view","svg"]);const IT=ty(["symbol","g","a","svg","clipPath","defs"]),hV=new ae(1,0),cI=new ae,uI=(n,e)=>n.rotate(e),E_=(n,e)=>new ae(e).subtract(n),T_=n=>n.distanceFrom(cI),k_=(n,e)=>Math.atan2(Bh(n,e),fV(n,e)),dV=n=>k_(hV,n),mC=n=>n.eq(cI)?n:n.scalarDivide(T_(n)),hI=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return mC(new ae(-n.y,n.x).scalarMultiply(e?1:-1))},Bh=(n,e)=>n.x*e.y-n.y*e.x,fV=(n,e)=>n.x*e.x+n.y*e.y,MT=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Bh(e,t),i=Bh(e,n),s=Bh(t,n);return r>=0?i>=0&&s<=0:!(i<=0&&s>=0)},AT="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",OT=new RegExp("(?:\\s|^)"+AT+AT+"("+yl+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class so{constructor(e){const t=typeof e=="string"?so.parseShadow(e):e;Object.assign(this,so.ownDefaults,t),this.id=Ca()}static parseShadow(e){const t=e.trim(),[,r=0,i=0,s=0]=(OT.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(OT,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=uI(new ae(this.offsetX,this.offsetY),cn(-e.angle)),r=new It(this.color);let i=40,s=40;return e.width&&e.height&&(i=100*$t((Math.abs(t.x)+this.blur)/e.width,St.NUM_FRACTION_DIGITS)+20,s=100*$t((Math.abs(t.y)+this.blur)/e.height,St.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat($t(this.blur?this.blur/2:0,St.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat($t(t.x,St.NUM_FRACTION_DIGITS),'" dy="').concat($t(t.y,St.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=so.ownDefaults;return this.includeDefaultValues?e:fC(e,(r,i)=>r!==t[i])}static async fromObject(e){return new this(e)}}Y(so,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Y(so,"type","shadow"),Ie.setClass(so,"shadow");const Hc=(n,e,t)=>Math.max(n,Math.min(e,t)),gV=[Or,Tt,Nr,Si,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",hu,du],To=[bn,Lr,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],pV={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Tt,originY:Or,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:bn,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},mV=(n,e,t,r)=>-t*Math.cos(n/r*Vd)+t+e,yV=()=>!1;class yC{constructor(e){let{startValue:t,byValue:r,duration:i=500,delay:s=0,easing:o=mV,onStart:a=bp,onChange:l=bp,onComplete:u=bp,abort:d=yV,target:f}=e;Y(this,"_state","pending"),Y(this,"durationProgress",0),Y(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=u,this._abort=d,this.target=f,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Tp(e),this.delay):Tp(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Tp(this.tick)))}register(){Wp.push(this)}unregister(){Wp.remove(this)}abort(){this._state="aborted",this.unregister()}}const vV=["startValue","endValue"];class xV extends yC{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Z(Z({},Ut(e,vV)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const _V=["startValue","endValue"];class wV extends yC{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Z(Z({},Ut(e,_V)),{},{startValue:t,byValue:r.map((i,s)=>i-t[s])}))}calculate(e){const t=this.startValue.map((r,i)=>this.easing(e,r,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const CV=["startValue","endValue","easing","onChange","onComplete","abort"],SV=(n,e,t,r)=>e+t*(1-Math.cos(n/r*Vd)),Z0=n=>n&&((e,t,r)=>n(new It(e).toRgba(),t,r));class bV extends yC{constructor(e){let{startValue:t,endValue:r,easing:i=SV,onChange:s,onComplete:o,abort:a}=e,l=Ut(e,CV);const u=new It(t).getSource(),d=new It(r).getSource();super(Z(Z({},l),{},{startValue:u,byValue:d.map((f,g)=>f-u[g]),easing:i,onChange:Z0(s),onComplete:Z0(o),abort:Z0(a)}))}calculate(e){const[t,r,i,s]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,i].map(Math.round),Hc(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function dI(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new wV(n):new xV(n);return e.start(),e}function EV(n){const e=new bV(n);return e.start(),e}class qt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=E_(t,r),o=E_(t,e).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new ae(e).setX(Math.min(e.x-1,...t.map(s=>s.x)));let i=0;for(let s=0;s<t.length;s++){const o=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(o.includes(e))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(e,t,r,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,u=i.x-r.x,d=i.y-r.y,f=e.x-r.x,g=e.y-r.y,m=u*g-d*f,v=a*g-l*f,x=d*a-u*l;if(x!==0){const w=m/x,C=v/x;return(s||0<=w&&w<=1)&&(o||0<=C&&C<=1)?new qt("Intersection").append(new ae(e.x+w*a,e.y+w*l)):new qt}if(m===0||v===0){const w=s||o||qt.isPointContained(e,r,i)||qt.isPointContained(t,r,i)||qt.isPointContained(r,e,t)||qt.isPointContained(i,e,t);return new qt(w?"Coincident":void 0)}return new qt("Parallel")}static intersectSegmentLine(e,t,r,i){return qt.intersectLineLine(e,t,r,i,!1,!0)}static intersectSegmentSegment(e,t,r,i){return qt.intersectLineLine(e,t,r,i,!1,!1)}static intersectLinePolygon(e,t,r){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new qt,o=r.length;for(let a,l,u,d=0;d<o;d++){if(a=r[d],l=r[(d+1)%o],u=qt.intersectLineLine(e,t,a,l,i,!1),u.status==="Coincident")return u;s.append(...u.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return qt.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new qt,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],l=e[(o+1)%i],u=qt.intersectSegmentPolygon(a,l,t);u.status==="Coincident"?(s.push(u),r.append(a,l)):r.append(...u.points)}return s.length>0&&s.length===e.length?new qt("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const i=t.min(r),s=t.max(r),o=new ae(s.x,i.y),a=new ae(i.x,s.y);return qt.intersectPolygonPolygon(e,[i,o,s,a])}}class TV extends HP{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Pr(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Pr(e,Wi(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new ae(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map(a=>Pr(a,o))}return s}intersectsWithRect(e,t){return qt.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=qt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:i,width:s,height:o}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&i>=e.y&&i+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return qt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return io(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Nr,e),this._set(Si,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?yo(KP(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||mr.concat()}calcACoords(){const e=fu({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),i=Bd(t,r),s=jn(i,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Pr({x:-a,y:-l},s),tr:Pr({x:a,y:-l},s),bl:Pr({x:-a,y:l},s),br:Pr({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,vn(this.originX),vn(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((s,o)=>s===r[o])?i.value:(this.group&&(t=jn(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Z4(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new ae(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Z({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=t.width+i,a=t.height+i;let l;return l=t.skewX===0&&t.skewY===0?new ae(o*t.scaleX,a*t.scaleY):gC(o,a,Jm(t)),l.scalarAdd(s)}translateToGivenOrigin(e,t,r,i,s){let o=e.x,a=e.y;const l=vn(i)-vn(t),u=vn(s)-vn(r);if(l||u){const d=this._getTransformedDimensions();o+=l*d.x,a+=u*d.y}return new ae(o,a)}translateToCenterPoint(e,t,r){if(t===at&&r===at)return e;const i=this.translateToGivenOrigin(e,t,r,at,at);return this.angle?i.rotate(cn(this.angle),e):i}translateToOriginPoint(e,t,r){const i=this.translateToGivenOrigin(e,at,at,t,r);return this.angle?i.rotate(cn(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Pr(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new ae(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const i=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Tt,Or)}}const kV=["type"],RV=["extraParam"];let Hs=class Rp extends TV{static getDefaults(){return Rp.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){wa("warn","Setting type has no effect",e)}constructor(e){super(),Y(this,"_cacheContext",null),Object.assign(this,Rp.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=qi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,i=St.maxCacheSideLimit,s=St.minCacheSideLimit;if(t<=i&&r<=i&&t*r<=St.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const o=t/r,[a,l]=Vh.limitDimsByArea(o),u=Hc(s,a,i),d=Hc(s,l,i);return t>u&&(e.zoomX/=t/u,e.width=u,e.capped=!0),r>d&&(e.zoomY/=r/d,e.height=d,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:r,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:i,zoomX:s,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),u=r!==e.width||i!==e.height,d=this.zoomX!==s||this.zoomY!==o;if(!e||!t)return!1;if(u||d){r!==e.width||i!==e.height?(e.width=r,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const f=a/2,g=l/2;return this.cacheTranslationX=Math.round(e.width/2-f)+f,this.cacheTranslationY=Math.round(e.height/2-g)+g,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new ae(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=$p(this.calcTransformMatrix());return new ae(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Nr&&e!==Si||(t=this._constrainScale(t)),e===Nr&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof so||(t=new so(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:i,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Lr&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const i=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=i,this.stroke=s}createClipPathLayer(e,t){const r=bi(t),i=r.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(s=>{s.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const s=Wi(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return e.transform(i),e.drawObject(i,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,vi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(vi(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=(r==null?void 0:r.viewportTransform)||mr,a=s*i,l=o*i,u=t.nonScaling?new ae(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*St.browserShadowBlurConstant*(a+l)*(u.x+u.y)/4,e.shadowOffsetX=t.offsetX*a*u.x,e.shadowOffsetY=t.offsetY*l*u.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!vi(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===Lr?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=i.x/this.scaleX/s,a=i.y/this.scaleY/s,l=bi({width:Math.ceil(o),height:Math.ceil(a)}),u=l.getContext("2d");u&&(u.beginPath(),u.moveTo(0,0),u.lineTo(o,0),u.lineTo(o,a),u.lineTo(0,a),u.closePath(),u.translate(o/2,a/2),u.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(u,t),u.fillStyle=t.toLive(e),u.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),e.strokeStyle=(r=u.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new ae(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Ie.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=rI(this),r=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?BP():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(b=>new Gd(b,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&rV(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&sV(this,this.getViewportTransform()),this.setCoords();const u=qi(),d=this.getBoundingRect(),f=this.shadow,g=new ae;if(f){const b=f.blur,k=f.nonScaling?new ae(1,1):this.getObjectScaling();g.x=2*Math.round(s(f.offsetX)+b)*s(k.x),g.y=2*Math.round(s(f.offsetY)+b)*s(k.y)}const m=d.width+g.x,v=d.height+g.y;u.width=Math.ceil(m),u.height=Math.ceil(v);const x=l(u);e.format==="jpeg"&&(x.backgroundColor="#fff"),this.setPositionByOrigin(new ae(x.width/2,x.height/2),at,at);const w=this.canvas;x._objects=[this],this.set("canvas",x),this.setCoords();const C=x.toCanvasElement(a||1,e);return this.set("canvas",w),this.shadow=i,r&&(this.group=r),this.set(t),this.setCoords(),x._objects=[],x.destroy(),C}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return XP(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return YP(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:i}=this;if(t){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=at,this.originY=at,this.left=s,this.top=o}if(this.set("angle",e),t){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,i);this.left=s,this.top=o,this.originX=r,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Wp.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Es().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:l,onComplete:u}=r,d=Z(Z({},r),{},{target:this,startValue:a??i.reduce((f,g)=>f[g],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(f,g,m)=>{i.reduce((v,x,w)=>(w===i.length-1&&(v[x]=f),v[x]),this),l&&l(f,g,m)},onComplete:(f,g,m)=>{this.setCoords(),u&&u(f,g,m)}});return s?EV(d):dI(d)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let i,s=0;s<t.length;s++){if(i=t[s],i===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(i===r[o])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,o)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const i=t.fork.pop(),s=t.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Rp.customProperties,this.constructor.customProperties||[]);let t;const r=St.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:u,top:d,originX:f,originY:g,width:m,height:v,strokeWidth:x,strokeLineCap:w,strokeDashOffset:C,strokeLineJoin:b,strokeUniform:k,strokeMiterLimit:R,scaleX:P,scaleY:A,angle:O,flipX:D,flipY:j,opacity:Q,visible:X,backgroundColor:W,fillRule:G,paintFirst:V,globalCompositeOperation:ne,skewX:U,skewY:oe}=this;i&&!i.excludeFromExport&&(t=i.toObject(e.concat("inverted","absolutePositioned")));const F=I=>$t(I,r),K=Z(Z({},gu(this,e)),{},{type:this.constructor.type,version:w_,originX:f,originY:g,left:F(u),top:F(d),width:F(m),height:F(v),fill:_T(s)?s.toObject():s,stroke:_T(o)?o.toObject():o,strokeWidth:F(x),strokeDashArray:l&&l.concat(),strokeLineCap:w,strokeDashOffset:C,strokeLineJoin:b,strokeUniform:k,strokeMiterLimit:F(R),scaleX:F(P),scaleY:F(A),angle:F(O),flipX:D,flipY:j,opacity:F(Q),shadow:a&&a.toObject(),visible:X,backgroundColor:W,fillRule:G,paintFirst:V,globalCompositeOperation:ne,skewX:F(U),skewY:F(oe)},t?{clipPath:t}:null);return this.includeDefaultValues?K:this._removeDefaultValues(K)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return fC(e,(i,s)=>{if(s===Tt||s===Or||s==="type")return!0;const o=r[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Ut(e,kV),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=r,s=Ut(r,RV);return Qm(t,s).then(o=>i?(delete o[i],new this(t[i],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};Y(Hs,"stateProperties",gV),Y(Hs,"cacheProperties",To),Y(Hs,"ownDefaults",pV),Y(Hs,"type","FabricObject"),Y(Hs,"colorProperties",[bn,Lr,"backgroundColor"]),Y(Hs,"customProperties",[]),Ie.setClass(Hs),Ie.setClass(Hs,"object");const pu=(n,e,t)=>(r,i,s,o)=>{const a=e(r,i,s,o);return a&&iI(n,Z(Z({},oI(r,i,s,o)),t)),a};function mu(n){return(e,t,r,i)=>{const{target:s,originX:o,originY:a}=t,l=s.getRelativeCenterPoint(),u=s.translateToOriginPoint(l,o,a),d=n(e,t,r,i);return s.setPositionByOrigin(u,t.originX,t.originY),d}}const DT=pu(rd,mu((n,e,t,r)=>{const i=pC(e,e.originX,e.originY,t,r);if(vn(e.originX)===vn(at)||vn(e.originX)===vn(ln)&&i.x<0||vn(e.originX)===vn(Tt)&&i.x>0){const{target:s}=e,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=sI(e)?2:1,l=s.width,u=Math.abs(i.x*a/s.scaleX)-o;return s.set("width",Math.max(u,1)),l!==s.width}return!1}));function PV(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?Lr:bn,u=!a&&(r.cornerStrokeColor||i.cornerStrokeColor);let d,f=e,g=t;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(d=s,n.scale(1,o/s),g=t*s/o):o>s?(d=o,n.scale(s/o,1),f=e*o/s):d=s,n.beginPath(),n.arc(f,g,d/2,0,Vp,!1),n[l](),u&&n.stroke(),n.restore()}function IV(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?Lr:bn,u=!a&&(r.cornerStrokeColor||i.cornerStrokeColor),d=s/2,f=o/2;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",n.translate(e,t);const g=i.getTotalAngle();n.rotate(cn(g)),n["".concat(l,"Rect")](-d,-f,s,o),u&&n.strokeRect(-d,-f,s,o),n.restore()}class Li{constructor(e){Y(this,"visible",!0),Y(this,"actionName",Zm),Y(this,"angle",0),Y(this,"x",0),Y(this,"y",0),Y(this,"offsetX",0),Y(this,"offsetY",0),Y(this,"sizeX",0),Y(this,"sizeY",0),Y(this,"touchSizeX",0),Y(this,"touchSizeY",0),Y(this,"cursorStyle","crosshair"),Y(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,i){var s;let{tl:o,tr:a,br:l,bl:u}=i;return((s=t.canvas)===null||s===void 0?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&qt.isPointInPolygon(r,[o,a,l,u])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,i;return(r=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,i){return new ae(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,i,s,o){const a=hC([Bd(r,i),fu({angle:e}),dC((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new ae(-.5,-.5).transform(a),tr:new ae(.5,-.5).transform(a),br:new ae(.5,.5).transform(a),bl:new ae(-.5,.5).transform(a)}}render(e,t,r,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?PV.call(this,e,t,r,i,s):IV.call(this,e,t,r,i,s)}}const MV=(n,e,t)=>t.lockRotation?Hp:e.cursorStyle,AV=pu(WP,mu((n,e,t,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:u}=e;const d=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,u);if(Hi(i,"lockRotation"))return!1;const f=Math.atan2(o-d.y,s-d.x),g=Math.atan2(r-d.y,t-d.x);let m=yo(g-f+a);if(i.snapAngle&&i.snapAngle>0){const x=i.snapAngle,w=i.snapThreshold||x,C=Math.ceil(m/x)*x,b=Math.floor(m/x)*x;Math.abs(m-b)<w?m=b:Math.abs(m-C)<w&&(m=C)}m<0&&(m=360+m),m%=360;const v=i.angle!==m;return i.angle=m,v}));function fI(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function gI(n,e,t){const r=Hi(n,"lockScalingX"),i=Hi(n,"lockScalingY");if(r&&i||!e&&(r||i)&&t||r&&e==="x"||i&&e==="y")return!0;const{width:s,height:o,strokeWidth:a}=n;return s===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const OV=["e","se","s","sw","w","nw","n","ne","e"],Ph=(n,e,t)=>{const r=fI(n,t);if(gI(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Hp;const i=aI(t,e);return"".concat(OV[i],"-resize")};function vC(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=fI(n,s);let l,u,d,f,g,m;if(gI(s,o,a))return!1;if(e.gestureScale)u=e.scaleX*e.gestureScale,d=e.scaleY*e.gestureScale;else{if(l=pC(e,e.originX,e.originY,t,r),g=o!=="y"?Math.sign(l.x||e.signX||1):1,m=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=g),e.signY||(e.signY=m),Hi(s,"lockScalingFlip")&&(e.signX!==g||e.signY!==m))return!1;if(f=s._getTransformedDimensions(),a&&!o){const w=Math.abs(l.x)+Math.abs(l.y),{original:C}=e,b=w/(Math.abs(f.x*C.scaleX/s.scaleX)+Math.abs(f.y*C.scaleY/s.scaleY));u=C.scaleX*b,d=C.scaleY*b}else u=Math.abs(l.x*s.scaleX/f.x),d=Math.abs(l.y*s.scaleY/f.y);sI(e)&&(u*=2,d*=2),e.signX!==g&&o!=="y"&&(e.originX=bT(e.originX),u*=-1,e.signX=g),e.signY!==m&&o!=="x"&&(e.originY=bT(e.originY),d*=-1,e.signY=m)}const v=s.scaleX,x=s.scaleY;return o?(o==="x"&&s.set(Nr,u),o==="y"&&s.set(Si,d)):(!Hi(s,"lockScalingX")&&s.set(Nr,u),!Hi(s,"lockScalingY")&&s.set(Si,d)),v!==s.scaleX||x!==s.scaleY}const vg=pu(qm,mu((n,e,t,r)=>vC(n,e,t,r))),DV=pu(qm,mu((n,e,t,r)=>vC(n,e,t,r,{by:"x"}))),LV=pu(qm,mu((n,e,t,r)=>vC(n,e,t,r,{by:"y"}))),FV=["target","ex","ey","skewingSide"],J0={x:{counterAxis:"y",scale:Nr,skew:hu,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Si,skew:du,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},NV=["ns","nesw","ew","nwse"],jV=(n,e,t)=>{if(e.x!==0&&Hi(t,"lockSkewingY")||e.y!==0&&Hi(t,"lockSkewingX"))return Hp;const r=aI(t,e)%4;return"".concat(NV[r],"-resize")};function pI(n,e,t,r,i){const{target:s}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:u,flip:d}=J0[n];if(Hi(s,l))return!1;const{origin:f,flip:g}=J0[o],m=vn(t[f])*(s[g]?-1:1),v=-Math.sign(m)*(s[d]?-1:1),x=.5*-((s[u]===0&&pC(t,at,at,r,i)[n]>0||s[u]>0?1:-1)*v)+.5;return pu($P,mu((C,b,k,R)=>function(P,A,O){let{target:D,ex:j,ey:Q,skewingSide:X}=A,W=Ut(A,FV);const{skew:G}=J0[P],V=O.subtract(new ae(j,Q)).divide(new ae(D.scaleX,D.scaleY))[P],ne=D[G],U=W[G],oe=Math.tan(cn(U)),F=P==="y"?D._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:D._getTransformedDimensions({scaleX:1,scaleY:1}).y,K=2*V*X/Math.max(F,1)+oe,I=yo(Math.atan(K));D.set(G,I);const N=ne!==D[G];if(N&&P==="y"){const{skewX:q,scaleX:L}=D,ee=D._getTransformedDimensions({skewY:ne}),be=D._getTransformedDimensions(),pe=q!==0?ee.x/be.x:1;pe!==1&&D.set(Nr,pe*L)}return N}(n,b,new ae(k,R))))(e,Z(Z({},t),{},{[a]:x,skewingSide:v}),r,i)}const zV=(n,e,t,r)=>pI("x",n,e,t,r),VV=(n,e,t,r)=>pI("y",n,e,t,r);function ny(n,e){return n[e.canvas.altActionKey]}const xg=(n,e,t)=>{const r=ny(n,t);return e.x===0?r?hu:Si:e.y===0?r?du:Nr:""},Ec=(n,e,t)=>ny(n,t)?jV(0,e,t):Ph(n,e,t),LT=(n,e,t,r)=>ny(n,e.target)?VV(n,e,t,r):DV(n,e,t,r),FT=(n,e,t,r)=>ny(n,e.target)?zV(n,e,t,r):LV(n,e,t,r),mI=()=>({ml:new Li({x:-.5,y:0,cursorStyleHandler:Ec,actionHandler:LT,getActionName:xg}),mr:new Li({x:.5,y:0,cursorStyleHandler:Ec,actionHandler:LT,getActionName:xg}),mb:new Li({x:0,y:.5,cursorStyleHandler:Ec,actionHandler:FT,getActionName:xg}),mt:new Li({x:0,y:-.5,cursorStyleHandler:Ec,actionHandler:FT,getActionName:xg}),tl:new Li({x:-.5,y:-.5,cursorStyleHandler:Ph,actionHandler:vg}),tr:new Li({x:.5,y:-.5,cursorStyleHandler:Ph,actionHandler:vg}),bl:new Li({x:-.5,y:.5,cursorStyleHandler:Ph,actionHandler:vg}),br:new Li({x:.5,y:.5,cursorStyleHandler:Ph,actionHandler:vg}),mtr:new Li({x:0,y:-.5,actionHandler:AV,cursorStyleHandler:MV,offsetY:-40,withConnection:!0,actionName:cC})}),BV=()=>({mr:new Li({x:.5,y:0,actionHandler:DT,cursorStyleHandler:Ec,actionName:rd}),ml:new Li({x:-.5,y:0,actionHandler:DT,cursorStyleHandler:Ec,actionName:rd})}),GV=()=>Z(Z({},mI()),BV());class ad extends Hs{static getDefaults(){return Z(Z({},super.getDefaults()),ad.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),ad.ownDefaults),this.setOptions(e)}static createControls(){return{controls:mI()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,i=t.action;if(this===r&&i&&i.startsWith(Zm))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i],a=this.controls[s];if(a.shouldActivate(s,this,e,t?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Bd(t.x,t.y),i=fu({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=jn(r,i),o=jn(e,s),a=jn(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?$p(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const u=this._calculateCurrentDimensions(l),d={};return this.forEachControl((f,g)=>{const m=f.positionHandler(u,a,this,f);d[g]=Object.assign(m,this._calcCornerCoords(f,m))}),d}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(cn(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=Z({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s=Z({hasBorders:r,hasControls:i},t),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,u=jn(o,this.calcTransformMatrix()),d=$p(u);e.save(),e.translate(d.translateX,d.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),e.rotate(cn(this.group?d.angle:this.angle)),a&&this.drawBorders(e,d,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let i;if(r&&r.forActiveSelection||this.group){const s=gC(this.width,this.height,Jm(t)),o=this.isStrokeAccountedForInDimensions()?uC:(this.strokeUniform?new ae().scalarAdd(this.canvas?this.canvas.getZoom():1):new ae(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=Z({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,u)=>{if(l.getVisibility(this,u)){const d=this.oCoords[u];l.render(e,d.x,d.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,i]=t;return this.setControlVisible(r,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function yI(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}Y(ad,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class tr extends ad{}yI(tr,[lI]),Ie.setClass(tr),Ie.setClass(tr,"object");const WV=(n,e,t,r)=>{const i=2*(r=Math.round(r))+1,{data:s}=n.getImageData(e-r,t-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class vI{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new ae(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new ae(1/this.options.scaleX,1/this.options.scaleY):new ae(1,1)}createSideVector(e,t){const r=E_(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new ae(e);return t.y+=t.x*Math.tan(cn(this.options.skewY)),t.x+=t.y*Math.tan(cn(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const $V=new ae;class Lc extends vI{static getOrthogonalRotationFactor(e,t){const r=t?k_(e,t):dV(e);return Math.abs(r)<Vd?-1:1}constructor(e,t,r,i){super(i),Y(this,"AB",void 0),Y(this,"AC",void 0),Y(this,"alpha",void 0),Y(this,"bisector",void 0),this.A=new ae(e),this.B=new ae(t),this.C=new ae(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=k_(this.AB,this.AC),this.bisector=mC(uI(this.AB.eq($V)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=hI(i),o=Lc.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const e=[];return(this.alpha%Vp==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?T_(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return T_(i)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],i=new ae(Lc.getOrthogonalRotationFactor(this.bisector),Lc.getOrthogonalRotationFactor(new ae(this.bisector.y,this.bisector.x)));return[new ae(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new ae(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{MT(s,e,t)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,u=new ae(Math.tan(cn(i)),Math.tan(cn(s))),d=this.strokeProjectionMagnitude,f=l?d/a/Math.sqrt(1/a**2+1/o**2*u.y**2):d/Math.sqrt(1+u.y**2),g=new ae(Math.sqrt(Math.max(d**2-f**2,0)),f),m=l?d/Math.sqrt(1+u.x**2*(1/a)**2/(1/o+1/o*u.x*u.y)**2):d/Math.sqrt(1+u.x**2/(1+u.x*u.y)**2),v=new ae(m,Math.sqrt(Math.max(d**2-m**2,0)));return[v,v.scalarMultiply(-1),g,g.scalarMultiply(-1)].map(x=>this.applySkew(l?x.multiply(this.strokeUniformScalar):x)).forEach(x=>{MT(x,e,t)&&r.push(this.applySkew(this.A).add(x))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Vp==0,r=this.applySkew(this.A),i=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Bh(i,o)>0,l=a?i:s,u=a?s:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,u)):e.push(...this.projectRoundNoSkew(l,u)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class NT extends vI{constructor(e,t,r){super(r),this.A=new ae(e),this.T=new ae(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(hI(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new ae(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Lc(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new ae(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(mC(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(r);e.push(i.add(t),i.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const UV=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const i=n.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new ae(o)),s),[new ae(n[0])]);if(i.length===1)t=!0;else if(!t){const s=i[0],o=((a,l)=>{for(let u=a.length-1;u>=0;u--)if(l(a[u],u,a))return u;return-1})(i,a=>!a.eq(s));i.splice(o+1)}return i.forEach((s,o,a)=>{let l,u;o===0?(u=a[1],l=t?s:a[a.length-1]):o===a.length-1?(l=a[o-1],u=t?s:a[0]):(l=a[o-1],u=a[o+1]),t&&a.length===1?r.push(...new NT(s,s,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new Lc(s,l,u,e).project()):r.push(...new NT(s,o===0?u:l,e).project())}),r},xC=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=Z({},n[t][r])})}),e},HV=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),_C=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=XV(n,r))!==!1&&e.push(t);return e},XV=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},wC=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},YV=(n,e)=>{const t=e.split(`
`),r=[];let i=-1,s={};n=xC(n);for(let o=0;o<t.length;o++){const a=_C(t[o]);if(n[o])for(let l=0;l<a.length;l++){i++;const u=n[o][l];u&&Object.keys(u).length>0&&(wC(s,u,!0)?r.push({start:i,end:i+1,style:u}):r[r.length-1].end++),s=u||{}}else i+=a.length,s={}}return r},KV=(n,e)=>{if(!Array.isArray(n))return xC(n);const t=e.split(lC),r={};let i=-1,s=0;for(let o=0;o<t.length;o++){const a=_C(t[o]);for(let l=0;l<a.length;l++)i++,n[s]&&n[s].start<=i&&i<n[s].end&&(r[o]=r[o]||{},r[o][l]=Z({},n[s].style),i===n[s].end-1&&s++)}return r},Oa=["display","transform",bn,"fill-opacity","fill-rule","opacity",Lr,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function jT(n,e){const t=n.nodeName,r=n.getAttribute("class"),i=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+s,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),e=e.replace(o,"")}return e.length===0}function qV(n,e){let t=!0;const r=jT(n,e.pop());return r&&e.length&&(t=function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=jT(i=i.parentElement,o);return s.length===0}(n,e)),r&&t&&e.length===0}const ZV=n=>{var e;return(e=uV[n])!==null&&e!==void 0?e:n},JV=new RegExp("(".concat(yl,")"),"gi"),QV=n=>n.replace(JV," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var zT,VT,BT,GT,WT,$T,UT;const gr="(".concat(yl,")"),eB=String.raw(zT||(zT=Aa(["(skewX)(",")"],["(skewX)\\(","\\)"])),gr),tB=String.raw(VT||(VT=Aa(["(skewY)(",")"],["(skewY)\\(","\\)"])),gr),nB=String.raw(BT||(BT=Aa(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),gr,gr,gr),rB=String.raw(GT||(GT=Aa(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),gr,gr),iB=String.raw(WT||(WT=Aa(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),gr,gr),sB=String.raw($T||($T=Aa(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),gr,gr,gr,gr,gr,gr),CC="(?:".concat(sB,"|").concat(iB,"|").concat(nB,"|").concat(rB,"|").concat(eB,"|").concat(tB,")"),oB="(?:".concat(CC,"*)"),aB=String.raw(UT||(UT=Aa(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),oB),lB=new RegExp(aB),cB=new RegExp(CC),uB=new RegExp(CC,"g");function R_(n){const e=[];if(!(n=QV(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!lB.test(n))return[...mr];for(const t of n.matchAll(uB)){const r=cB.exec(t[0]);if(!r)continue;let i=mr;const s=r.filter(v=>!!v),[,o,...a]=s,[l,u,d,f,g,m]=a.map(v=>parseFloat(v));switch(o){case"translate":i=Bd(l,u);break;case cC:i=fu({angle:l},{x:u,y:d});break;case Zm:i=dC(l,u);break;case hu:i=ZP(l);break;case du:i=JP(l);break;case"matrix":i=[l,u,d,f,g,m]}e.push(i)}return hC(e)}function hB(n,e,t,r){const i=Array.isArray(e);let s,o=e;if(n!==bn&&n!==Lr||e!==Dr){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===Dr?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?jn(t.transformMatrix,R_(e)):R_(e);else if(n==="visible")o=e!==Dr&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?Tt:e==="end"?ln:at;else if(n==="charSpacing")s=Dc(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(bn),l=e.indexOf(Lr);o=bn,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Lr)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(Dc):Dc(e,r)}}else o="";return!i&&isNaN(s)?o:s}function dB(n,e){const t=n.match(cV);if(!t)return;const r=t[1],i=t[3],s=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=Dc(s)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function fB(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,i]=t.split(":");e[r.trim().toLowerCase()]=i.trim()})}function gB(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?fB(t,e):function(r,i){Object.entries(r).forEach(s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)})}(t,e)),e}const pB={stroke:"strokeOpacity",fill:"fillOpacity"};function ko(n,e,t){if(!n)return{};let r,i={},s=aC;n.parentNode&&IT.test(n.parentNode.nodeName)&&(i=ko(n.parentElement,e,t),i.fontSize&&(r=s=Dc(i.fontSize)));const o=Z(Z(Z({},e.reduce((u,d)=>{const f=n.getAttribute(d);return f&&(u[d]=f),u},{})),function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={};for(const g in d)qV(u,g.split(" "))&&(f=Z(Z({},f),d[g]));return f}(n,t)),gB(n));o[q0]&&n.setAttribute(q0,o[q0]),o[K0]&&(r=Dc(o[K0],s),o[K0]="".concat(r));const a={};for(const u in o){const d=ZV(u),f=hB(d,o[u],i,r);a[d]=f}a&&a.font&&dB(a.font,a);const l=Z(Z({},i),a);return IT.test(n.nodeName)?l:function(u){const d=tr.getDefaults();return Object.entries(pB).forEach(f=>{let[g,m]=f;if(u[m]===void 0||u[g]==="")return;if(u[g]===void 0){if(!d[g])return;u[g]=d[g]}if(u[g].indexOf("url(")===0)return;const v=new It(u[g]);u[g]=v.setAlpha($t(v.getAlpha()*u[m],2)).toRgba()}),u}(l)}const mB=["left","top","width","height","visible"],xI=["rx","ry"];class zi extends tr{static getDefaults(){return Z(Z({},super.getDefaults()),zi.ownDefaults)}constructor(e){super(),Object.assign(this,zi.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,i=-t/2,s=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+t-o,s),l&&e.bezierCurveTo(i+t-qo*o,s,i+t,s+qo*a,i+t,s+a),e.lineTo(i+t,s+r-a),l&&e.bezierCurveTo(i+t,s+r-qo*a,i+t-qo*o,s+r,i+t-o,s+r),e.lineTo(i+o,s+r),l&&e.bezierCurveTo(i+qo*o,s+r,i,s+r-qo*a,i,s+r-a),e.lineTo(i,s+a),l&&e.bezierCurveTo(i,s+qo*a,i+qo*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...xI,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const i=ko(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,width:a=0,height:l=0,visible:u=!0}=i,d=Ut(i,mB);return new this(Z(Z(Z({},t),d),{},{left:s,top:o,width:a,height:l,visible:!!(u&&a&&l)}))}}Y(zi,"type","Rect"),Y(zi,"cacheProperties",[...To,...xI]),Y(zi,"ownDefaults",{rx:0,ry:0}),Y(zi,"ATTRIBUTE_NAMES",[...Oa,"x","y","rx","ry","width","height"]),Ie.setClass(zi),Ie.setSVGClass(zi);const eo="initialization",Xp="added",SC="removed",Yp="imperative",_I=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:i,height:s,group:o}=e,a=o&&o!==n?ey(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),u=!e.isStrokeAccountedForInDimensions(),d=t&&u?iV(new ae(r,r),void 0,n.calcTransformMatrix()):uC,f=!t&&u?r:0,g=gC(i+f,s+f,hC([a,e.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[l.subtract(g),l.add(g)]};class ry{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:i}=e;return t===eo||t===Yp||!!r&&i!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==eo&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:i}=t;if(r===Yp&&t.overrides)return t.overrides;if(e.length===0)return;const{left:s,top:o,width:a,height:l}=io(e.map(f=>_I(i,f)).reduce((f,g)=>f.concat(g),[])),u=new ae(a,l),d=new ae(s,o).add(u.scalarDivide(2));if(r===eo){const f=this.getInitialSize(t,{size:u,center:d});return{center:d,relativeCorrection:new ae(0,0),size:f}}return{center:d.transform(i.calcOwnMatrix()),size:u}}}Y(ry,"type","strategy");class P_ extends ry{shouldPerformLayout(e){return!0}}Y(P_,"type","fit-content"),Ie.setClass(P_);const yB=["strategy"],vB=["target","strategy","bubbles","prevStrategy"],wI="layoutManager";class ld{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new P_;Y(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Z(Z({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[Gp,GP,rd,WP,qm,$P,Bp,$4,U4].map(i=>e.on(i,s=>this.performLayout(i===Gp?{type:"object_modified",trigger:i,e:s,target:r}:{type:"object_modifying",trigger:i,e:s,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:i}=t;if(r===eo||r===Xp?this.subscribeTargets(e):r===SC&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),r===Yp&&e.deep){const s=Ut(e,yB);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(Z(Z({},s),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:i}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const o=i===eo?new ae:t.getRelativeCenterPoint(),{center:a,correction:l=new ae,relativeCorrection:u=new ae}=s,d=o.subtract(a).add(l).transform(i===eo?mr:Wi(t.calcOwnMatrix()),!0).add(u);return{result:s,prevCenter:o,nextCenter:a,offset:d}}commitLayout(e,t){const{target:r}=e,{result:{size:i},nextCenter:s}=t;var o,a;r.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===eo?r.set({left:(o=e.x)!==null&&o!==void 0?o:s.x+i.x*vn(r.originX),top:(a=e.y)!==null&&a!==void 0?a:s.y+i.y*vn(r.originY)}):(r.setPositionByOrigin(s,at,at),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(i=>{i.group===r&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:i}=t;r.set({left:r.left+i.x,top:r.top+i.y})}onAfterLayout(e,t){const{target:r,strategy:i,bubbles:s,prevStrategy:o}=e,a=Ut(e,vB),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const u=r.parent;s&&u!=null&&u.layoutManager&&((a.path||(a.path=[])).push(r),u.layoutManager.performLayout(Z(Z({},a),{},{target:u}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:wI,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Ie.setClass(ld,wI);const xB=["type","objects","layoutManager"];class _B extends ld{performLayout(){}}class oo extends UP(tr){static getDefaults(){return Z(Z({},super.getDefaults()),oo.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Y(this,"_activeObjects",[]),Y(this,"__objectSelectionTracker",void 0),Y(this,"__objectSelectionDisposer",void 0),Object.assign(this,oo.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new ld,this.layoutManager.performLayout({type:eo,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(wa("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(wa("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,i)=>this.canEnterGroup(t)&&i.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange(Xp,i),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...s);return this._onAfterObjectsChange(Xp,s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(SC,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(i=>{i._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const i=this._activeObjects;if(e)i.push(r),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(r);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Up(e,jn(Wi(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Up(e,jn(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=tr.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var i;const o=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...Wi(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(Z({target:this,type:Yp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[e||"toObject"](t);return i.includeDefaultValues=s,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return Z(Z(Z({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=zi.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:i=[],layoutManager:s}=e,o=Ut(e,xB);return Promise.all([id(i,t),Qm(o,t)]).then(a=>{let[l,u]=a;const d=new this(l,Z(Z(Z({},o),u),{},{layoutManager:new _B}));if(s){const f=Ie.getClass(s.type),g=Ie.getClass(s.strategy);d.layoutManager=new f(new g)}else d.layoutManager=new ld;return d.layoutManager.subscribeTargets({type:eo,target:d,targets:d.getObjects()}),d.setCoords(),d})}}Y(oo,"type","Group"),Y(oo,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Ie.setClass(oo);const wB=(n,e)=>Math.min(e.width/n.width,e.height/n.height),CB=(n,e)=>Math.max(e.width/n.width,e.height/n.height),I_="\\s*,?\\s*",gh="".concat(I_,"(").concat(yl,")"),SB="".concat(gh).concat(gh).concat(gh).concat(I_,"([01])").concat(I_,"([01])").concat(gh).concat(gh),bB={m:"l",M:"L"},EB=(n,e,t,r,i,s,o,a,l,u,d)=>{const f=po(n),g=mo(n),m=po(e),v=mo(e),x=t*i*m-r*s*v+o,w=r*i*m+t*s*v+a;return["C",u+l*(-t*i*g-r*s*f),d+l*(-r*i*g+t*s*f),x+l*(t*i*v+r*s*m),w+l*(r*i*v-t*s*m),x,w]},HT=(n,e,t,r)=>{const i=Math.atan2(e,n),s=Math.atan2(r,t);return s>=i?s-i:2*Math.PI-(i-s)};function XT(n,e,t,r,i,s,o,a){let l;if(St.cachesBoundsOfCurve&&(l=[...arguments].join(),Vh.boundsOfCurveCache[l]))return Vh.boundsOfCurveCache[l];const u=Math.sqrt,d=Math.abs,f=[],g=[[0,0],[0,0]];let m=6*n-12*t+6*i,v=-3*n+9*t-9*i+3*o,x=3*t-3*n;for(let R=0;R<2;++R){if(R>0&&(m=6*e-12*r+6*s,v=-3*e+9*r-9*s+3*a,x=3*r-3*e),d(v)<1e-12){if(d(m)<1e-12)continue;const j=-x/m;0<j&&j<1&&f.push(j);continue}const P=m*m-4*x*v;if(P<0)continue;const A=u(P),O=(-m+A)/(2*v);0<O&&O<1&&f.push(O);const D=(-m-A)/(2*v);0<D&&D<1&&f.push(D)}let w=f.length;const C=w,b=CI(n,e,t,r,i,s,o,a);for(;w--;){const{x:R,y:P}=b(f[w]);g[0][w]=R,g[1][w]=P}g[0][C]=n,g[1][C]=e,g[0][C+1]=o,g[1][C+1]=a;const k=[new ae(Math.min(...g[0]),Math.min(...g[1])),new ae(Math.max(...g[0]),Math.max(...g[1]))];return St.cachesBoundsOfCurve&&(Vh.boundsOfCurveCache[l]=k),k}const TB=(n,e,t)=>{let[r,i,s,o,a,l,u,d]=t;const f=((g,m,v,x,w,C,b)=>{if(v===0||x===0)return[];let k=0,R=0,P=0;const A=Math.PI,O=b*oC,D=mo(O),j=po(O),Q=.5*(-j*g-D*m),X=.5*(-j*m+D*g),W=v**2,G=x**2,V=X**2,ne=Q**2,U=W*G-W*V-G*ne;let oe=Math.abs(v),F=Math.abs(x);if(U<0){const Ce=Math.sqrt(1-U/(W*G));oe*=Ce,F*=Ce}else P=(w===C?-1:1)*Math.sqrt(U/(W*V+G*ne));const K=P*oe*X/F,I=-P*F*Q/oe,N=j*K-D*I+.5*g,q=D*K+j*I+.5*m;let L=HT(1,0,(Q-K)/oe,(X-I)/F),ee=HT((Q-K)/oe,(X-I)/F,(-Q-K)/oe,(-X-I)/F);C===0&&ee>0?ee-=2*A:C===1&&ee<0&&(ee+=2*A);const be=Math.ceil(Math.abs(ee/A*2)),pe=[],ce=ee/be,ve=8/3*Math.sin(ce/4)*Math.sin(ce/4)/Math.sin(ce/2);let Se=L+ce;for(let Ce=0;Ce<be;Ce++)pe[Ce]=EB(L,Se,j,D,oe,F,N,q,ve,k,R),k=pe[Ce][5],R=pe[Ce][6],L=Se,Se+=ce;return pe})(u-n,d-e,i,s,a,l,o);for(let g=0,m=f.length;g<m;g++)f[g][1]+=n,f[g][2]+=e,f[g][3]+=n,f[g][4]+=e,f[g][5]+=n,f[g][6]+=e;return f},kB=n=>{let e=0,t=0,r=0,i=0;const s=[];let o,a=0,l=0;for(const u of n){const d=[...u];let f;switch(d[0]){case"l":d[1]+=e,d[2]+=t;case"L":e=d[1],t=d[2],f=["L",e,t];break;case"h":d[1]+=e;case"H":e=d[1],f=["L",e,t];break;case"v":d[1]+=t;case"V":t=d[1],f=["L",e,t];break;case"m":d[1]+=e,d[2]+=t;case"M":e=d[1],t=d[2],r=d[1],i=d[2],f=["M",e,t];break;case"c":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t,d[5]+=e,d[6]+=t;case"C":a=d[3],l=d[4],e=d[5],t=d[6],f=["C",d[1],d[2],a,l,e,t];break;case"s":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=d[3],t=d[4],f=["C",a,l,d[1],d[2],e,t],a=f[3],l=f[4];break;case"q":d[1]+=e,d[2]+=t,d[3]+=e,d[4]+=t;case"Q":a=d[1],l=d[2],e=d[3],t=d[4],f=["Q",a,l,e,t];break;case"t":d[1]+=e,d[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=d[1],t=d[2],f=["Q",a,l,e,t];break;case"a":d[6]+=e,d[7]+=t;case"A":TB(e,t,d).forEach(g=>s.push(g)),e=d[6],t=d[7];break;case"z":case"Z":e=r,t=i,f=["Z"]}f?(s.push(f),o=f[0]):o=""}return s},Kp=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),CI=(n,e,t,r,i,s,o,a)=>l=>{const u=l**3,d=(m=>3*m**2*(1-m))(l),f=(m=>3*m*(1-m)**2)(l),g=(m=>(1-m)**3)(l);return new ae(o*u+i*d+t*f+n*g,a*u+s*d+r*f+e*g)},SI=n=>n**2,bI=n=>2*n*(1-n),EI=n=>(1-n)**2,RB=(n,e,t,r,i,s,o,a)=>l=>{const u=SI(l),d=bI(l),f=EI(l),g=3*(f*(t-n)+d*(i-t)+u*(o-i)),m=3*(f*(r-e)+d*(s-r)+u*(a-s));return Math.atan2(m,g)},PB=(n,e,t,r,i,s)=>o=>{const a=SI(o),l=bI(o),u=EI(o);return new ae(i*a+t*l+n*u,s*a+r*l+e*u)},IB=(n,e,t,r,i,s)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(i-t)),u=2*(a*(r-e)+o*(s-r));return Math.atan2(u,l)},YT=(n,e,t)=>{let r=new ae(e,t),i=0;for(let s=1;s<=100;s+=1){const o=n(s/100);i+=Kp(r.x,r.y,o.x,o.y),r=o}return i},MB=(n,e)=>{let t,r=0,i=0,s={x:n.x,y:n.y},o=Z({},s),a=.01,l=0;const u=n.iterator,d=n.angleFinder;for(;i<e&&a>1e-4;)o=u(r),l=r,t=Kp(s.x,s.y,o.x,o.y),t+i>e?(r-=a,a/=2):(s=o,r+=a,i+=t);return Z(Z({},o),{},{angle:d(l)})},TI=n=>{let e,t,r=0,i=0,s=0,o=0,a=0;const l=[];for(const u of n){const d={x:i,y:s,command:u[0],length:0};switch(u[0]){case"M":t=d,t.x=o=i=u[1],t.y=a=s=u[2];break;case"L":t=d,t.length=Kp(i,s,u[1],u[2]),i=u[1],s=u[2];break;case"C":e=CI(i,s,u[1],u[2],u[3],u[4],u[5],u[6]),t=d,t.iterator=e,t.angleFinder=RB(i,s,u[1],u[2],u[3],u[4],u[5],u[6]),t.length=YT(e,i,s),i=u[5],s=u[6];break;case"Q":e=PB(i,s,u[1],u[2],u[3],u[4]),t=d,t.iterator=e,t.angleFinder=IB(i,s,u[1],u[2],u[3],u[4]),t.length=YT(e,i,s),i=u[3],s=u[4];break;case"Z":t=d,t.destX=o,t.destY=a,t.length=Kp(i,s,o,a),i=o,s=a}r+=t.length,l.push(t)}return l.push({length:r,x:i,y:s}),l},AB=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TI(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const i=t[r],s=e/i.length,o=n[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return Z(Z({},new ae(i.x,i.y).lerp(new ae(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return Z(Z({},new ae(i.x,i.y).lerp(new ae(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":case"Q":return MB(i,e)}},OB=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),KT=new RegExp(SB,"g"),DB=new RegExp(yl,"gi"),LB={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},FB=n=>{var e;const t=[],r=(e=n.match(OB))!==null&&e!==void 0?e:[];for(const i of r){const s=i[0];if(s==="z"||s==="Z"){t.push([s]);continue}const o=LB[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){KT.lastIndex=0;for(let l=null;l=KT.exec(i);)a.push(...l.slice(1))}else a=i.match(DB)||[];for(let l=0;l<a.length;l+=o){const u=new Array(o),d=bB[s];u[0]=l>0&&d?d:s;for(let f=0;f<o;f++)u[f+1]=parseFloat(a[l+f]);t.push(u)}}return t},NB=(n,e)=>n.map(t=>t.map((r,i)=>i===0||e===void 0?r:$t(r,e)).join(" ")).join(" ");function M_(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[i,s]=r;return t.setProperty(i,s)}))}class jB extends nI{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),Y(this,"upper",void 0),Y(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=qi();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=uu().createElement("div");return e.setAttribute("data-fabric","wrapper"),M_(e,{position:"relative"}),CT(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:i}=t;M_(e,Z(Z({},r),{},{"touch-action":i?"manipulation":Dr})),CT(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:i}=this.upper;tI(r,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),S_(this.upper.el,e),S_(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Es().dispose(this.upper.el),delete this.upper,delete this.container}}class iy extends Gd{constructor(){super(...arguments),Y(this,"targets",[]),Y(this,"_hoveredTargets",[]),Y(this,"_objectsToRender",void 0),Y(this,"_currentTransform",null),Y(this,"_groupSelector",null),Y(this,"contextTopDirty",!1)}static getDefaults(){return Z(Z({},super.getDefaults()),iy.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new jB(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-r+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return WV(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&r.length>1&&r.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let i;return t===Zm||t===Nr||t===Si||t===rd?i=this.centeredScaling||e.centeredScaling:t===cC&&(i=this.centeredRotation||e.centeredRotation),i?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=ln:["mr","tr","br"].includes(t)&&(r.x=Tt),["tl","mt","tr"].includes(t)?r.y=C_:["bl","mb","br"].includes(t)&&(r.y=Or)),r}_setupCurrentTransform(e,t,r){var i;const s=t.group?Oc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(i=a.getActionHandler(e,t,a))===null||i===void 0?void 0:i.bind(a):aV,u=((m,v,x,w)=>{if(!v||!m)return"drag";const C=w.controls[v];return C.getActionName(x,C,w)})(r,o,e,t),d=e[this.centeredKey],f=this._shouldCenterTransform(t,u,d)?{x:at,y:at}:this._getOriginFromCorner(t,o),g={target:t,action:u,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:f.x,originY:f.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:cn(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:d,original:Z(Z({},rI(t)),{},{originX:f.x,originY:f.y})};this._currentTransform=g,this.fire("before:transform",{e,transform:g})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new ae(t,r).transform(this.viewportTransform),a=new ae(t+i,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let u=Math.min(o.x,a.x),d=Math.min(o.y,a.y),f=Math.max(o.x,a.x),g=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(u,d,f-u,g-d)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,u+=l,d+=l,f-=l,g-=l,tr.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(u,d,f-u,g-d))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,i=this.getActiveObjects();if(this.targets=[],r&&i.length>=1){if(r.findControl(t,b_(e))||i.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const i=this.getZoom(),s=e.padding/i;if(s){const[o,a,l,u]=r,d=Math.atan2(a.y-o.y,a.x-o.x),f=po(d)*s,g=mo(d)*s,m=f+g,v=f-g;r=[new ae(o.x-v,o.y-m),new ae(a.x+m,a.y-v),new ae(l.x+v,l.y+m),new ae(u.x-m,u.y+v)]}return qt.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Oc(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const i=e[r];if(this._checkTarget(i,t)){if(Ep(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,t);s&&this.targets.push(s)}return i}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Ep(r)&&r.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const o=i[s];if(!Ep(o)||!o.interactive)return o}return i[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=eV(e),o=i.width||0,a=i.height||0;o&&a||(Or in i&&C_ in i&&(a=Math.abs(i.top-i.bottom)),ln in i&&Tt in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Oc(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const u=o===0||a===0?new ae(1,1):new ae(r.width/o,r.height/a);return s.multiply(u)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=qi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return il(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{s.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),s.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),i}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,il(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),il(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,i={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),r.fire(Gp,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;il(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(i),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&il(t)&&this._activeObject===t){const r=gu(e,["angle","flipX","flipY",Tt,Nr,Si,hu,du,Or]);return nV(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(i)}}Y(iy,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class zB{constructor(e){Y(this,"targets",[]),Y(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:i}=e.getActiveObject()||{};i&&i.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),vc(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const VB=["target","oldTarget","fireCanvas","e"],Yr={passive:!1},ic=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Zo=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},fi=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},BB={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class A_ extends iy{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Y(this,"_isClick",void 0),Y(this,"textEditingManager",new zB(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Zo,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,i=this._getEventPrefix();e(eI(r),"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,"".concat(i,"move"),this._onMouseMove,Yr),e(r,"".concat(i,"out"),this._onMouseOut),e(r,"".concat(i,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Yr)}removeListeners(){this.addOrRemove(fi,"remove");const e=this._getEventPrefix(),t=Vi(this.upperCanvasEl);fi(t,"".concat(e,"up"),this._onMouseUp),fi(t,"touchend",this._onTouchEnd,Yr),fi(t,"".concat(e,"move"),this._onMouseMove,Yr),fi(t,"touchmove",this._onMouseMove,Yr),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Z({e},ic(this,e));this.fire("mouse:out",Z(Z({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Z({},r)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",Z(Z({},r),{},{target:i})),i&&i.fire("mouseout",Z({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Z({e},ic(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Zo(this.upperCanvasEl,"drag",this._onDragProgress)}ST(e)}_renderDragEffects(e,t,r){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),i=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Dr,r=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};fi(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:i}=this.findDragTargets(e),s=this._dragSource,o={e,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<i.length;l++){const u=i[l];u.canDrop(e)&&(a=u),u.fire(t,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),i={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",Z({e,target:t,subTargets:r,dragSource:this._dragSource},ic(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&ST(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),o=Vi(i);Zo(o,"touchend",this._onTouchEnd,Yr),t&&Zo(o,"touchmove",this._onMouseMove,Yr),fi(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();fi(t,"".concat(r,"move"),this._onMouseMove,Yr);const i=Vi(t);Zo(i,"".concat(r,"up"),this._onMouseUp),Zo(i,"".concat(r,"move"),this._onMouseMove,Yr)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=Vi(this.upperCanvasEl);fi(r,"touchend",this._onTouchEnd,Yr),fi(r,"touchmove",this._onMouseMove,Yr),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Zo(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const i=Vi(this.upperCanvasEl);fi(i,"".concat(r,"up"),this._onMouseUp),fi(i,"".concat(r,"move"),this._onMouseMove,Yr),Zo(t,"".concat(r,"move"),this._onMouseMove,Yr)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,i=this._isClick,s=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,u=!1;if(r&&(this._finalizeCurrentTransform(e),u=r.actionPerformed),!i){const d=s===this._activeObject;this.handleSelection(e),u||(u=this._shouldRender(s)||!d&&s===this._activeObject)}if(s){const d=s.findControl(this.getViewportPoint(e),b_(e)),{key:f,control:g}=d||{};if(l=f,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,e),u=!0;else if(g){const m=g.getMouseUpHandler(e,s,g);m&&(a=this.getScenePoint(e),m.call(g,e,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const d=r.target&&r.target.controls[r.corner],f=d&&d.getMouseUpHandler(e,r.target,d);a=a||this.getScenePoint(e),f&&f.call(d,e,r,a.x,a.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),u?this.requestRenderAll():i||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:i=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<i.length;s++)i[s]!==r&&i[s].fire(e,t);return t}_handleEvent(e,t,r){const i=this._target,s=this.targets||[],o=Z(Z(Z({e,target:i,subTargets:s},ic(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?r:{});this.fire("mouse:".concat(t),o),i&&i.fire("mouse".concat(t),o);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:i}=e;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),b_(e));if(t===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,t,r);const l=a?a.control:void 0,u=this.getScenePoint(e),d=l&&l.getMouseDownHandler(e,t,l);d&&d.call(l,e,this._currentTransform,u.x,u.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Oc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",Z(Z({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",Z(Z({},t),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:i,fireCanvas:s,e:o}=t,a=Ut(t,VB);const{targetIn:l,targetOut:u,canvasIn:d,canvasOut:f}=BB[e],g=i!==r;if(i&&g){const m=Z(Z({},a),{},{e:o,target:i,nextTarget:r},ic(this,o));s&&this.fire(f,m),i.fire(u,m)}if(r&&g){const m=Z(Z({},a),{},{e:o,target:r,previousTarget:i},ic(this,o));s&&this.fire(d,m),r.fire(l,m)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,i=r.target,s=i.group?Oc(t,void 0,i.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:i,actionHandler:s,target:o}=t,a=!!s&&s(e,t,r.x,r.y);a&&o.setCoords(),i==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const i=il(this._activeObject)?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,i=il(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||i)&&(i||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(i){const s=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,e)}else{r.isEditing&&r.exitEditing();const s=new(Ie.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,t),this._hoveredTarget=s,this._setActiveObject(s,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new ae(t,r),a=o.add(new ae(i,s)),l=o.min(a),u=o.max(a).subtract(l),d=this.collectObjects({left:l.x,top:l.y,width:u.x,height:u.y},{includeIntersecting:!this.selectionFullyContained}),f=o.eq(a)?d[0]?[d[0]]:[]:d.length>1?d.filter(g=>!g.onSelect({e})).reverse():d;if(f.length===1)this.setActiveObject(f[0],e);else if(f.length>1){const g=Ie.getClass("ActiveSelection");this.setActiveObject(new g(f,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const kI={x1:0,y1:0,x2:0,y2:0},GB=Z(Z({},kI),{},{r1:0,r2:0}),Tc=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,WB=/^(\d+\.\d+)%|(\d+)%$/;function RI(n){return n&&WB.test(n)}function PI(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(RI(n)?100:1):NaN;return Hc(0,Tc(t,e),1)}const $B=/\s*;\s*/,UB=/\s*:\s*/;function HB(n,e){let t,r;const i=n.getAttribute("style");if(i){const o=i.split($B);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,u]=o[a].split(UB).map(d=>d.trim());l==="stop-color"?t=u:l==="stop-opacity"&&(r=u)}}const s=new It(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:PI(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Tc(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function XB(n,e){const t=[],r=n.getElementsByTagName("stop"),i=PI(e,1);for(let s=r.length;s--;)t.push(HB(r[s],i));return t}function II(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function MI(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Oi(n,e){return n.getAttribute(e)}function YB(n,e){return function(t,r){let i,{width:s,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,u)=>{const d=t[u];return d==="Infinity"?i=1:d==="-Infinity"?i=0:(i=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&RI(d)&&(i*=.01,a==="pixels"&&(u!=="x1"&&u!=="x2"&&u!=="r2"||(i*=s),u!=="y1"&&u!=="y2"||(i*=o)))),l[u]=i,l},{})}(II(n)==="linear"?function(t){return{x1:Oi(t,"x1")||0,y1:Oi(t,"y1")||0,x2:Oi(t,"x2")||"100%",y2:Oi(t,"y2")||0}}(n):function(t){return{x1:Oi(t,"fx")||Oi(t,"cx")||"50%",y1:Oi(t,"fy")||Oi(t,"cy")||"50%",r1:0,x2:Oi(t,"cx")||"50%",y2:Oi(t,"cy")||"50%",r2:Oi(t,"r")||"50%"}}(n),Z(Z({},e),{},{gradientUnits:MI(n)}))}class _g{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:u}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Z(Z({},t==="radial"?GB:kI),i),colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:u?"".concat(u,"_").concat(Ca()):Ca()})}addColorStop(e){for(const t in e){const r=new It(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Z(Z({},gu(this,e)),{},{type:this.type,coords:Z({},this.coords),colorStops:this.colorStops.map(t=>Z({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():mr.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(f=>Z({},f)).sort((f,g)=>f.offset-g.offset);let a=-this.offsetX,l=-this.offsetY;var u;s==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(u=e)&&typeof u._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=a,i[5]-=l;const d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(sd(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:f,y1:g,x2:m,y2:v}=this.coords;r.push("<linearGradient ",d,' x1="',f,'" y1="',g,'" x2="',m,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:f,y1:g,x2:m,y2:v,r1:x,r2:w}=this.coords,C=x>w;r.push("<radialGradient ",d,' cx="',C?f:m,'" cy="',C?g:v,'" r="',C?x:w,'" fx="',C?m:f,'" fy="',C?v:g,`">
`),C&&(o.reverse(),o.forEach(k=>{k.offset=1-k.offset}));const b=Math.min(x,w);if(b>0){const k=b/Math.max(x,w);o.forEach(R=>{R.offset+=k*(1-R.offset)})}}return o.forEach(f=>{let{color:g,offset:m,opacity:v}=f;r.push("<stop ",'offset="',100*m+"%",'" style="stop-color:',g,v!==void 0?";stop-opacity: "+v:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:i,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,i,s):e.createRadialGradient(t,r,o,i,s,a);return this.colorStops.forEach(u=>{let{color:d,opacity:f,offset:g}=u;l.addColorStop(g,f!==void 0?new It(d).setAlpha(f).toRgba():d)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Z(Z({},e),{},{colorStops:t?t.map(i=>Z({},i)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const i=MI(e),s=t._findCenterFromElement();return new this(Z({id:e.getAttribute("id")||void 0,type:II(e),coords:YB(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:XB(e,r.opacity),gradientUnits:i,gradientTransform:R_(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Y(_g,"type","Gradient"),Ie.setClass(_g,"gradient"),Ie.setClass(_g,"linear"),Ie.setClass(_g,"radial");const KB=["type","source","patternTransform"];class Q0{get type(){return"pattern"}set type(e){wa("warn","Setting type has no effect",e)}constructor(e){Y(this,"repeat","repeat"),Y(this,"offsetX",0),Y(this,"offsetY",0),Y(this,"crossOrigin",""),this.id=Ca(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Z(Z({},gu(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:$t(this.offsetX,St.NUM_FRACTION_DIGITS),offsetY:$t(this.offsetY,St.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:i,repeat:s,id:o}=this,a=Tc(this.offsetX/t,0),l=Tc(this.offsetY/r,0),u=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Tc(i.width/t,0),d=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):Tc(i.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(u,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:i,patternTransform:s}=e,o=Ut(e,KB);const a=await kp(i,Z(Z({},t),{},{crossOrigin:o.crossOrigin}));return new this(Z(Z({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}Y(Q0,"type","Pattern"),Ie.setClass(Q0),Ie.setClass(Q0,"pattern");const qB=["path","left","top"],ZB=["d"];class sl extends tr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:i,top:s}=t,o=Ut(t,qB);super(),Object.assign(this,sl.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof i=="number"&&this.set(Tt,i),typeof s=="number"&&this.set(Or,s)}_setPath(e,t){this.path=kB(Array.isArray(e)?e:FB(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new ae(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+r);break;case"M":e.moveTo(i[1]+t,i[2]+r);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r,i[5]+t,i[6]+r);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+r,i[3]+t,i[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z(Z({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=NB(this.path,St.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=St.NUM_FRACTION_DIGITS;return" translate(".concat($t(-this.pathOffset.x,e),", ").concat($t(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:i}=this._calcDimensions();this.set({width:t,height:r,pathOffset:i}),e&&this.setPositionByOrigin(i,at,at)}_calcBoundsFromPath(){const e=[];let t=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push({x:t,y:r},{x:i,y:s});break;case"M":i=o[1],s=o[2],t=i,r=s;break;case"C":e.push(...XT(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...XT(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=t,s=r}return io(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Z(Z({},e),{},{pathOffset:new ae(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const i=ko(e,this.ATTRIBUTE_NAMES,r),{d:s}=i;return new this(s,Z(Z(Z({},Ut(i,ZB)),t),{},{left:void 0,top:void 0}))}}Y(sl,"type","Path"),Y(sl,"cacheProperties",[...To,"path","fillRule"]),Y(sl,"ATTRIBUTE_NAMES",[...Oa,"d"]),Ie.setClass(sl),Ie.setSVGClass(sl);const JB=["left","top","radius"],AI=["radius","startAngle","endAngle","counterClockwise"];class hs extends tr{static getDefaults(){return Z(Z({},super.getDefaults()),hs.ownDefaults)}constructor(e){super(),Object.assign(this,hs.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,cn(this.startAngle),cn(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Nr)}getRadiusY(){return this.get("radius")*this.get(Si)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...AI,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=cn(this.startAngle),i=cn(this.endAngle),s=po(r)*t,o=mo(r)*t,a=po(i)*t,l=mo(i)*t,u=e>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(u," ").concat(d," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const i=ko(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,radius:a=0}=i;return new this(Z(Z({},Ut(i,JB)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}Y(hs,"type","Circle"),Y(hs,"cacheProperties",[...To,...AI]),Y(hs,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Y(hs,"ATTRIBUTE_NAMES",["cx","cy","r",...Oa]),Ie.setClass(hs),Ie.setSVGClass(hs);const QB=["x1","y1","x2","y2"],eG=["x1","y1","x2","y2"],O_=["x1","x2","y1","y2"];class ca extends tr{constructor(){let[e,t,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ca.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(Tt,o),typeof a=="number"&&this.set(Or,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:i}=this;this.width=Math.abs(r-e),this.height=Math.abs(i-t);const{left:s,top:o,width:a,height:l}=io([{x:e,y:t},{x:r,y:i}]),u=new ae(s+a/2,o+l/2);this.setPositionByOrigin(u,at,at)}_set(e,t){return super._set(e,t),O_.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var i;vi(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new ae((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z(Z({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:i,width:s,height:o}=this,a=e<=t?-1:1,l=r<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e,t,r){const i=ko(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:o=0,x2:a=0,y2:l=0}=i;return new this([s,o,a,l],Ut(i,QB))}static fromObject(e){let{x1:t,y1:r,x2:i,y2:s}=e,o=Ut(e,eG);return this._fromObject(Z(Z({},o),{},{points:[t,r,i,s]}),{extraParam:"points"})}}Y(ca,"type","Line"),Y(ca,"cacheProperties",[...To,...O_]),Y(ca,"ATTRIBUTE_NAMES",Oa.concat(O_)),Ie.setClass(ca),Ie.setSVGClass(ca);class ha extends tr{static getDefaults(){return Z(Z({},super.getDefaults()),ha.ownDefaults)}constructor(e){super(),Object.assign(this,ha.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Y(ha,"type","Triangle"),Y(ha,"ownDefaults",{width:100,height:100}),Ie.setClass(ha),Ie.setSVGClass(ha);const OI=["rx","ry"];class Zs extends tr{static getDefaults(){return Z(Z({},super.getDefaults()),Zs.ownDefaults)}constructor(e){super(),Object.assign(this,Zs.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Nr)}getRy(){return this.get("ry")*this.get(Si)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...OI,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Vp,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const i=ko(e,this.ATTRIBUTE_NAMES,r);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function tG(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}Y(Zs,"type","Ellipse"),Y(Zs,"cacheProperties",[...To,...OI]),Y(Zs,"ownDefaults",{rx:0,ry:0}),Y(Zs,"ATTRIBUTE_NAMES",[...Oa,"cx","cy","rx","ry"]),Ie.setClass(Zs),Ie.setSVGClass(Zs);const nG=["left","top"],DI={exactBoundingBox:!1};class ji extends tr{static getDefaults(){return Z(Z({},super.getDefaults()),ji.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Y(this,"strokeDiff",void 0),Object.assign(this,ji.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(Tt,r),typeof i=="number"&&this.set(Or,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return UV(this.points,e,this.isOpen())}_calcDimensions(e){e=Z({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(u=>u.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new ae,strokeOffset:new ae,strokeDiff:new ae};const r=io(t),i=Jm(Z(Z({},e),{},{scaleX:1,scaleY:1})),s=io(this.points.map(u=>Pr(u,i,!0))),o=new ae(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(cn(this.skewX)),l-=a*Math.tan(cn(this.skewY))),Z(Z({},r),{},{pathOffset:new ae(a,l),strokeOffset:new ae(s.left,s.top).subtract(new ae(r.left,r.top)).multiply(o),strokeDiff:new ae(r.width,r.height).subtract(new ae(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const e=io(this.points);return new ae(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new ae(t+i/2,r+s/2),at,at)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new ae(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new ae((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var i,s;o=new ae((i=e.width)!==null&&i!==void 0?i:this.width,(s=e.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new ae(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&r&&((e===Nr||e===Si)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z(Z({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:i}=t;return{x:r,y:i}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,i=St.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push($t(this.points[s].x-t,i),",",$t(this.points[s].y-r,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<t;s++){const o=this.points[s];e.lineTo(o.x-r,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(tG(e.getAttribute("points")),Z(Z({},Ut(ko(e,this.ATTRIBUTE_NAMES,r),nG)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Y(ji,"ownDefaults",DI),Y(ji,"type","Polyline"),Y(ji,"layoutProperties",[hu,du,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Y(ji,"cacheProperties",[...To,"points"]),Y(ji,"ATTRIBUTE_NAMES",[...Oa]),Ie.setClass(ji),Ie.setSVGClass(ji);class wg extends ji{isOpen(){return!1}}Y(wg,"ownDefaults",DI),Y(wg,"type","Polygon"),Ie.setClass(wg),Ie.setSVGClass(wg);const LI=["fontSize","fontWeight","fontFamily","fontStyle"],FI=["underline","overline","linethrough"],NI=[...LI,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],jI=[...NI,...FI,"textBackgroundColor","direction"],rG=[...LI,...FI,Lr,"strokeWidth",bn,"deltaY","textBackgroundColor"],iG={_reNewline:lC,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Tt,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Tt,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},ds="justify",qp="justify-left",Gh="justify-right",Wh="justify-center";class zI extends tr{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const i in t[r])for(const s in t[r][i])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const i in r)for(const s in r[i])if(r[i][s][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,i,s=0,o=!0,a=0;for(const l in t){r=0;for(const u in t[l]){const d=t[l][u]||{};s++,d[e]!==void 0?(i?d[e]!==i&&(o=!1):i=d[e],d[e]===this[e]&&delete d[e]):o=!1,Object.keys(d).length!==0?r++:delete t[l][u]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,i,s;for(i in t){for(s in r=t[i],r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=fC(Z(Z({},this._getStyleDeclaration(r,i)),t),o=>o!==void 0);this._setStyleDeclaration(r,i,s)}getSelectionStyles(e,t,r){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i)}setSelectionStyles(e,t,r){for(let i=t;i<(r||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const i=this.styles&&this.styles[e];return i&&(r=i[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return Z(Z({},gu(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Y(zI,"_styleProperties",rG);const sG=/  +/g,oG=/"/g;function ex(n,e,t,r,i){return"		".concat(function(s,o){let{left:a,top:l,width:u,height:d}=o,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St.NUM_FRACTION_DIGITS;const g=od(bn,s,!1),[m,v,x,w]=[a,l,u,d].map(C=>$t(C,f));return"<rect ".concat(g,' x="').concat(m,'" y="').concat(v,'" width="').concat(x,'" height="').concat(w,'"></rect>')}(n,{left:e,top:t,width:r,height:i}),`
`)}const aG=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let tx;class hr extends zI{static getDefaults(){return Z(Z({},super.getDefaults()),hr.ownDefaults)}constructor(e,t){super(),Y(this,"__charBounds",[]),Object.assign(this,hr.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=TI(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(ds)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,i,s,o,a;for(let l=0,u=this._textLines.length;l<u;l++)if((this.textAlign===ds||l!==u-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let d=0;d<=s.length;d++)o=this.__charBounds[l][d],this._reSpaceAndTab.test(s[d])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(e<=r[i].length)return{lineIndex:i,charIndex:e};e-=r[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:r[i-1].length<e?r[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Lr?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case at:e.textBaseline="middle";break;case"ascender":e.textBaseline=Or;break;case"descender":e.textBaseline=C_}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,r,i,s,o){this._renderChars(e,t,r,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,u=this._getLineLeftOffset(s);let d,f,g=0,m=0,v=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let x=0;x<l;x++){const w=this.__charBounds[s][x];f=this.getValueOfPropertyAt(s,x,"textBackgroundColor"),this.path?(e.save(),e.translate(w.renderLeft,w.renderTop),e.rotate(w.angle),e.fillStyle=f,f&&e.fillRect(-w.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),w.width,a/this.lineHeight),e.restore()):f!==v?(d=r+u+m,this.direction==="rtl"&&(d=this.width-d-g),e.fillStyle=v,v&&e.fillRect(d,i,g,a/this.lineHeight),m=w.left,g=w.width,v=f):g+=w.kernedWidth}f&&!this.path&&(d=r+u+m,this.direction==="rtl"&&(d=this.width-d-g),e.fillStyle=f,e.fillRect(d,i,g,a/this.lineHeight)),i+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,i){const s=Vh.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(i),u=t.fontSize/this.CACHE_FONT_SIZE;let d,f,g,m;if(r&&s[r]!==void 0&&(g=s[r]),s[e]!==void 0&&(m=d=s[e]),l&&s[a]!==void 0&&(f=s[a],m=f-g),d===void 0||g===void 0||f===void 0){const v=function(){return tx||(tx=bi({width:0,height:0}).getContext("2d")),tx}();this._setTextStyles(v,t,!0),d===void 0&&(m=d=v.measureText(e).width,s[e]=d),g===void 0&&l&&r&&(g=v.measureText(r).width,s[r]=g),l&&f===void 0&&(f=v.measureText(a).width,s[a]=f,m=f-g)}return{width:d*u,kernedWidth:m*u}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,i=0;const s=this.pathSide===ln,o=this.path,a=this._textLines[e],l=a.length,u=new Array(l);this.__charBounds[e]=u;for(let d=0;d<l;d++){const f=a[d];r=this._getGraphemeBox(f,e,d,t),u[d]=r,i+=r.kernedWidth,t=f}if(u[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let d=0;const f=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case Tt:d=s?f-i:0;break;case at:d=(f-i)/2;break;case ln:d=s?0:f-i}d+=this.pathStartOffset*(s?-1:1);for(let g=s?l-1:0;s?g>=0:g<l;s?g--:g++)r=u[g],d>f?d%=f:d<0&&(d+=f),this._setGraphemeOnPath(d,r),d+=r.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,i=this.path,s=AB(i.path,r,i.segmentsInfo);t.renderLeft=s.x-i.pathOffset.x,t.renderTop=s.y-i.pathOffset.y,t.angle=s.angle+(this.pathSide===ln?Math.PI:0)}_getGraphemeBox(e,t,r,i,s){const o=this.getCompleteStyleDeclaration(t,r),a=i?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,i,a);let u,d=l.kernedWidth,f=l.width;this.charSpacing!==0&&(u=this._getWidthOfCharSpacing(),f+=u,d+=u);const g={width:f,left:0,height:o.fontSize,kernedWidth:d,deltaY:o.deltaY};if(r>0&&!s){const m=this.__charBounds[t][r-1];g.left=m.left+m.width+l.kernedWidth-l.width}return g}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,i=this._textLines[e].length;r<i;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,i=this._textLines.length;r<i;r++)e=this.getHeightOfLine(r),t+=r===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),u=l/this.lineHeight,d=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],i+d,s+r+u,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(bn))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,i,s,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(ds),u=this.path,d=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!u,f=this.direction==="ltr",g=this.direction==="ltr"?1:-1,m=t.direction;let v,x,w,C,b,k="",R=0;if(t.save(),m!==this.direction&&(t.canvas.setAttribute("dir",f?"ltr":"rtl"),t.direction=f?"ltr":"rtl",t.textAlign=f?Tt:ln),s-=a*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(e,t,o,0,r.join(""),i,s),void t.restore();for(let P=0,A=r.length-1;P<=A;P++)C=P===A||this.charSpacing||u,k+=r[P],w=this.__charBounds[o][P],R===0?(i+=g*(w.kernedWidth-w.width),R+=w.width):R+=w.kernedWidth,l&&!C&&this._reSpaceAndTab.test(r[P])&&(C=!0),C||(v=v||this.getCompleteStyleDeclaration(o,P),x=this.getCompleteStyleDeclaration(o,P+1),C=wC(v,x,!1)),C&&(u?(t.save(),t.translate(w.renderLeft,w.renderTop),t.rotate(w.angle),this._renderChar(e,t,o,P,k,-R/2,0),t.restore()):(b=i,this._renderChar(e,t,o,P,k,b,s)),k="",v=x,i+=g*R,R=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,i=bi({width:t,height:r}),s=i.getContext("2d");return i.width=t,i.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(e,t,r){let i,s;return vi(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,i,s,o,a){const l=this._getStyleDeclaration(r,i),u=this.getCompleteStyleDeclaration(r,i),d=e==="fillText"&&u.fill,f=e==="strokeText"&&u.stroke&&u.strokeWidth;if(f||d){if(t.save(),t.font=this._getFontDeclaration(u),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),d){const g=this._setFillStyles(t,u);t.fillText(s,o-g.offsetX,a-g.offsetY)}if(f){const g=this._setStrokeStyles(t,u);t.strokeText(s,o-g.offsetX,a-g.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===ds||i===Wh&&!o||i===Gh&&!o||i===qp&&!o?0:(i===at&&(a=r/2),i===ln&&(a=r),i===Wh&&(a=r/2),i===Gh&&(a=r),s==="rtl"&&(i===ln||i===ds||i===Gh?a=0:i===Tt||i===qp?a=-r:i!==at&&i!==Wh||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var i;return(i=this._getStyleDeclaration(e,t)[r])!==null&&i!==void 0?i:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,u=this._textLines.length;l<u;l++){const d=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=d;continue}const f=this._textLines[l],g=d/this.lineHeight,m=this._getLineLeftOffset(l);let v,x,w=0,C=0,b=this.getValueOfPropertyAt(l,0,t),k=this.getValueOfPropertyAt(l,0,bn);const R=r+g*(1-this._fontSizeFraction);let P=this.getHeightOfChar(l,0),A=this.getValueOfPropertyAt(l,0,"deltaY");for(let D=0,j=f.length;D<j;D++){const Q=this.__charBounds[l][D];v=this.getValueOfPropertyAt(l,D,t),x=this.getValueOfPropertyAt(l,D,bn);const X=this.getHeightOfChar(l,D),W=this.getValueOfPropertyAt(l,D,"deltaY");if(s&&v&&x)e.save(),e.fillStyle=k,e.translate(Q.renderLeft,Q.renderTop),e.rotate(Q.angle),e.fillRect(-Q.kernedWidth/2,a*X+W,Q.kernedWidth,this.fontSize/15),e.restore();else if((v!==b||x!==k||X!==P||W!==A)&&C>0){let G=i+m+w;this.direction==="rtl"&&(G=this.width-G-C),b&&k&&(e.fillStyle=k,e.fillRect(G,R+a*P+A,C,this.fontSize/15)),w=Q.left,C=Q.width,b=v,k=x,P=X,A=W}else C+=Q.kernedWidth}let O=i+m+w;this.direction==="rtl"&&(O=this.width-O-C),e.fillStyle=x,v&&x&&e.fillRect(O,R+a*P+A,C-o,this.fontSize/15),r+=d}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||hr.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return _C(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),i=[`
`];let s=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z(Z({},super.toObject([...jI,...e])),{},{styles:YV(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const i=ko(e,hr.ATTRIBUTE_NAMES,r),s=Z(Z({},t),i),{textAnchor:o=Tt,textDecoration:a="",dx:l=0,dy:u=0,top:d=0,left:f=0,fontSize:g=aC,strokeWidth:m=1}=s,v=Ut(s,aG),x=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Z({left:f+l,top:d+u,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:g},v)),w=x.getScaledHeight()/x.height,C=((x.height+x.strokeWidth)*x.lineHeight-x.height)*w,b=x.getScaledHeight()+C;let k=0;return o===at&&(k=x.getScaledWidth()/2),o===ln&&(k=x.getScaledWidth()),x.set({left:x.left-k,top:x.top-(b-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:m}),x}static fromObject(e){return this._fromObject(Z(Z({},e),{},{styles:KV(e.styles||{},e.text)}),{extraParam:"text"})}}Y(hr,"textLayoutProperties",NI),Y(hr,"cacheProperties",[...To,...jI]),Y(hr,"ownDefaults",iG),Y(hr,"type","Text"),Y(hr,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Y(hr,"ATTRIBUTE_NAMES",Oa.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),yI(hr,[class extends lI{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:n,withShadow:!0,additionalTransform:sd(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(oG,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let i,s=n;this.backgroundColor&&r.push(...ex(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+i,s),this._setSVGTextLineText(t,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r,i){const s=St.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(sG)),a=o?'style="'.concat(o,'"'):"",l=e.deltaY,u=l?' dy="'.concat($t(l,s),'" '):"",{angle:d,renderLeft:f,renderTop:g,width:m}=i;let v="";if(f!==void 0){const x=m/2;d&&(v=' rotate="'.concat($t(yo(d),s),'"'));const w=fu({angle:yo(d)});w[4]=f,w[5]=g;const C=new ae(-x,0).transform(w);t=C.x,r=C.y}return'<tspan x="'.concat($t(t,s),'" y="').concat($t(r,s),'" ').concat(u).concat(v).concat(a,">").concat(HV(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const i=this.getHeightOfLine(e),s=this.textAlign.includes(ds),o=this._textLines[e];let a,l,u,d,f,g="",m=0;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let v=0,x=o.length-1;v<=x;v++)f=v===x||this.charSpacing||this.path,g+=o[v],u=this.__charBounds[e][v],m===0?(t+=u.kernedWidth-u.width,m+=u.width):m+=u.kernedWidth,s&&!f&&this._reSpaceAndTab.test(o[v])&&(f=!0),f||(a=a||this.getCompleteStyleDeclaration(e,v),l=this.getCompleteStyleDeclaration(e,v+1),f=wC(a,l,!0)),f&&(d=this._getStyleDeclaration(e,v),n.push(this._createTextCharSpan(g,d,t,r,u)),g="",a=l,this.direction==="rtl"?t-=m:t+=m,m=0)}_setSVGTextLineBg(n,e,t,r){const i=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let d=0;d<i.length;d++){const{left:f,width:g,kernedWidth:m}=this.__charBounds[e][d];o=this.getValueOfPropertyAt(e,d,"textBackgroundColor"),o!==u?(u&&n.push(...ex(u,t+l,r,a,s)),l=f,a=g,u=o):a+=m}o&&n.push(...ex(u,t+l,r,a,s))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:l,deltaY:u}=n,d=this.getSvgTextDecoration(n);return[i?od(Lr,i):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",d&&"text-decoration: ".concat(d,"; "),s?od(bn,s):"",u?"baseline-shift: ".concat(-u,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),Ie.setClass(hr),Ie.setSVGClass(hr);class lG{constructor(e){Y(this,"target",void 0),Y(this,"__mouseDownInPlace",!1),Y(this,"__dragStartFired",!1),Y(this,"__isDraggingOver",!1),Y(this,"__dragStartSelection",void 0),Y(this,"__dragImageDisposer",void 0),Y(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:i,selectionEnd:s}=t;const o=this.target,a=o.canvas,l=new ae(o.flipX?-1:1,o.flipY?-1:1),u=o._getCursorBoundaries(i),d=new ae(u.left+u.leftOffset,u.top+u.topOffset).multiply(l).transform(o.calcTransformMatrix()),f=a.getScenePoint(e).subtract(d),g=o.getCanvasRetinaScaling(),m=o.getBoundingRect(),v=d.subtract(new ae(m.left,m.top)),x=a.viewportTransform,w=v.add(f).transform(x,!0),C=o.backgroundColor,b=xC(o.styles);o.backgroundColor="";const k={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(k,0,i),o.setSelectionStyles(k,s,o.text.length),o.dirty=!0;const R=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=C,o.styles=b,o.dirty=!0,M_(R,{position:"fixed",left:"".concat(-R.width,"px"),border:Dr,width:"".concat(R.width/g,"px"),height:"".concat(R.height/g,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{R.remove()},Vi(e.target||this.target.hiddenTextarea).body.appendChild(R),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(R,w.x,w.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),o=Z({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:u}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},d=s[Math.max(0,s.length-1)],f=0;if(this.__dragStartSelection){const g=this.__dragStartSelection.selectionStart,m=this.__dragStartSelection.selectionEnd;l>g&&l<=m?l=g:l>m&&(l-=m-g),o.removeChars(g,m),delete this.__dragStartSelection}o._reNewline.test(d)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,u,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+f,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Bp,{index:l+f,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Dr;l===Dr?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(Bp,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const qT=/[ \n\.,;!\?\-]/;class cG extends hr{constructor(){super(...arguments),Y(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:i,onComplete:s}=e;return dI({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let i=e>0&&this._reSpace.test(r[e])&&(t===-1||!lC.test(r[e-1]))?e-1:e,s=r[i];for(;i>0&&i<r.length&&!qT.test(s);)i+=t,s=r[i];return t===-1&&qT.test(s)&&i++,i}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),i=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Vi(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&i!==s||i!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const i=r.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const i=r.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),u=this.canvas.upperCanvasEl,d=u.width/l,f=u.height/l,g=d-o,m=f-o,v=new ae(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new ae(u.clientWidth/d,u.clientHeight/f));return v.x<0&&(v.x=0),v.x>g&&(v.x=g),v.y<0&&(v.y=0),v.y>m&&(v.y=m),v.x+=this.canvas._offset.left,v.y+=this.canvas._offset.top,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Gp),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-i;for(let u=i;u<o;u++)delete a[u];for(const u in this.styles[r]){const d=parseInt(u,10);d>=o&&(a[d-l]=a[u],delete a[u])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,i){const s={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const u=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const f in this.styles[e]){const g=parseInt(f,10);g>=t&&(l=!0,s[g-t]=this.styles[e][f],a&&t===0||delete this.styles[e][f])}let d=!1;for(l&&!a&&(this.styles[e+r]=s,d=!0),(d||o>t)&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:Z({},i[r-1])}:u?this.styles[e+r]={0:Z({},u)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,i){this.styles||(this.styles={});const s=this.styles[e],o=s?Z({},s):{};r||(r=1);for(const l in o){const u=parseInt(l,10);u>=t&&(s[u+r]=o[u],o[u-r]||delete s[u])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Z({},i[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=Z({},a)}insertNewStyleBlock(e,t,r){const i=this.get2DCursorLocation(t,!0),s=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],r):r&&this.styles[i.lineIndex+o]&&r[0]&&(this.styles[i.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Tt:this._selectionDirection===ln&&(this._selectionDirection=Tt,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===ln?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=ln:this._selectionDirection===Tt&&(this._selectionDirection=ln,this.selectionStart=t),this.selectionEnd=r)}}class uG extends cG{initHiddenTextarea(){const e=this.canvas&&Vi(this.canvas.getElement())||uu(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:i,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Bp),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,u=a.length,d=this.selectionStart,f=this.selectionEnd,g=d!==f;let m,v,x,w,C=u-l;const b=this.fromStringToGraphemeSelection(i,s,r),k=d>b.selectionStart;g?(v=this._text.slice(d,f),C+=f-d):u<l&&(v=k?this._text.slice(f+C,f):this._text.slice(d,d-C));const R=a.slice(b.selectionEnd-C,b.selectionEnd);if(v&&v.length&&(R.length&&(m=this.getSelectionStyles(d,d+1,!1),m=R.map(()=>m[0])),g?(x=d,w=f):k?(x=f-v.length,w=f):(x=f,w=f+v.length),this.removeStyleFromTo(x,w)),R.length){const{copyPasteData:P}=Es();t&&R.join("")===P.copiedText&&!St.disableStyleCopyPaste&&(m=P.copiedTextStyle),this.insertNewStyleBlock(R,d,m)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:i}=t;this.compositionStart=r,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Es();e.copiedText=this.getSelectedText(),St.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,i=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],i+=r.left+r.width),i}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),u=this._textLines[s].slice(0,o),d=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-u.length+(1-d)}_getIndexOnLine(e,t){const r=this._textLines[e];let i,s,o=this._getLineLeftOffset(e),a=0;for(let l=0,u=r.length;l<u;l++)if(i=this.__charBounds[e][l].width,o+=i,o>t){s=!0;const d=o-i,f=o,g=Math.abs(d-t);a=Math.abs(f-t)<g?l:l-1;break}return s||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===ln);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const i=this.text.length;this.selectionStart=Hc(0,this.selectionStart,i),this.selectionEnd=Hc(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Tt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let i;if(e.altKey)i=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;i=this["findLineBoundary".concat(r)](this[t])}return i!==void 0&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Tt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===ln&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Tt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Tt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ln,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=ln,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const ZT=n=>!!n.button;class hG extends uG{constructor(){super(...arguments),Y(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new lG(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!ZT(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||ZT(t)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Wi(this.calcTransformMatrix())).add(new ae(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let u=0;u<this._textLines.length&&r<=t.y;u++)r+=this.getHeightOfLine(u),s=u,u>0&&(i+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let u=0;u<a;u++){const d=o+l[u].kernedWidth;if(t.x<=d){Math.abs(t.x-d)<=Math.abs(t.x-o)&&i++;break}o=d,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const Cg="moveCursorUp",Sg="moveCursorDown",bg="moveCursorLeft",Eg="moveCursorRight",Tg="exitEditing",JT=(n,e)=>{const t=e.getRetinaScaling();n.setTransform(t,0,0,t,0,0);const r=e.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},dG=Z({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Tg,27:Tg,33:Cg,34:Sg,35:Eg,36:bg,37:bg,38:Cg,39:Eg,40:Sg},keysMapRtl:{9:Tg,27:Tg,33:Cg,34:Sg,35:bg,36:Eg,37:Eg,38:Cg,39:bg,40:Sg},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class to extends hG{static getDefaults(){return Z(Z({},super.getDefaults()),to.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,Z(Z({},to.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof A_&&this.canvas.textEditingManager.remove(this),t instanceof A_&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),i=r.length>0;let s,o=e;if(i){s=bi(e.canvas),o=s.getContext("2d"),JT(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),i)for(const a of r){const l=a.clipPath,u=bi(e.canvas),d=u.getContext("2d");if(JT(d,this.canvas),!l.absolutePositioned){const f=a.calcTransformMatrix();d.transform(f[0],f[1],f[2],f[3],f[4],f[5])}l.transform(d),l.drawObject(d,!0,{}),this.drawClipPathOnCache(o,l,u)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let u=0;u<s;u++)t+=this.getHeightOfLine(u);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(r=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===ln||this.textAlign===ds||this.textAlign===Gh?l.left*=-1:this.textAlign===Tt||this.textAlign===qp?l.left=o-(r>0?r:0):this.textAlign!==at&&this.textAlign!==Wh||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,u=this.getValueOfPropertyAt(i,s,"deltaY"),d=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:d+t.top+u,width:l,height:o}}_renderCursor(e,t,r){const{color:i,opacity:s,left:o,top:a,width:l,height:u}=this.getCursorRenderingData(r,t);e.fillStyle=i,e.globalAlpha=s,e.fillRect(o,a,l,u)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const i=t.selectionStart,s=t.selectionEnd,o=this.textAlign.includes(ds),a=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),u=a.lineIndex,d=l.lineIndex,f=a.charIndex<0?0:a.charIndex,g=l.charIndex<0?0:l.charIndex;for(let m=u;m<=d;m++){const v=this._getLineLeftOffset(m)||0;let x=this.getHeightOfLine(m),w=0,C=0,b=0;if(m===u&&(C=this.__charBounds[u][f].left),m>=u&&m<d)b=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===d)if(g===0)b=this.__charBounds[d][g].left;else{const O=this._getWidthOfCharSpacing();b=this.__charBounds[d][g-1].left+this.__charBounds[d][g-1].width-O}w=x,(this.lineHeight<1||m===d&&this.lineHeight>1)&&(x/=this.lineHeight);let k=r.left+v+C,R=x,P=0;const A=b-C;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",R=1,P=x):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ln||this.textAlign===ds||this.textAlign===Gh?k=this.width-k-A:this.textAlign===Tt||this.textAlign===qp?k=r.left+v-b:this.textAlign!==at&&this.textAlign!==Wh||(k=r.left+v-b)),e.fillRect(k,r.top+r.topOffset+P,A,R),r.topOffset+=w}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,bn)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Y(to,"ownDefaults",dG),Y(to,"type","IText"),Ie.setClass(to),Ie.setClass(to,"i-text");class da extends to{static getDefaults(){return Z(Z({},super.getDefaults()),da.ownDefaults)}constructor(e,t){super(e,Z(Z({},da.ownDefaults),t))}static createControls(){return{controls:GV()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(ds)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(r=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:t,offset:r},i+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,i=e+1,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(i=a.line,s=i===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const u in l)for(const d in l[u]){const f=parseInt(d,10);if(f>=r&&(!s||f<t))for(const g in l[u][d])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),i=[];for(let s=0;s<r.wordsData.length;s++)i.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let i=0;return{wordsData:e.map((s,o)=>{let a=0;const l=t?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(u=>{const d=t?[u]:this.graphemeSplit(u),f=this._measureWord(d,o,a);return i=Math.max(f,i),a+=d.length+r.length,{word:d,width:f}})}),largestWordWidth:i}}_measureWord(e,t){let r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=e.length;o<a;o++)s+=this._getGraphemeBox(e[o],t,o+i,r,!0).kernedWidth,r=e[o];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:i,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,u=[],d=l?"":" ";let f=0,g=[],m=0,v=0,x=!0;t-=o;const w=Math.max(t,i,this.dynamicMinWidth),C=s[e];let b;for(m=0,b=0;b<C.length;b++){const{word:k,width:R}=C[b];m+=k.length,f+=v+R-a,f>w&&!x?(u.push(g),g=[],f=R,x=!0):f+=a,x||l||g.push(d),g=g.concat(k),v=l?0:this._measureWord([d],e,m),m++,x=!1}return b&&u.push(g),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),u}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return t.lines=i,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const i=this._styleMap[t].line;e.set("".concat(i),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Y(da,"type","Textbox"),Y(da,"textLayoutProperties",[...to.textLayoutProperties,"width"]),Y(da,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Ie.setClass(da);class QT extends ry{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:i,group:s}=r;if(!i||!this.shouldPerformLayout(e))return;const{width:o,height:a}=io(_I(r,i)),l=new ae(o,a);if(i.absolutePositioned)return{center:Oc(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const u=i.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:d=new ae,correction:f=new ae}=this.calcBoundingBox(t,e)||{};return{center:d.add(u),correction:f.subtract(u),size:l}}return{center:r.getRelativeCenterPoint().add(u),size:l}}}}Y(QT,"type","clip-path"),Ie.setClass(QT);class ek extends ry{getInitialSize(e,t){let{target:r}=e,{size:i}=t;return new ae(r.width||i.x,r.height||i.y)}}Y(ek,"type","fixed"),Ie.setClass(ek);class fG extends ld{subscribeTargets(e){const t=e.target;e.targets.reduce((r,i)=>(i.parent&&r.add(i.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!r.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[t]})})}}class ol extends oo{static getDefaults(){return Z(Z({},super.getDefaults()),ol.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ol.ownDefaults),this.setOptions(t);const{left:r,top:i,layoutManager:s}=t;this.groupInit(e,{left:r,top:i,layoutManager:s??new fG})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(wa("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(i=>{const{parent:s}=i;s&&r.add(s)}),e===SC?r.forEach(i=>{i._onAfterObjectsChange(Xp,t)}):r.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=Z(Z({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);super._renderControls(e,t),e.restore()}}Y(ol,"type","ActiveSelection"),Y(ol,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Ie.setClass(ol),Ie.setClass(ol,"activeSelection");class gG{constructor(){Y(this,"resources",{})}applyFilters(e,t,r,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,i);const a={sourceWidth:r,sourceHeight:i,imageData:o.getImageData(0,0,r,i),originalEl:t,originalImageData:o.getImageData(0,0,r,i),canvasEl:s,ctx:o,filterBackend:this};e.forEach(u=>{u.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===i||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class VI{constructor(){let{tileSize:e=St.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Y(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Y(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=bi({width:e,height:t}),i=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)}applyFilters(e,t,r,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let u;o&&(u=this.getCachedTexture(o,t));const d={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,u?void 0:t),targetTexture:this.createTexture(a,r,i),originalTexture:u||this.createTexture(a,r,i,u?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},f=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,f),e.forEach(g=>{g&&g.applyTo(d)}),function(g){const m=g.targetCanvas,v=m.width,x=m.height,w=g.destinationWidth,C=g.destinationHeight;v===w&&x===C||(m.width=w,m.height=C)}(d),this.copyGLTo2D(a,d),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(d.sourceTexture),a.deleteTexture(d.targetTexture),a.deleteFramebuffer(f),l.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:u,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:f,TEXTURE_MIN_FILTER:g,TEXTURE_WRAP_S:m,TEXTURE_WRAP_T:v}=e,x=e.createTexture();return e.bindTexture(a,x),e.texParameteri(a,f,s||o),e.texParameteri(a,g,s||o),e.texParameteri(a,m,d),e.texParameteri(a,v,d),i?e.texImage2D(a,0,l,l,u,i):e.texImage2D(a,0,l,t,r,0,l,u,null),x}getCachedTexture(e,t,r){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),i=t.destinationWidth,s=t.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,a);const u=new ImageData(l,i,s);r.putImageData(u,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let nx;function pG(){const{WebGLProbe:n}=Es();return n.queryWebGL(qi()),St.enableGLFiltering&&n.isSupported(St.textureSize)?new VI({tileSize:St.textureSize}):new gG}function rx(){return!nx&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(nx=pG()),nx}const mG=["filters","resizeFilter","src","crossOrigin","type"],BI=["cropX","cropY"];class qr extends tr{static getDefaults(){return Z(Z({},super.getDefaults()),qr.ownDefaults)}constructor(e,t){super(),Y(this,"_lastScaleX",1),Y(this,"_lastScaleY",1),Y(this,"_filterScalingX",1),Y(this,"_filterScalingY",1),this.filters=[],Object.assign(this,qr.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ca()),this.setElement(typeof e=="string"?(this.canvas&&Vi(this.canvas.getElement())||uu()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(qr.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=rx(!1);t instanceof VI&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Es().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),Z(Z({},super.toObject([...BI,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,i=-this.height/2;let s=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const u=Ca();s.push('<clipPath id="imageCrop_'+u+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const u=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=u}return s=this.paintFirst!==bn?s.concat(o,e):s.concat(e,o),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return kp(e,{crossOrigin:t,signal:r}).then(i=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=bi(o),{width:l,height:u}=o;this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,rx().applyFilters([e],o,l,u,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=bi({width:r,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1);rx().applyFilters(e,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),u=t.naturalWidth||t.width,d=t.naturalHeight||t.height,f=a*r,g=l*i,m=Math.min(s*r,u-f),v=Math.min(o*i,d-g),x=-s/2,w=-o/2,C=Math.min(s,u/r-a),b=Math.min(o,d/i-l);t&&e.drawImage(t,f,g,m,v,x,w,C,b)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=lV(this.preserveAspectRatio||""),t=this.width,r=this.height,i={width:t,height:r};let s,o=this._element.width,a=this._element.height,l=1,u=1,d=0,f=0,g=0,m=0;return!e||e.alignX===Dr&&e.alignY===Dr?(l=t/o,u=r/a):(e.meetOrSlice==="meet"&&(l=u=wB(this._element,i),s=(t-o*l)/2,e.alignX==="Min"&&(d=-s),e.alignX==="Max"&&(d=s),s=(r-a*u)/2,e.alignY==="Min"&&(f=-s),e.alignY==="Max"&&(f=s)),e.meetOrSlice==="slice"&&(l=u=CB(this._element,i),s=o-t/l,e.alignX==="Mid"&&(g=s/2),e.alignX==="Max"&&(g=s),s=a-r/u,e.alignY==="Mid"&&(m=s/2),e.alignY==="Max"&&(m=s),o=t/l,a=r/u)),{width:o,height:a,scaleX:l,scaleY:u,offsetLeft:d,offsetTop:f,cropX:g,cropY:m}}static fromObject(e,t){let{filters:r,resizeFilter:i,src:s,crossOrigin:o,type:a}=e,l=Ut(e,mG);return Promise.all([kp(s,Z(Z({},t),{},{crossOrigin:o})),r&&id(r,t),i&&id([i],t),Qm(l,t)]).then(u=>{let[d,f=[],[g]=[],m={}]=u;return new this(d,Z(Z({},l),{},{src:s,filters:f,resizeFilter:g},m))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return kp(e,{crossOrigin:t,signal:r}).then(s=>new this(s,i))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=ko(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(i["xlink:href"]||i.href,t,i).catch(s=>(wa("log","Unable to parse Image",s),null))}}Y(qr,"type","Image"),Y(qr,"cacheProperties",[...To,...BI]),Y(qr,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Y(qr,"CSS_CANVAS","canvas-img"),Y(qr,"ATTRIBUTE_NAMES",[...Oa,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Ie.setClass(qr),Ie.setSVGClass(qr);ty(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const sy=n=>n.webgl!==void 0,bC="precision highp float",yG=`
    `.concat(bC,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),vG=["type"],xG=["type"],_G=new RegExp(bC,"g");class En{get type(){return this.constructor.type}constructor(){let e=Ut(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},vG);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return yG}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=Es();i!=="highp"&&(t=t.replace(_G,bC.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new ys("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new ys("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new ys("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new ys('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,i={};for(let s=0;s<r.length;s++)i[r[s]]=e.getUniformLocation(t,r[s]);return i}sendAttributeData(e,t,r){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){sy(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,i=bi({width:t,height:r});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Z({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ut(e,xG))}}Y(En,"type","BaseFilter"),Y(En,"uniformLocations",[]);const wG={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class kg extends En{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(wG[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new It(this.color).getSource(),i=this.alpha,s=r[0]*i,o=r[1]*i,a=r[2]*i,l=1-i;for(let u=0;u<t.length;u+=4){const d=t[u],f=t[u+1],g=t[u+2];let m,v,x;switch(this.mode){case"multiply":m=d*s/255,v=f*o/255,x=g*a/255;break;case"screen":m=255-(255-d)*(255-s)/255,v=255-(255-f)*(255-o)/255,x=255-(255-g)*(255-a)/255;break;case"add":m=d+s,v=f+o,x=g+a;break;case"difference":m=Math.abs(d-s),v=Math.abs(f-o),x=Math.abs(g-a);break;case"subtract":m=d-s,v=f-o,x=g-a;break;case"darken":m=Math.min(d,s),v=Math.min(f,o),x=Math.min(g,a);break;case"lighten":m=Math.max(d,s),v=Math.max(f,o),x=Math.max(g,a);break;case"overlay":m=s<128?2*d*s/255:255-2*(255-d)*(255-s)/255,v=o<128?2*f*o/255:255-2*(255-f)*(255-o)/255,x=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255;break;case"exclusion":m=s+d-2*s*d/255,v=o+f-2*o*f/255,x=a+g-2*a*g/255;break;case"tint":m=s+d*l,v=o+f*l,x=a+g*l}t[u]=m,t[u+1]=v,t[u+2]=x}}sendUniformData(e,t){const r=new It(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Y(kg,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Y(kg,"type","BlendColor"),Y(kg,"uniformLocations",["uColor"]),Ie.setClass(kg);const CG={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},SG=["type","image"];class Rg extends En{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return CG[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=qi());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):l.clearRect(0,0,r,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,i);const u=l.getImageData(0,0,r,i).data;for(let d=0;d<t.length;d+=4){const f=t[d],g=t[d+1],m=t[d+2],v=t[d+3],x=u[d],w=u[d+1],C=u[d+2],b=u[d+3];switch(this.mode){case"multiply":t[d]=f*x/255,t[d+1]=g*w/255,t[d+2]=m*C/255,t[d+3]=v*b/255;break;case"mask":t[d+3]=b}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Z(Z({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:i}=e,s=Ut(e,SG);return qr.fromObject(i,t).then(o=>new this(Z(Z({},s),{},{image:o})))}}Y(Rg,"type","BlendImage"),Y(Rg,"defaults",{mode:"multiply",alpha:1}),Y(Rg,"uniformLocations",["uTransformMatrix","uImage"]),Ie.setClass(Rg);class Pg extends En{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){sy(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:i}}=e;const{width:s,height:o}=r;i.blurLayer1||(i.blurLayer1=qi(),i.blurLayer2=qi());const a=i.blurLayer1,l=i.blurLayer2;a.width===s&&a.height===o||(l.width=a.width=s,l.height=a.height=o);const u=a.getContext("2d"),d=l.getContext("2d"),f=15,g=.06*this.blur*.5;let m,v,x,w;for(u.putImageData(r,0,0),d.clearRect(0,0,s,o),w=-15;w<=f;w++)m=(Math.random()-.5)/4,v=w/f,x=g*v*s+m,d.globalAlpha=1-Math.abs(v),d.drawImage(a,x,m),u.drawImage(l,0,0),d.globalAlpha=1,d.clearRect(0,0,l.width,l.height);for(w=-15;w<=f;w++)m=(Math.random()-.5)/4,v=w/f,x=g*v*o+m,d.globalAlpha=1-Math.abs(v),d.drawImage(a,m,x),u.drawImage(l,0,0),d.globalAlpha=1,d.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const C=t.getImageData(0,0,a.width,a.height);return u.globalAlpha=1,u.clearRect(0,0,a.width,a.height),C}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}Y(Pg,"type","Blur"),Y(Pg,"defaults",{blur:0}),Y(Pg,"uniformLocations",["uDelta"]),Ie.setClass(Pg);class Ig extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=r,t[i+1]+=r,t[i+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Y(Ig,"type","Brightness"),Y(Ig,"defaults",{brightness:0}),Y(Ig,"uniformLocations",["uBrightness"]),Ie.setClass(Ig);const GI={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class kc extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,i=this.colorsOnly;for(let s=0;s<t.length;s+=4){const o=t[s],a=t[s+1],l=t[s+2];if(t[s]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[s+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[s+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!i){const u=t[s+3];t[s]+=u*r[3],t[s+1]+=u*r[8],t[s+2]+=u*r[13],t[s+3]=o*r[15]+a*r[16]+l*r[17]+u*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}toObject(){return Z(Z({},super.toObject()),{},{matrix:[...this.matrix]})}}function El(n,e){var t;const r=(Y(t=class extends kc{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),Y(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Ie.setClass(r,n),r}Y(kc,"type","ColorMatrix"),Y(kc,"defaults",GI),Y(kc,"uniformLocations",["uColorMatrix","uConstants"]),Ie.setClass(kc);El("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);El("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);El("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);El("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);El("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);El("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);El("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class tk extends En{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){sy(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>Ie.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}Y(tk,"type","Composed"),Ie.setClass(tk);class Mg extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),i=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Y(Mg,"type","Contrast"),Y(Mg,"defaults",{contrast:0}),Y(Mg,"uniformLocations",["uContrast"]),Ie.setClass(Mg);const bG={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ag extends En{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return bG[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=t.width,l=t.height,u=e.ctx.createImageData(a,l),d=u.data,f=this.opaque?1:0;let g,m,v,x,w,C,b,k,R,P,A,O,D;for(A=0;A<l;A++)for(P=0;P<a;P++){for(w=4*(A*a+P),g=0,m=0,v=0,x=0,D=0;D<s;D++)for(O=0;O<s;O++)b=A+D-o,C=P+O-o,b<0||b>=l||C<0||C>=a||(k=4*(b*a+C),R=i[D*s+O],g+=r[k]*R,m+=r[k+1]*R,v+=r[k+2]*R,f||(x+=r[k+3]*R));d[w]=g,d[w+1]=m,d[w+2]=v,d[w+3]=f?r[w+3]:x}e.imageData=u}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Z(Z({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Y(Ag,"type","Convolute"),Y(Ag,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Y(Ag,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Ie.setClass(Ag);const WI="Gamma";class Og extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,i),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:WI,gamma:this.gamma.concat()}}}Y(Og,"type",WI),Y(Og,"defaults",{gamma:[1,1,1]}),Y(Og,"uniformLocations",["uGamma"]),Ie.setClass(Og);const EG={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Dg extends En{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}t[i+2]=t[i+1]=t[i]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return EG[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Y(Dg,"type","Grayscale"),Y(Dg,"defaults",{mode:"average"}),Y(Dg,"uniformLocations",["uMode"]),Ie.setClass(Dg);const TG=Z(Z({},GI),{},{rotation:0});class ix extends kc{calculateMatrix(){const e=this.rotation*Math.PI,t=po(e),r=mo(e),i=1/3,s=Math.sqrt(i)*r,o=1-t;this.matrix=[t+o/3,i*o-s,i*o+s,0,0,i*o+s,t+i*o,i*o-s,0,0,i*o-s,i*o+s,t+i*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Y(ix,"type","HueRotation"),Y(ix,"defaults",TG),Ie.setClass(ix);class Lg extends En{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Y(Lg,"type","Invert"),Y(Lg,"defaults",{alpha:!1,invert:!0}),Y(Lg,"uniformLocations",["uInvert","uAlpha"]),Ie.setClass(Lg);class Fg extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*r;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Y(Fg,"type","Noise"),Y(Fg,"defaults",{noise:0}),Y(Fg,"uniformLocations",["uNoise","uSeed"]),Ie.setClass(Fg);class Ng extends En{applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,l=t[a],u=t[a+1],d=t[a+2],f=t[a+3];for(let g=s;g<Math.min(s+this.blocksize,i);g++)for(let m=o;m<Math.min(o+this.blocksize,r);m++){const v=4*g*r+4*m;t[v]=l,t[v+1]=u,t[v+2]=d,t[v+3]=f}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Y(Ng,"type","Pixelate"),Y(Ng,"defaults",{blocksize:4}),Y(Ng,"uniformLocations",["uBlocksize"]),Ie.setClass(Ng);class jg extends En{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,i=new It(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],u=t[a+1],d=t[a+2];l>s[0]&&u>s[1]&&d>s[2]&&l<o[0]&&u<o[1]&&d<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new It(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,o)}}Y(jg,"type","RemoveColor"),Y(jg,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Y(jg,"uniformLocations",["uLow","uHigh"]),Ie.setClass(jg);class zg extends En{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){sy(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=t.width,o=t.height,a=Math.round(s*r),l=Math.round(o*i);let u;u=this.resizeType==="sliceHack"?this.sliceByTwo(e,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,s,o,a,l):new ImageData(a,l),e.imageData=u}sliceByTwo(e,t,r,i,s){const o=e.imageData,a=.5;let l=!1,u=!1,d=t*a,f=r*a;const g=e.filterBackend.resources;let m=0,v=0;const x=t;let w=0;g.sliceByTwo||(g.sliceByTwo=qi());const C=g.sliceByTwo;(C.width<1.5*t||C.height<r)&&(C.width=1.5*t,C.height=r);const b=C.getContext("2d");for(b.clearRect(0,0,1.5*t,r),b.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!u;)t=d,r=f,i<Math.floor(d*a)?d=Math.floor(d*a):(d=i,l=!0),s<Math.floor(f*a)?f=Math.floor(f*a):(f=s,u=!0),b.drawImage(C,m,v,t,r,x,w,d,f),m=x,v=w,w+=f;return b.getImageData(m,v,i,s)}lanczosResize(e,t,r,i,s){const o=e.imageData.data,a=e.ctx.createImageData(i,s),l=a.data,u=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,f=this.rcpScaleY,g=2/this.rcpScaleX,m=2/this.rcpScaleY,v=Math.ceil(d*this.lanczosLobes/2),x=Math.ceil(f*this.lanczosLobes/2),w={},C={x:0,y:0},b={x:0,y:0};return function k(R){let P,A,O,D,j,Q,X,W,G,V,ne;for(C.x=(R+.5)*d,b.x=Math.floor(C.x),P=0;P<s;P++){for(C.y=(P+.5)*f,b.y=Math.floor(C.y),j=0,Q=0,X=0,W=0,G=0,A=b.x-v;A<=b.x+v;A++)if(!(A<0||A>=t)){V=Math.floor(1e3*Math.abs(A-C.x)),w[V]||(w[V]={});for(let U=b.y-x;U<=b.y+x;U++)U<0||U>=r||(ne=Math.floor(1e3*Math.abs(U-C.y)),w[V][ne]||(w[V][ne]=u(Math.sqrt(Math.pow(V*g,2)+Math.pow(ne*m,2))/1e3)),O=w[V][ne],O>0&&(D=4*(U*t+A),j+=O,Q+=O*o[D],X+=O*o[D+1],W+=O*o[D+2],G+=O*o[D+3]))}D=4*(P*i+R),l[D]=Q/j,l[D+1]=X/j,l[D+2]=W/j,l[D+3]=G/j}return++R<i?k(R):a}(0)}bilinearFiltering(e,t,r,i,s){let o,a,l,u,d,f,g,m,v,x,w,C,b,k=0;const R=this.rcpScaleX,P=this.rcpScaleY,A=4*(t-1),O=e.imageData.data,D=e.ctx.createImageData(i,s),j=D.data;for(g=0;g<s;g++)for(m=0;m<i;m++)for(d=Math.floor(R*m),f=Math.floor(P*g),v=R*m-d,x=P*g-f,b=4*(f*t+d),w=0;w<4;w++)o=O[b+w],a=O[b+4+w],l=O[b+A+w],u=O[b+A+4+w],C=o*(1-v)*(1-x)+a*v*(1-x)+l*x*(1-v)+u*v*x,j[k++]=C;return D}hermiteFastResize(e,t,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),u=Math.ceil(a/2),d=e.imageData.data,f=e.ctx.createImageData(i,s),g=f.data;for(let m=0;m<s;m++)for(let v=0;v<i;v++){const x=4*(v+m*i);let w=0,C=0,b=0,k=0,R=0,P=0,A=0;const O=(m+.5)*a;for(let D=Math.floor(m*a);D<(m+1)*a;D++){const j=Math.abs(O-(D+.5))/u,Q=(v+.5)*o,X=j*j;for(let W=Math.floor(v*o);W<(v+1)*o;W++){let G=Math.abs(Q-(W+.5))/l;const V=Math.sqrt(X+G*G);V>1&&V<-1||(w=2*V*V*V-3*V*V+1,w>0&&(G=4*(W+D*t),A+=w*d[G+3],b+=w,d[G+3]<255&&(w=w*d[G+3]/250),k+=w*d[G],R+=w*d[G+1],P+=w*d[G+2],C+=w))}}g[x]=k/C,g[x+1]=R/C,g[x+2]=P/C,g[x+3]=A/b}return f}}Y(zg,"type","Resize"),Y(zg,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Y(zg,"uniformLocations",["uDelta","uTaps"]),Ie.setClass(zg);class Vg extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],l=Math.max(s,o,a);t[i]+=l!==s?(l-s)*r:0,t[i+1]+=l!==o?(l-o)*r:0,t[i+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Y(Vg,"type","Saturation"),Y(Vg,"defaults",{saturation:0}),Y(Vg,"uniformLocations",["uSaturation"]),Ie.setClass(Vg);class Bg extends En{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=t[i],o=t[i+1],a=t[i+2],l=Math.max(s,o,a),u=(s+o+a)/3,d=2*Math.abs(l-u)/255*r;t[i]+=l!==s?(l-s)*d:0,t[i+1]+=l!==o?(l-o)*d:0,t[i+2]+=l!==a?(l-a)*d:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Y(Bg,"type","Vibrance"),Y(Bg,"defaults",{vibrance:0}),Y(Bg,"uniformLocations",["uVibrance"]),Ie.setClass(Bg);const $I=E.createContext();function kG({children:n}){const[e,t]=E.useState(null),r=i=>{t(i===e?null:i)};return _.jsx($I.Provider,{value:[e,r],children:n})}function UI(){return E.useContext($I)}const nk=15,RG={borderColor:"blue",cornerColor:"blue",cornerSize:8,transparentCorners:!1};function HI(n,e,t,r,i){const s=new ca([n,e,t,r],{stroke:"red",strokeWidth:5,selectable:!1}),o=i??Math.atan2(r-e,t-n)*(180/Math.PI)+90,a=new ha({left:t,top:r,originX:"center",originY:"center",angle:o,width:nk,height:nk,fill:"red",selectable:!1});return[s,a]}function PG(n,e,t){const[r,i]=n;r.set({x2:e,y2:t}),i.set({left:e,top:t});const s=Math.atan2(t-r.y1,e-r.x1)*(180/Math.PI);i.set({angle:s+90})}function XI(n,e,t=0){return new hs({left:n,top:e,radius:t,stroke:"blue",strokeWidth:5,fill:"transparent",originX:"center",originY:"center",selectable:!0,lockRotation:!0})}function IG(n,e,t){const r=Math.sqrt((e-n.left)**2+(t-n.top)**2);n.set({radius:r,originX:"center",originY:"center"}),n.setCoords()}function YI(n,e,t=0,r=0){return new zi({left:n,top:e,width:t,height:r,stroke:"green",strokeWidth:5,fill:"transparent",originX:"left",originY:"top",selectable:!0,lockRotation:!0})}function MG(n,e,t){const r=Math.abs(e-n.left),i=Math.abs(t-n.top);n.set({width:r,height:i,originX:"left",originY:"top"}),n.setCoords()}function KI(n,e,t="Digite aqui",r=20,i=200){const s=new da(t,{left:n,top:e,width:i,fontSize:r,fill:"#333",textAlign:"center",fontFamily:"Arial",editable:!0,backgroundColor:"transparent",padding:10,...RG});return s.on("changed",()=>{s.set({width:Math.max(200,s.width)})}),s}function AG(n,e,t,r,i){return(n-t)*(n-t)+(e-r)*(e-r)<=i*i}function OG(n,e){if(e.type==="circle"){const t=e.left,r=e.top,i=e.radius*Math.max(e.scaleX,e.scaleY);return AG(n.x,n.y,t,r,i)}else{const t=e.left,r=e.top,i=e.left+e.width*e.scaleX,s=e.top+e.height*e.scaleY;return n.x>=t&&n.x<=i&&n.y>=r&&n.y<=s}}function DG(n,e){return n.getObjects().filter(t=>t.type!=="image").find(t=>OG(e,t))}const LG=16/9;function rk(n,e){const t=e/LG;n.setWidth(e),n.setHeight(t),n.renderAll()}function FG({type:n,shape:e},t,r){if(n==="arrow"){const[i,s]=e.getObjects();return{type:n,x1:i.x1/t,y1:i.y1/r,x2:i.x2/t,y2:i.y2/r,angle:s.angle,groupAngle:e.angle}}if(n==="circle")return{type:n,top:e.top/r,left:e.left/t,radius:e.radius};if(n==="rect")return{type:n,top:e.top/r,left:e.left/t,width:e.width/t,height:e.height/r};if(n==="textbox")return{type:n,top:e.top/r,left:e.left/t,fontSize:e.fontSize,width:e.width/t,content:e.text}}function NG(n,e,t){if(n.type==="arrow")return new oo(HI(n.x1*e,n.y1*t,n.x2*e,n.y2*t,n.angle),{annotationType:n.type,selectable:!0,angle:n.groupAngle,lockRotation:!0});if(n.type==="circle")return XI(n.left*e,n.top*t,n.radius);if(n.type==="rect")return YI(n.left*e,n.top*t,n.width*e,n.height*t);if(n.type==="textbox")return KI(n.left*e,n.top*t,n.content,n.fontSize,n.width*e)}function jG({url:n,cachedVectors:e=[],onSubmit:t,onCancel:r}){const[i,s]=UI(),[o,a]=E.useState(),l=E.useRef(null),u=E.useRef(),d=typeof t!="function";E.useEffect(()=>{if(!l.current)return;const g=new A_(l.current,{backgroundColor:"#f3f3f3",selection:!1,stopContextMenu:!0,fireRightClick:!0});return rk(g,window.innerWidth*.7),qr.fromURL(n,{crossOrigin:"anonymous"}).then(m=>{m.selectable=!1,m.set({originX:"center",originY:"center"}),m.scaleX=.7,m.scaleY=.7,g.centerObject(m),g.add(m),m.scaleToWidth(g.width),m.scaleToHeight(g.height),g.renderAll(),e.length>0&&(e.forEach(v=>{const x=NG(v,g.width,g.height);d&&x.set("selectable",!1),g.add(x)}),g.renderAll())}),a(g),()=>{g.dispose()}},[n]),E.useEffect(()=>{if(o)return o.on("mouse:down",({e:g,target:m})=>{var b;if(g!=null&&g.button&&g.button!==0)return;const v=o.getPointer(((b=g.touches)==null?void 0:b[0])??g),x=DG(o,v),w=v.x,C=v.y;if(i==="arrow"){const k=HI(w,C,w,C,0);o.add(...k),u.current={type:"arrow",shape:k}}if(i==="circle"){const k=XI(w,C);o.add(k),u.current={type:"circle",shape:k}}if(i==="rect"){const k=YI(w,C);o.add(k),u.current={type:"rect",shape:k}}if(i==="text"){const k=KI(w,C);o.add(k),u.current={type:"text",shape:k}}i==="trash"&&x&&(o.remove(x),o.renderAll())}),o.on("mouse:move",({e:g})=>{var C;if(!u.current)return;const m=o.getPointer(((C=g.touches)==null?void 0:C[0])??g),v=m.x,x=m.y,w=u.current;w.type==="arrow"&&PG(w.shape,v,x),w.type==="circle"&&IG(w.shape,v,x),w.type==="rect"&&MG(w.shape,v,x),o.renderAll()}),o.on("mouse:up",()=>{if(!u.current)return;const g=u.current;if(Array.isArray(g.shape)){const m=new oo(g.shape,{annotationType:g.type,selectable:!0,lockRotation:!0});o.add(m),o.remove(...g.shape)}o.renderAll(),u.current=null,s(i)}),o.on("object:scaling",({target:g})=>{if(g.type==="rect"){const m=Math.abs(g.width*g.scaleX),v=Math.abs(g.height*g.scaleY);g.set({objectCaching:!1,scaleX:1,scaleY:1,width:m,height:v}),g.setCoords(),o.renderAll()}if(g.type==="textbox"){const m=g.scaleX,v=g.scaleY;g.set({width:g.width*m,height:g.height*v,fontSize:g.fontSize*v,scaleX:1,scaleY:1}),g.setCoords(),o.requestRenderAll()}}),()=>{o.off()}},[o,i]),E.useEffect(()=>{const g=()=>{o&&(rk(o,window.innerWidth*.7),o.renderAll())};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}},[o]);const f=()=>{const g=o.getObjects().filter(v=>v.type!=="image").map(v=>FG({type:v.annotationType??v.type,shape:v},o.width,o.height)),m=o.toDataURL({format:"png",quality:1,width:1080,height:720});t(g,m)};return _.jsxs(_.Fragment,{children:[_.jsx("canvas",{className:"image-editor",ref:l}),!d&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("button",{onClick:f,className:"mt-2 w-full bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-700",children:"Salvar"}),_.jsx("button",{onClick:r,className:"w-full bg-stone-400 text-white p-2 rounded-lg hover:bg-stone-500",children:"Cancelar"})]})]})}function Da(...n){return nC(Um(n))}function ph(n){return _.jsx("button",{className:"w-16 h-16 flex items-center justify-center hover:bg-gray-300 cursor-pointer text-gray-400 hover:text-primary data-[selected=true]:bg-gray-300 data-[selected=true]:text-primary",...n})}function zG(){const[n,e]=UI();return _.jsxs(_.Fragment,{children:[_.jsx(ph,{onClick:()=>e("circle"),"data-selected":n==="circle",children:_.jsx(_P,{className:"size-9"})}),_.jsx(ph,{onClick:()=>e("arrow"),"data-selected":n==="arrow",children:_.jsx(V3,{className:"size-9"})}),_.jsx(ph,{onClick:()=>e("rect"),"data-selected":n==="rect",children:_.jsx(G3,{className:"size-9"})}),_.jsx(ph,{onClick:()=>e("text"),"data-selected":n==="text",children:_.jsx(Y3,{className:"size-9"})}),_.jsx(ph,{onClick:()=>e("trash"),"data-selected":n==="trash",children:_.jsx(X3,{className:"size-9"})})]})}function qI({imageUrl:n,vectors:e,onSave:t,sidebarEnabled:r=!0,onCancel:i}){return _.jsx(kG,{children:_.jsxs("div",{className:"flex flex-row",children:[r&&_.jsx("div",{className:"flex flex-col",children:_.jsx(zG,{})}),_.jsx("div",{className:"mx-auto",children:_.jsx(jG,{url:n,cachedVectors:e,onSubmit:t,onCancel:i})})]})})}var Wd=n=>n.type==="checkbox",al=n=>n instanceof Date,dr=n=>n==null;const ZI=n=>typeof n=="object";var hn=n=>!dr(n)&&!Array.isArray(n)&&ZI(n)&&!al(n),VG=n=>hn(n)&&n.target?Wd(n.target)?n.target.checked:n.target.value:n,BG=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,GG=(n,e)=>n.has(BG(e)),WG=n=>{const e=n.constructor&&n.constructor.prototype;return hn(e)&&e.hasOwnProperty("isPrototypeOf")},EC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Yn(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(EC&&(n instanceof Blob||r))&&(t||hn(n)))if(e=t?[]:{},!t&&!WG(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=Yn(n[i]));else return n;return e}var oy=n=>Array.isArray(n)?n.filter(Boolean):[],yn=n=>n===void 0,Le=(n,e,t)=>{if(!e||!hn(n))return t;const r=oy(e.split(/[,[\].]+?/)).reduce((i,s)=>dr(i)?i:i[s],n);return yn(r)||r===n?yn(n[e])?t:n[e]:r},us=n=>typeof n=="boolean",TC=n=>/^\w*$/.test(n),JI=n=>oy(n.replace(/["|']|\]/g,"").split(/\.|\[/)),At=(n,e,t)=>{let r=-1;const i=TC(e)?[e]:JI(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=t;if(r!==o){const u=n[a];l=hn(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=l,n=n[a]}};const ik={BLUR:"blur",FOCUS_OUT:"focusout"},Bi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ws={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$G=mn.createContext(null),UG=n=>{const{children:e,...t}=n;return mn.createElement($G.Provider,{value:t},e)};var HG=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Bi.all&&(e._proxyFormState[o]=!r||Bi.all),n[o]}});return i},vs=n=>typeof n=="string",XG=(n,e,t,r,i)=>vs(n)?(r&&e.watch.add(n),Le(t,n,i)):Array.isArray(n)?n.map(s=>(r&&e.watch.add(s),Le(t,s))):(r&&(e.watchAll=!0),t),QI=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},$h=n=>Array.isArray(n)?n:[n],sk=()=>{let n=[];return{get observers(){return n},next:i=>{for(const s of n)s.next&&s.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(s=>s!==i)}}),unsubscribe:()=>{n=[]}}},D_=n=>dr(n)||!ZI(n);function ua(n,e){if(D_(n)||D_(e))return n===e;if(al(n)&&al(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const s=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(al(s)&&al(o)||hn(s)&&hn(o)||Array.isArray(s)&&Array.isArray(o)?!ua(s,o):s!==o)return!1}}return!0}var ur=n=>hn(n)&&!Object.keys(n).length,kC=n=>n.type==="file",Gi=n=>typeof n=="function",Zp=n=>{if(!EC)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},eM=n=>n.type==="select-multiple",RC=n=>n.type==="radio",YG=n=>RC(n)||Wd(n),sx=n=>Zp(n)&&n.isConnected;function KG(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=yn(n)?r++:n[e[r++]];return n}function qG(n){for(const e in n)if(n.hasOwnProperty(e)&&!yn(n[e]))return!1;return!0}function Sn(n,e){const t=Array.isArray(e)?e:TC(e)?[e]:JI(e),r=t.length===1?n:KG(n,t),i=t.length-1,s=t[i];return r&&delete r[s],i!==0&&(hn(r)&&ur(r)||Array.isArray(r)&&qG(r))&&Sn(n,t.slice(0,-1)),n}var tM=n=>{for(const e in n)if(Gi(n[e]))return!0;return!1};function Jp(n,e={}){const t=Array.isArray(n);if(hn(n)||t)for(const r in n)Array.isArray(n[r])||hn(n[r])&&!tM(n[r])?(e[r]=Array.isArray(n[r])?[]:{},Jp(n[r],e[r])):dr(n[r])||(e[r]=!0);return e}function nM(n,e,t){const r=Array.isArray(n);if(hn(n)||r)for(const i in n)Array.isArray(n[i])||hn(n[i])&&!tM(n[i])?yn(e)||D_(t[i])?t[i]=Array.isArray(n[i])?Jp(n[i],[]):{...Jp(n[i])}:nM(n[i],dr(e)?{}:e[i],t[i]):t[i]=!ua(n[i],e[i]);return t}var mh=(n,e)=>nM(n,e,Jp(e));const ok={value:!1,isValid:!1},ak={value:!0,isValid:!0};var rM=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!yn(n[0].attributes.value)?yn(n[0].value)||n[0].value===""?ak:{value:n[0].value,isValid:!0}:ak:ok}return ok},iM=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>yn(n)?n:e?n===""?NaN:n&&+n:t&&vs(n)?new Date(n):r?r(n):n;const lk={isValid:!1,value:null};var sM=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,lk):lk;function ck(n){const e=n.ref;return kC(e)?e.files:RC(e)?sM(n.refs).value:eM(e)?[...e.selectedOptions].map(({value:t})=>t):Wd(e)?rM(n.refs).value:iM(yn(e.value)?n.ref.value:e.value,n)}var ZG=(n,e,t,r)=>{const i={};for(const s of n){const o=Le(e,s);o&&At(i,s,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},Qp=n=>n instanceof RegExp,yh=n=>yn(n)?n:Qp(n)?n.source:hn(n)?Qp(n.value)?n.value.source:n.value:n,uk=n=>({isOnSubmit:!n||n===Bi.onSubmit,isOnBlur:n===Bi.onBlur,isOnChange:n===Bi.onChange,isOnAll:n===Bi.all,isOnTouch:n===Bi.onTouched});const hk="AsyncFunction";var JG=n=>!!n&&!!n.validate&&!!(Gi(n.validate)&&n.validate.constructor.name===hk||hn(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===hk)),QG=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),dk=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Uh=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const s=Le(n,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Uh(a,e))break}else if(hn(a)&&Uh(a,e))break}}};function fk(n,e,t){const r=Le(n,t);if(r||TC(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),o=Le(e,s),a=Le(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:t}}var eW=(n,e,t,r)=>{t(n);const{name:i,...s}=n;return ur(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Bi.all))},tW=(n,e,t)=>!n||!e||n===e||$h(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),nW=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,rW=(n,e)=>!oy(Le(n,e)).length&&Sn(n,e),iW=(n,e,t)=>{const r=$h(Le(n,t));return At(r,"root",e[t]),At(n,t,r),n},Pp=n=>vs(n);function gk(n,e,t="validate"){if(Pp(n)||Array.isArray(n)&&n.every(Pp)||us(n)&&!n)return{type:t,message:Pp(n)?n:"",ref:e}}var sc=n=>hn(n)&&!Qp(n)?n:{value:n,message:""},pk=async(n,e,t,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:d,min:f,max:g,pattern:m,validate:v,name:x,valueAsNumber:w,mount:C}=n._f,b=Le(t,x);if(!C||e.has(x))return{};const k=a?a[0]:o,R=W=>{i&&k.reportValidity&&(k.setCustomValidity(us(W)?"":W||""),k.reportValidity())},P={},A=RC(o),O=Wd(o),D=A||O,j=(w||kC(o))&&yn(o.value)&&yn(b)||Zp(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,Q=QI.bind(null,x,r,P),X=(W,G,V,ne=Ws.maxLength,U=Ws.minLength)=>{const oe=W?G:V;P[x]={type:W?ne:U,message:oe,ref:o,...Q(W?ne:U,oe)}};if(s?!Array.isArray(b)||!b.length:l&&(!D&&(j||dr(b))||us(b)&&!b||O&&!rM(a).isValid||A&&!sM(a).isValid)){const{value:W,message:G}=Pp(l)?{value:!!l,message:l}:sc(l);if(W&&(P[x]={type:Ws.required,message:G,ref:k,...Q(Ws.required,G)},!r))return R(G),P}if(!j&&(!dr(f)||!dr(g))){let W,G;const V=sc(g),ne=sc(f);if(!dr(b)&&!isNaN(b)){const U=o.valueAsNumber||b&&+b;dr(V.value)||(W=U>V.value),dr(ne.value)||(G=U<ne.value)}else{const U=o.valueAsDate||new Date(b),oe=I=>new Date(new Date().toDateString()+" "+I),F=o.type=="time",K=o.type=="week";vs(V.value)&&b&&(W=F?oe(b)>oe(V.value):K?b>V.value:U>new Date(V.value)),vs(ne.value)&&b&&(G=F?oe(b)<oe(ne.value):K?b<ne.value:U<new Date(ne.value))}if((W||G)&&(X(!!W,V.message,ne.message,Ws.max,Ws.min),!r))return R(P[x].message),P}if((u||d)&&!j&&(vs(b)||s&&Array.isArray(b))){const W=sc(u),G=sc(d),V=!dr(W.value)&&b.length>+W.value,ne=!dr(G.value)&&b.length<+G.value;if((V||ne)&&(X(V,W.message,G.message),!r))return R(P[x].message),P}if(m&&!j&&vs(b)){const{value:W,message:G}=sc(m);if(Qp(W)&&!b.match(W)&&(P[x]={type:Ws.pattern,message:G,ref:o,...Q(Ws.pattern,G)},!r))return R(G),P}if(v){if(Gi(v)){const W=await v(b,t),G=gk(W,k);if(G&&(P[x]={...G,...Q(Ws.validate,G.message)},!r))return R(G.message),P}else if(hn(v)){let W={};for(const G in v){if(!ur(W)&&!r)break;const V=gk(await v[G](b,t),k,G);V&&(W={...V,...Q(G,V.message)},R(V.message),r&&(P[x]=W))}if(!ur(W)&&(P[x]={ref:k,...W},!r))return P}}return R(!0),P};const sW={mode:Bi.onSubmit,reValidateMode:Bi.onChange,shouldFocusError:!0};function oW(n={}){let e={...sW,...n},t={submitCount:0,isDirty:!1,isLoading:Gi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=hn(e.defaultValues)||hn(e.values)?Yn(e.values||e.defaultValues)||{}:{},s=e.shouldUnregister?{}:Yn(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const g={array:sk(),state:sk()},m=uk(e.mode),v=uk(e.reValidateMode),x=e.criteriaMode===Bi.all,w=B=>ie=>{clearTimeout(u),u=setTimeout(B,ie)},C=async B=>{if(!e.disabled&&(d.isValid||f.isValid||B)){const ie=e.resolver?ur((await j()).errors):await X(r,!0);ie!==t.isValid&&g.state.next({isValid:ie})}},b=(B,ie)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((B||Array.from(a.mount)).forEach(ue=>{ue&&(ie?At(t.validatingFields,ue,ie):Sn(t.validatingFields,ue))}),g.state.next({validatingFields:t.validatingFields,isValidating:!ur(t.validatingFields)}))},k=(B,ie=[],ue,Ee,H=!0,te=!0)=>{if(Ee&&ue&&!e.disabled){if(o.action=!0,te&&Array.isArray(Le(r,B))){const he=ue(Le(r,B),Ee.argA,Ee.argB);H&&At(r,B,he)}if(te&&Array.isArray(Le(t.errors,B))){const he=ue(Le(t.errors,B),Ee.argA,Ee.argB);H&&At(t.errors,B,he),rW(t.errors,B)}if((d.touchedFields||f.touchedFields)&&te&&Array.isArray(Le(t.touchedFields,B))){const he=ue(Le(t.touchedFields,B),Ee.argA,Ee.argB);H&&At(t.touchedFields,B,he)}(d.dirtyFields||f.dirtyFields)&&(t.dirtyFields=mh(i,s)),g.state.next({name:B,isDirty:G(B,ie),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else At(s,B,ie)},R=(B,ie)=>{At(t.errors,B,ie),g.state.next({errors:t.errors})},P=B=>{t.errors=B,g.state.next({errors:t.errors,isValid:!1})},A=(B,ie,ue,Ee)=>{const H=Le(r,B);if(H){const te=Le(s,B,yn(ue)?Le(i,B):ue);yn(te)||Ee&&Ee.defaultChecked||ie?At(s,B,ie?te:ck(H._f)):U(B,te),o.mount&&C()}},O=(B,ie,ue,Ee,H)=>{let te=!1,he=!1;const _e={name:B};if(!e.disabled){if(!ue||Ee){(d.isDirty||f.isDirty)&&(he=t.isDirty,t.isDirty=_e.isDirty=G(),te=he!==_e.isDirty);const Ve=ua(Le(i,B),ie);he=!!Le(t.dirtyFields,B),Ve?Sn(t.dirtyFields,B):At(t.dirtyFields,B,!0),_e.dirtyFields=t.dirtyFields,te=te||(d.dirtyFields||f.dirtyFields)&&he!==!Ve}if(ue){const Ve=Le(t.touchedFields,B);Ve||(At(t.touchedFields,B,ue),_e.touchedFields=t.touchedFields,te=te||(d.touchedFields||f.touchedFields)&&Ve!==ue)}te&&H&&g.state.next(_e)}return te?_e:{}},D=(B,ie,ue,Ee)=>{const H=Le(t.errors,B),te=(d.isValid||f.isValid)&&us(ie)&&t.isValid!==ie;if(e.delayError&&ue?(l=w(()=>R(B,ue)),l(e.delayError)):(clearTimeout(u),l=null,ue?At(t.errors,B,ue):Sn(t.errors,B)),(ue?!ua(H,ue):H)||!ur(Ee)||te){const he={...Ee,...te&&us(ie)?{isValid:ie}:{},errors:t.errors,name:B};t={...t,...he},g.state.next(he)}},j=async B=>{b(B,!0);const ie=await e.resolver(s,e.context,ZG(B||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return b(B),ie},Q=async B=>{const{errors:ie}=await j(B);if(B)for(const ue of B){const Ee=Le(ie,ue);Ee?At(t.errors,ue,Ee):Sn(t.errors,ue)}else t.errors=ie;return ie},X=async(B,ie,ue={valid:!0})=>{for(const Ee in B){const H=B[Ee];if(H){const{_f:te,...he}=H;if(te){const _e=a.array.has(te.name),Ve=H._f&&JG(H._f);Ve&&d.validatingFields&&b([Ee],!0);const ut=await pk(H,a.disabled,s,x,e.shouldUseNativeValidation&&!ie,_e);if(Ve&&d.validatingFields&&b([Ee]),ut[te.name]&&(ue.valid=!1,ie))break;!ie&&(Le(ut,te.name)?_e?iW(t.errors,ut,te.name):At(t.errors,te.name,ut[te.name]):Sn(t.errors,te.name))}!ur(he)&&await X(he,ie,ue)}}return ue.valid},W=()=>{for(const B of a.unMount){const ie=Le(r,B);ie&&(ie._f.refs?ie._f.refs.every(ue=>!sx(ue)):!sx(ie._f.ref))&&Se(B)}a.unMount=new Set},G=(B,ie)=>!e.disabled&&(B&&ie&&At(s,B,ie),!ua(q(),i)),V=(B,ie,ue)=>XG(B,a,{...o.mount?s:yn(ie)?i:vs(B)?{[B]:ie}:ie},ue,ie),ne=B=>oy(Le(o.mount?s:i,B,e.shouldUnregister?Le(i,B,[]):[])),U=(B,ie,ue={})=>{const Ee=Le(r,B);let H=ie;if(Ee){const te=Ee._f;te&&(!te.disabled&&At(s,B,iM(ie,te)),H=Zp(te.ref)&&dr(ie)?"":ie,eM(te.ref)?[...te.ref.options].forEach(he=>he.selected=H.includes(he.value)):te.refs?Wd(te.ref)?te.refs.length>1?te.refs.forEach(he=>(!he.defaultChecked||!he.disabled)&&(he.checked=Array.isArray(H)?!!H.find(_e=>_e===he.value):H===he.value)):te.refs[0]&&(te.refs[0].checked=!!H):te.refs.forEach(he=>he.checked=he.value===H):kC(te.ref)?te.ref.value="":(te.ref.value=H,te.ref.type||g.state.next({name:B,values:Yn(s)})))}(ue.shouldDirty||ue.shouldTouch)&&O(B,H,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&N(B)},oe=(B,ie,ue)=>{for(const Ee in ie){const H=ie[Ee],te=`${B}.${Ee}`,he=Le(r,te);(a.array.has(B)||hn(H)||he&&!he._f)&&!al(H)?oe(te,H,ue):U(te,H,ue)}},F=(B,ie,ue={})=>{const Ee=Le(r,B),H=a.array.has(B),te=Yn(ie);At(s,B,te),H?(g.array.next({name:B,values:Yn(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&ue.shouldDirty&&g.state.next({name:B,dirtyFields:mh(i,s),isDirty:G(B,te)})):Ee&&!Ee._f&&!dr(te)?oe(B,te,ue):U(B,te,ue),dk(B,a)&&g.state.next({...t}),g.state.next({name:o.mount?B:void 0,values:Yn(s)})},K=async B=>{o.mount=!0;const ie=B.target;let ue=ie.name,Ee=!0;const H=Le(r,ue),te=he=>{Ee=Number.isNaN(he)||al(he)&&isNaN(he.getTime())||ua(he,Le(s,ue,he))};if(H){let he,_e;const Ve=ie.type?ck(H._f):VG(B),ut=B.type===ik.BLUR||B.type===ik.FOCUS_OUT,xr=!QG(H._f)&&!e.resolver&&!Le(t.errors,ue)&&!H._f.deps||nW(ut,Le(t.touchedFields,ue),t.isSubmitted,v,m),dn=dk(ue,a,ut);At(s,ue,Ve),ut?(H._f.onBlur&&H._f.onBlur(B),l&&l(0)):H._f.onChange&&H._f.onChange(B);const _r=O(ue,Ve,ut),Ei=!ur(_r)||dn;if(!ut&&g.state.next({name:ue,type:B.type,values:Yn(s)}),xr)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?ut&&C():ut||C()),Ei&&g.state.next({name:ue,...dn?{}:_r});if(!ut&&dn&&g.state.next({...t}),e.resolver){const{errors:Xt}=await j([ue]);if(te(Ve),Ee){const sr=fk(t.errors,r,ue),fn=fk(Xt,r,sr.name||ue);he=fn.error,ue=fn.name,_e=ur(Xt)}}else b([ue],!0),he=(await pk(H,a.disabled,s,x,e.shouldUseNativeValidation))[ue],b([ue]),te(Ve),Ee&&(he?_e=!1:(d.isValid||f.isValid)&&(_e=await X(r,!0)));Ee&&(H._f.deps&&N(H._f.deps),D(ue,_e,he,_r))}},I=(B,ie)=>{if(Le(t.errors,ie)&&B.focus)return B.focus(),1},N=async(B,ie={})=>{let ue,Ee;const H=$h(B);if(e.resolver){const te=await Q(yn(B)?B:H);ue=ur(te),Ee=B?!H.some(he=>Le(te,he)):ue}else B?(Ee=(await Promise.all(H.map(async te=>{const he=Le(r,te);return await X(he&&he._f?{[te]:he}:he)}))).every(Boolean),!(!Ee&&!t.isValid)&&C()):Ee=ue=await X(r);return g.state.next({...!vs(B)||(d.isValid||f.isValid)&&ue!==t.isValid?{}:{name:B},...e.resolver||!B?{isValid:ue}:{},errors:t.errors}),ie.shouldFocus&&!Ee&&Uh(r,I,B?H:a.mount),Ee},q=B=>{const ie={...o.mount?s:i};return yn(B)?ie:vs(B)?Le(ie,B):B.map(ue=>Le(ie,ue))},L=(B,ie)=>({invalid:!!Le((ie||t).errors,B),isDirty:!!Le((ie||t).dirtyFields,B),error:Le((ie||t).errors,B),isValidating:!!Le(t.validatingFields,B),isTouched:!!Le((ie||t).touchedFields,B)}),ee=B=>{B&&$h(B).forEach(ie=>Sn(t.errors,ie)),g.state.next({errors:B?t.errors:{}})},be=(B,ie,ue)=>{const Ee=(Le(r,B,{_f:{}})._f||{}).ref,H=Le(t.errors,B)||{},{ref:te,message:he,type:_e,...Ve}=H;At(t.errors,B,{...Ve,...ie,ref:Ee}),g.state.next({name:B,errors:t.errors,isValid:!1}),ue&&ue.shouldFocus&&Ee&&Ee.focus&&Ee.focus()},pe=(B,ie)=>Gi(B)?g.state.subscribe({next:ue=>B(V(void 0,ie),ue)}):V(B,ie,!0),ce=B=>g.state.subscribe({next:ie=>{tW(B.name,ie.name,B.exact)&&eW(ie,B.formState||d,Dn,B.reRenderRoot)&&B.callback({values:{...s},...t,...ie})}}).unsubscribe,ve=B=>(o.mount=!0,f={...f,...B.formState},ce({...B,formState:f})),Se=(B,ie={})=>{for(const ue of B?$h(B):a.mount)a.mount.delete(ue),a.array.delete(ue),ie.keepValue||(Sn(r,ue),Sn(s,ue)),!ie.keepError&&Sn(t.errors,ue),!ie.keepDirty&&Sn(t.dirtyFields,ue),!ie.keepTouched&&Sn(t.touchedFields,ue),!ie.keepIsValidating&&Sn(t.validatingFields,ue),!e.shouldUnregister&&!ie.keepDefaultValue&&Sn(i,ue);g.state.next({values:Yn(s)}),g.state.next({...t,...ie.keepDirty?{isDirty:G()}:{}}),!ie.keepIsValid&&C()},Ce=({disabled:B,name:ie})=>{(us(B)&&o.mount||B||a.disabled.has(ie))&&(B?a.disabled.add(ie):a.disabled.delete(ie))},Ue=(B,ie={})=>{let ue=Le(r,B);const Ee=us(ie.disabled)||us(e.disabled);return At(r,B,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:B}},name:B,mount:!0,...ie}}),a.mount.add(B),ue?Ce({disabled:us(ie.disabled)?ie.disabled:e.disabled,name:B}):A(B,!0,ie.value),{...Ee?{disabled:ie.disabled||e.disabled}:{},...e.progressive?{required:!!ie.required,min:yh(ie.min),max:yh(ie.max),minLength:yh(ie.minLength),maxLength:yh(ie.maxLength),pattern:yh(ie.pattern)}:{},name:B,onChange:K,onBlur:K,ref:H=>{if(H){Ue(B,ie),ue=Le(r,B);const te=yn(H.value)&&H.querySelectorAll&&H.querySelectorAll("input,select,textarea")[0]||H,he=YG(te),_e=ue._f.refs||[];if(he?_e.find(Ve=>Ve===te):te===ue._f.ref)return;At(r,B,{_f:{...ue._f,...he?{refs:[..._e.filter(sx),te,...Array.isArray(Le(i,B))?[{}]:[]],ref:{type:te.type,name:B}}:{ref:te}}}),A(B,!1,void 0,te)}else ue=Le(r,B,{}),ue._f&&(ue._f.mount=!1),(e.shouldUnregister||ie.shouldUnregister)&&!(GG(a.array,B)&&o.action)&&a.unMount.add(B)}}},Ke=()=>e.shouldFocusError&&Uh(r,I,a.mount),Dt=B=>{us(B)&&(g.state.next({disabled:B}),Uh(r,(ie,ue)=>{const Ee=Le(r,ue);Ee&&(ie.disabled=Ee._f.disabled||B,Array.isArray(Ee._f.refs)&&Ee._f.refs.forEach(H=>{H.disabled=Ee._f.disabled||B}))},0,!1))},Mt=(B,ie)=>async ue=>{let Ee;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let H=Yn(s);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:te,values:he}=await j();t.errors=te,H=he}else await X(r);if(a.disabled.size)for(const te of a.disabled)At(H,te,void 0);if(Sn(t.errors,"root"),ur(t.errors)){g.state.next({errors:{}});try{await B(H,ue)}catch(te){Ee=te}}else ie&&await ie({...t.errors},ue),Ke(),setTimeout(Ke);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ur(t.errors)&&!Ee,submitCount:t.submitCount+1,errors:t.errors}),Ee)throw Ee},xn=(B,ie={})=>{Le(r,B)&&(yn(ie.defaultValue)?F(B,Yn(Le(i,B))):(F(B,ie.defaultValue),At(i,B,Yn(ie.defaultValue))),ie.keepTouched||Sn(t.touchedFields,B),ie.keepDirty||(Sn(t.dirtyFields,B),t.isDirty=ie.defaultValue?G(B,Yn(Le(i,B))):G()),ie.keepError||(Sn(t.errors,B),d.isValid&&C()),g.state.next({...t}))},Ht=(B,ie={})=>{const ue=B?Yn(B):i,Ee=Yn(ue),H=ur(B),te=H?i:Ee;if(ie.keepDefaultValues||(i=ue),!ie.keepValues){if(ie.keepDirtyValues){const he=new Set([...a.mount,...Object.keys(mh(i,s))]);for(const _e of Array.from(he))Le(t.dirtyFields,_e)?At(te,_e,Le(s,_e)):F(_e,Le(te,_e))}else{if(EC&&yn(B))for(const he of a.mount){const _e=Le(r,he);if(_e&&_e._f){const Ve=Array.isArray(_e._f.refs)?_e._f.refs[0]:_e._f.ref;if(Zp(Ve)){const ut=Ve.closest("form");if(ut){ut.reset();break}}}}for(const he of a.mount)F(he,Le(te,he))}s=Yn(te),g.array.next({values:{...te}}),g.state.next({values:{...te}})}a={mount:ie.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:ie.keepSubmitCount?t.submitCount:0,isDirty:H?!1:ie.keepDirty?t.isDirty:!!(ie.keepDefaultValues&&!ua(B,i)),isSubmitted:ie.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:H?{}:ie.keepDirtyValues?ie.keepDefaultValues&&s?mh(i,s):t.dirtyFields:ie.keepDefaultValues&&B?mh(i,B):ie.keepDirty?t.dirtyFields:{},touchedFields:ie.keepTouched?t.touchedFields:{},errors:ie.keepErrors?t.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},nn=(B,ie)=>Ht(Gi(B)?B(s):B,ie),Br=(B,ie={})=>{const ue=Le(r,B),Ee=ue&&ue._f;if(Ee){const H=Ee.refs?Ee.refs[0]:Ee.ref;H.focus&&(H.focus(),ie.shouldSelect&&Gi(H.select)&&H.select())}},Dn=B=>{t={...t,...B}},Bt={control:{register:Ue,unregister:Se,getFieldState:L,handleSubmit:Mt,setError:be,_subscribe:ce,_runSchema:j,_getWatch:V,_getDirty:G,_setValid:C,_setFieldArray:k,_setDisabledField:Ce,_setErrors:P,_getFieldArray:ne,_reset:Ht,_resetDefaultValues:()=>Gi(e.defaultValues)&&e.defaultValues().then(B=>{nn(B,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:Dt,_subjects:g,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(B){o=B},get _defaultValues(){return i},get _names(){return a},set _names(B){a=B},get _formState(){return t},get _options(){return e},set _options(B){e={...e,...B}}},subscribe:ve,trigger:N,register:Ue,handleSubmit:Mt,watch:pe,setValue:F,getValues:q,reset:nn,resetField:xn,clearErrors:ee,unregister:Se,setError:be,setFocus:Br,getFieldState:L};return{...Bt,formControl:Bt}}function aW(n={}){const e=mn.useRef(void 0),t=mn.useRef(void 0),[r,i]=mn.useState({isDirty:!1,isValidating:!1,isLoading:Gi(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:Gi(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...n.formControl?n.formControl:oW(n),formState:r},n.formControl&&n.defaultValues&&!Gi(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions));const s=e.current.control;return s._options=n,mn.useLayoutEffect(()=>s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0}),[s]),mn.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),mn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),mn.useEffect(()=>{n.values&&!ua(n.values,t.current)?(s._reset(n.values,s._options.resetOptions),t.current=n.values,i(o=>({...o}))):s._resetDefaultValues()},[n.values,s]),mn.useEffect(()=>{n.errors&&!ur(n.errors)&&s._setErrors(n.errors)},[n.errors,s]),mn.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),mn.useEffect(()=>{n.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[n.shouldUnregister,s]),e.current.formState=HG(r,s),e.current}const mk=(n,e,t)=>{if(n&&"reportValidity"in n){const r=Le(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},oM=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?mk(r.ref,t,n):r.refs&&r.refs.forEach(i=>mk(i,t,n))}},lW=(n,e)=>{e.shouldUseNativeValidation&&oM(n,e);const t={};for(const r in n){const i=Le(e.fields,r),s=Object.assign(n[r]||{},{ref:i&&i.ref});if(cW(e.names||Object.keys(n),r)){const o=Object.assign({},Le(t,r));At(o,"root",s),At(t,r,o)}else At(t,r,s)}return t},cW=(n,e)=>n.some(t=>t.startsWith(e+"."));var uW=function(n,e){for(var t={};n.length;){var r=n[0],i=r.code,s=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return n.push(f)})}),e){var l=t[o].types,u=l&&l[r.code];t[o]=QI(o,e,t,i,u?[].concat(u,r.message):r.message)}n.shift()}return t},hW=function(n,e,t){return t===void 0&&(t={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&oM({},s),{errors:{},values:t.raw?r:u}})}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:lW(uW(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},mt;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(mt||(mt={}));var yk;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(yk||(yk={}));const Pe=mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),aa=n=>{switch(typeof n){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return isNaN(n)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(n)?Pe.array:n===null?Pe.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Pe.promise:typeof Map<"u"&&n instanceof Map?Pe.map:typeof Set<"u"&&n instanceof Set?Pe.set:typeof Date<"u"&&n instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},ye=mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class _i extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(e){if(!(e instanceof _i))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}_i.create=n=>new _i(n);const cd=(n,e)=>{let t;switch(n.code){case ye.invalid_type:n.received===Pe.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ye.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,mt.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:t=`Unrecognized key(s) in object: ${mt.joinValues(n.keys,", ")}`;break;case ye.invalid_union:t="Invalid input";break;case ye.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${mt.joinValues(n.options)}`;break;case ye.invalid_enum_value:t=`Invalid enum value. Expected ${mt.joinValues(n.options)}, received '${n.received}'`;break;case ye.invalid_arguments:t="Invalid function arguments";break;case ye.invalid_return_type:t="Invalid function return type";break;case ye.invalid_date:t="Invalid date";break;case ye.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:mt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ye.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ye.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ye.custom:t="Invalid input";break;case ye.invalid_intersection_types:t="Intersection results could not be merged";break;case ye.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ye.not_finite:t="Number must be finite";break;default:t=e.defaultError,mt.assertNever(n)}return{message:t}};let dW=cd;function L_(){return dW}const F_=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function Te(n,e){const t=L_(),r=F_({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===cd?void 0:cd].filter(i=>!!i)});n.common.issues.push(r)}class yr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return Je;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return yr.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Je;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Je=Object.freeze({status:"aborted"}),Ih=n=>({status:"dirty",value:n}),jr=n=>({status:"valid",value:n}),vk=n=>n.status==="aborted",xk=n=>n.status==="dirty",Xc=n=>n.status==="valid",em=n=>typeof Promise<"u"&&n instanceof Promise;function tm(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function aM(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var je;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(je||(je={}));var Mh,Ah;class Ts{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _k=(n,e)=>{if(Xc(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new _i(n.common.issues);return this._error=t,this._error}}};function nt(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,u;const{message:d}=n;return o.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=d??t)!==null&&u!==void 0?u:a.defaultError}},description:i}}class ht{get description(){return this._def.description}_getType(e){return aa(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new yr,ctx:{common:e.parent.common,data:e.data,parsedType:aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(em(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return _k(i,s)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Xc(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(t=s==null?void 0:s.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Xc(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(em(i)?i:Promise.resolve(i));return _k(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ye.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new xo({schema:this,typeName:Ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ao.create(this,this._def)}nullable(){return xl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ws.create(this)}promise(){return hd.create(this,this._def)}or(e){return im.create([this,e],this._def)}and(e){return sm.create(this,e,this._def)}transform(e){return new xo({...nt(this._def),schema:this,typeName:Ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new um({...nt(this._def),innerType:this,defaultValue:t,typeName:Ye.ZodDefault})}brand(){return new hM({typeName:Ye.ZodBranded,type:this,...nt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new hm({...nt(this._def),innerType:this,catchValue:t,typeName:Ye.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ay.create(this,e)}readonly(){return dm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fW=/^c[^\s-]{8,}$/i,gW=/^[0-9a-z]+$/,pW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yW=/^[a-z0-9_-]{21}$/i,vW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_W=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ox;const CW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,bW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,EW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,TW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,lM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RW=new RegExp(`^${lM}$`);function cM(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function PW(n){return new RegExp(`^${cM(n)}$`)}function IW(n){let e=`${lM}T${cM(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function MW(n,e){return!!((e==="v4"||!e)&&CW.test(n)||(e==="v6"||!e)&&bW.test(n))}function AW(n,e){if(!vW.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function OW(n,e){return!!((e==="v4"||!e)&&SW.test(n)||(e==="v6"||!e)&&EW.test(n))}class no extends ht{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pe.string){const s=this._getOrReturnCtx(e);return Te(s,{code:ye.invalid_type,expected:Pe.string,received:s.parsedType}),Je}const r=new yr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Te(i,{code:ye.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Te(i,{code:ye.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")_W.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"email",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")ox||(ox=new RegExp(wW,"u")),ox.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"emoji",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")mW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"uuid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")yW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"nanoid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")fW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")gW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid2",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")pW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ulid",code:ye.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Te(i,{validation:"url",code:ye.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"regex",code:ye.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?IW(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?RW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?PW(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?xW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"duration",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?MW(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ip",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?AW(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"jwt",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?OW(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cidr",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?TW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64",code:ye.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?kW.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64url",code:ye.invalid_string,message:s.message}),r.dirty()):mt.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:ye.invalid_string,...je.errToObj(r)})}_addCheck(e){return new no({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...je.errToObj(e)})}url(e){return this._addCheck({kind:"url",...je.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...je.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...je.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...je.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...je.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...je.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...je.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...je.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...je.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...je.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...je.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...je.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...je.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...je.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...je.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...je.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...je.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...je.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...je.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...je.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...je.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...je.errToObj(t)})}nonempty(e){return this.min(1,je.errToObj(e))}trim(){return new no({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new no({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new no({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}no.create=n=>{var e;return new no({checks:[],typeName:Ye.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...nt(n)})};function DW(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Yc extends ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pe.number){const s=this._getOrReturnCtx(e);return Te(s,{code:ye.invalid_type,expected:Pe.number,received:s.parsedType}),Je}let r;const i=new yr;for(const s of this._def.checks)s.kind==="int"?mt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?DW(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.not_finite,message:s.message}),i.dirty()):mt.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,je.toString(t))}gt(e,t){return this.setLimit("min",e,!1,je.toString(t))}lte(e,t){return this.setLimit("max",e,!0,je.toString(t))}lt(e,t){return this.setLimit("max",e,!1,je.toString(t))}setLimit(e,t,r,i){return new Yc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:je.toString(i)}]})}_addCheck(e){return new Yc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:je.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:je.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:je.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:je.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:je.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:je.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Yc.create=n=>new Yc({checks:[],typeName:Ye.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...nt(n)});class Kc extends ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Pe.bigint)return this._getInvalidInput(e);let r;const i=new yr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:ye.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):mt.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Te(t,{code:ye.invalid_type,expected:Pe.bigint,received:t.parsedType}),Je}gte(e,t){return this.setLimit("min",e,!0,je.toString(t))}gt(e,t){return this.setLimit("min",e,!1,je.toString(t))}lte(e,t){return this.setLimit("max",e,!0,je.toString(t))}lt(e,t){return this.setLimit("max",e,!1,je.toString(t))}setLimit(e,t,r,i){return new Kc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:je.toString(i)}]})}_addCheck(e){return new Kc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:je.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:je.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Kc.create=n=>{var e;return new Kc({checks:[],typeName:Ye.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...nt(n)})};class N_ extends ht{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pe.boolean){const r=this._getOrReturnCtx(e);return Te(r,{code:ye.invalid_type,expected:Pe.boolean,received:r.parsedType}),Je}return jr(e.data)}}N_.create=n=>new N_({typeName:Ye.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...nt(n)});class ud extends ht{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pe.date){const s=this._getOrReturnCtx(e);return Te(s,{code:ye.invalid_type,expected:Pe.date,received:s.parsedType}),Je}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Te(s,{code:ye.invalid_date}),Je}const r=new yr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:ye.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):mt.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ud({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:je.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:je.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ud.create=n=>new ud({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Ye.ZodDate,...nt(n)});class j_ extends ht{_parse(e){if(this._getType(e)!==Pe.symbol){const r=this._getOrReturnCtx(e);return Te(r,{code:ye.invalid_type,expected:Pe.symbol,received:r.parsedType}),Je}return jr(e.data)}}j_.create=n=>new j_({typeName:Ye.ZodSymbol,...nt(n)});class nm extends ht{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:ye.invalid_type,expected:Pe.undefined,received:r.parsedType}),Je}return jr(e.data)}}nm.create=n=>new nm({typeName:Ye.ZodUndefined,...nt(n)});class rm extends ht{_parse(e){if(this._getType(e)!==Pe.null){const r=this._getOrReturnCtx(e);return Te(r,{code:ye.invalid_type,expected:Pe.null,received:r.parsedType}),Je}return jr(e.data)}}rm.create=n=>new rm({typeName:Ye.ZodNull,...nt(n)});class z_ extends ht{constructor(){super(...arguments),this._any=!0}_parse(e){return jr(e.data)}}z_.create=n=>new z_({typeName:Ye.ZodAny,...nt(n)});class Fc extends ht{constructor(){super(...arguments),this._unknown=!0}_parse(e){return jr(e.data)}}Fc.create=n=>new Fc({typeName:Ye.ZodUnknown,...nt(n)});class Sa extends ht{_parse(e){const t=this._getOrReturnCtx(e);return Te(t,{code:ye.invalid_type,expected:Pe.never,received:t.parsedType}),Je}}Sa.create=n=>new Sa({typeName:Ye.ZodNever,...nt(n)});class V_ extends ht{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:ye.invalid_type,expected:Pe.void,received:r.parsedType}),Je}return jr(e.data)}}V_.create=n=>new V_({typeName:Ye.ZodVoid,...nt(n)});class ws extends ht{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==Pe.array)return Te(t,{code:ye.invalid_type,expected:Pe.array,received:t.parsedType}),Je;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Te(t,{code:o?ye.too_big:ye.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Te(t,{code:ye.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Te(t,{code:ye.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new Ts(t,o,t.path,a)))).then(o=>yr.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new Ts(t,o,t.path,a)));return yr.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new ws({...this._def,minLength:{value:e,message:je.toString(t)}})}max(e,t){return new ws({...this._def,maxLength:{value:e,message:je.toString(t)}})}length(e,t){return new ws({...this._def,exactLength:{value:e,message:je.toString(t)}})}nonempty(e){return this.min(1,e)}}ws.create=(n,e)=>new ws({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Ye.ZodArray,...nt(e)});function xc(n){if(n instanceof en){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=ao.create(xc(r))}return new en({...n._def,shape:()=>e})}else return n instanceof ws?new ws({...n._def,type:xc(n.element)}):n instanceof ao?ao.create(xc(n.unwrap())):n instanceof xl?xl.create(xc(n.unwrap())):n instanceof vo?vo.create(n.items.map(e=>xc(e))):n}class en extends ht{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=mt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Pe.object){const u=this._getOrReturnCtx(e);return Te(u,{code:ye.invalid_type,expected:Pe.object,received:u.parsedType}),Je}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Sa&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const d=s[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Ts(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Sa){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")a.length>0&&(Te(i,{code:ye.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of a){const f=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Ts(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const f=await d.key,g=await d.value;u.push({key:f,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>yr.mergeObjectSync(r,u)):yr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return je.errToObj,new en({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=je.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new en({...this._def,unknownKeys:"strip"})}passthrough(){return new en({...this._def,unknownKeys:"passthrough"})}extend(e){return new en({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new en({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ye.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new en({...this._def,catchall:e})}pick(e){const t={};return mt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new en({...this._def,shape:()=>t})}omit(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new en({...this._def,shape:()=>t})}deepPartial(){return xc(this)}partial(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new en({...this._def,shape:()=>t})}required(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ao;)s=s._def.innerType;t[r]=s}}),new en({...this._def,shape:()=>t})}keyof(){return uM(mt.objectKeys(this.shape))}}en.create=(n,e)=>new en({shape:()=>n,unknownKeys:"strip",catchall:Sa.create(),typeName:Ye.ZodObject,...nt(e)});en.strictCreate=(n,e)=>new en({shape:()=>n,unknownKeys:"strict",catchall:Sa.create(),typeName:Ye.ZodObject,...nt(e)});en.lazycreate=(n,e)=>new en({shape:n,unknownKeys:"strip",catchall:Sa.create(),typeName:Ye.ZodObject,...nt(e)});class im extends ht{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new _i(a.ctx.common.issues));return Te(t,{code:ye.invalid_union,unionErrors:o}),Je}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const u={...t,common:{...t.common,issues:[]},parent:null},d=l._parseSync({data:t.data,path:t.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new _i(l));return Te(t,{code:ye.invalid_union,unionErrors:a}),Je}}get options(){return this._def.options}}im.create=(n,e)=>new im({options:n,typeName:Ye.ZodUnion,...nt(e)});const Xs=n=>n instanceof am?Xs(n.schema):n instanceof xo?Xs(n.innerType()):n instanceof lm?[n.value]:n instanceof vl?n.options:n instanceof cm?mt.objectValues(n.enum):n instanceof um?Xs(n._def.innerType):n instanceof nm?[void 0]:n instanceof rm?[null]:n instanceof ao?[void 0,...Xs(n.unwrap())]:n instanceof xl?[null,...Xs(n.unwrap())]:n instanceof hM||n instanceof dm?Xs(n.unwrap()):n instanceof hm?Xs(n._def.innerType):[];class PC extends ht{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Pe.object)return Te(t,{code:ye.invalid_type,expected:Pe.object,received:t.parsedType}),Je;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Te(t,{code:ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Je)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const o=Xs(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new PC({typeName:Ye.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...nt(r)})}}function B_(n,e){const t=aa(n),r=aa(e);if(n===e)return{valid:!0,data:n};if(t===Pe.object&&r===Pe.object){const i=mt.objectKeys(e),s=mt.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const l=B_(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===Pe.array&&r===Pe.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],l=B_(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===Pe.date&&r===Pe.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class sm extends ht{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(vk(s)||vk(o))return Je;const a=B_(s.value,o.value);return a.valid?((xk(s)||xk(o))&&t.dirty(),{status:t.value,value:a.data}):(Te(r,{code:ye.invalid_intersection_types}),Je)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}sm.create=(n,e,t)=>new sm({left:n,right:e,typeName:Ye.ZodIntersection,...nt(t)});class vo extends ht{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.array)return Te(r,{code:ye.invalid_type,expected:Pe.array,received:r.parsedType}),Je;if(r.data.length<this._def.items.length)return Te(r,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Je;!this._def.rest&&r.data.length>this._def.items.length&&(Te(r,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ts(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>yr.mergeArray(t,o)):yr.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new vo({...this._def,rest:e})}}vo.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vo({items:n,typeName:Ye.ZodTuple,rest:null,...nt(e)})};class om extends ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.object)return Te(r,{code:ye.invalid_type,expected:Pe.object,received:r.parsedType}),Je;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Ts(r,a,r.path,a)),value:o._parse(new Ts(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?yr.mergeObjectAsync(t,i):yr.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof ht?new om({keyType:e,valueType:t,typeName:Ye.ZodRecord,...nt(r)}):new om({keyType:no.create(),valueType:e,typeName:Ye.ZodRecord,...nt(t)})}}class G_ extends ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.map)return Te(r,{code:ye.invalid_type,expected:Pe.map,received:r.parsedType}),Je;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new Ts(r,a,r.path,[u,"key"])),value:s._parse(new Ts(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Je;(u.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(u.value,d.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Je;(u.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(u.value,d.value)}return{status:t.value,value:a}}}}G_.create=(n,e,t)=>new G_({valueType:e,keyType:n,typeName:Ye.ZodMap,...nt(t)});class qc extends ht{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.set)return Te(r,{code:ye.invalid_type,expected:Pe.set,received:r.parsedType}),Je;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Te(r,{code:ye.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Te(r,{code:ye.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return Je;d.status==="dirty"&&t.dirty(),u.add(d.value)}return{status:t.value,value:u}}const a=[...r.data.values()].map((l,u)=>s._parse(new Ts(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new qc({...this._def,minSize:{value:e,message:je.toString(t)}})}max(e,t){return new qc({...this._def,maxSize:{value:e,message:je.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}qc.create=(n,e)=>new qc({valueType:n,minSize:null,maxSize:null,typeName:Ye.ZodSet,...nt(e)});class Hh extends ht{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Pe.function)return Te(t,{code:ye.invalid_type,expected:Pe.function,received:t.parsedType}),Je;function r(a,l){return F_({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,L_(),cd].filter(u=>!!u),issueData:{code:ye.invalid_arguments,argumentsError:l}})}function i(a,l){return F_({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,L_(),cd].filter(u=>!!u),issueData:{code:ye.invalid_return_type,returnTypeError:l}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof hd){const a=this;return jr(async function(...l){const u=new _i([]),d=await a._def.args.parseAsync(l,s).catch(m=>{throw u.addIssue(r(l,m)),u}),f=await Reflect.apply(o,this,d);return await a._def.returns._def.type.parseAsync(f,s).catch(m=>{throw u.addIssue(i(f,m)),u})})}else{const a=this;return jr(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new _i([r(l,u.error)]);const d=Reflect.apply(o,this,u.data),f=a._def.returns.safeParse(d,s);if(!f.success)throw new _i([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Hh({...this._def,args:vo.create(e).rest(Fc.create())})}returns(e){return new Hh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Hh({args:e||vo.create([]).rest(Fc.create()),returns:t||Fc.create(),typeName:Ye.ZodFunction,...nt(r)})}}class am extends ht{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}am.create=(n,e)=>new am({getter:n,typeName:Ye.ZodLazy,...nt(e)});class lm extends ht{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Te(t,{received:t.data,code:ye.invalid_literal,expected:this._def.value}),Je}return{status:"valid",value:e.data}}get value(){return this._def.value}}lm.create=(n,e)=>new lm({value:n,typeName:Ye.ZodLiteral,...nt(e)});function uM(n,e){return new vl({values:n,typeName:Ye.ZodEnum,...nt(e)})}class vl extends ht{constructor(){super(...arguments),Mh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Te(t,{expected:mt.joinValues(r),received:t.parsedType,code:ye.invalid_type}),Je}if(tm(this,Mh)||aM(this,Mh,new Set(this._def.values)),!tm(this,Mh).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Te(t,{received:t.data,code:ye.invalid_enum_value,options:r}),Je}return jr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return vl.create(e,{...this._def,...t})}exclude(e,t=this._def){return vl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Mh=new WeakMap;vl.create=uM;class cm extends ht{constructor(){super(...arguments),Ah.set(this,void 0)}_parse(e){const t=mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Pe.string&&r.parsedType!==Pe.number){const i=mt.objectValues(t);return Te(r,{expected:mt.joinValues(i),received:r.parsedType,code:ye.invalid_type}),Je}if(tm(this,Ah)||aM(this,Ah,new Set(mt.getValidEnumValues(this._def.values))),!tm(this,Ah).has(e.data)){const i=mt.objectValues(t);return Te(r,{received:r.data,code:ye.invalid_enum_value,options:i}),Je}return jr(e.data)}get enum(){return this._def.values}}Ah=new WeakMap;cm.create=(n,e)=>new cm({values:n,typeName:Ye.ZodNativeEnum,...nt(e)});class hd extends ht{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Pe.promise&&t.common.async===!1)return Te(t,{code:ye.invalid_type,expected:Pe.promise,received:t.parsedType}),Je;const r=t.parsedType===Pe.promise?t.data:Promise.resolve(t.data);return jr(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}hd.create=(n,e)=>new hd({type:n,typeName:Ye.ZodPromise,...nt(e)});class xo extends ht{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Te(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Je;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Je:l.status==="dirty"||t.value==="dirty"?Ih(l.value):l});{if(t.value==="aborted")return Je;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Je:a.status==="dirty"||t.value==="dirty"?Ih(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Je:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Je:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xc(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Xc(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);mt.assertNever(i)}}xo.create=(n,e,t)=>new xo({schema:n,typeName:Ye.ZodEffects,effect:e,...nt(t)});xo.createWithPreprocess=(n,e,t)=>new xo({schema:e,effect:{type:"preprocess",transform:n},typeName:Ye.ZodEffects,...nt(t)});class ao extends ht{_parse(e){return this._getType(e)===Pe.undefined?jr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ao.create=(n,e)=>new ao({innerType:n,typeName:Ye.ZodOptional,...nt(e)});class xl extends ht{_parse(e){return this._getType(e)===Pe.null?jr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xl.create=(n,e)=>new xl({innerType:n,typeName:Ye.ZodNullable,...nt(e)});class um extends ht{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Pe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}um.create=(n,e)=>new um({innerType:n,typeName:Ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...nt(e)});class hm extends ht{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return em(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new _i(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _i(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}hm.create=(n,e)=>new hm({innerType:n,typeName:Ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...nt(e)});class W_ extends ht{_parse(e){if(this._getType(e)!==Pe.nan){const r=this._getOrReturnCtx(e);return Te(r,{code:ye.invalid_type,expected:Pe.nan,received:r.parsedType}),Je}return{status:"valid",value:e.data}}}W_.create=n=>new W_({typeName:Ye.ZodNaN,...nt(n)});class hM extends ht{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ay extends ht{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Je:s.status==="dirty"?(t.dirty(),Ih(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Je:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new ay({in:e,out:t,typeName:Ye.ZodPipeline})}}class dm extends ht{_parse(e){const t=this._def.innerType._parse(e),r=i=>(Xc(i)&&(i.value=Object.freeze(i.value)),i);return em(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}dm.create=(n,e)=>new dm({innerType:n,typeName:Ye.ZodReadonly,...nt(e)});en.lazycreate;var Ye;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Ye||(Ye={}));const Gg=no.create;Yc.create;W_.create;Kc.create;N_.create;ud.create;j_.create;nm.create;rm.create;z_.create;Fc.create;Sa.create;V_.create;ws.create;const LW=en.create;en.strictCreate;im.create;PC.create;sm.create;vo.create;om.create;G_.create;qc.create;Hh.create;am.create;lm.create;vl.create;cm.create;hd.create;xo.create;ao.create;xl.create;xo.createWithPreprocess;ay.create;const In=E.forwardRef(({className:n,type:e,...t},r)=>_.jsx("input",{type:e,className:ct("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));In.displayName="Input";function Ot({children:n,required:e,...t}){return _.jsxs("label",{className:"block text-sm text-gray-700 font-normal data-[error=true]:text-destructive data-[error=true]:font-medium",...t,children:[n,e&&_.jsx("span",{className:"text-destructive text-sm before:content-['*'] ml-1"})]})}var FW=E.createContext(void 0);function ly(n){const e=E.useContext(FW);return n||e||"ltr"}var ax=0;function IC(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??wk()),document.body.insertAdjacentElement("beforeend",n[1]??wk()),ax++,()=>{ax===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ax--}},[])}function wk(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var lx="focusScope.autoFocusOnMount",cx="focusScope.autoFocusOnUnmount",Ck={bubbles:!1,cancelable:!0},NW="FocusScope",cy=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,l]=E.useState(null),u=zn(i),d=zn(s),f=E.useRef(null),g=kt(e,x=>l(x)),m=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let x=function(k){if(m.paused||!a)return;const R=k.target;a.contains(R)?f.current=R:ia(f.current,{select:!0})},w=function(k){if(m.paused||!a)return;const R=k.relatedTarget;R!==null&&(a.contains(R)||ia(f.current,{select:!0}))},C=function(k){if(document.activeElement===document.body)for(const P of k)P.removedNodes.length>0&&ia(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const b=new MutationObserver(C);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),b.disconnect()}}},[r,a,m.paused]),E.useEffect(()=>{if(a){bk.add(m);const x=document.activeElement;if(!a.contains(x)){const C=new CustomEvent(lx,Ck);a.addEventListener(lx,u),a.dispatchEvent(C),C.defaultPrevented||(jW(WW(dM(a)),{select:!0}),document.activeElement===x&&ia(a))}return()=>{a.removeEventListener(lx,u),setTimeout(()=>{const C=new CustomEvent(cx,Ck);a.addEventListener(cx,d),a.dispatchEvent(C),C.defaultPrevented||ia(x??document.body,{select:!0}),a.removeEventListener(cx,d),bk.remove(m)},0)}}},[a,u,d,m]);const v=E.useCallback(x=>{if(!t&&!r||m.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,C=document.activeElement;if(w&&C){const b=x.currentTarget,[k,R]=zW(b);k&&R?!x.shiftKey&&C===R?(x.preventDefault(),t&&ia(k,{select:!0})):x.shiftKey&&C===k&&(x.preventDefault(),t&&ia(R,{select:!0})):C===b&&x.preventDefault()}},[t,r,m.paused]);return _.jsx(Qe.div,{tabIndex:-1,...o,ref:g,onKeyDown:v})});cy.displayName=NW;function jW(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ia(r,{select:e}),document.activeElement!==t)return}function zW(n){const e=dM(n),t=Sk(e,n),r=Sk(e.reverse(),n);return[t,r]}function dM(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Sk(n,e){for(const t of n)if(!VW(t,{upTo:e}))return t}function VW(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function BW(n){return n instanceof HTMLInputElement&&"select"in n}function ia(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&BW(n)&&e&&n.select()}}var bk=GW();function GW(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Ek(n,e),n.unshift(e)},remove(e){var t;n=Ek(n,e),(t=n[0])==null||t.resume()}}}function Ek(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function WW(n){return n.filter(e=>e.tagName!=="A")}var $W=c5[" useId ".trim().toString()]||(()=>{}),UW=0;function ya(n){const[e,t]=E.useState($W());return rr(()=>{t(r=>r??String(UW++))},[n]),e?`radix-${e}`:""}const HW=["top","right","bottom","left"],ba=Math.min,Zr=Math.max,fm=Math.round,Wg=Math.floor,Cs=n=>({x:n,y:n}),XW={left:"right",right:"left",bottom:"top",top:"bottom"},YW={start:"end",end:"start"};function $_(n,e,t){return Zr(n,ba(e,t))}function _o(n,e){return typeof n=="function"?n(e):n}function wo(n){return n.split("-")[0]}function yu(n){return n.split("-")[1]}function MC(n){return n==="x"?"y":"x"}function AC(n){return n==="y"?"height":"width"}function Ea(n){return["top","bottom"].includes(wo(n))?"y":"x"}function OC(n){return MC(Ea(n))}function KW(n,e,t){t===void 0&&(t=!1);const r=yu(n),i=OC(n),s=AC(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=gm(o)),[o,gm(o)]}function qW(n){const e=gm(n);return[U_(n),e,U_(e)]}function U_(n){return n.replace(/start|end/g,e=>YW[e])}function ZW(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function JW(n,e,t,r){const i=yu(n);let s=ZW(wo(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(U_)))),s}function gm(n){return n.replace(/left|right|bottom|top/g,e=>XW[e])}function QW(n){return{top:0,right:0,bottom:0,left:0,...n}}function fM(n){return typeof n!="number"?QW(n):{top:n,right:n,bottom:n,left:n}}function pm(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function Tk(n,e,t){let{reference:r,floating:i}=n;const s=Ea(e),o=OC(e),a=AC(o),l=wo(e),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,g=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(yu(e)){case"start":m[o]-=g*(t&&u?-1:1);break;case"end":m[o]+=g*(t&&u?-1:1);break}return m}const e$=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:f}=Tk(u,r,l),g=r,m={},v=0;for(let x=0;x<a.length;x++){const{name:w,fn:C}=a[x],{x:b,y:k,data:R,reset:P}=await C({x:d,y:f,initialPlacement:r,placement:g,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:n,floating:e}});d=b??d,f=k??f,m={...m,[w]:{...m[w],...R}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(u=P.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):P.rects),{x:d,y:f}=Tk(u,g,l)),x=-1)}return{x:d,y:f,placement:g,strategy:i,middlewareData:m}};async function dd(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:g=!1,padding:m=0}=_o(e,n),v=fM(m),w=a[g?f==="floating"?"reference":"floating":f],C=pm(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(w)))==null||t?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},P=pm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:k,strategy:l}):b);return{top:(C.top-P.top+v.top)/R.y,bottom:(P.bottom-C.bottom+v.bottom)/R.y,left:(C.left-P.left+v.left)/R.x,right:(P.right-C.right+v.right)/R.x}}const t$=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=_o(n,e)||{};if(u==null)return{};const f=fM(d),g={x:t,y:r},m=OC(i),v=AC(m),x=await o.getDimensions(u),w=m==="y",C=w?"top":"left",b=w?"bottom":"right",k=w?"clientHeight":"clientWidth",R=s.reference[v]+s.reference[m]-g[m]-s.floating[v],P=g[m]-s.reference[m],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let O=A?A[k]:0;(!O||!await(o.isElement==null?void 0:o.isElement(A)))&&(O=a.floating[k]||s.floating[v]);const D=R/2-P/2,j=O/2-x[v]/2-1,Q=ba(f[C],j),X=ba(f[b],j),W=Q,G=O-x[v]-X,V=O/2-x[v]/2+D,ne=$_(W,V,G),U=!l.arrow&&yu(i)!=null&&V!==ne&&s.reference[v]/2-(V<W?Q:X)-x[v]/2<0,oe=U?V<W?V-W:V-G:0;return{[m]:g[m]+oe,data:{[m]:ne,centerOffset:V-ne-oe,...U&&{alignmentOffset:oe}},reset:U}}}),n$=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...w}=_o(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const C=wo(i),b=Ea(a),k=wo(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(u.floating)),P=g||(k||!x?[gm(a)]:qW(a)),A=v!=="none";!g&&A&&P.push(...JW(a,x,v,R));const O=[a,...P],D=await dd(e,w),j=[];let Q=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&j.push(D[C]),f){const V=KW(i,o,R);j.push(D[V[0]],D[V[1]])}if(Q=[...Q,{placement:i,overflows:j}],!j.every(V=>V<=0)){var X,W;const V=(((X=s.flip)==null?void 0:X.index)||0)+1,ne=O[V];if(ne)return{data:{index:V,overflows:Q},reset:{placement:ne}};let U=(W=Q.filter(oe=>oe.overflows[0]<=0).sort((oe,F)=>oe.overflows[1]-F.overflows[1])[0])==null?void 0:W.placement;if(!U)switch(m){case"bestFit":{var G;const oe=(G=Q.filter(F=>{if(A){const K=Ea(F.placement);return K===b||K==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(K=>K>0).reduce((K,I)=>K+I,0)]).sort((F,K)=>F[1]-K[1])[0])==null?void 0:G[0];oe&&(U=oe);break}case"initialPlacement":U=a;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function kk(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Rk(n){return HW.some(e=>n[e]>=0)}const r$=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=_o(n,e);switch(r){case"referenceHidden":{const s=await dd(e,{...i,elementContext:"reference"}),o=kk(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Rk(o)}}}case"escaped":{const s=await dd(e,{...i,altBoundary:!0}),o=kk(s,t.floating);return{data:{escapedOffsets:o,escaped:Rk(o)}}}default:return{}}}}};async function i$(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=wo(t),a=yu(t),l=Ea(t)==="y",u=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,f=_o(e,n);let{mainAxis:g,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*d,y:g*u}:{x:g*u,y:m*d}}const s$=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await i$(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},o$=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:C,y:b}=w;return{x:C,y:b}}},...l}=_o(n,e),u={x:t,y:r},d=await dd(e,l),f=Ea(wo(i)),g=MC(f);let m=u[g],v=u[f];if(s){const w=g==="y"?"top":"left",C=g==="y"?"bottom":"right",b=m+d[w],k=m-d[C];m=$_(b,m,k)}if(o){const w=f==="y"?"top":"left",C=f==="y"?"bottom":"right",b=v+d[w],k=v-d[C];v=$_(b,v,k)}const x=a.fn({...e,[g]:m,[f]:v});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[g]:s,[f]:o}}}}}},a$=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=_o(n,e),d={x:t,y:r},f=Ea(i),g=MC(f);let m=d[g],v=d[f];const x=_o(a,e),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const k=g==="y"?"height":"width",R=s.reference[g]-s.floating[k]+w.mainAxis,P=s.reference[g]+s.reference[k]-w.mainAxis;m<R?m=R:m>P&&(m=P)}if(u){var C,b;const k=g==="y"?"width":"height",R=["top","left"].includes(wo(i)),P=s.reference[f]-s.floating[k]+(R&&((C=o.offset)==null?void 0:C[f])||0)+(R?0:w.crossAxis),A=s.reference[f]+s.reference[k]+(R?0:((b=o.offset)==null?void 0:b[f])||0)-(R?w.crossAxis:0);v<P?v=P:v>A&&(v=A)}return{[g]:m,[f]:v}}}},l$=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=_o(n,e),d=await dd(e,u),f=wo(i),g=yu(i),m=Ea(i)==="y",{width:v,height:x}=s.floating;let w,C;f==="top"||f==="bottom"?(w=f,C=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(C=f,w=g==="end"?"top":"bottom");const b=x-d.top-d.bottom,k=v-d.left-d.right,R=ba(x-d[w],b),P=ba(v-d[C],k),A=!e.middlewareData.shift;let O=R,D=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(D=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(O=b),A&&!g){const Q=Zr(d.left,0),X=Zr(d.right,0),W=Zr(d.top,0),G=Zr(d.bottom,0);m?D=v-2*(Q!==0||X!==0?Q+X:Zr(d.left,d.right)):O=x-2*(W!==0||G!==0?W+G:Zr(d.top,d.bottom))}await l({...e,availableWidth:D,availableHeight:O});const j=await o.getDimensions(a.floating);return v!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};function uy(){return typeof window<"u"}function vu(n){return gM(n)?(n.nodeName||"").toLowerCase():"#document"}function ni(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function As(n){var e;return(e=(gM(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function gM(n){return uy()?n instanceof Node||n instanceof ni(n).Node:!1}function Zi(n){return uy()?n instanceof Element||n instanceof ni(n).Element:!1}function ks(n){return uy()?n instanceof HTMLElement||n instanceof ni(n).HTMLElement:!1}function Pk(n){return!uy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ni(n).ShadowRoot}function $d(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ji(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function c$(n){return["table","td","th"].includes(vu(n))}function hy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function DC(n){const e=LC(),t=Zi(n)?Ji(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function u$(n){let e=Ta(n);for(;ks(e)&&!Zc(e);){if(DC(e))return e;if(hy(e))return null;e=Ta(e)}return null}function LC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zc(n){return["html","body","#document"].includes(vu(n))}function Ji(n){return ni(n).getComputedStyle(n)}function dy(n){return Zi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ta(n){if(vu(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Pk(n)&&n.host||As(n);return Pk(e)?e.host:e}function pM(n){const e=Ta(n);return Zc(e)?n.ownerDocument?n.ownerDocument.body:n.body:ks(e)&&$d(e)?e:pM(e)}function fd(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=pM(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=ni(i);if(s){const a=H_(o);return e.concat(o,o.visualViewport||[],$d(i)?i:[],a&&t?fd(a):[])}return e.concat(i,fd(i,[],t))}function H_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function mM(n){const e=Ji(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ks(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=fm(t)!==s||fm(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function FC(n){return Zi(n)?n:n.contextElement}function Nc(n){const e=FC(n);if(!ks(e))return Cs(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=mM(e);let o=(s?fm(t.width):t.width)/r,a=(s?fm(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const h$=Cs(0);function yM(n){const e=ni(n);return!LC()||!e.visualViewport?h$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function d$(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ni(n)?!1:e}function _l(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=FC(n);let o=Cs(1);e&&(r?Zi(r)&&(o=Nc(r)):o=Nc(n));const a=d$(s,t,r)?yM(s):Cs(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const g=ni(s),m=r&&Zi(r)?ni(r):r;let v=g,x=H_(v);for(;x&&r&&m!==v;){const w=Nc(x),C=x.getBoundingClientRect(),b=Ji(x),k=C.left+(x.clientLeft+parseFloat(b.paddingLeft))*w.x,R=C.top+(x.clientTop+parseFloat(b.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,f*=w.y,l+=k,u+=R,v=ni(x),x=H_(v)}}return pm({width:d,height:f,x:l,y:u})}function NC(n,e){const t=dy(n).scrollLeft;return e?e.left+t:_l(As(n)).left+t}function vM(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:NC(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function f$(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=As(r),a=e?hy(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Cs(1);const d=Cs(0),f=ks(r);if((f||!f&&!s)&&((vu(r)!=="body"||$d(o))&&(l=dy(r)),ks(r))){const m=_l(r);u=Nc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const g=o&&!f&&!s?vM(o,l,!0):Cs(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+d.x+g.x,y:t.y*u.y-l.scrollTop*u.y+d.y+g.y}}function g$(n){return Array.from(n.getClientRects())}function p$(n){const e=As(n),t=dy(n),r=n.ownerDocument.body,i=Zr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Zr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+NC(n);const a=-t.scrollTop;return Ji(r).direction==="rtl"&&(o+=Zr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function m$(n,e){const t=ni(n),r=As(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=LC();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function y$(n,e){const t=_l(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=ks(n)?Nc(n):Cs(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Ik(n,e,t){let r;if(e==="viewport")r=m$(n,t);else if(e==="document")r=p$(As(n));else if(Zi(e))r=y$(e,t);else{const i=yM(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pm(r)}function xM(n,e){const t=Ta(n);return t===e||!Zi(t)||Zc(t)?!1:Ji(t).position==="fixed"||xM(t,e)}function v$(n,e){const t=e.get(n);if(t)return t;let r=fd(n,[],!1).filter(a=>Zi(a)&&vu(a)!=="body"),i=null;const s=Ji(n).position==="fixed";let o=s?Ta(n):n;for(;Zi(o)&&!Zc(o);){const a=Ji(o),l=DC(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||$d(o)&&!l&&xM(n,o))?r=r.filter(d=>d!==o):i=a,o=Ta(o)}return e.set(n,r),r}function x$(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?hy(e)?[]:v$(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((u,d)=>{const f=Ik(e,d,i);return u.top=Zr(f.top,u.top),u.right=ba(f.right,u.right),u.bottom=ba(f.bottom,u.bottom),u.left=Zr(f.left,u.left),u},Ik(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _$(n){const{width:e,height:t}=mM(n);return{width:e,height:t}}function w$(n,e,t){const r=ks(e),i=As(e),s=t==="fixed",o=_l(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Cs(0);if(r||!r&&!s)if((vu(e)!=="body"||$d(i))&&(a=dy(e)),r){const g=_l(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&(l.x=NC(i));const u=i&&!r&&!s?vM(i,a):Cs(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function ux(n){return Ji(n).position==="static"}function Mk(n,e){if(!ks(n)||Ji(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return As(n)===t&&(t=t.ownerDocument.body),t}function _M(n,e){const t=ni(n);if(hy(n))return t;if(!ks(n)){let i=Ta(n);for(;i&&!Zc(i);){if(Zi(i)&&!ux(i))return i;i=Ta(i)}return t}let r=Mk(n,e);for(;r&&c$(r)&&ux(r);)r=Mk(r,e);return r&&Zc(r)&&ux(r)&&!DC(r)?t:r||u$(n)||t}const C$=async function(n){const e=this.getOffsetParent||_M,t=this.getDimensions,r=await t(n.floating);return{reference:w$(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function S$(n){return Ji(n).direction==="rtl"}const b$={convertOffsetParentRelativeRectToViewportRelativeRect:f$,getDocumentElement:As,getClippingRect:x$,getOffsetParent:_M,getElementRects:C$,getClientRects:g$,getDimensions:_$,getScale:Nc,isElement:Zi,isRTL:S$};function wM(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function E$(n,e){let t=null,r;const i=As(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=n.getBoundingClientRect(),{left:d,top:f,width:g,height:m}=u;if(a||e(),!g||!m)return;const v=Wg(f),x=Wg(i.clientWidth-(d+g)),w=Wg(i.clientHeight-(f+m)),C=Wg(d),k={rootMargin:-v+"px "+-x+"px "+-w+"px "+-C+"px",threshold:Zr(0,ba(1,l))||1};let R=!0;function P(A){const O=A[0].intersectionRatio;if(O!==l){if(!R)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!wM(u,n.getBoundingClientRect())&&o(),R=!1}try{t=new IntersectionObserver(P,{...k,root:i.ownerDocument})}catch{t=new IntersectionObserver(P,k)}t.observe(n)}return o(!0),s}function T$(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=FC(n),d=i||s?[...u?fd(u):[],...fd(e)]:[];d.forEach(C=>{i&&C.addEventListener("scroll",t,{passive:!0}),s&&C.addEventListener("resize",t)});const f=u&&a?E$(u,t):null;let g=-1,m=null;o&&(m=new ResizeObserver(C=>{let[b]=C;b&&b.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=m)==null||k.observe(e)})),t()}),u&&!l&&m.observe(u),m.observe(e));let v,x=l?_l(n):null;l&&w();function w(){const C=_l(n);x&&!wM(x,C)&&t(),x=C,v=requestAnimationFrame(w)}return t(),()=>{var C;d.forEach(b=>{i&&b.removeEventListener("scroll",t),s&&b.removeEventListener("resize",t)}),f==null||f(),(C=m)==null||C.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const k$=s$,R$=o$,P$=n$,I$=l$,M$=r$,Ak=t$,A$=a$,O$=(n,e,t)=>{const r=new Map,i={platform:b$,...t},s={...i.platform,_c:r};return e$(n,e,{...i,platform:s})};var Ip=typeof document<"u"?E.useLayoutEffect:E.useEffect;function mm(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!mm(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!mm(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function CM(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Ok(n,e){const t=CM(n);return Math.round(e*t)/t}function hx(n){const e=E.useRef(n);return Ip(()=>{e.current=n}),e}function D$(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[d,f]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,m]=E.useState(r);mm(g,r)||m(r);const[v,x]=E.useState(null),[w,C]=E.useState(null),b=E.useCallback(F=>{F!==A.current&&(A.current=F,x(F))},[]),k=E.useCallback(F=>{F!==O.current&&(O.current=F,C(F))},[]),R=s||v,P=o||w,A=E.useRef(null),O=E.useRef(null),D=E.useRef(d),j=l!=null,Q=hx(l),X=hx(i),W=hx(u),G=E.useCallback(()=>{if(!A.current||!O.current)return;const F={placement:e,strategy:t,middleware:g};X.current&&(F.platform=X.current),O$(A.current,O.current,F).then(K=>{const I={...K,isPositioned:W.current!==!1};V.current&&!mm(D.current,I)&&(D.current=I,au.flushSync(()=>{f(I)}))})},[g,e,t,X,W]);Ip(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[u]);const V=E.useRef(!1);Ip(()=>(V.current=!0,()=>{V.current=!1}),[]),Ip(()=>{if(R&&(A.current=R),P&&(O.current=P),R&&P){if(Q.current)return Q.current(R,P,G);G()}},[R,P,G,Q,j]);const ne=E.useMemo(()=>({reference:A,floating:O,setReference:b,setFloating:k}),[b,k]),U=E.useMemo(()=>({reference:R,floating:P}),[R,P]),oe=E.useMemo(()=>{const F={position:t,left:0,top:0};if(!U.floating)return F;const K=Ok(U.floating,d.x),I=Ok(U.floating,d.y);return a?{...F,transform:"translate("+K+"px, "+I+"px)",...CM(U.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:I}},[t,a,U.floating,d.x,d.y]);return E.useMemo(()=>({...d,update:G,refs:ne,elements:U,floatingStyles:oe}),[d,G,ne,U,oe])}const L$=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Ak({element:r.current,padding:i}).fn(t):{}:r?Ak({element:r,padding:i}).fn(t):{}}}},F$=(n,e)=>({...k$(n),options:[n,e]}),N$=(n,e)=>({...R$(n),options:[n,e]}),j$=(n,e)=>({...A$(n),options:[n,e]}),z$=(n,e)=>({...P$(n),options:[n,e]}),V$=(n,e)=>({...I$(n),options:[n,e]}),B$=(n,e)=>({...M$(n),options:[n,e]}),G$=(n,e)=>({...L$(n),options:[n,e]});var W$="Arrow",SM=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return _.jsx(Qe.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});SM.displayName=W$;var $$=SM;function bM(n){const[e,t]=E.useState(void 0);return rr(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var jC="Popper",[EM,fy]=Ms(jC),[U$,TM]=EM(jC),kM=n=>{const{__scopePopper:e,children:t}=n,[r,i]=E.useState(null);return _.jsx(U$,{scope:e,anchor:r,onAnchorChange:i,children:t})};kM.displayName=jC;var RM="PopperAnchor",PM=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=TM(RM,t),o=E.useRef(null),a=kt(e,o);return E.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:_.jsx(Qe.div,{...i,ref:a})});PM.displayName=RM;var zC="PopperContent",[H$,X$]=EM(zC),IM=E.forwardRef((n,e)=>{var ce,ve,Se,Ce,Ue,Ke;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:m="optimized",onPlaced:v,...x}=n,w=TM(zC,t),[C,b]=E.useState(null),k=kt(e,Dt=>b(Dt)),[R,P]=E.useState(null),A=bM(R),O=(A==null?void 0:A.width)??0,D=(A==null?void 0:A.height)??0,j=r+(s!=="center"?"-"+s:""),Q=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},X=Array.isArray(u)?u:[u],W=X.length>0,G={padding:Q,boundary:X.filter(K$),altBoundary:W},{refs:V,floatingStyles:ne,placement:U,isPositioned:oe,middlewareData:F}=D$({strategy:"fixed",placement:j,whileElementsMounted:(...Dt)=>T$(...Dt,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[F$({mainAxis:i+D,alignmentAxis:o}),l&&N$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?j$():void 0,...G}),l&&z$({...G}),V$({...G,apply:({elements:Dt,rects:Mt,availableWidth:xn,availableHeight:Ht})=>{const{width:nn,height:Br}=Mt.reference,Dn=Dt.floating.style;Dn.setProperty("--radix-popper-available-width",`${xn}px`),Dn.setProperty("--radix-popper-available-height",`${Ht}px`),Dn.setProperty("--radix-popper-anchor-width",`${nn}px`),Dn.setProperty("--radix-popper-anchor-height",`${Br}px`)}}),R&&G$({element:R,padding:a}),q$({arrowWidth:O,arrowHeight:D}),g&&B$({strategy:"referenceHidden",...G})]}),[K,I]=OM(U),N=zn(v);rr(()=>{oe&&(N==null||N())},[oe,N]);const q=(ce=F.arrow)==null?void 0:ce.x,L=(ve=F.arrow)==null?void 0:ve.y,ee=((Se=F.arrow)==null?void 0:Se.centerOffset)!==0,[be,pe]=E.useState();return rr(()=>{C&&pe(window.getComputedStyle(C).zIndex)},[C]),_.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:oe?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(Ce=F.transformOrigin)==null?void 0:Ce.x,(Ue=F.transformOrigin)==null?void 0:Ue.y].join(" "),...((Ke=F.hide)==null?void 0:Ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:_.jsx(H$,{scope:t,placedSide:K,onArrowChange:P,arrowX:q,arrowY:L,shouldHideArrow:ee,children:_.jsx(Qe.div,{"data-side":K,"data-align":I,...x,ref:k,style:{...x.style,animation:oe?void 0:"none"}})})})});IM.displayName=zC;var MM="PopperArrow",Y$={top:"bottom",right:"left",bottom:"top",left:"right"},AM=E.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=X$(MM,r),o=Y$[s.placedSide];return _.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:_.jsx($$,{...i,ref:t,style:{...i.style,display:"block"}})})});AM.displayName=MM;function K$(n){return n!==null}var q$=n=>({name:"transformOrigin",options:n,fn(e){var w,C,b;const{placement:t,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[u,d]=OM(t),f={start:"0%",center:"50%",end:"100%"}[d],g=(((C=i.arrow)==null?void 0:C.x)??0)+a/2,m=(((b=i.arrow)==null?void 0:b.y)??0)+l/2;let v="",x="";return u==="bottom"?(v=o?f:`${g}px`,x=`${-l}px`):u==="top"?(v=o?f:`${g}px`,x=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,x=o?f:`${m}px`):u==="left"&&(v=`${r.floating.width+l}px`,x=o?f:`${m}px`),{data:{x:v,y:x}}}});function OM(n){const[e,t="center"]=n.split("-");return[e,t]}var DM=kM,LM=PM,FM=IM,NM=AM,dx="rovingFocusGroup.onEntryFocus",Z$={bubbles:!1,cancelable:!0},gy="RovingFocusGroup",[X_,jM,J$]=Bm(gy),[Q$,py]=Ms(gy,[J$]),[eU,tU]=Q$(gy),zM=E.forwardRef((n,e)=>_.jsx(X_.Provider,{scope:n.__scopeRovingFocusGroup,children:_.jsx(X_.Slot,{scope:n.__scopeRovingFocusGroup,children:_.jsx(nU,{...n,ref:e})})}));zM.displayName=gy;var nU=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=n,g=E.useRef(null),m=kt(e,g),v=ly(s),[x=null,w]=ml({prop:o,defaultProp:a,onChange:l}),[C,b]=E.useState(!1),k=zn(u),R=jM(t),P=E.useRef(!1),[A,O]=E.useState(0);return E.useEffect(()=>{const D=g.current;if(D)return D.addEventListener(dx,k),()=>D.removeEventListener(dx,k)},[k]),_.jsx(eU,{scope:t,orientation:r,dir:v,loop:i,currentTabStopId:x,onItemFocus:E.useCallback(D=>w(D),[w]),onItemShiftTab:E.useCallback(()=>b(!0),[]),onFocusableItemAdd:E.useCallback(()=>O(D=>D+1),[]),onFocusableItemRemove:E.useCallback(()=>O(D=>D-1),[]),children:_.jsx(Qe.div,{tabIndex:C||A===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:ke(n.onMouseDown,()=>{P.current=!0}),onFocus:ke(n.onFocus,D=>{const j=!P.current;if(D.target===D.currentTarget&&j&&!C){const Q=new CustomEvent(dx,Z$);if(D.currentTarget.dispatchEvent(Q),!Q.defaultPrevented){const X=R().filter(U=>U.focusable),W=X.find(U=>U.active),G=X.find(U=>U.id===x),ne=[W,G,...X].filter(Boolean).map(U=>U.ref.current);GM(ne,d)}}P.current=!1}),onBlur:ke(n.onBlur,()=>b(!1))})})}),VM="RovingFocusGroupItem",BM=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,...o}=n,a=ya(),l=s||a,u=tU(VM,t),d=u.currentTabStopId===l,f=jM(t),{onFocusableItemAdd:g,onFocusableItemRemove:m}=u;return E.useEffect(()=>{if(r)return g(),()=>m()},[r,g,m]),_.jsx(X_.ItemSlot,{scope:t,id:l,focusable:r,active:i,children:_.jsx(Qe.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ke(n.onMouseDown,v=>{r?u.onItemFocus(l):v.preventDefault()}),onFocus:ke(n.onFocus,()=>u.onItemFocus(l)),onKeyDown:ke(n.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=sU(v,u.orientation,u.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let C=f().filter(b=>b.focusable).map(b=>b.ref.current);if(x==="last")C.reverse();else if(x==="prev"||x==="next"){x==="prev"&&C.reverse();const b=C.indexOf(v.currentTarget);C=u.loop?oU(C,b+1):C.slice(b+1)}setTimeout(()=>GM(C))}})})})});BM.displayName=VM;var rU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iU(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function sU(n,e,t){const r=iU(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rU[r]}function GM(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function oU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var WM=zM,$M=BM,aU=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},oc=new WeakMap,$g=new WeakMap,Ug={},fx=0,UM=function(n){return n&&(n.host||UM(n.parentNode))},lU=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=UM(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},cU=function(n,e,t,r){var i=lU(e,Array.isArray(n)?n:[n]);Ug[t]||(Ug[t]=new WeakMap);var s=Ug[t],o=[],a=new Set,l=new Set(i),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(g){if(a.has(g))d(g);else try{var m=g.getAttribute(r),v=m!==null&&m!=="false",x=(oc.get(g)||0)+1,w=(s.get(g)||0)+1;oc.set(g,x),s.set(g,w),o.push(g),x===1&&v&&$g.set(g,!0),w===1&&g.setAttribute(t,"true"),v||g.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",g,C)}})};return d(e),a.clear(),fx++,function(){o.forEach(function(f){var g=oc.get(f)-1,m=s.get(f)-1;oc.set(f,g),s.set(f,m),g||($g.has(f)||f.removeAttribute(r),$g.delete(f)),m||f.removeAttribute(t)}),fx--,fx||(oc=new WeakMap,oc=new WeakMap,$g=new WeakMap,Ug={})}},VC=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=aU(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),cU(r,i,t,"aria-hidden")):function(){return null}},fs=function(){return fs=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fs.apply(this,arguments)};function HM(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function uU(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Mp="right-scroll-bar-position",Ap="width-before-scroll-bar",hU="with-scroll-bars-hidden",dU="--removed-body-scroll-bar-size";function gx(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function fU(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var gU=typeof window<"u"?E.useLayoutEffect:E.useEffect,Dk=new WeakMap;function pU(n,e){var t=fU(null,function(r){return n.forEach(function(i){return gx(i,r)})});return gU(function(){var r=Dk.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||gx(a,null)}),s.forEach(function(a){i.has(a)||gx(a,o)})}Dk.set(t,n)},[n]),t}function mU(n){return n}function yU(n,e){e===void 0&&(e=mU);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),t}}}};return i}function vU(n){n===void 0&&(n={});var e=yU(null);return e.options=fs({async:!0,ssr:!1},n),e}var XM=function(n){var e=n.sideCar,t=HM(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,fs({},t))};XM.isSideCarExport=!0;function xU(n,e){return n.useMedium(e),XM}var YM=vU(),px=function(){},my=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:px,onWheelCapture:px,onTouchMoveCapture:px}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,l=n.className,u=n.removeScrollBar,d=n.enabled,f=n.shards,g=n.sideCar,m=n.noIsolation,v=n.inert,x=n.allowPinchZoom,w=n.as,C=w===void 0?"div":w,b=n.gapMode,k=HM(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=g,P=pU([t,e]),A=fs(fs({},k),i);return E.createElement(E.Fragment,null,d&&E.createElement(R,{sideCar:YM,removeScrollBar:u,shards:f,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:t,gapMode:b}),o?E.cloneElement(E.Children.only(a),fs(fs({},A),{ref:P})):E.createElement(C,fs({},A,{className:l,ref:P}),a))});my.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};my.classNames={fullWidth:Ap,zeroRight:Mp};var _U=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wU(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=_U();return e&&n.setAttribute("nonce",e),n}function CU(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function SU(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var bU=function(){var n=0,e=null;return{add:function(t){n==0&&(e=wU())&&(CU(e,t),SU(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},EU=function(){var n=bU();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},KM=function(){var n=EU(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},TU={left:0,top:0,right:0,gap:0},mx=function(n){return parseInt(n||"",10)||0},kU=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[mx(t),mx(r),mx(i)]},RU=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return TU;var e=kU(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},PU=KM(),jc="data-scroll-locked",IU=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(hU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(jc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ap,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Mp," .").concat(Mp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ap," .").concat(Ap,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(jc,`] {
    `).concat(dU,": ").concat(a,`px;
  }
`)},Lk=function(){var n=parseInt(document.body.getAttribute(jc)||"0",10);return isFinite(n)?n:0},MU=function(){E.useEffect(function(){return document.body.setAttribute(jc,(Lk()+1).toString()),function(){var n=Lk()-1;n<=0?document.body.removeAttribute(jc):document.body.setAttribute(jc,n.toString())}},[])},AU=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;MU();var s=E.useMemo(function(){return RU(i)},[i]);return E.createElement(PU,{styles:IU(s,!e,i,t?"":"!important")})},Y_=!1;if(typeof window<"u")try{var Hg=Object.defineProperty({},"passive",{get:function(){return Y_=!0,!0}});window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,Hg)}catch{Y_=!1}var ac=Y_?{passive:!1}:!1,OU=function(n){return n.tagName==="TEXTAREA"},qM=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!OU(n)&&t[e]==="visible")},DU=function(n){return qM(n,"overflowY")},LU=function(n){return qM(n,"overflowX")},Fk=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ZM(n,r);if(i){var s=JM(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},FU=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},NU=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},ZM=function(n,e){return n==="v"?DU(e):LU(e)},JM=function(n,e){return n==="v"?FU(e):NU(e)},jU=function(n,e){return n==="h"&&e==="rtl"?-1:1},zU=function(n,e,t,r,i){var s=jU(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,l=e.contains(a),u=!1,d=o>0,f=0,g=0;do{var m=JM(n,a),v=m[0],x=m[1],w=m[2],C=x-w-s*v;(v||C)&&ZM(n,a)&&(f+=C,g+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(f)<1||!d&&Math.abs(g)<1)&&(u=!0),u},Xg=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Nk=function(n){return[n.deltaX,n.deltaY]},jk=function(n){return n&&"current"in n?n.current:n},VU=function(n,e){return n[0]===e[0]&&n[1]===e[1]},BU=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},GU=0,lc=[];function WU(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),i=E.useState(GU++)[0],s=E.useState(KM)[0],o=E.useRef(n);E.useEffect(function(){o.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var x=uU([n.lockRef.current],(n.shards||[]).map(jk),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=E.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var C=Xg(x),b=t.current,k="deltaX"in x?x.deltaX:b[0]-C[0],R="deltaY"in x?x.deltaY:b[1]-C[1],P,A=x.target,O=Math.abs(k)>Math.abs(R)?"h":"v";if("touches"in x&&O==="h"&&A.type==="range")return!1;var D=Fk(O,A);if(!D)return!0;if(D?P=O:(P=O==="v"?"h":"v",D=Fk(O,A)),!D)return!1;if(!r.current&&"changedTouches"in x&&(k||R)&&(r.current=P),!P)return!0;var j=r.current||P;return zU(j,w,x,j==="h"?k:R)},[]),l=E.useCallback(function(x){var w=x;if(!(!lc.length||lc[lc.length-1]!==s)){var C="deltaY"in w?Nk(w):Xg(w),b=e.current.filter(function(P){return P.name===w.type&&(P.target===w.target||w.target===P.shadowParent)&&VU(P.delta,C)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var k=(o.current.shards||[]).map(jk).filter(Boolean).filter(function(P){return P.contains(w.target)}),R=k.length>0?a(w,k[0]):!o.current.noIsolation;R&&w.cancelable&&w.preventDefault()}}},[]),u=E.useCallback(function(x,w,C,b){var k={name:x,delta:w,target:C,should:b,shadowParent:$U(C)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(R){return R!==k})},1)},[]),d=E.useCallback(function(x){t.current=Xg(x),r.current=void 0},[]),f=E.useCallback(function(x){u(x.type,Nk(x),x.target,a(x,n.lockRef.current))},[]),g=E.useCallback(function(x){u(x.type,Xg(x),x.target,a(x,n.lockRef.current))},[]);E.useEffect(function(){return lc.push(s),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:g}),document.addEventListener("wheel",l,ac),document.addEventListener("touchmove",l,ac),document.addEventListener("touchstart",d,ac),function(){lc=lc.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,ac),document.removeEventListener("touchmove",l,ac),document.removeEventListener("touchstart",d,ac)}},[]);var m=n.removeScrollBar,v=n.inert;return E.createElement(E.Fragment,null,v?E.createElement(s,{styles:BU(i)}):null,m?E.createElement(AU,{gapMode:n.gapMode}):null)}function $U(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const UU=xU(YM,WU);var yy=E.forwardRef(function(n,e){return E.createElement(my,fs({},n,{ref:e,sideCar:UU}))});yy.classNames=my.classNames;var K_=["Enter"," "],HU=["ArrowDown","PageUp","Home"],QM=["ArrowUp","PageDown","End"],XU=[...HU,...QM],YU={ltr:[...K_,"ArrowRight"],rtl:[...K_,"ArrowLeft"]},KU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ud="Menu",[gd,qU,ZU]=Bm(Ud),[Tl,eA]=Ms(Ud,[ZU,fy,py]),vy=fy(),tA=py(),[JU,kl]=Tl(Ud),[QU,Hd]=Tl(Ud),nA=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,a=vy(e),[l,u]=E.useState(null),d=E.useRef(!1),f=zn(s),g=ly(i);return E.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),_.jsx(DM,{...a,children:_.jsx(JU,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:u,children:_.jsx(QU,{scope:e,onClose:E.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:g,modal:o,children:r})})})};nA.displayName=Ud;var eH="MenuAnchor",BC=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=vy(t);return _.jsx(LM,{...i,...r,ref:e})});BC.displayName=eH;var GC="MenuPortal",[tH,rA]=Tl(GC,{forceMount:void 0}),iA=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=kl(GC,e);return _.jsx(tH,{scope:e,forceMount:t,children:_.jsx(es,{present:t||s.open,children:_.jsx(Nd,{asChild:!0,container:i,children:r})})})};iA.displayName=GC;var wi="MenuContent",[nH,WC]=Tl(wi),sA=E.forwardRef((n,e)=>{const t=rA(wi,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=kl(wi,n.__scopeMenu),o=Hd(wi,n.__scopeMenu);return _.jsx(gd.Provider,{scope:n.__scopeMenu,children:_.jsx(es,{present:r||s.open,children:_.jsx(gd.Slot,{scope:n.__scopeMenu,children:o.modal?_.jsx(rH,{...i,ref:e}):_.jsx(iH,{...i,ref:e})})})})}),rH=E.forwardRef((n,e)=>{const t=kl(wi,n.__scopeMenu),r=E.useRef(null),i=kt(e,r);return E.useEffect(()=>{const s=r.current;if(s)return VC(s)},[]),_.jsx($C,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ke(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),iH=E.forwardRef((n,e)=>{const t=kl(wi,n.__scopeMenu);return _.jsx($C,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),sH=pl("MenuContent.ScrollLock"),$C=E.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:g,onDismiss:m,disableOutsideScroll:v,...x}=n,w=kl(wi,t),C=Hd(wi,t),b=vy(t),k=tA(t),R=qU(t),[P,A]=E.useState(null),O=E.useRef(null),D=kt(e,O,w.onContentChange),j=E.useRef(0),Q=E.useRef(""),X=E.useRef(0),W=E.useRef(null),G=E.useRef("right"),V=E.useRef(0),ne=v?yy:E.Fragment,U=v?{as:sH,allowPinchZoom:!0}:void 0,oe=K=>{var ce,ve;const I=Q.current+K,N=R().filter(Se=>!Se.disabled),q=document.activeElement,L=(ce=N.find(Se=>Se.ref.current===q))==null?void 0:ce.textValue,ee=N.map(Se=>Se.textValue),be=yH(ee,I,L),pe=(ve=N.find(Se=>Se.textValue===be))==null?void 0:ve.ref.current;(function Se(Ce){Q.current=Ce,window.clearTimeout(j.current),Ce!==""&&(j.current=window.setTimeout(()=>Se(""),1e3))})(I),pe&&setTimeout(()=>pe.focus())};E.useEffect(()=>()=>window.clearTimeout(j.current),[]),IC();const F=E.useCallback(K=>{var N,q;return G.current===((N=W.current)==null?void 0:N.side)&&xH(K,(q=W.current)==null?void 0:q.area)},[]);return _.jsx(nH,{scope:t,searchRef:Q,onItemEnter:E.useCallback(K=>{F(K)&&K.preventDefault()},[F]),onItemLeave:E.useCallback(K=>{var I;F(K)||((I=O.current)==null||I.focus(),A(null))},[F]),onTriggerLeave:E.useCallback(K=>{F(K)&&K.preventDefault()},[F]),pointerGraceTimerRef:X,onPointerGraceIntentChange:E.useCallback(K=>{W.current=K},[]),children:_.jsx(ne,{...U,children:_.jsx(cy,{asChild:!0,trapped:i,onMountAutoFocus:ke(s,K=>{var I;K.preventDefault(),(I=O.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:_.jsx(Fd,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:g,onDismiss:m,children:_.jsx(WM,{asChild:!0,...k,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:A,onEntryFocus:ke(l,K=>{C.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:_.jsx(FM,{role:"menu","aria-orientation":"vertical","data-state":wA(w.open),"data-radix-menu-content":"",dir:C.dir,...b,...x,ref:D,style:{outline:"none",...x.style},onKeyDown:ke(x.onKeyDown,K=>{const N=K.target.closest("[data-radix-menu-content]")===K.currentTarget,q=K.ctrlKey||K.altKey||K.metaKey,L=K.key.length===1;N&&(K.key==="Tab"&&K.preventDefault(),!q&&L&&oe(K.key));const ee=O.current;if(K.target!==ee||!XU.includes(K.key))return;K.preventDefault();const pe=R().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);QM.includes(K.key)&&pe.reverse(),pH(pe)}),onBlur:ke(n.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(j.current),Q.current="")}),onPointerMove:ke(n.onPointerMove,pd(K=>{const I=K.target,N=V.current!==K.clientX;if(K.currentTarget.contains(I)&&N){const q=K.clientX>V.current?"right":"left";G.current=q,V.current=K.clientX}}))})})})})})})});sA.displayName=wi;var oH="MenuGroup",UC=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Qe.div,{role:"group",...r,ref:e})});UC.displayName=oH;var aH="MenuLabel",oA=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Qe.div,{...r,ref:e})});oA.displayName=aH;var ym="MenuItem",zk="menu.itemSelect",xy=E.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=E.useRef(null),o=Hd(ym,n.__scopeMenu),a=WC(ym,n.__scopeMenu),l=kt(e,s),u=E.useRef(!1),d=()=>{const f=s.current;if(!t&&f){const g=new CustomEvent(zk,{bubbles:!0,cancelable:!0});f.addEventListener(zk,m=>r==null?void 0:r(m),{once:!0}),Zw(f,g),g.defaultPrevented?u.current=!1:o.onClose()}};return _.jsx(aA,{...i,ref:l,disabled:t,onClick:ke(n.onClick,d),onPointerDown:f=>{var g;(g=n.onPointerDown)==null||g.call(n,f),u.current=!0},onPointerUp:ke(n.onPointerUp,f=>{var g;u.current||(g=f.currentTarget)==null||g.click()}),onKeyDown:ke(n.onKeyDown,f=>{const g=a.searchRef.current!=="";t||g&&f.key===" "||K_.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});xy.displayName=ym;var aA=E.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=WC(ym,t),a=tA(t),l=E.useRef(null),u=kt(e,l),[d,f]=E.useState(!1),[g,m]=E.useState("");return E.useEffect(()=>{const v=l.current;v&&m((v.textContent??"").trim())},[s.children]),_.jsx(gd.ItemSlot,{scope:t,disabled:r,textValue:i??g,children:_.jsx($M,{asChild:!0,...a,focusable:!r,children:_.jsx(Qe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:ke(n.onPointerMove,pd(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(n.onPointerLeave,pd(v=>o.onItemLeave(v))),onFocus:ke(n.onFocus,()=>f(!0)),onBlur:ke(n.onBlur,()=>f(!1))})})})}),lH="MenuCheckboxItem",lA=E.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return _.jsx(fA,{scope:n.__scopeMenu,checked:t,children:_.jsx(xy,{role:"menuitemcheckbox","aria-checked":vm(t)?"mixed":t,...i,ref:e,"data-state":XC(t),onSelect:ke(i.onSelect,()=>r==null?void 0:r(vm(t)?!0:!t),{checkForDefaultPrevented:!1})})})});lA.displayName=lH;var cA="MenuRadioGroup",[cH,uH]=Tl(cA,{value:void 0,onValueChange:()=>{}}),uA=E.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=zn(r);return _.jsx(cH,{scope:n.__scopeMenu,value:t,onValueChange:s,children:_.jsx(UC,{...i,ref:e})})});uA.displayName=cA;var hA="MenuRadioItem",dA=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=uH(hA,n.__scopeMenu),s=t===i.value;return _.jsx(fA,{scope:n.__scopeMenu,checked:s,children:_.jsx(xy,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":XC(s),onSelect:ke(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,t)},{checkForDefaultPrevented:!1})})})});dA.displayName=hA;var HC="MenuItemIndicator",[fA,hH]=Tl(HC,{checked:!1}),gA=E.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=hH(HC,t);return _.jsx(es,{present:r||vm(s.checked)||s.checked===!0,children:_.jsx(Qe.span,{...i,ref:e,"data-state":XC(s.checked)})})});gA.displayName=HC;var dH="MenuSeparator",pA=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});pA.displayName=dH;var fH="MenuArrow",mA=E.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=vy(t);return _.jsx(NM,{...i,...r,ref:e})});mA.displayName=fH;var gH="MenuSub",[Ree,yA]=Tl(gH),Oh="MenuSubTrigger",vA=E.forwardRef((n,e)=>{const t=kl(Oh,n.__scopeMenu),r=Hd(Oh,n.__scopeMenu),i=yA(Oh,n.__scopeMenu),s=WC(Oh,n.__scopeMenu),o=E.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:n.__scopeMenu},d=E.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return E.useEffect(()=>d,[d]),E.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),_.jsx(BC,{asChild:!0,...u,children:_.jsx(aA,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":wA(t.open),...n,ref:qw(e,i.onTriggerChange),onClick:f=>{var g;(g=n.onClick)==null||g.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ke(n.onPointerMove,pd(f=>{s.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),d()},100))})),onPointerLeave:ke(n.onPointerLeave,pd(f=>{var m,v;d();const g=(m=t.content)==null?void 0:m.getBoundingClientRect();if(g){const x=(v=t.content)==null?void 0:v.dataset.side,w=x==="right",C=w?-5:5,b=g[w?"left":"right"],k=g[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+C,y:f.clientY},{x:b,y:g.top},{x:k,y:g.top},{x:k,y:g.bottom},{x:b,y:g.bottom}],side:x}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ke(n.onKeyDown,f=>{var m;const g=s.searchRef.current!=="";n.disabled||g&&f.key===" "||YU[r.dir].includes(f.key)&&(t.onOpenChange(!0),(m=t.content)==null||m.focus(),f.preventDefault())})})})});vA.displayName=Oh;var xA="MenuSubContent",_A=E.forwardRef((n,e)=>{const t=rA(wi,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=kl(wi,n.__scopeMenu),o=Hd(wi,n.__scopeMenu),a=yA(xA,n.__scopeMenu),l=E.useRef(null),u=kt(e,l);return _.jsx(gd.Provider,{scope:n.__scopeMenu,children:_.jsx(es,{present:r||s.open,children:_.jsx(gd.Slot,{scope:n.__scopeMenu,children:_.jsx($C,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ke(n.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ke(n.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ke(n.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),g=KU[o.dir].includes(d.key);f&&g&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});_A.displayName=xA;function wA(n){return n?"open":"closed"}function vm(n){return n==="indeterminate"}function XC(n){return vm(n)?"indeterminate":n?"checked":"unchecked"}function pH(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function mH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function yH(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=mH(n,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==t));const l=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function vH(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,d=e[o].y;l>r!=d>r&&t<(u-a)*(r-l)/(d-l)+a&&(i=!i)}return i}function xH(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return vH(t,e)}function pd(n){return e=>e.pointerType==="mouse"?n(e):void 0}var _H=nA,wH=BC,CH=iA,SH=sA,bH=UC,EH=oA,TH=xy,kH=lA,RH=uA,PH=dA,IH=gA,MH=pA,AH=mA,OH=vA,DH=_A,YC="ContextMenu",[LH,Pee]=Ms(YC,[eA]),vr=eA(),[FH,CA]=LH(YC),SA=n=>{const{__scopeContextMenu:e,children:t,onOpenChange:r,dir:i,modal:s=!0}=n,[o,a]=E.useState(!1),l=vr(e),u=zn(r),d=E.useCallback(f=>{a(f),u(f)},[u]);return _.jsx(FH,{scope:e,open:o,onOpenChange:d,modal:s,children:_.jsx(_H,{...l,dir:i,open:o,onOpenChange:d,modal:s,children:t})})};SA.displayName=YC;var bA="ContextMenuTrigger",EA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,disabled:r=!1,...i}=n,s=CA(bA,t),o=vr(t),a=E.useRef({x:0,y:0}),l=E.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),u=E.useRef(0),d=E.useCallback(()=>window.clearTimeout(u.current),[]),f=g=>{a.current={x:g.clientX,y:g.clientY},s.onOpenChange(!0)};return E.useEffect(()=>d,[d]),E.useEffect(()=>void(r&&d()),[r,d]),_.jsxs(_.Fragment,{children:[_.jsx(wH,{...o,virtualRef:l}),_.jsx(Qe.span,{"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:e,style:{WebkitTouchCallout:"none",...n.style},onContextMenu:r?n.onContextMenu:ke(n.onContextMenu,g=>{d(),f(g),g.preventDefault()}),onPointerDown:r?n.onPointerDown:ke(n.onPointerDown,Yg(g=>{d(),u.current=window.setTimeout(()=>f(g),700)})),onPointerMove:r?n.onPointerMove:ke(n.onPointerMove,Yg(d)),onPointerCancel:r?n.onPointerCancel:ke(n.onPointerCancel,Yg(d)),onPointerUp:r?n.onPointerUp:ke(n.onPointerUp,Yg(d))})]})});EA.displayName=bA;var NH="ContextMenuPortal",TA=n=>{const{__scopeContextMenu:e,...t}=n,r=vr(e);return _.jsx(CH,{...r,...t})};TA.displayName=NH;var kA="ContextMenuContent",RA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=CA(kA,t),s=vr(t),o=E.useRef(!1);return _.jsx(SH,{...s,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=n.onCloseAutoFocus)==null||l.call(n,a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{var l;(l=n.onInteractOutside)==null||l.call(n,a),!a.defaultPrevented&&!i.modal&&(o.current=!0)},style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});RA.displayName=kA;var jH="ContextMenuGroup",zH=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(bH,{...i,...r,ref:e})});zH.displayName=jH;var VH="ContextMenuLabel",PA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(EH,{...i,...r,ref:e})});PA.displayName=VH;var BH="ContextMenuItem",IA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(TH,{...i,...r,ref:e})});IA.displayName=BH;var GH="ContextMenuCheckboxItem",MA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(kH,{...i,...r,ref:e})});MA.displayName=GH;var WH="ContextMenuRadioGroup",$H=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(RH,{...i,...r,ref:e})});$H.displayName=WH;var UH="ContextMenuRadioItem",AA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(PH,{...i,...r,ref:e})});AA.displayName=UH;var HH="ContextMenuItemIndicator",OA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(IH,{...i,...r,ref:e})});OA.displayName=HH;var XH="ContextMenuSeparator",DA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(MH,{...i,...r,ref:e})});DA.displayName=XH;var YH="ContextMenuArrow",KH=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(AH,{...i,...r,ref:e})});KH.displayName=YH;var qH="ContextMenuSubTrigger",LA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(OH,{...i,...r,ref:e})});LA.displayName=qH;var ZH="ContextMenuSubContent",FA=E.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,i=vr(t);return _.jsx(DH,{...i,...r,ref:e,style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FA.displayName=ZH;function Yg(n){return e=>e.pointerType!=="mouse"?n(e):void 0}var JH=SA,QH=EA,e6=TA,NA=RA,jA=PA,zA=IA,VA=MA,BA=AA,GA=OA,WA=DA,$A=LA,UA=FA;const HA=JH,XA=QH,t6=E.forwardRef(({className:n,inset:e,children:t,...r},i)=>_.jsxs($A,{ref:i,className:Da("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e&&"pl-8",n),...r,children:[t,_.jsx(vP,{className:"ml-auto h-4 w-4"})]}));t6.displayName=$A.displayName;const n6=E.forwardRef(({className:n,...e},t)=>_.jsx(UA,{ref:t,className:Da("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));n6.displayName=UA.displayName;const KC=E.forwardRef(({className:n,...e},t)=>_.jsx(e6,{children:_.jsx(NA,{ref:t,className:Da("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e})}));KC.displayName=NA.displayName;const zc=E.forwardRef(({className:n,inset:e,...t},r)=>_.jsx(zA,{ref:r,className:Da("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));zc.displayName=zA.displayName;const r6=E.forwardRef(({className:n,children:e,checked:t,...r},i)=>_.jsxs(VA,{ref:i,className:Da("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(GA,{children:_.jsx(zd,{className:"h-4 w-4"})})}),e]}));r6.displayName=VA.displayName;const i6=E.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(BA,{ref:r,className:Da("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(GA,{children:_.jsx(_P,{className:"h-2 w-2 fill-current"})})}),e]}));i6.displayName=BA.displayName;const s6=E.forwardRef(({className:n,inset:e,...t},r)=>_.jsx(jA,{ref:r,className:Da("px-2 py-1.5 text-sm font-semibold text-foreground",e&&"pl-8",n),...t}));s6.displayName=jA.displayName;const o6=E.forwardRef(({className:n,...e},t)=>_.jsx(WA,{ref:t,className:Da("-mx-1 my-1 h-px bg-border",n),...e}));o6.displayName=WA.displayName;function a6({onAddAttachment:n,screenshotFunction:e}){const t=E.useRef(),r=E.useRef(),i=s=>{s.preventDefault();const o=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:s.clientX,clientY:s.clientY});r.current.dispatchEvent(o)};return _.jsxs(_.Fragment,{children:[_.jsx("input",{ref:t,id:"fileUpload",type:"file",accept:"image/*",onChange:n,className:"hidden"}),e?_.jsxs(HA,{children:[_.jsx(XA,{onClick:i,children:_.jsx("div",{ref:r,className:"flex items-center justify-center size-14 rounded-sm border border-gray-300 text-gray-300 cursor-pointer",children:_.jsx(nd,{className:"size-10"})})}),_.jsxs(KC,{children:[_.jsx(zc,{onClick:()=>{var s;return(s=t==null?void 0:t.current)==null?void 0:s.click()},children:"Buscar em arquivos"}),_.jsx(zc,{onClick:n,children:"Capturar Viewpoint"})]})]}):_.jsx("div",{className:"flex items-center justify-center size-14 rounded-sm border border-gray-300 text-gray-300 cursor-pointer",children:_.jsx("label",{htmlFor:"fileUpload",className:"cursor-pointer",children:_.jsx(nd,{className:"size-10"})})})]})}function YA({url:n,onRemove:e,onEdit:t,onView:r}){const i=E.useRef(),s=o=>{o.preventDefault();const a=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:o.clientX,clientY:o.clientY});i.current.dispatchEvent(a)};return _.jsxs(HA,{children:[_.jsx(XA,{onClick:s,children:_.jsxs("div",{ref:i,className:`
          group size-14 rounded-sm border border-gray-300 text-gray-500 cursor-pointer
          flex items-center justify-center
          relative
        `,children:[_.jsx("img",{src:n,className:"absolute inset-0 w-full h-full object-cover"}),_.jsx("div",{className:"z-50 bg-white rounded-full size-9 opacity-0 group-hover:opacity-100 flex items-center justify-center",children:_.jsx(W3,{className:"size-5 m-auto"})})]})}),_.jsxs(KC,{children:[t&&_.jsx(zc,{onClick:t,children:"Editar"}),r&&_.jsx(zc,{onClick:r,children:"Visualizar"}),e&&_.jsx(zc,{onClick:e,children:"Deletar"})]})]})}const l6=1,c6=1e6;let yx=0;function u6(){return yx=(yx+1)%Number.MAX_SAFE_INTEGER,yx.toString()}const vx=new Map,Vk=n=>{if(vx.has(n))return;const e=setTimeout(()=>{vx.delete(n),Xh({type:"REMOVE_TOAST",toastId:n})},c6);vx.set(n,e)},h6=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,l6)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Vk(t):n.toasts.forEach(r=>{Vk(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Op=[];let Dp={toasts:[]};function Xh(n){Dp=h6(Dp,n),Op.forEach(e=>{e(Dp)})}function d6({...n}){const e=u6(),t=i=>Xh({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Xh({type:"DISMISS_TOAST",toastId:e});return Xh({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function f6(){const[n,e]=E.useState(Dp);return E.useEffect(()=>(Op.push(e),()=>{const t=Op.indexOf(e);t>-1&&Op.splice(t,1)}),[n]),{...n,toast:d6,dismiss:t=>Xh({type:"DISMISS_TOAST",toastId:t})}}function Bk(n,[e,t]){return Math.min(t,Math.max(e,n))}function KA(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var g6=[" ","Enter","ArrowUp","ArrowDown"],p6=[" ","Enter"],Xd="Select",[_y,wy,m6]=Bm(Xd),[xu,Iee]=Ms(Xd,[m6,fy]),Cy=fy(),[y6,La]=xu(Xd),[v6,x6]=xu(Xd),qA=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:g,required:m,form:v}=n,x=Cy(e),[w,C]=E.useState(null),[b,k]=E.useState(null),[R,P]=E.useState(!1),A=ly(u),[O=!1,D]=ml({prop:r,defaultProp:i,onChange:s}),[j,Q]=ml({prop:o,defaultProp:a,onChange:l}),X=E.useRef(null),W=w?v||!!w.closest("form"):!0,[G,V]=E.useState(new Set),ne=Array.from(G).map(U=>U.props.value).join(";");return _.jsx(DM,{...x,children:_.jsxs(y6,{required:m,scope:e,trigger:w,onTriggerChange:C,valueNode:b,onValueNodeChange:k,valueNodeHasChildren:R,onValueNodeHasChildrenChange:P,contentId:ya(),value:j,onValueChange:Q,open:O,onOpenChange:D,dir:A,triggerPointerDownPosRef:X,disabled:g,children:[_.jsx(_y.Provider,{scope:e,children:_.jsx(v6,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(U=>{V(oe=>new Set(oe).add(U))},[]),onNativeOptionRemove:E.useCallback(U=>{V(oe=>{const F=new Set(oe);return F.delete(U),F})},[]),children:t})}),W?_.jsxs(CO,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:j,onChange:U=>Q(U.target.value),disabled:g,form:v,children:[j===void 0?_.jsx("option",{value:""}):null,Array.from(G)]},ne):null]})})};qA.displayName=Xd;var ZA="SelectTrigger",JA=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=Cy(t),o=La(ZA,t),a=o.disabled||r,l=kt(e,o.onTriggerChange),u=wy(t),d=E.useRef("touch"),[f,g,m]=SO(x=>{const w=u().filter(k=>!k.disabled),C=w.find(k=>k.value===o.value),b=bO(w,x,C);b!==void 0&&o.onValueChange(b.value)}),v=x=>{a||(o.onOpenChange(!0),m()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return _.jsx(LM,{asChild:!0,...s,children:_.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":wO(o.value)?"":void 0,...i,ref:l,onClick:ke(i.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&v(x)}),onPointerDown:ke(i.onPointerDown,x=>{d.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:ke(i.onKeyDown,x=>{const w=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(w&&x.key===" ")&&g6.includes(x.key)&&(v(),x.preventDefault())})})})});JA.displayName=ZA;var QA="SelectValue",eO=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o="",...a}=n,l=La(QA,t),{onValueNodeHasChildrenChange:u}=l,d=s!==void 0,f=kt(e,l.onValueNodeChange);return rr(()=>{u(d)},[u,d]),_.jsx(Qe.span,{...a,ref:f,style:{pointerEvents:"none"},children:wO(l.value)?_.jsx(_.Fragment,{children:o}):s})});eO.displayName=QA;var _6="SelectIcon",tO=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return _.jsx(Qe.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});tO.displayName=_6;var w6="SelectPortal",nO=n=>_.jsx(Nd,{asChild:!0,...n});nO.displayName=w6;var wl="SelectContent",rO=E.forwardRef((n,e)=>{const t=La(wl,n.__scopeSelect),[r,i]=E.useState();if(rr(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?au.createPortal(_.jsx(iO,{scope:n.__scopeSelect,children:_.jsx(_y.Slot,{scope:n.__scopeSelect,children:_.jsx("div",{children:n.children})})}),s):null}return _.jsx(sO,{...n,ref:e})});rO.displayName=wl;var Fi=10,[iO,Fa]=xu(wl),C6="SelectContentImpl",S6=pl("SelectContent.RemoveScroll"),sO=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:g,collisionPadding:m,sticky:v,hideWhenDetached:x,avoidCollisions:w,...C}=n,b=La(wl,t),[k,R]=E.useState(null),[P,A]=E.useState(null),O=kt(e,ce=>R(ce)),[D,j]=E.useState(null),[Q,X]=E.useState(null),W=wy(t),[G,V]=E.useState(!1),ne=E.useRef(!1);E.useEffect(()=>{if(k)return VC(k)},[k]),IC();const U=E.useCallback(ce=>{const[ve,...Se]=W().map(Ke=>Ke.ref.current),[Ce]=Se.slice(-1),Ue=document.activeElement;for(const Ke of ce)if(Ke===Ue||(Ke==null||Ke.scrollIntoView({block:"nearest"}),Ke===ve&&P&&(P.scrollTop=0),Ke===Ce&&P&&(P.scrollTop=P.scrollHeight),Ke==null||Ke.focus(),document.activeElement!==Ue))return},[W,P]),oe=E.useCallback(()=>U([D,k]),[U,D,k]);E.useEffect(()=>{G&&oe()},[G,oe]);const{onOpenChange:F,triggerPointerDownPosRef:K}=b;E.useEffect(()=>{if(k){let ce={x:0,y:0};const ve=Ce=>{var Ue,Ke;ce={x:Math.abs(Math.round(Ce.pageX)-(((Ue=K.current)==null?void 0:Ue.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((Ke=K.current)==null?void 0:Ke.y)??0))}},Se=Ce=>{ce.x<=10&&ce.y<=10?Ce.preventDefault():k.contains(Ce.target)||F(!1),document.removeEventListener("pointermove",ve),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",Se,{capture:!0})}}},[k,F,K]),E.useEffect(()=>{const ce=()=>F(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[F]);const[I,N]=SO(ce=>{const ve=W().filter(Ue=>!Ue.disabled),Se=ve.find(Ue=>Ue.ref.current===document.activeElement),Ce=bO(ve,ce,Se);Ce&&setTimeout(()=>Ce.ref.current.focus())}),q=E.useCallback((ce,ve,Se)=>{const Ce=!ne.current&&!Se;(b.value!==void 0&&b.value===ve||Ce)&&(j(ce),Ce&&(ne.current=!0))},[b.value]),L=E.useCallback(()=>k==null?void 0:k.focus(),[k]),ee=E.useCallback((ce,ve,Se)=>{const Ce=!ne.current&&!Se;(b.value!==void 0&&b.value===ve||Ce)&&X(ce)},[b.value]),be=r==="popper"?q_:oO,pe=be===q_?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:g,collisionPadding:m,sticky:v,hideWhenDetached:x,avoidCollisions:w}:{};return _.jsx(iO,{scope:t,content:k,viewport:P,onViewportChange:A,itemRefCallback:q,selectedItem:D,onItemLeave:L,itemTextRefCallback:ee,focusSelectedItem:oe,selectedItemText:Q,position:r,isPositioned:G,searchRef:I,children:_.jsx(yy,{as:S6,allowPinchZoom:!0,children:_.jsx(cy,{asChild:!0,trapped:b.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:ke(i,ce=>{var ve;(ve=b.trigger)==null||ve.focus({preventScroll:!0}),ce.preventDefault()}),children:_.jsx(Fd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:_.jsx(be,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ce=>ce.preventDefault(),...C,...pe,onPlaced:()=>V(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:ke(C.onKeyDown,ce=>{const ve=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ve&&ce.key.length===1&&N(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let Ce=W().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Ue=ce.target,Ke=Ce.indexOf(Ue);Ce=Ce.slice(Ke+1)}setTimeout(()=>U(Ce)),ce.preventDefault()}})})})})})})});sO.displayName=C6;var b6="SelectItemAlignedPosition",oO=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=La(wl,t),o=Fa(wl,t),[a,l]=E.useState(null),[u,d]=E.useState(null),f=kt(e,O=>d(O)),g=wy(t),m=E.useRef(!1),v=E.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:C,focusSelectedItem:b}=o,k=E.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&x&&w&&C){const O=s.trigger.getBoundingClientRect(),D=u.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),Q=C.getBoundingClientRect();if(s.dir!=="rtl"){const Ue=Q.left-D.left,Ke=j.left-Ue,Dt=O.left-Ke,Mt=O.width+Dt,xn=Math.max(Mt,D.width),Ht=window.innerWidth-Fi,nn=Bk(Ke,[Fi,Math.max(Fi,Ht-xn)]);a.style.minWidth=Mt+"px",a.style.left=nn+"px"}else{const Ue=D.right-Q.right,Ke=window.innerWidth-j.right-Ue,Dt=window.innerWidth-O.right-Ke,Mt=O.width+Dt,xn=Math.max(Mt,D.width),Ht=window.innerWidth-Fi,nn=Bk(Ke,[Fi,Math.max(Fi,Ht-xn)]);a.style.minWidth=Mt+"px",a.style.right=nn+"px"}const X=g(),W=window.innerHeight-Fi*2,G=x.scrollHeight,V=window.getComputedStyle(u),ne=parseInt(V.borderTopWidth,10),U=parseInt(V.paddingTop,10),oe=parseInt(V.borderBottomWidth,10),F=parseInt(V.paddingBottom,10),K=ne+U+G+F+oe,I=Math.min(w.offsetHeight*5,K),N=window.getComputedStyle(x),q=parseInt(N.paddingTop,10),L=parseInt(N.paddingBottom,10),ee=O.top+O.height/2-Fi,be=W-ee,pe=w.offsetHeight/2,ce=w.offsetTop+pe,ve=ne+U+ce,Se=K-ve;if(ve<=ee){const Ue=X.length>0&&w===X[X.length-1].ref.current;a.style.bottom="0px";const Ke=u.clientHeight-x.offsetTop-x.offsetHeight,Dt=Math.max(be,pe+(Ue?L:0)+Ke+oe),Mt=ve+Dt;a.style.height=Mt+"px"}else{const Ue=X.length>0&&w===X[0].ref.current;a.style.top="0px";const Dt=Math.max(ee,ne+x.offsetTop+(Ue?q:0)+pe)+Se;a.style.height=Dt+"px",x.scrollTop=ve-ee+x.offsetTop}a.style.margin=`${Fi}px 0`,a.style.minHeight=I+"px",a.style.maxHeight=W+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[g,s.trigger,s.valueNode,a,u,x,w,C,s.dir,r]);rr(()=>k(),[k]);const[R,P]=E.useState();rr(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const A=E.useCallback(O=>{O&&v.current===!0&&(k(),b==null||b(),v.current=!1)},[k,b]);return _.jsx(T6,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:_.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:_.jsx(Qe.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});oO.displayName=b6;var E6="SelectPopperPosition",q_=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=Fi,...s}=n,o=Cy(t);return _.jsx(FM,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});q_.displayName=E6;var[T6,qC]=xu(wl,{}),Z_="SelectViewport",aO=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=Fa(Z_,t),o=qC(Z_,t),a=kt(e,s.onViewportChange),l=E.useRef(0);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),_.jsx(_y.Slot,{scope:t,children:_.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ke(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&f){const m=Math.abs(l.current-d.scrollTop);if(m>0){const v=window.innerHeight-Fi*2,x=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),C=Math.max(x,w);if(C<v){const b=C+m,k=Math.min(v,b),R=b-k;f.style.height=k+"px",f.style.bottom==="0px"&&(d.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});aO.displayName=Z_;var lO="SelectGroup",[k6,R6]=xu(lO),cO=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=ya();return _.jsx(k6,{scope:t,id:i,children:_.jsx(Qe.div,{role:"group","aria-labelledby":i,...r,ref:e})})});cO.displayName=lO;var uO="SelectLabel",hO=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=R6(uO,t);return _.jsx(Qe.div,{id:i.id,...r,ref:e})});hO.displayName=uO;var xm="SelectItem",[P6,dO]=xu(xm),fO=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,a=La(xm,t),l=Fa(xm,t),u=a.value===r,[d,f]=E.useState(s??""),[g,m]=E.useState(!1),v=kt(e,b=>{var k;return(k=l.itemRefCallback)==null?void 0:k.call(l,b,r,i)}),x=ya(),w=E.useRef("touch"),C=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return _.jsx(P6,{scope:t,value:r,disabled:i,textId:x,isSelected:u,onItemTextChange:E.useCallback(b=>{f(k=>k||((b==null?void 0:b.textContent)??"").trim())},[]),children:_.jsx(_y.ItemSlot,{scope:t,value:r,disabled:i,textValue:d,children:_.jsx(Qe.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":u&&g,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:ke(o.onFocus,()=>m(!0)),onBlur:ke(o.onBlur,()=>m(!1)),onClick:ke(o.onClick,()=>{w.current!=="mouse"&&C()}),onPointerUp:ke(o.onPointerUp,()=>{w.current==="mouse"&&C()}),onPointerDown:ke(o.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:ke(o.onPointerMove,b=>{var k;w.current=b.pointerType,i?(k=l.onItemLeave)==null||k.call(l):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(o.onPointerLeave,b=>{var k;b.currentTarget===document.activeElement&&((k=l.onItemLeave)==null||k.call(l))}),onKeyDown:ke(o.onKeyDown,b=>{var R;((R=l.searchRef)==null?void 0:R.current)!==""&&b.key===" "||(p6.includes(b.key)&&C(),b.key===" "&&b.preventDefault())})})})})});fO.displayName=xm;var Dh="SelectItemText",gO=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=La(Dh,t),a=Fa(Dh,t),l=dO(Dh,t),u=x6(Dh,t),[d,f]=E.useState(null),g=kt(e,C=>f(C),l.onItemTextChange,C=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,C,l.value,l.disabled)}),m=d==null?void 0:d.textContent,v=E.useMemo(()=>_.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=u;return rr(()=>(x(v),()=>w(v)),[x,w,v]),_.jsxs(_.Fragment,{children:[_.jsx(Qe.span,{id:l.textId,...s,ref:g}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?au.createPortal(s.children,o.valueNode):null]})});gO.displayName=Dh;var pO="SelectItemIndicator",mO=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return dO(pO,t).isSelected?_.jsx(Qe.span,{"aria-hidden":!0,...r,ref:e}):null});mO.displayName=pO;var J_="SelectScrollUpButton",yO=E.forwardRef((n,e)=>{const t=Fa(J_,n.__scopeSelect),r=qC(J_,n.__scopeSelect),[i,s]=E.useState(!1),o=kt(e,r.onScrollButtonChange);return rr(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?_.jsx(xO,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});yO.displayName=J_;var Q_="SelectScrollDownButton",vO=E.forwardRef((n,e)=>{const t=Fa(Q_,n.__scopeSelect),r=qC(Q_,n.__scopeSelect),[i,s]=E.useState(!1),o=kt(e,r.onScrollButtonChange);return rr(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;s(d)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?_.jsx(xO,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});vO.displayName=Q_;var xO=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=Fa("SelectScrollButton",t),o=E.useRef(null),a=wy(t),l=E.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),rr(()=>{var d;const u=a().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),_.jsx(Qe.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ke(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ke(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ke(i.onPointerLeave,()=>{l()})})}),I6="SelectSeparator",_O=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return _.jsx(Qe.div,{"aria-hidden":!0,...r,ref:e})});_O.displayName=I6;var ew="SelectArrow",M6=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Cy(t),s=La(ew,t),o=Fa(ew,t);return s.open&&o.position==="popper"?_.jsx(NM,{...i,...r,ref:e}):null});M6.displayName=ew;function wO(n){return n===""||n===void 0}var CO=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=E.useRef(null),s=kt(e,i),o=KA(t);return E.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(a,t),a.dispatchEvent(f)}},[o,t]),_.jsx(Gm,{asChild:!0,children:_.jsx("select",{...r,ref:s,defaultValue:t})})});CO.displayName="BubbleSelect";function SO(n){const e=zn(n),t=E.useRef(""),r=E.useRef(0),i=E.useCallback(o=>{const a=t.current+o;e(a),function l(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function bO(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=A6(n,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==t));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function A6(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var EO=qA,Sy=JA,TO=eO,kO=tO,RO=nO,by=rO,PO=aO,O6=cO,Ey=hO,Ty=fO,IO=gO,MO=mO,ky=yO,Ry=vO,Py=_O;function Vn(...n){return nC(Um(n))}const AO=EO,OO=O6,DO=TO,ZC=E.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(Sy,{ref:r,className:Vn("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,_.jsx(kO,{asChild:!0,children:_.jsx(Hm,{className:"h-4 w-4 opacity-50"})})]}));ZC.displayName=Sy.displayName;const LO=E.forwardRef(({className:n,...e},t)=>_.jsx(ky,{ref:t,className:Vn("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(xP,{className:"h-4 w-4"})}));LO.displayName=ky.displayName;const FO=E.forwardRef(({className:n,...e},t)=>_.jsx(Ry,{ref:t,className:Vn("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(Hm,{className:"h-4 w-4"})}));FO.displayName=Ry.displayName;const JC=E.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>_.jsx(RO,{children:_.jsxs(by,{ref:i,className:Vn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[_.jsx(LO,{}),_.jsx(PO,{className:Vn("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),_.jsx(FO,{})]})}));JC.displayName=by.displayName;const NO=E.forwardRef(({className:n,...e},t)=>_.jsx(Ey,{ref:t,className:Vn("px-2 py-1.5 text-sm font-semibold",n),...e}));NO.displayName=Ey.displayName;const Ir=E.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(Ty,{ref:r,className:Vn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-gray-200 focus:text-black data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[_.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(MO,{children:_.jsx(zd,{className:"h-4 w-4"})})}),_.jsx(IO,{children:e})]}));Ir.displayName=Ty.displayName;const D6=E.forwardRef(({className:n,...e},t)=>_.jsx(Py,{ref:t,className:Vn("-mx-1 my-1 h-px bg-muted",n),...e}));D6.displayName=Py.displayName;const L6=LW({description:Gg().nonempty("Descrição é obrigatória"),environment:Gg().nonempty("Ambiente é obrigatório"),location:Gg().nonempty("Local é obrigatório"),date:Gg().nonempty("Data é obrigatória")});function F6({readOnly:n=!1,onClose:e,onSave:t,fields:r={},onScreenshotStart:i,onScreenshotEnd:s,onViewAttachment:o}){var U,oe,F,K;const a=aW({resolver:hW(L6),values:r}),l=E.useRef(null),[u]=Kw(),[d,f]=E.useState(!1),{register:g,handleSubmit:m,formState:v}=a,x=a.watch("description"),w=(x==null?void 0:x.length)>3,{isSubmitting:C}=v,{attachments:b,registerScreenshotFunction:k,selectAttachment:R,addAttachment:P,currentAttachment:A,removeAttachment:O}=rC(),D=()=>{const I=l.current;I&&(I.style.height="auto",I.style.height=I.scrollHeight+"px")};D();const{toast:j}=f6(),[Q]=k,X=async()=>{const I=await Promise.resolve(Q()),N=`${Date.now()}-${Math.floor(Math.random()*1e3)}`;P({id:N,url:I,vectors:[]}),s&&s()},W=async I=>{var q,L;const N=(L=(q=I==null?void 0:I.target)==null?void 0:q.files)==null?void 0:L[0];if(N){const ee=u.get("evidenciaId"),be=await er(`/api/v2/evidencias/${ee}/signed-url`,"POST",{imagemNome:N.name});if(!be)return;const pe=be.evidenciaArquivoId,ce=new FileReader;ce.onload=Se=>{P({id:pe,url:Se.target.result,vectors:[]})},ce.readAsDataURL(N);const ve=new XMLHttpRequest;ve.upload.onprogress=function(Se){const Ce=Se.loaded/Se.total*100;console.log(`Progresso: ${Ce.toFixed(2)}%`)},ve.upload.onload=async function(){await er(`/api/v2/ai/evidencia-arquivo/${pe}/gerar`,"POST")},ve.open("PUT",be.signedUrl),ve.setRequestHeader("Content-Type",N.type),ve.send(N)}i&&i(),j({title:"Aponte a Câmera.",description:"Direcione a câmera para o local indicado para continuar.",duration:1/0,close:!1,action:_.jsx("button",{onClick:X,className:"underline text-sm",children:"Tirar foto"})})},G=async I=>{const N=u.get("evidenciaId"),q=(r==null?void 0:r.id)??N;await t({formData:{...I,attachments:b,id:q},type:r!=null&&r.id?"update":"create"})},V=async()=>{if(!w||d)return;const I=u.get("evidenciaId"),N=(r==null?void 0:r.id)??I,q=a.getValues("environment"),L=a.getValues("location");f(!0);const ee=await er(`/api/v2/ai/evidencia/${N}/melhorar-descricao`,"POST",{description:x,environment:q,location:L});f(!1),ee!=null&&ee.description&&(a.setValue("description",ee.description),D())},ne=n?"div":"form";return _.jsx(UG,{...a,children:_.jsxs(ne,{className:"space-y-4 border rounded-md p-2",onSubmit:m(G),children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-700",children:"Anexar imagens"}),_.jsxs("div",{className:"mt-1 w-full flex flex-row gap-2",children:[b.map(I=>_.jsx(YA,{url:I.url,onRemove:n?void 0:()=>O(I),onEdit:n?void 0:()=>R(I),...n&&{onView:()=>o(I)}},I.id)),!n&&_.jsx(a6,{onAddAttachment:W,screenshotFunction:Q})]})]}),_.jsxs("div",{children:[_.jsx(Ot,{required:!0,"data-error":!!((U=v.errors)!=null&&U.description),children:"Descrição"}),_.jsxs("div",{className:"flex items-end flex-col p-2 border rounded border-gray-300 transition focus-within:border-blue-500 focus-within:shadow-md",children:[_.jsx("textarea",{rows:1,...g("description"),ref:I=>{l.current=I,g("description").ref(I)},onInput:D,disabled:n,readOnly:n,className:"min-h-8 w-full overflow-hidden resize-none bg-transparent p-0 m-0 outline-none border-none"}),_.jsx("div",{"data-disabled":!w,onClick:V,className:zP({className:"data-[disabled=true]:cursor-not-allowed data-[disabled=true]:bg-gray-500 data-[disabled=true]:hover:bg-gray-500"}),children:d?"Carregando...":_.jsxs(_.Fragment,{children:[_.jsx($3,{className:"h-4 w-4"}),"Melhorar texto"]})})]})]}),_.jsxs("div",{children:[_.jsx(Ot,{required:!0,"data-error":!!((oe=v.errors)!=null&&oe.environment),children:"Ambiente"}),_.jsx(In,{type:"text",disabled:n,readOnly:n,...g("environment")})]}),_.jsxs("div",{children:[_.jsx(Ot,{required:!0,"data-error":!!((F=v.errors)!=null&&F.location),children:"Elemento Construtivo"}),_.jsxs(AO,{onValueChange:I=>{a.setValue("location",I)},defaultValue:a.getValues("location"),children:[_.jsx(ZC,{children:_.jsx(DO,{placeholder:"Selecione o elemento construtivo"})}),_.jsx(JC,{children:_.jsxs(OO,{children:[_.jsx(Ir,{value:"Parede",children:"Parede"}),_.jsx(Ir,{value:"Piso",children:"Piso"}),_.jsx(Ir,{value:"Teto",children:"Teto"}),_.jsx(Ir,{value:"Porta",children:"Porta"}),_.jsx(Ir,{value:"Janela",children:"Janela"}),_.jsx(Ir,{value:"Estrutura",children:"Estrutura"}),_.jsx(Ir,{value:"Instalação",children:"Instalação"}),_.jsx(Ir,{value:"Outro",children:"Outro"})]})})]})]}),_.jsxs("div",{children:[_.jsx(Ot,{required:!0,"data-error":!!((K=v.errors)!=null&&K.date),children:"Data"}),_.jsx(In,{type:"date",disabled:n,readOnly:n,...g("date")})]}),_.jsxs("div",{className:"flex flex-row gap-2 justify-between",children:[_.jsx("button",{onClick:e,disabled:C,type:"button",className:"w-full bg-gray-100 border border-gray-300 p-2 rounded text-gray-700",children:"Cancelar"}),!n&&_.jsx("button",{type:"submit",disabled:C,className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600 disabled:bg-gray-400",children:C?_.jsx(Sp,{className:"size-5 animate-spin"}):"Salvar"})]})]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function fa(n,e){return typeof n=="function"?n(e):n}function ri(n,e){return t=>{e.setState(r=>({...r,[n]:fa(t,r[n])}))}}function Iy(n){return n instanceof Function}function N6(n){return Array.isArray(n)&&n.every(e=>typeof e=="number")}function j6(n,e){const t=[],r=i=>{i.forEach(s=>{t.push(s);const o=e(s);o!=null&&o.length&&r(o)})};return r(n),t}function He(n,e,t){let r=[],i;return s=>{let o;t.key&&t.debug&&(o=Date.now());const a=n(s);if(!(a.length!==r.length||a.some((d,f)=>r[f]!==d)))return i;r=a;let u;if(t.key&&t.debug&&(u=Date.now()),i=e(...a),t==null||t.onChange==null||t.onChange(i),t.key&&t.debug&&t!=null&&t.debug()){const d=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-u)*100)/100,g=f/16,m=(v,x)=>{for(v=String(v);v.length<x;)v=" "+v;return v};console.info(`%c⏱ ${m(f,5)} /${m(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return i}}function Xe(n,e,t,r){return{debug:()=>{var i;return(i=n==null?void 0:n.debugAll)!=null?i:n[e]},key:!1,onChange:r}}function z6(n,e,t,r){const i=()=>{var o;return(o=s.getValue())!=null?o:n.options.renderFallbackValue},s={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:i,getContext:He(()=>[n,t,e,s],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Xe(n.options,"debugCells"))};return n._features.forEach(o=>{o.createCell==null||o.createCell(s,t,e,n)},{}),s}function V6(n,e,t,r){var i,s;const a={...n._getDefaultColumnDef(),...e},l=a.accessorKey;let u=(i=(s=a.id)!=null?s:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,d;if(a.accessorFn?d=a.accessorFn:l&&(l.includes(".")?d=g=>{let m=g;for(const x of l.split(".")){var v;m=(v=m)==null?void 0:v[x]}return m}:d=g=>g[a.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:d,parent:r,depth:t,columnDef:a,columns:[],getFlatColumns:He(()=>[!0],()=>{var g;return[f,...(g=f.columns)==null?void 0:g.flatMap(m=>m.getFlatColumns())]},Xe(n.options,"debugColumns")),getLeafColumns:He(()=>[n._getOrderColumnsFn()],g=>{var m;if((m=f.columns)!=null&&m.length){let v=f.columns.flatMap(x=>x.getLeafColumns());return g(v)}return[f]},Xe(n.options,"debugColumns"))};for(const g of n._features)g.createColumn==null||g.createColumn(f,n);return f}const Xn="debugHeaders";function Gk(n,e,t){var r;let s={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(s),o},getContext:()=>({table:n,header:s,column:e})};return n._features.forEach(o=>{o.createHeader==null||o.createHeader(s,n)}),s}const B6={createTable:n=>{n.getHeaderGroups=He(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,i)=>{var s,o;const a=(s=r==null?void 0:r.map(f=>t.find(g=>g.id===f)).filter(Boolean))!=null?s:[],l=(o=i==null?void 0:i.map(f=>t.find(g=>g.id===f)).filter(Boolean))!=null?o:[],u=t.filter(f=>!(r!=null&&r.includes(f.id))&&!(i!=null&&i.includes(f.id)));return Kg(e,[...a,...u,...l],n)},Xe(n.options,Xn)),n.getCenterHeaderGroups=He(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,i)=>(t=t.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),Kg(e,t,n,"center")),Xe(n.options,Xn)),n.getLeftHeaderGroups=He(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left],(e,t,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>t.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return Kg(e,s,n,"left")},Xe(n.options,Xn)),n.getRightHeaderGroups=He(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.right],(e,t,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>t.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return Kg(e,s,n,"right")},Xe(n.options,Xn)),n.getFooterGroups=He(()=>[n.getHeaderGroups()],e=>[...e].reverse(),Xe(n.options,Xn)),n.getLeftFooterGroups=He(()=>[n.getLeftHeaderGroups()],e=>[...e].reverse(),Xe(n.options,Xn)),n.getCenterFooterGroups=He(()=>[n.getCenterHeaderGroups()],e=>[...e].reverse(),Xe(n.options,Xn)),n.getRightFooterGroups=He(()=>[n.getRightHeaderGroups()],e=>[...e].reverse(),Xe(n.options,Xn)),n.getFlatHeaders=He(()=>[n.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),Xe(n.options,Xn)),n.getLeftFlatHeaders=He(()=>[n.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),Xe(n.options,Xn)),n.getCenterFlatHeaders=He(()=>[n.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),Xe(n.options,Xn)),n.getRightFlatHeaders=He(()=>[n.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),Xe(n.options,Xn)),n.getCenterLeafHeaders=He(()=>[n.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Xe(n.options,Xn)),n.getLeftLeafHeaders=He(()=>[n.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Xe(n.options,Xn)),n.getRightLeafHeaders=He(()=>[n.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Xe(n.options,Xn)),n.getLeafHeaders=He(()=>[n.getLeftHeaderGroups(),n.getCenterHeaderGroups(),n.getRightHeaderGroups()],(e,t,r)=>{var i,s,o,a,l,u;return[...(i=(s=e[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=t[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(d=>d.getLeafHeaders()).flat()},Xe(n.options,Xn))}};function Kg(n,e,t,r){var i,s;let o=0;const a=function(g,m){m===void 0&&(m=1),o=Math.max(o,m),g.filter(v=>v.getIsVisible()).forEach(v=>{var x;(x=v.columns)!=null&&x.length&&a(v.columns,m+1)},0)};a(n);let l=[];const u=(g,m)=>{const v={depth:m,id:[r,`${m}`].filter(Boolean).join("_"),headers:[]},x=[];g.forEach(w=>{const C=[...x].reverse()[0],b=w.column.depth===v.depth;let k,R=!1;if(b&&w.column.parent?k=w.column.parent:(k=w.column,R=!0),C&&(C==null?void 0:C.column)===k)C.subHeaders.push(w);else{const P=Gk(t,k,{id:[r,m,k.id,w==null?void 0:w.id].filter(Boolean).join("_"),isPlaceholder:R,placeholderId:R?`${x.filter(A=>A.column===k).length}`:void 0,depth:m,index:x.length});P.subHeaders.push(w),x.push(P)}v.headers.push(w),w.headerGroup=v}),l.push(v),m>0&&u(x,m-1)},d=e.map((g,m)=>Gk(t,g,{depth:o,index:m}));u(d,o-1),l.reverse();const f=g=>g.filter(v=>v.column.getIsVisible()).map(v=>{let x=0,w=0,C=[0];v.subHeaders&&v.subHeaders.length?(C=[],f(v.subHeaders).forEach(k=>{let{colSpan:R,rowSpan:P}=k;x+=R,C.push(P)})):x=1;const b=Math.min(...C);return w=w+b,v.colSpan=x,v.rowSpan=w,{colSpan:x,rowSpan:w}});return f((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const G6=(n,e,t,r,i,s,o)=>{let a={id:e,index:r,original:t,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=n.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=n.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:n.options.renderFallbackValue},subRows:[],getLeafRows:()=>j6(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?n.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const d=u.getParentRow();if(!d)break;l.push(d),u=d}return l.reverse()},getAllCells:He(()=>[n.getAllLeafColumns()],l=>l.map(u=>z6(n,a,u,u.id)),Xe(n.options,"debugRows")),_getAllCellsByColumnId:He(()=>[a.getAllCells()],l=>l.reduce((u,d)=>(u[d.column.id]=d,u),{}),Xe(n.options,"debugRows"))};for(let l=0;l<n._features.length;l++){const u=n._features[l];u==null||u.createRow==null||u.createRow(a,n)}return a},W6={createColumn:(n,e)=>{n._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,n.id),n.getFacetedRowModel=()=>n._getFacetedRowModel?n._getFacetedRowModel():e.getPreFilteredRowModel(),n._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,n.id),n.getFacetedUniqueValues=()=>n._getFacetedUniqueValues?n._getFacetedUniqueValues():new Map,n._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,n.id),n.getFacetedMinMaxValues=()=>{if(n._getFacetedMinMaxValues)return n._getFacetedMinMaxValues()}}},jO=(n,e,t)=>{var r,i;const s=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return!!(!((i=n.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(s))};jO.autoRemove=n=>Xi(n);const zO=(n,e,t)=>{var r;return!!(!((r=n.getValue(e))==null||(r=r.toString())==null)&&r.includes(t))};zO.autoRemove=n=>Xi(n);const VO=(n,e,t)=>{var r;return((r=n.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};VO.autoRemove=n=>Xi(n);const BO=(n,e,t)=>{var r;return(r=n.getValue(e))==null?void 0:r.includes(t)};BO.autoRemove=n=>Xi(n);const GO=(n,e,t)=>!t.some(r=>{var i;return!((i=n.getValue(e))!=null&&i.includes(r))});GO.autoRemove=n=>Xi(n)||!(n!=null&&n.length);const WO=(n,e,t)=>t.some(r=>{var i;return(i=n.getValue(e))==null?void 0:i.includes(r)});WO.autoRemove=n=>Xi(n)||!(n!=null&&n.length);const $O=(n,e,t)=>n.getValue(e)===t;$O.autoRemove=n=>Xi(n);const UO=(n,e,t)=>n.getValue(e)==t;UO.autoRemove=n=>Xi(n);const QC=(n,e,t)=>{let[r,i]=t;const s=n.getValue(e);return s>=r&&s<=i};QC.resolveFilterValue=n=>{let[e,t]=n,r=typeof e!="number"?parseFloat(e):e,i=typeof t!="number"?parseFloat(t):t,s=e===null||Number.isNaN(r)?-1/0:r,o=t===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};QC.autoRemove=n=>Xi(n)||Xi(n[0])&&Xi(n[1]);const Ks={includesString:jO,includesStringSensitive:zO,equalsString:VO,arrIncludes:BO,arrIncludesAll:GO,arrIncludesSome:WO,equals:$O,weakEquals:UO,inNumberRange:QC};function Xi(n){return n==null||n===""}const $6={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:n=>({columnFilters:[],...n}),getDefaultOptions:n=>({onColumnFiltersChange:ri("columnFilters",n),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(n,e)=>{n.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(n.id);return typeof r=="string"?Ks.includesString:typeof r=="number"?Ks.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Ks.equals:Array.isArray(r)?Ks.arrIncludes:Ks.weakEquals},n.getFilterFn=()=>{var t,r;return Iy(n.columnDef.filterFn)?n.columnDef.filterFn:n.columnDef.filterFn==="auto"?n.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[n.columnDef.filterFn])!=null?t:Ks[n.columnDef.filterFn]},n.getCanFilter=()=>{var t,r,i;return((t=n.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!n.accessorFn},n.getIsFiltered=()=>n.getFilterIndex()>-1,n.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===n.id))==null?void 0:t.value},n.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===n.id))!=null?t:-1},n.setFilterValue=t=>{e.setColumnFilters(r=>{const i=n.getFilterFn(),s=r==null?void 0:r.find(d=>d.id===n.id),o=fa(t,s?s.value:void 0);if(Wk(i,o,n)){var a;return(a=r==null?void 0:r.filter(d=>d.id!==n.id))!=null?a:[]}const l={id:n.id,value:o};if(s){var u;return(u=r==null?void 0:r.map(d=>d.id===n.id?l:d))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(n,e)=>{n.columnFilters={},n.columnFiltersMeta={}},createTable:n=>{n.setColumnFilters=e=>{const t=n.getAllLeafColumns(),r=i=>{var s;return(s=fa(e,i))==null?void 0:s.filter(o=>{const a=t.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(Wk(l,o.value,a))return!1}return!0})};n.options.onColumnFiltersChange==null||n.options.onColumnFiltersChange(r)},n.resetColumnFilters=e=>{var t,r;n.setColumnFilters(e?[]:(t=(r=n.initialState)==null?void 0:r.columnFilters)!=null?t:[])},n.getPreFilteredRowModel=()=>n.getCoreRowModel(),n.getFilteredRowModel=()=>(!n._getFilteredRowModel&&n.options.getFilteredRowModel&&(n._getFilteredRowModel=n.options.getFilteredRowModel(n)),n.options.manualFiltering||!n._getFilteredRowModel?n.getPreFilteredRowModel():n._getFilteredRowModel())}};function Wk(n,e,t){return(n&&n.autoRemove?n.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const U6=(n,e,t)=>t.reduce((r,i)=>{const s=i.getValue(n);return r+(typeof s=="number"?s:0)},0),H6=(n,e,t)=>{let r;return t.forEach(i=>{const s=i.getValue(n);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},X6=(n,e,t)=>{let r;return t.forEach(i=>{const s=i.getValue(n);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},Y6=(n,e,t)=>{let r,i;return t.forEach(s=>{const o=s.getValue(n);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},K6=(n,e)=>{let t=0,r=0;if(e.forEach(i=>{let s=i.getValue(n);s!=null&&(s=+s)>=s&&(++t,r+=s)}),t)return r/t},q6=(n,e)=>{if(!e.length)return;const t=e.map(s=>s.getValue(n));if(!N6(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),i=t.sort((s,o)=>s-o);return t.length%2!==0?i[r]:(i[r-1]+i[r])/2},Z6=(n,e)=>Array.from(new Set(e.map(t=>t.getValue(n))).values()),J6=(n,e)=>new Set(e.map(t=>t.getValue(n))).size,Q6=(n,e)=>e.length,xx={sum:U6,min:H6,max:X6,extent:Y6,mean:K6,median:q6,unique:Z6,uniqueCount:J6,count:Q6},eX={getDefaultColumnDef:()=>({aggregatedCell:n=>{var e,t;return(e=(t=n.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:n=>({grouping:[],...n}),getDefaultOptions:n=>({onGroupingChange:ri("grouping",n),groupedColumnMode:"reorder"}),createColumn:(n,e)=>{n.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(n.id)?t.filter(r=>r!==n.id):[...t??[],n.id])},n.getCanGroup=()=>{var t,r;return((t=n.columnDef.enableGrouping)!=null?t:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!n.accessorFn||!!n.columnDef.getGroupingValue)},n.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(n.id)},n.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(n.id)},n.getToggleGroupingHandler=()=>{const t=n.getCanGroup();return()=>{t&&n.toggleGrouping()}},n.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(n.id);if(typeof r=="number")return xx.sum;if(Object.prototype.toString.call(r)==="[object Date]")return xx.extent},n.getAggregationFn=()=>{var t,r;if(!n)throw new Error;return Iy(n.columnDef.aggregationFn)?n.columnDef.aggregationFn:n.columnDef.aggregationFn==="auto"?n.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[n.columnDef.aggregationFn])!=null?t:xx[n.columnDef.aggregationFn]}},createTable:n=>{n.setGrouping=e=>n.options.onGroupingChange==null?void 0:n.options.onGroupingChange(e),n.resetGrouping=e=>{var t,r;n.setGrouping(e?[]:(t=(r=n.initialState)==null?void 0:r.grouping)!=null?t:[])},n.getPreGroupedRowModel=()=>n.getFilteredRowModel(),n.getGroupedRowModel=()=>(!n._getGroupedRowModel&&n.options.getGroupedRowModel&&(n._getGroupedRowModel=n.options.getGroupedRowModel(n)),n.options.manualGrouping||!n._getGroupedRowModel?n.getPreGroupedRowModel():n._getGroupedRowModel())},createRow:(n,e)=>{n.getIsGrouped=()=>!!n.groupingColumnId,n.getGroupingValue=t=>{if(n._groupingValuesCache.hasOwnProperty(t))return n._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(n._groupingValuesCache[t]=r.columnDef.getGroupingValue(n.original),n._groupingValuesCache[t]):n.getValue(t)},n._groupingValuesCache={}},createCell:(n,e,t,r)=>{n.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,n.getIsPlaceholder=()=>!n.getIsGrouped()&&e.getIsGrouped(),n.getIsAggregated=()=>{var i;return!n.getIsGrouped()&&!n.getIsPlaceholder()&&!!((i=t.subRows)!=null&&i.length)}}};function tX(n,e,t){if(!(e!=null&&e.length)||!t)return n;const r=n.filter(s=>!e.includes(s.id));return t==="remove"?r:[...e.map(s=>n.find(o=>o.id===s)).filter(Boolean),...r]}const nX={getInitialState:n=>({columnOrder:[],...n}),getDefaultOptions:n=>({onColumnOrderChange:ri("columnOrder",n)}),createColumn:(n,e)=>{n.getIndex=He(t=>[Yh(e,t)],t=>t.findIndex(r=>r.id===n.id),Xe(e.options,"debugColumns")),n.getIsFirstColumn=t=>{var r;return((r=Yh(e,t)[0])==null?void 0:r.id)===n.id},n.getIsLastColumn=t=>{var r;const i=Yh(e,t);return((r=i[i.length-1])==null?void 0:r.id)===n.id}},createTable:n=>{n.setColumnOrder=e=>n.options.onColumnOrderChange==null?void 0:n.options.onColumnOrderChange(e),n.resetColumnOrder=e=>{var t;n.setColumnOrder(e?[]:(t=n.initialState.columnOrder)!=null?t:[])},n._getOrderColumnsFn=He(()=>[n.getState().columnOrder,n.getState().grouping,n.options.groupedColumnMode],(e,t,r)=>i=>{let s=[];if(!(e!=null&&e.length))s=i;else{const o=[...e],a=[...i];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(d=>d.id===l);u>-1&&s.push(a.splice(u,1)[0])}s=[...s,...a]}return tX(s,t,r)},Xe(n.options,"debugTable"))}},_x=()=>({left:[],right:[]}),rX={getInitialState:n=>({columnPinning:_x(),...n}),getDefaultOptions:n=>({onColumnPinningChange:ri("columnPinning",n)}),createColumn:(n,e)=>{n.pin=t=>{const r=n.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var s,o;if(t==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(t==="left"){var u,d;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((d=i==null?void 0:i.right)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(f=>!(r!=null&&r.includes(f))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f)))}})},n.getCanPin=()=>n.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?s:!0)}),n.getIsPinned=()=>{const t=n.getLeafColumns().map(a=>a.id),{left:r,right:i}=e.getState().columnPinning,s=t.some(a=>r==null?void 0:r.includes(a)),o=t.some(a=>i==null?void 0:i.includes(a));return s?"left":o?"right":!1},n.getPinnedIndex=()=>{var t,r;const i=n.getIsPinned();return i?(t=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(n.id))!=null?t:-1:0}},createRow:(n,e)=>{n.getCenterVisibleCells=He(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,i)=>{const s=[...r??[],...i??[]];return t.filter(o=>!s.includes(o.column.id))},Xe(e.options,"debugRows")),n.getLeftVisibleCells=He(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(s=>t.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),Xe(e.options,"debugRows")),n.getRightVisibleCells=He(()=>[n._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(s=>t.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),Xe(e.options,"debugRows"))},createTable:n=>{n.setColumnPinning=e=>n.options.onColumnPinningChange==null?void 0:n.options.onColumnPinningChange(e),n.resetColumnPinning=e=>{var t,r;return n.setColumnPinning(e?_x():(t=(r=n.initialState)==null?void 0:r.columnPinning)!=null?t:_x())},n.getIsSomeColumnsPinned=e=>{var t;const r=n.getState().columnPinning;if(!e){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((t=r[e])!=null&&t.length)},n.getLeftLeafColumns=He(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Xe(n.options,"debugColumns")),n.getRightLeafColumns=He(()=>[n.getAllLeafColumns(),n.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Xe(n.options,"debugColumns")),n.getCenterLeafColumns=He(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r)=>{const i=[...t??[],...r??[]];return e.filter(s=>!i.includes(s.id))},Xe(n.options,"debugColumns"))}},qg={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},wx=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),iX={getDefaultColumnDef:()=>qg,getInitialState:n=>({columnSizing:{},columnSizingInfo:wx(),...n}),getDefaultOptions:n=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ri("columnSizing",n),onColumnSizingInfoChange:ri("columnSizingInfo",n)}),createColumn:(n,e)=>{n.getSize=()=>{var t,r,i;const s=e.getState().columnSizing[n.id];return Math.min(Math.max((t=n.columnDef.minSize)!=null?t:qg.minSize,(r=s??n.columnDef.size)!=null?r:qg.size),(i=n.columnDef.maxSize)!=null?i:qg.maxSize)},n.getStart=He(t=>[t,Yh(e,t),e.getState().columnSizing],(t,r)=>r.slice(0,n.getIndex(t)).reduce((i,s)=>i+s.getSize(),0),Xe(e.options,"debugColumns")),n.getAfter=He(t=>[t,Yh(e,t),e.getState().columnSizing],(t,r)=>r.slice(n.getIndex(t)+1).reduce((i,s)=>i+s.getSize(),0),Xe(e.options,"debugColumns")),n.resetSize=()=>{e.setColumnSizing(t=>{let{[n.id]:r,...i}=t;return i})},n.getCanResize=()=>{var t,r;return((t=n.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},n.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===n.id},createHeader:(n,e)=>{n.getSize=()=>{let t=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;t+=(s=i.column.getSize())!=null?s:0}};return r(n),t},n.getStart=()=>{if(n.index>0){const t=n.headerGroup.headers[n.index-1];return t.getStart()+t.getSize()}return 0},n.getResizeHandler=t=>{const r=e.getColumn(n.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),Cx(s)&&s.touches&&s.touches.length>1))return;const o=n.getSize(),a=n?n.getLeafHeaders().map(C=>[C.column.id,C.column.getSize()]):[[r.id,r.getSize()]],l=Cx(s)?Math.round(s.touches[0].clientX):s.clientX,u={},d=(C,b)=>{typeof b=="number"&&(e.setColumnSizingInfo(k=>{var R,P;const A=e.options.columnResizeDirection==="rtl"?-1:1,O=(b-((R=k==null?void 0:k.startOffset)!=null?R:0))*A,D=Math.max(O/((P=k==null?void 0:k.startSize)!=null?P:0),-.999999);return k.columnSizingStart.forEach(j=>{let[Q,X]=j;u[Q]=Math.round(Math.max(X+X*D,0)*100)/100}),{...k,deltaOffset:O,deltaPercentage:D}}),(e.options.columnResizeMode==="onChange"||C==="end")&&e.setColumnSizing(k=>({...k,...u})))},f=C=>d("move",C),g=C=>{d("end",C),e.setColumnSizingInfo(b=>({...b,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=t||typeof document<"u"?document:null,v={moveHandler:C=>f(C.clientX),upHandler:C=>{m==null||m.removeEventListener("mousemove",v.moveHandler),m==null||m.removeEventListener("mouseup",v.upHandler),g(C.clientX)}},x={moveHandler:C=>(C.cancelable&&(C.preventDefault(),C.stopPropagation()),f(C.touches[0].clientX),!1),upHandler:C=>{var b;m==null||m.removeEventListener("touchmove",x.moveHandler),m==null||m.removeEventListener("touchend",x.upHandler),C.cancelable&&(C.preventDefault(),C.stopPropagation()),g((b=C.touches[0])==null?void 0:b.clientX)}},w=sX()?{passive:!1}:!1;Cx(s)?(m==null||m.addEventListener("touchmove",x.moveHandler,w),m==null||m.addEventListener("touchend",x.upHandler,w)):(m==null||m.addEventListener("mousemove",v.moveHandler,w),m==null||m.addEventListener("mouseup",v.upHandler,w)),e.setColumnSizingInfo(C=>({...C,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:n=>{n.setColumnSizing=e=>n.options.onColumnSizingChange==null?void 0:n.options.onColumnSizingChange(e),n.setColumnSizingInfo=e=>n.options.onColumnSizingInfoChange==null?void 0:n.options.onColumnSizingInfoChange(e),n.resetColumnSizing=e=>{var t;n.setColumnSizing(e?{}:(t=n.initialState.columnSizing)!=null?t:{})},n.resetHeaderSizeInfo=e=>{var t;n.setColumnSizingInfo(e?wx():(t=n.initialState.columnSizingInfo)!=null?t:wx())},n.getTotalSize=()=>{var e,t;return(e=(t=n.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getLeftTotalSize=()=>{var e,t;return(e=(t=n.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getCenterTotalSize=()=>{var e,t;return(e=(t=n.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getRightTotalSize=()=>{var e,t;return(e=(t=n.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let Zg=null;function sX(){if(typeof Zg=="boolean")return Zg;let n=!1;try{const e={get passive(){return n=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{n=!1}return Zg=n,Zg}function Cx(n){return n.type==="touchstart"}const oX={getInitialState:n=>({columnVisibility:{},...n}),getDefaultOptions:n=>({onColumnVisibilityChange:ri("columnVisibility",n)}),createColumn:(n,e)=>{n.toggleVisibility=t=>{n.getCanHide()&&e.setColumnVisibility(r=>({...r,[n.id]:t??!n.getIsVisible()}))},n.getIsVisible=()=>{var t,r;const i=n.columns;return(t=i.length?i.some(s=>s.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[n.id])!=null?t:!0},n.getCanHide=()=>{var t,r;return((t=n.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},n.getToggleVisibilityHandler=()=>t=>{n.toggleVisibility==null||n.toggleVisibility(t.target.checked)}},createRow:(n,e)=>{n._getAllVisibleCells=He(()=>[n.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),Xe(e.options,"debugRows")),n.getVisibleCells=He(()=>[n.getLeftVisibleCells(),n.getCenterVisibleCells(),n.getRightVisibleCells()],(t,r,i)=>[...t,...r,...i],Xe(e.options,"debugRows"))},createTable:n=>{const e=(t,r)=>He(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),Xe(n.options,"debugColumns"));n.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>n.getAllFlatColumns()),n.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>n.getAllLeafColumns()),n.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>n.getLeftLeafColumns()),n.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>n.getRightLeafColumns()),n.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>n.getCenterLeafColumns()),n.setColumnVisibility=t=>n.options.onColumnVisibilityChange==null?void 0:n.options.onColumnVisibilityChange(t),n.resetColumnVisibility=t=>{var r;n.setColumnVisibility(t?{}:(r=n.initialState.columnVisibility)!=null?r:{})},n.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!n.getIsAllColumnsVisible(),n.setColumnVisibility(n.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:t||!(s.getCanHide!=null&&s.getCanHide())}),{}))},n.getIsAllColumnsVisible=()=>!n.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),n.getIsSomeColumnsVisible=()=>n.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),n.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;n.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function Yh(n,e){return e?e==="center"?n.getCenterVisibleLeafColumns():e==="left"?n.getLeftVisibleLeafColumns():n.getRightVisibleLeafColumns():n.getVisibleLeafColumns()}const aX={createTable:n=>{n._getGlobalFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,"__global__"),n.getGlobalFacetedRowModel=()=>n.options.manualFiltering||!n._getGlobalFacetedRowModel?n.getPreFilteredRowModel():n._getGlobalFacetedRowModel(),n._getGlobalFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,"__global__"),n.getGlobalFacetedUniqueValues=()=>n._getGlobalFacetedUniqueValues?n._getGlobalFacetedUniqueValues():new Map,n._getGlobalFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,"__global__"),n.getGlobalFacetedMinMaxValues=()=>{if(n._getGlobalFacetedMinMaxValues)return n._getGlobalFacetedMinMaxValues()}}},lX={getInitialState:n=>({globalFilter:void 0,...n}),getDefaultOptions:n=>({onGlobalFilterChange:ri("globalFilter",n),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=n.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(n,e)=>{n.getCanGlobalFilter=()=>{var t,r,i,s;return((t=n.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((s=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(n))!=null?s:!0)&&!!n.accessorFn}},createTable:n=>{n.getGlobalAutoFilterFn=()=>Ks.includesString,n.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=n.options;return Iy(r)?r:r==="auto"?n.getGlobalAutoFilterFn():(e=(t=n.options.filterFns)==null?void 0:t[r])!=null?e:Ks[r]},n.setGlobalFilter=e=>{n.options.onGlobalFilterChange==null||n.options.onGlobalFilterChange(e)},n.resetGlobalFilter=e=>{n.setGlobalFilter(e?void 0:n.initialState.globalFilter)}}},cX={getInitialState:n=>({expanded:{},...n}),getDefaultOptions:n=>({onExpandedChange:ri("expanded",n),paginateExpandedRows:!0}),createTable:n=>{let e=!1,t=!1;n._autoResetExpanded=()=>{var r,i;if(!e){n._queue(()=>{e=!0});return}if((r=(i=n.options.autoResetAll)!=null?i:n.options.autoResetExpanded)!=null?r:!n.options.manualExpanding){if(t)return;t=!0,n._queue(()=>{n.resetExpanded(),t=!1})}},n.setExpanded=r=>n.options.onExpandedChange==null?void 0:n.options.onExpandedChange(r),n.toggleAllRowsExpanded=r=>{r??!n.getIsAllRowsExpanded()?n.setExpanded(!0):n.setExpanded({})},n.resetExpanded=r=>{var i,s;n.setExpanded(r?{}:(i=(s=n.initialState)==null?void 0:s.expanded)!=null?i:{})},n.getCanSomeRowsExpand=()=>n.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),n.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),n.toggleAllRowsExpanded()},n.getIsSomeRowsExpanded=()=>{const r=n.getState().expanded;return r===!0||Object.values(r).some(Boolean)},n.getIsAllRowsExpanded=()=>{const r=n.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||n.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},n.getExpandedDepth=()=>{let r=0;return(n.getState().expanded===!0?Object.keys(n.getRowModel().rowsById):Object.keys(n.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},n.getPreExpandedRowModel=()=>n.getSortedRowModel(),n.getExpandedRowModel=()=>(!n._getExpandedRowModel&&n.options.getExpandedRowModel&&(n._getExpandedRowModel=n.options.getExpandedRowModel(n)),n.options.manualExpanding||!n._getExpandedRowModel?n.getPreExpandedRowModel():n._getExpandedRowModel())},createRow:(n,e)=>{n.toggleExpanded=t=>{e.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[n.id]);let o={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,t=(i=t)!=null?i:!s,!s&&t)return{...o,[n.id]:!0};if(s&&!t){const{[n.id]:a,...l}=o;return l}return r})},n.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(n))!=null?t:r===!0||r!=null&&r[n.id])},n.getCanExpand=()=>{var t,r,i;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(n))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=n.subRows)!=null&&i.length)},n.getIsAllParentsExpanded=()=>{let t=!0,r=n;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},n.getToggleExpandedHandler=()=>{const t=n.getCanExpand();return()=>{t&&n.toggleExpanded()}}}},tw=0,nw=10,Sx=()=>({pageIndex:tw,pageSize:nw}),uX={getInitialState:n=>({...n,pagination:{...Sx(),...n==null?void 0:n.pagination}}),getDefaultOptions:n=>({onPaginationChange:ri("pagination",n)}),createTable:n=>{let e=!1,t=!1;n._autoResetPageIndex=()=>{var r,i;if(!e){n._queue(()=>{e=!0});return}if((r=(i=n.options.autoResetAll)!=null?i:n.options.autoResetPageIndex)!=null?r:!n.options.manualPagination){if(t)return;t=!0,n._queue(()=>{n.resetPageIndex(),t=!1})}},n.setPagination=r=>{const i=s=>fa(r,s);return n.options.onPaginationChange==null?void 0:n.options.onPaginationChange(i)},n.resetPagination=r=>{var i;n.setPagination(r?Sx():(i=n.initialState.pagination)!=null?i:Sx())},n.setPageIndex=r=>{n.setPagination(i=>{let s=fa(r,i.pageIndex);const o=typeof n.options.pageCount>"u"||n.options.pageCount===-1?Number.MAX_SAFE_INTEGER:n.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},n.resetPageIndex=r=>{var i,s;n.setPageIndex(r?tw:(i=(s=n.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:tw)},n.resetPageSize=r=>{var i,s;n.setPageSize(r?nw:(i=(s=n.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:nw)},n.setPageSize=r=>{n.setPagination(i=>{const s=Math.max(1,fa(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},n.setPageCount=r=>n.setPagination(i=>{var s;let o=fa(r,(s=n.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),n.getPageOptions=He(()=>[n.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},Xe(n.options,"debugTable")),n.getCanPreviousPage=()=>n.getState().pagination.pageIndex>0,n.getCanNextPage=()=>{const{pageIndex:r}=n.getState().pagination,i=n.getPageCount();return i===-1?!0:i===0?!1:r<i-1},n.previousPage=()=>n.setPageIndex(r=>r-1),n.nextPage=()=>n.setPageIndex(r=>r+1),n.firstPage=()=>n.setPageIndex(0),n.lastPage=()=>n.setPageIndex(n.getPageCount()-1),n.getPrePaginationRowModel=()=>n.getExpandedRowModel(),n.getPaginationRowModel=()=>(!n._getPaginationRowModel&&n.options.getPaginationRowModel&&(n._getPaginationRowModel=n.options.getPaginationRowModel(n)),n.options.manualPagination||!n._getPaginationRowModel?n.getPrePaginationRowModel():n._getPaginationRowModel()),n.getPageCount=()=>{var r;return(r=n.options.pageCount)!=null?r:Math.ceil(n.getRowCount()/n.getState().pagination.pageSize)},n.getRowCount=()=>{var r;return(r=n.options.rowCount)!=null?r:n.getPrePaginationRowModel().rows.length}}},bx=()=>({top:[],bottom:[]}),hX={getInitialState:n=>({rowPinning:bx(),...n}),getDefaultOptions:n=>({onRowPinningChange:ri("rowPinning",n)}),createRow:(n,e)=>{n.pin=(t,r,i)=>{const s=r?n.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?n.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,n.id,...s]);e.setRowPinning(l=>{var u,d;if(t==="bottom"){var f,g;return{top:((f=l==null?void 0:l.top)!=null?f:[]).filter(x=>!(a!=null&&a.has(x))),bottom:[...((g=l==null?void 0:l.bottom)!=null?g:[]).filter(x=>!(a!=null&&a.has(x))),...Array.from(a)]}}if(t==="top"){var m,v;return{top:[...((m=l==null?void 0:l.top)!=null?m:[]).filter(x=>!(a!=null&&a.has(x))),...Array.from(a)],bottom:((v=l==null?void 0:l.bottom)!=null?v:[]).filter(x=>!(a!=null&&a.has(x)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(x=>!(a!=null&&a.has(x))),bottom:((d=l==null?void 0:l.bottom)!=null?d:[]).filter(x=>!(a!=null&&a.has(x)))}})},n.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(n):(t=r??i)!=null?t:!0},n.getIsPinned=()=>{const t=[n.id],{top:r,bottom:i}=e.getState().rowPinning,s=t.some(a=>r==null?void 0:r.includes(a)),o=t.some(a=>i==null?void 0:i.includes(a));return s?"top":o?"bottom":!1},n.getPinnedIndex=()=>{var t,r;const i=n.getIsPinned();if(!i)return-1;const s=(t=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(o=>{let{id:a}=o;return a});return(r=s==null?void 0:s.indexOf(n.id))!=null?r:-1}},createTable:n=>{n.setRowPinning=e=>n.options.onRowPinningChange==null?void 0:n.options.onRowPinningChange(e),n.resetRowPinning=e=>{var t,r;return n.setRowPinning(e?bx():(t=(r=n.initialState)==null?void 0:r.rowPinning)!=null?t:bx())},n.getIsSomeRowsPinned=e=>{var t;const r=n.getState().rowPinning;if(!e){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((t=r[e])!=null&&t.length)},n._getPinnedRows=(e,t,r)=>{var i;return((i=n.options.keepPinnedRows)==null||i?(t??[]).map(o=>{const a=n.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(t??[]).map(o=>e.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},n.getTopRows=He(()=>[n.getRowModel().rows,n.getState().rowPinning.top],(e,t)=>n._getPinnedRows(e,t,"top"),Xe(n.options,"debugRows")),n.getBottomRows=He(()=>[n.getRowModel().rows,n.getState().rowPinning.bottom],(e,t)=>n._getPinnedRows(e,t,"bottom"),Xe(n.options,"debugRows")),n.getCenterRows=He(()=>[n.getRowModel().rows,n.getState().rowPinning.top,n.getState().rowPinning.bottom],(e,t,r)=>{const i=new Set([...t??[],...r??[]]);return e.filter(s=>!i.has(s.id))},Xe(n.options,"debugRows"))}},dX={getInitialState:n=>({rowSelection:{},...n}),getDefaultOptions:n=>({onRowSelectionChange:ri("rowSelection",n),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:n=>{n.setRowSelection=e=>n.options.onRowSelectionChange==null?void 0:n.options.onRowSelectionChange(e),n.resetRowSelection=e=>{var t;return n.setRowSelection(e?{}:(t=n.initialState.rowSelection)!=null?t:{})},n.toggleAllRowsSelected=e=>{n.setRowSelection(t=>{e=typeof e<"u"?e:!n.getIsAllRowsSelected();const r={...t},i=n.getPreGroupedRowModel().flatRows;return e?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},n.toggleAllPageRowsSelected=e=>n.setRowSelection(t=>{const r=typeof e<"u"?e:!n.getIsAllPageRowsSelected(),i={...t};return n.getRowModel().rows.forEach(s=>{rw(i,s.id,r,!0,n)}),i}),n.getPreSelectedRowModel=()=>n.getCoreRowModel(),n.getSelectedRowModel=He(()=>[n.getState().rowSelection,n.getCoreRowModel()],(e,t)=>Object.keys(e).length?Ex(n,t):{rows:[],flatRows:[],rowsById:{}},Xe(n.options,"debugTable")),n.getFilteredSelectedRowModel=He(()=>[n.getState().rowSelection,n.getFilteredRowModel()],(e,t)=>Object.keys(e).length?Ex(n,t):{rows:[],flatRows:[],rowsById:{}},Xe(n.options,"debugTable")),n.getGroupedSelectedRowModel=He(()=>[n.getState().rowSelection,n.getSortedRowModel()],(e,t)=>Object.keys(e).length?Ex(n,t):{rows:[],flatRows:[],rowsById:{}},Xe(n.options,"debugTable")),n.getIsAllRowsSelected=()=>{const e=n.getFilteredRowModel().flatRows,{rowSelection:t}=n.getState();let r=!!(e.length&&Object.keys(t).length);return r&&e.some(i=>i.getCanSelect()&&!t[i.id])&&(r=!1),r},n.getIsAllPageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:t}=n.getState();let r=!!e.length;return r&&e.some(i=>!t[i.id])&&(r=!1),r},n.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=n.getState().rowSelection)!=null?e:{}).length;return t>0&&t<n.getFilteredRowModel().flatRows.length},n.getIsSomePageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows;return n.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},n.getToggleAllRowsSelectedHandler=()=>e=>{n.toggleAllRowsSelected(e.target.checked)},n.getToggleAllPageRowsSelectedHandler=()=>e=>{n.toggleAllPageRowsSelected(e.target.checked)}},createRow:(n,e)=>{n.toggleSelected=(t,r)=>{const i=n.getIsSelected();e.setRowSelection(s=>{var o;if(t=typeof t<"u"?t:!i,n.getCanSelect()&&i===t)return s;const a={...s};return rw(a,n.id,t,(o=r==null?void 0:r.selectChildren)!=null?o:!0,e),a})},n.getIsSelected=()=>{const{rowSelection:t}=e.getState();return eS(n,t)},n.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return iw(n,t)==="some"},n.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return iw(n,t)==="all"},n.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(n):(t=e.options.enableRowSelection)!=null?t:!0},n.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(n):(t=e.options.enableSubRowSelection)!=null?t:!0},n.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(n):(t=e.options.enableMultiRowSelection)!=null?t:!0},n.getToggleSelectedHandler=()=>{const t=n.getCanSelect();return r=>{var i;t&&n.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},rw=(n,e,t,r,i)=>{var s;const o=i.getRow(e,!0);t?(o.getCanMultiSelect()||Object.keys(n).forEach(a=>delete n[a]),o.getCanSelect()&&(n[e]=!0)):delete n[e],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>rw(n,a.id,t,r,i))};function Ex(n,e){const t=n.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(l=>{var u;const d=eS(l,t);if(d&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:s(l.subRows)}),d)return l}).filter(Boolean)};return{rows:s(e.rows),flatRows:r,rowsById:i}}function eS(n,e){var t;return(t=e[n.id])!=null?t:!1}function iw(n,e,t){var r;if(!((r=n.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return n.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(eS(o,e)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=iw(o,e);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const sw=/([0-9]+)/gm,fX=(n,e,t)=>HO(ka(n.getValue(t)).toLowerCase(),ka(e.getValue(t)).toLowerCase()),gX=(n,e,t)=>HO(ka(n.getValue(t)),ka(e.getValue(t))),pX=(n,e,t)=>tS(ka(n.getValue(t)).toLowerCase(),ka(e.getValue(t)).toLowerCase()),mX=(n,e,t)=>tS(ka(n.getValue(t)),ka(e.getValue(t))),yX=(n,e,t)=>{const r=n.getValue(t),i=e.getValue(t);return r>i?1:r<i?-1:0},vX=(n,e,t)=>tS(n.getValue(t),e.getValue(t));function tS(n,e){return n===e?0:n>e?1:-1}function ka(n){return typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?"":String(n):typeof n=="string"?n:""}function HO(n,e){const t=n.split(sw).filter(Boolean),r=e.split(sw).filter(Boolean);for(;t.length&&r.length;){const i=t.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),l=[o,a].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return t.length-r.length}const vh={alphanumeric:fX,alphanumericCaseSensitive:gX,text:pX,textCaseSensitive:mX,datetime:yX,basic:vX},xX={getInitialState:n=>({sorting:[],...n}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:n=>({onSortingChange:ri("sorting",n),isMultiSortEvent:e=>e.shiftKey}),createColumn:(n,e)=>{n.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of t){const s=i==null?void 0:i.getValue(n.id);if(Object.prototype.toString.call(s)==="[object Date]")return vh.datetime;if(typeof s=="string"&&(r=!0,s.split(sw).length>1))return vh.alphanumeric}return r?vh.text:vh.basic},n.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(n.id))=="string"?"asc":"desc"},n.getSortingFn=()=>{var t,r;if(!n)throw new Error;return Iy(n.columnDef.sortingFn)?n.columnDef.sortingFn:n.columnDef.sortingFn==="auto"?n.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[n.columnDef.sortingFn])!=null?t:vh[n.columnDef.sortingFn]},n.toggleSorting=(t,r)=>{const i=n.getNextSortingOrder(),s=typeof t<"u"&&t!==null;e.setSorting(o=>{const a=o==null?void 0:o.find(m=>m.id===n.id),l=o==null?void 0:o.findIndex(m=>m.id===n.id);let u=[],d,f=s?t:i==="desc";if(o!=null&&o.length&&n.getCanMultiSort()&&r?a?d="toggle":d="add":o!=null&&o.length&&l!==o.length-1?d="replace":a?d="toggle":d="replace",d==="toggle"&&(s||i||(d="remove")),d==="add"){var g;u=[...o,{id:n.id,desc:f}],u.splice(0,u.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=o.map(m=>m.id===n.id?{...m,desc:f}:m):d==="remove"?u=o.filter(m=>m.id!==n.id):u=[{id:n.id,desc:f}];return u})},n.getFirstSortDir=()=>{var t,r;return((t=(r=n.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:n.getAutoSortDir()==="desc")?"desc":"asc"},n.getNextSortingOrder=t=>{var r,i;const s=n.getFirstSortDir(),o=n.getIsSorted();return o?o!==s&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(i=e.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},n.getCanSort=()=>{var t,r;return((t=n.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!n.accessorFn},n.getCanMultiSort=()=>{var t,r;return(t=(r=n.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!n.accessorFn},n.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(i=>i.id===n.id);return r?r.desc?"desc":"asc":!1},n.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===n.id))!=null?t:-1},n.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==n.id):[])},n.getToggleSortingHandler=()=>{const t=n.getCanSort();return r=>{t&&(r.persist==null||r.persist(),n.toggleSorting==null||n.toggleSorting(void 0,n.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:n=>{n.setSorting=e=>n.options.onSortingChange==null?void 0:n.options.onSortingChange(e),n.resetSorting=e=>{var t,r;n.setSorting(e?[]:(t=(r=n.initialState)==null?void 0:r.sorting)!=null?t:[])},n.getPreSortedRowModel=()=>n.getGroupedRowModel(),n.getSortedRowModel=()=>(!n._getSortedRowModel&&n.options.getSortedRowModel&&(n._getSortedRowModel=n.options.getSortedRowModel(n)),n.options.manualSorting||!n._getSortedRowModel?n.getPreSortedRowModel():n._getSortedRowModel())}},_X=[B6,oX,nX,rX,W6,$6,aX,lX,xX,eX,cX,uX,hX,dX,iX];function wX(n){var e,t;const r=[..._X,...(e=n._features)!=null?e:[]];let i={_features:r};const s=i._features.reduce((g,m)=>Object.assign(g,m.getDefaultOptions==null?void 0:m.getDefaultOptions(i)),{}),o=g=>i.options.mergeOptions?i.options.mergeOptions(s,g):{...s,...g};let l={...{},...(t=n.initialState)!=null?t:{}};i._features.forEach(g=>{var m;l=(m=g.getInitialState==null?void 0:g.getInitialState(l))!=null?m:l});const u=[];let d=!1;const f={_features:r,options:{...s,...n},initialState:l,_queue:g=>{u.push(g),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(m=>setTimeout(()=>{throw m})))},reset:()=>{i.setState(i.initialState)},setOptions:g=>{const m=fa(g,i.options);i.options=o(m)},getState:()=>i.options.state,setState:g=>{i.options.onStateChange==null||i.options.onStateChange(g)},_getRowId:(g,m,v)=>{var x;return(x=i.options.getRowId==null?void 0:i.options.getRowId(g,m,v))!=null?x:`${v?[v.id,m].join("."):m}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(g,m)=>{let v=(m?i.getPrePaginationRowModel():i.getRowModel()).rowsById[g];if(!v&&(v=i.getCoreRowModel().rowsById[g],!v))throw new Error;return v},_getDefaultColumnDef:He(()=>[i.options.defaultColumn],g=>{var m;return g=(m=g)!=null?m:{},{header:v=>{const x=v.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:v=>{var x,w;return(x=(w=v.renderValue())==null||w.toString==null?void 0:w.toString())!=null?x:null},...i._features.reduce((v,x)=>Object.assign(v,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...g}},Xe(n,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:He(()=>[i._getColumnDefs()],g=>{const m=function(v,x,w){return w===void 0&&(w=0),v.map(C=>{const b=V6(i,C,w,x),k=C;return b.columns=k.columns?m(k.columns,b,w+1):[],b})};return m(g)},Xe(n,"debugColumns")),getAllFlatColumns:He(()=>[i.getAllColumns()],g=>g.flatMap(m=>m.getFlatColumns()),Xe(n,"debugColumns")),_getAllFlatColumnsById:He(()=>[i.getAllFlatColumns()],g=>g.reduce((m,v)=>(m[v.id]=v,m),{}),Xe(n,"debugColumns")),getAllLeafColumns:He(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(g,m)=>{let v=g.flatMap(x=>x.getLeafColumns());return m(v)},Xe(n,"debugColumns")),getColumn:g=>i._getAllFlatColumnsById()[g]};Object.assign(i,f);for(let g=0;g<i._features.length;g++){const m=i._features[g];m==null||m.createTable==null||m.createTable(i)}return i}function CX(){return n=>He(()=>[n.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let u=0;u<i.length;u++){const d=G6(n,n._getRowId(i[u],u,o),i[u],u,s,void 0,o==null?void 0:o.id);if(t.flatRows.push(d),t.rowsById[d.id]=d,a.push(d),n.options.getSubRows){var l;d.originalSubRows=n.options.getSubRows(i[u],u),(l=d.originalSubRows)!=null&&l.length&&(d.subRows=r(d.originalSubRows,s+1,d))}}return a};return t.rows=r(e),t},Xe(n.options,"debugTable","getRowModel",()=>n._autoResetPageIndex()))}function SX(){return n=>He(()=>[n.getState().sorting,n.getPreSortedRowModel()],(e,t)=>{if(!t.rows.length||!(e!=null&&e.length))return t;const r=n.getState().sorting,i=[],s=r.filter(l=>{var u;return(u=n.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};s.forEach(l=>{const u=n.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(d=>({...d}));return u.sort((d,f)=>{for(let m=0;m<s.length;m+=1){var g;const v=s[m],x=o[v.id],w=x.sortUndefined,C=(g=v==null?void 0:v.desc)!=null?g:!1;let b=0;if(w){const k=d.getValue(v.id),R=f.getValue(v.id),P=k===void 0,A=R===void 0;if(P||A){if(w==="first")return P?-1:1;if(w==="last")return P?1:-1;b=P&&A?0:P?w:-w}}if(b===0&&(b=x.sortingFn(d,f,v.id)),b!==0)return C&&(b*=-1),x.invertSorting&&(b*=-1),b}return d.index-f.index}),u.forEach(d=>{var f;i.push(d),(f=d.subRows)!=null&&f.length&&(d.subRows=a(d.subRows))}),u};return{rows:a(t.rows),flatRows:i,rowsById:t.rowsById}},Xe(n.options,"debugTable","getSortedRowModel",()=>n._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function $k(n,e){return n?bX(n)?E.createElement(n,e):n:null}function bX(n){return EX(n)||typeof n=="function"||TX(n)}function EX(n){return typeof n=="function"&&(()=>{const e=Object.getPrototypeOf(n);return e.prototype&&e.prototype.isReactComponent})()}function TX(n){return typeof n=="object"&&typeof n.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(n.$$typeof.description)}function kX(n){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...n},[t]=E.useState(()=>({current:wX(e)})),[r,i]=E.useState(()=>t.current.initialState);return t.current.setOptions(s=>({...s,...n,state:{...r,...n.state},onStateChange:o=>{i(o),n.onStateChange==null||n.onStateChange(o)}})),t.current}const XO=E.forwardRef(({className:n,...e},t)=>_.jsx("div",{className:"relative w-full overflow-auto",children:_.jsx("table",{ref:t,className:ct("w-full caption-bottom text-sm",n),...e})}));XO.displayName="Table";const YO=E.forwardRef(({className:n,...e},t)=>_.jsx("thead",{ref:t,className:ct("[&_tr]:border-b",n),...e}));YO.displayName="TableHeader";const KO=E.forwardRef(({className:n,...e},t)=>_.jsx("tbody",{ref:t,className:ct("[&_tr:last-child]:border-0",n),...e}));KO.displayName="TableBody";const RX=E.forwardRef(({className:n,...e},t)=>_.jsx("tfoot",{ref:t,className:ct("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));RX.displayName="TableFooter";const Lp=E.forwardRef(({className:n,...e},t)=>_.jsx("tr",{ref:t,className:ct("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Lp.displayName="TableRow";const qO=E.forwardRef(({className:n,...e},t)=>_.jsx("th",{ref:t,className:ct("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e}));qO.displayName="TableHead";const ow=E.forwardRef(({className:n,...e},t)=>_.jsx("td",{ref:t,className:ct("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e}));ow.displayName="TableCell";const PX=E.forwardRef(({className:n,...e},t)=>_.jsx("caption",{ref:t,className:ct("mt-4 text-sm text-muted-foreground",n),...e}));PX.displayName="TableCaption";function ZO({columns:n,data:e,onSelect:t}){var o;const[r,i]=E.useState([]),s=kX({data:e,columns:n,getCoreRowModel:CX(),onSortingChange:i,getSortedRowModel:SX(),state:{sorting:r}});return _.jsx("div",{className:"rounded-md border",children:_.jsxs(XO,{children:[_.jsx(YO,{children:s.getHeaderGroups().map(a=>_.jsx(Lp,{children:a.headers.map(l=>_.jsx(qO,{children:l.isPlaceholder?null:$k(l.column.columnDef.header,l.getContext())},l.id))},a.id))}),_.jsx(KO,{children:(o=s.getRowModel().rows)!=null&&o.length?s.getRowModel().rows.map(a=>_.jsx(Lp,{"data-state":a.getIsSelected()&&"selected",onClick:()=>t(a.original),children:a.getVisibleCells().map(l=>_.jsx(ow,{children:$k(l.column.columnDef.cell,l.getContext())},l.id))},a.id)):_.jsx(Lp,{children:_.jsx(ow,{colSpan:n.length,className:"h-24 text-center",children:"Sem resultado."})})})]})})}const IX=[{accessorKey:"description",header:"Descrição"},{accessorKey:"environment",header:"Ambiente"},{accessorKey:"location",header:"Elemento Construtivo"},{accessorKey:"date",header:({column:n})=>_.jsxs(tn,{variant:"ghost",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Data",_.jsx(yP,{className:"ml-2 h-4 w-4"})]}),cell:({row:n})=>{const e=n.getValue("date");if(!e)return"-";const t=new Date(e);return new Intl.DateTimeFormat("pt-BR",{timeZone:"UTC",day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}}];function MX({formData:n,updateFormData:e}){const{id:t}=Eo(),r=bl(),[i,s]=Kw(),[o,a]=E.useState(n.evidencias??[]),[l,u]=E.useState(!1),{currentAttachment:d,updateAttachment:f,addAttachment:g,deselectAttachment:m}=rC(),[v,x]=E.useState(null);E.useEffect(()=>{const R=i.get("evidenciaId"),P=o.find(A=>A.id===R);P&&b(P)},[]);const w=async({formData:R,type:P})=>{var j;if(!await er(`/api/v2/evidencias/${R.id}`,"PATCH",{environment:R.environment,date:R.date,description:R.description,location:R.location,attachments:(j=R==null?void 0:R.attachments)==null?void 0:j.map(Q=>({id:Q.id,vectors:Q.vectors}))}))return;i.delete("evidenciaId"),i.delete("new"),s(i);const D={create:()=>[...o,{...R,id:R.id??`${Date.now()}-${Math.floor(Math.random()*1e3)}`}],update:()=>o.map(Q=>Q.id===R.id?R:Q)}[P]();a(D),e({evidencias:D}),u(!1)},C=async()=>{if(!!(i.get("new")??!1)){const P=i.get("evidenciaId");await er(`/api/v2/evidencias/${P}`,"DELETE")}i.delete("evidenciaId"),i.delete("new"),s(i),u(!1),x(null)},b=R=>{i.set("evidenciaId",R==null?void 0:R.id),s(i),g((R==null?void 0:R.attachments)??[]),u(!0),x(R)},k=async()=>{const R=!l;if(u(R),R===!1)return;const P=await er("/api/v2/evidencias","POST",{relatorioId:t});if(P!=null&&P.evidenciaId){const A=new URLSearchParams(location.search);A.set("evidenciaId",P.evidenciaId),A.set("new","true"),r(`${location.pathname}?${A.toString()}`,{replace:!0})}};return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("h2",{className:"text-xl font-medium",children:"Evidências"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Anexe ou descreva as evidências da vistoria."})]}),!l&&_.jsxs(tn,{onClick:k,variant:"outline",children:[_.jsx(nd,{className:"mr-2 h-4 w-4"}),"Adicionar Evidência"]}),l&&_.jsx("div",{className:(d==null?void 0:d.url)&&"hidden",children:_.jsx(F6,{onSave:w,onClose:C,fields:v})}),(d==null?void 0:d.url)&&_.jsx(qI,{imageUrl:d==null?void 0:d.url,onSave:f,vectors:d==null?void 0:d.vectors,onCancel:m}),_.jsx(ZO,{data:o,columns:IX,onSelect:b})]})}function AX(n,e){for(var t=n.split(","),r=t[0].match(/:(.*?);/)[1],i=atob(t[t.length-1]),s=i.length,o=new Uint8Array(s);s--;)o[s]=i.charCodeAt(s);const[,a]=r.split("/");return new File([o],`${e}.${a}`,{type:r})}class ts{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Jc={PROPERTYCHANGE:"propertychange"};class nS{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function OX(n,e,t){let r,i;t=t||lo;let s=0,o=n.length,a=!1;for(;s<o;)r=s+(o-s>>1),i=+t(n[r],e),i<0?s=r+1:(o=r,a=!i);return a?s:~s}function lo(n,e){return n>e?1:n<e?-1:0}function rS(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function DX(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Ci(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Na(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function LX(n,e,t){const r=e||lo;return n.every(function(i,s){if(s===0)return!0;const o=r(n[s-1],i);return!(o>0||o===0)})}function Ra(){return!0}function _u(){return!1}function Qc(){}function JO(n){let e=!1,t,r,i;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==i||!Na(s,r))&&(e=!0,i=this,r=s,t=n.apply(this,arguments)),t}}function FX(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function wu(n){for(const e in n)delete n[e]}function eu(n){let e;for(e in n)return!1;return!e}class My extends nS{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new ts(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let u=0,d=i.length;u<d;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let u=a[r];for(delete a[r];u--;)this.removeEventListener(r,Qc);delete o[r]}return l}disposeInternal(){this.listeners_&&wu(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Qc,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}const tt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function dt(n,e,t,r,i){if(r&&r!==n&&(t=t.bind(r)),i){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function _m(n,e,t,r){return dt(n,e,t,r,!0)}function Vt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),wu(n))}class Yd extends My{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(tt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=dt(this,e[s],t);return i}return dt(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=_m(this,e[s],t)}else r=_m(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)NX(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Yd.prototype.on;Yd.prototype.once;Yd.prototype.un;function NX(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Vt(n[e]);else Vt(n)}function wt(){throw new Error("Unimplemented abstract method.")}let jX=0;function ft(n){return n.ol_uid||(n.ol_uid=String(++jX))}class Uk extends ts{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Os extends Yd{constructor(e){super(),this.on,this.once,this.un,ft(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Uk(r,e,t)),r=Jc.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new Uk(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],eu(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const On={ADD:"add",REMOVE:"remove"},Hk={LENGTH:"length"};class Jg extends ts{constructor(e,t,r){super(e),this.element=t,this.index=r}}class $i extends Os{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Hk.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Jg(On.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Jg(On.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Jg(On.REMOVE,i,e)),this.dispatchEvent(new Jg(On.ADD,t,e))}updateLength_(){this.set(Hk.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Pt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function yt(n,e){if(!n)throw new Error(e)}function un(n,e,t){return Math.min(Math.max(n,e),t)}function zX(n,e,t,r,i,s){const o=i-t,a=s-r;if(o!==0||a!==0){const l=((n-t)*o+(e-r)*a)/(o*o+a*a);l>1?(t=i,r=s):l>0&&(t+=o*l,r+=a*l)}return co(n,e,t,r)}function co(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function VX(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(n[a][r]);l>s&&(s=l,i=a)}if(s===0)return null;const o=n[i];n[i]=n[r],n[r]=o;for(let a=r+1;a<e;a++){const l=-n[a][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[a][u]=0:n[a][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function dl(n){return n*Math.PI/180}function fl(n,e){const t=n%e;return t*e<0?t+e:t}function Jr(n,e,t){return n+t*(e-n)}function Kd(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Xk(n,e){return Math.round(Kd(n,e))}function Qg(n,e){return Math.floor(Kd(n,e))}function ep(n,e){return Math.ceil(Kd(n,e))}class QO extends Os{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Pt.OPACITY]=e.opacity!==void 0?e.opacity:1,yt(typeof t[Pt.OPACITY]=="number","Layer opacity must be a number"),t[Pt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Pt.Z_INDEX]=e.zIndex,t[Pt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Pt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Pt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Pt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=un(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return wt()}getLayerStatesArray(e){return wt()}getExtent(){return this.get(Pt.EXTENT)}getMaxResolution(){return this.get(Pt.MAX_RESOLUTION)}getMinResolution(){return this.get(Pt.MIN_RESOLUTION)}getMinZoom(){return this.get(Pt.MIN_ZOOM)}getMaxZoom(){return this.get(Pt.MAX_ZOOM)}getOpacity(){return this.get(Pt.OPACITY)}getSourceState(){return wt()}getVisible(){return this.get(Pt.VISIBLE)}getZIndex(){return this.get(Pt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Pt.EXTENT,e)}setMaxResolution(e){this.set(Pt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Pt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Pt.MAX_ZOOM,e)}setMinZoom(e){this.set(Pt.MIN_ZOOM,e)}setOpacity(e){yt(typeof e=="number","Layer opacity must be a number"),this.set(Pt.OPACITY,e)}setVisible(e){this.set(Pt.VISIBLE,e)}setZIndex(e){this.set(Pt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const xi={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Zn={ANIMATING:0,INTERACTING:1},Di={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},BX=42,iS=256,tu={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class eD{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||tu[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const qd=6378137,Rc=Math.PI*qd,GX=[-Rc,-Rc,Rc,Rc],WX=[-180,-85,180,85],tp=qd*Math.log(Math.tan(Math.PI/2));class cc extends eD{constructor(e){super({code:e,units:"m",extent:GX,global:!0,worldExtent:WX,getPointResolution:function(t,r){return t/Math.cosh(r[1]/qd)}})}}const Yk=[new cc("EPSG:3857"),new cc("EPSG:102100"),new cc("EPSG:102113"),new cc("EPSG:900913"),new cc("http://www.opengis.net/def/crs/EPSG/0/3857"),new cc("http://www.opengis.net/gml/srs/epsg.xml#3857")];function $X(n,e,t){const r=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let i=0;i<r;i+=t){e[i]=Rc*n[i]/180;let s=qd*Math.log(Math.tan(Math.PI*(+n[i+1]+90)/360));s>tp?s=tp:s<-tp&&(s=-tp),e[i+1]=s}return e}function UX(n,e,t){const r=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let i=0;i<r;i+=t)e[i]=180*n[i]/Rc,e[i+1]=360*Math.atan(Math.exp(n[i+1]/qd))/Math.PI-90;return e}const HX=6378137,Kk=[-180,-90,180,90],XX=Math.PI*HX/180;class tl extends eD{constructor(e,t){super({code:e,units:"degrees",extent:Kk,axisOrientation:t,global:!0,metersPerUnit:XX,worldExtent:Kk})}}const qk=[new tl("CRS:84"),new tl("EPSG:4326","neu"),new tl("urn:ogc:def:crs:OGC:1.3:CRS84"),new tl("urn:ogc:def:crs:OGC:2:84"),new tl("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new tl("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new tl("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let aw={};function YX(n){return aw[n]||aw[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function KX(n,e){aw[n]=e}let Vc={};function wm(n,e,t){const r=n.getCode(),i=e.getCode();r in Vc||(Vc[r]={}),Vc[r][i]=t}function qX(n,e){let t;return n in Vc&&e in Vc[n]&&(t=Vc[n][e]),t}const Mn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function lw(n){const e=ii();for(let t=0,r=n.length;t<r;++t)Kh(e,n[t]);return e}function md(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function tD(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Rl(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function nu(n,e){return sS(n,e[0],e[1])}function Pc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function sS(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function cw(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],o=e[0],a=e[1];let l=Mn.UNKNOWN;return o<t?l=l|Mn.LEFT:o>i&&(l=l|Mn.RIGHT),a<r?l=l|Mn.BELOW:a>s&&(l=l|Mn.ABOVE),l===Mn.UNKNOWN&&(l=Mn.INTERSECTING),l}function ii(){return[1/0,1/0,-1/0,-1/0]}function Co(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Zd(n){return Co(1/0,1/0,-1/0,-1/0,n)}function nD(n,e){const t=n[0],r=n[1];return Co(t,r,t,r,e)}function oS(n,e,t,r,i){const s=Zd(i);return iD(s,n,e,t,r)}function yd(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function rD(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Kh(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function iD(n,e,t,r,i){for(;t<r;t+=i)ZX(n,e[t],e[t+1]);return n}function ZX(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function aS(n,e){let t;return t=e(Ay(n)),t||(t=e(Oy(n)),t)||(t=e(Dy(n)),t)||(t=e(Pl(n)),t)?t:!1}function uw(n){let e=0;return Ly(n)||(e=Et(n)*Jn(n)),e}function Ay(n){return[n[0],n[1]]}function Oy(n){return[n[2],n[1]]}function Pa(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function JX(n,e){let t;if(e==="bottom-left")t=Ay(n);else if(e==="bottom-right")t=Oy(n);else if(e==="top-left")t=Pl(n);else if(e==="top-right")t=Dy(n);else throw new Error("Invalid corner");return t}function hw(n,e,t,r,i){const[s,o,a,l,u,d,f,g]=dw(n,e,t,r);return Co(Math.min(s,a,u,f),Math.min(o,l,d,g),Math.max(s,a,u,f),Math.max(o,l,d,g),i)}function dw(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,o=Math.cos(t),a=Math.sin(t),l=i*o,u=i*a,d=s*o,f=s*a,g=n[0],m=n[1];return[g-l+f,m-u-d,g-l-f,m-u+d,g+l-f,m+u+d,g+l+f,m+u-d,g-l+f,m-u-d]}function Jn(n){return n[3]-n[1]}function qh(n,e,t){const r=t||ii();return pr(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Zd(r),r}function Pl(n){return[n[0],n[3]]}function Dy(n){return[n[2],n[3]]}function Et(n){return n[2]-n[0]}function pr(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Ly(n){return n[2]<n[0]||n[3]<n[1]}function QX(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function eY(n,e,t){let r=!1;const i=cw(n,e),s=cw(n,t);if(i===Mn.INTERSECTING||s===Mn.INTERSECTING)r=!0;else{const o=n[0],a=n[1],l=n[2],u=n[3],d=e[0],f=e[1],g=t[0],m=t[1],v=(m-f)/(g-d);let x,w;s&Mn.ABOVE&&!(i&Mn.ABOVE)&&(x=g-(m-u)/v,r=x>=o&&x<=l),!r&&s&Mn.RIGHT&&!(i&Mn.RIGHT)&&(w=m-(g-l)*v,r=w>=a&&w<=u),!r&&s&Mn.BELOW&&!(i&Mn.BELOW)&&(x=g-(m-a)/v,r=x>=o&&x<=l),!r&&s&Mn.LEFT&&!(i&Mn.LEFT)&&(w=m-(g-o)*v,r=w>=a&&w<=u)}return r}function sD(n,e){const t=e.getExtent(),r=Pa(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Et(t),o=Math.floor((r[0]-t[0])/i)*i;n[0]-=o,n[2]-=o}return n}function oD(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];sD(n,e);const i=Et(r);if(Et(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function aD(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),o=parseInt(r[i]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function tY(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function nY(n){return function(e){return sY(e,n)}}function rY(n,e,t){return n?e.replace("{x}",n[0].toFixed(t)).replace("{y}",n[1].toFixed(t)):""}function Cm(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function lS(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function iY(n,e){return n[0]*=e,n[1]*=e,n}function lD(n,e){const t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r}function cD(n,e){return Math.sqrt(lD(n,e))}function sY(n,e){return rY(n,"{x}, {y}",e)}function cS(n,e){if(e.canWrapX()){const t=Et(e.getExtent()),r=oY(n,e,t);r&&(n[0]-=r*t)}return n}function oY(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Et(r),i=Math.floor((n[0]-r[0])/t)),i}const uS=63710088e-1;function fw(n,e,t){t=t||uS;const r=dl(n[1]),i=dl(e[1]),s=(i-r)/2,o=dl(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Tx(n,e){let t=0;for(let r=0,i=n.length;r<i-1;++r)t+=fw(n[r],n[r+1],e);return t}function uD(n,e){e=e||{};const t=e.radius||uS,r=e.projection||"EPSG:3857",i=n.getType();i!=="GeometryCollection"&&(n=n.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,u,d,f;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=n.getCoordinates(),s=Tx(o,t);break}case"MultiLineString":case"Polygon":{for(o=n.getCoordinates(),l=0,u=o.length;l<u;++l)s+=Tx(o[l],t);break}case"MultiPolygon":{for(o=n.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],d=0,f=a.length;d<f;++d)s+=Tx(a[d],t);break}case"GeometryCollection":{const g=n.getGeometries();for(l=0,u=g.length;l<u;++l)s+=uD(g[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}function np(n,e){let t=0;const r=n.length;let i=n[r-1][0],s=n[r-1][1];for(let o=0;o<r;o++){const a=n[o][0],l=n[o][1];t+=dl(a-i)*(2+Math.sin(dl(s))+Math.sin(dl(l))),i=a,s=l}return t*e*e/2}function hD(n,e){e=e||{};const t=e.radius||uS,r=e.projection||"EPSG:3857",i=n.getType();i!=="GeometryCollection"&&(n=n.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,u,d,f;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=n.getCoordinates(),s=Math.abs(np(o[0],t)),l=1,u=o.length;l<u;++l)s-=Math.abs(np(o[l],t));break}case"MultiPolygon":{for(o=n.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],s+=Math.abs(np(a[0],t)),d=1,f=a.length;d<f;++d)s-=Math.abs(np(a[d],t));break}case"GeometryCollection":{const g=n.getGeometries();for(l=0,u=g.length;l<u;++l)s+=hD(g[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}function dD(...n){console.warn(...n)}let gw=!0;function aY(n){gw=!1}function hS(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function dS(n,e){if(e!==void 0&&n!==e){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];n=e}return n}function lY(n){KX(n.getCode(),n),wm(n,n,hS)}function cY(n){n.forEach(lY)}function zr(n){return typeof n=="string"?YX(n):n||null}function Sm(n,e,t,r){n=zr(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const o=n.getMetersPerUnit();o&&(i=i*o/tu[r])}}else{const o=n.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const a=Fy(n,zr("EPSG:4326"));if(a===dS&&o!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const d=fw(u.slice(0,2),u.slice(2,4)),f=fw(u.slice(4,6),u.slice(6,8));i=(d+f)/2}const l=r?tu[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function Zk(n){cY(n),n.forEach(function(e){n.forEach(function(t){e!==t&&wm(e,t,hS)})})}function uY(n,e,t,r){n.forEach(function(i){e.forEach(function(s){wm(i,s,t),wm(s,i,r)})})}function fS(n,e){return n?typeof n=="string"?zr(n):n:zr(e)}function _c(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Fy(n,e)===hS)&&t}function Fy(n,e){const t=n.getCode(),r=e.getCode();let i=qX(t,r);return i||(i=dS),i}function bm(n,e){const t=zr(n),r=zr(e);return Fy(t,r)}function fD(n,e,t){return bm(e,t)(n,void 0,n.length)}function pw(n,e){return n}function Ni(n,e){return gw&&!Cm(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(gw=!1,dD("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function gD(n,e){return n}function ll(n,e){return n}function hY(){Zk(Yk),Zk(qk),uY(qk,Yk,$X,UX)}hY();function Jk(n,e,t){return function(r,i,s,o,a){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,d=a?a[0]:0,f=a?a[1]:0;let g=n[0]+l/2+d,m=n[2]-l/2+d,v=n[1]+u/2+f,x=n[3]-u/2+f;g>m&&(g=(m+g)/2,m=g),v>x&&(v=(x+v)/2,x=v);let w=un(r[0],g,m),C=un(r[1],v,x);if(o&&t&&i){const b=30*i;w+=-b*Math.log(1+Math.max(0,g-r[0])/b)+b*Math.log(1+Math.max(0,r[0]-m)/b),C+=-b*Math.log(1+Math.max(0,v-r[1])/b)+b*Math.log(1+Math.max(0,r[1]-x)/b)}return[w,C]}}function dY(n){return n}function gS(n,e,t,r){const i=Et(e)/t[0],s=Jn(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function pS(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),un(r,t/2,e*2)}function fY(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,o,a){if(i!==void 0){const l=n[0],u=n[n.length-1],d=t?gS(l,t,o,r):l;if(a)return e?pS(i,d,u):un(i,u,d);const f=Math.min(d,i),g=Math.floor(rS(n,f,s));return n[g]>d&&g<n.length-1?n[g+1]:n[g]}}}function gY(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const d=i?gS(e,i,l,s):e;if(u)return r?pS(o,d,t):un(o,t,d);const f=1e-9,g=Math.ceil(Math.log(e/d)/Math.log(n)-f),m=-a*(.5-f)+.5,v=Math.min(d,o),x=Math.floor(Math.log(e/v)/Math.log(n)+m),w=Math.max(g,x),C=e/Math.pow(n,w);return un(C,t,d)}}}function Qk(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const u=r?gS(n,r,a,i):n;return!t||!l?un(s,e,u):pS(s,u,e)}}}function mS(n){if(n!==void 0)return 0}function eR(n){if(n!==void 0)return n}function pY(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function mY(n){const e=dl(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function pD(n){return Math.pow(n,3)}function Cu(n){return 1-pD(1-n)}function yY(n){return 3*n*n-2*n*n*n}function vY(n){return n}new Array(6);function Yi(){return[1,0,0,1,0,0]}function xY(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Nn(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function So(n,e,t,r,i,s,o,a){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=o*r*u-a*r*l+e,n[5]=o*i*l+a*i*u+t,n}function mD(n,e){const t=_Y(e);yt(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-o*a)/t,n[5]=-(r*l-i*a)/t,n}function _Y(n){return n[0]*n[3]-n[1]*n[2]}const tR=[1e6,1e6,1e6,1e6,2,2];function wY(n){return"matrix("+n.map((t,r)=>Math.round(t*tR[r])/tR[r]).join(", ")+")"}function va(n,e,t,r,i,s){s=s||[];let o=0;for(let a=e;a<t;a+=r){const l=n[a],u=n[a+1];s[o++]=i[0]*l+i[2]*u+i[4],s[o++]=i[1]*l+i[3]*u+i[5]}return s&&s.length!=o&&(s.length=o),s}function yS(n,e,t,r,i,s,o){o=o||[];const a=Math.cos(i),l=Math.sin(i),u=s[0],d=s[1];let f=0;for(let g=e;g<t;g+=r){const m=n[g]-u,v=n[g+1]-d;o[f++]=u+m*a-v*l,o[f++]=d+m*l+v*a;for(let x=g+2;x<g+r;++x)o[f++]=n[x]}return o&&o.length!=f&&(o.length=f),o}function CY(n,e,t,r,i,s,o,a){a=a||[];const l=o[0],u=o[1];let d=0;for(let f=e;f<t;f+=r){const g=n[f]-l,m=n[f+1]-u;a[d++]=l+i*g,a[d++]=u+s*m;for(let v=f+2;v<f+r;++v)a[d++]=n[v]}return a&&a.length!=d&&(a.length=d),a}function SY(n,e,t,r,i,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=r){o[a++]=n[l]+i,o[a++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)o[a++]=n[u]}return o&&o.length!=a&&(o.length=a),o}const nR=Yi();class yD extends Os{constructor(){super(),this.extent_=ii(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=JO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return wt()}closestPointXY(e,t,r,i){return wt()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return wt()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Zd(t),this.extentRevision_=this.getRevision()}return QX(this.extent_,e)}rotate(e,t){wt()}scale(e,t,r){wt()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return wt()}getType(){return wt()}applyTransform(e){wt()}intersectsExtent(e){return wt()}translate(e,t){wt()}transform(e,t){const r=zr(e),i=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),u=r.getWorldExtent(),d=Jn(u)/Jn(l);return So(nR,u[0],u[3],d,-d,0,0,0),va(s,0,s.length,a,nR,o),bm(r,t)(s,o,a)}:bm(r,t);return this.applyTransform(i),this}}class ja extends yD{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return oS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return wt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Em(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){wt()}setLayout(e,t,r){let i;if(e)i=Em(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=bY(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();yS(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Pa(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();CY(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();SY(r,0,r.length,i,e,t,r),this.changed()}}}function bY(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Em(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function EY(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return va(r,0,r.length,i,e,t)}function rR(n,e,t,r,i,s,o){const a=n[e],l=n[e+1],u=n[t]-a,d=n[t+1]-l;let f;if(u===0&&d===0)f=e;else{const g=((i-a)*u+(s-l)*d)/(u*u+d*d);if(g>1)f=t;else if(g>0){for(let m=0;m<r;++m)o[m]=Jr(n[e+m],n[t+m],g);o.length=r;return}else f=e}for(let g=0;g<r;++g)o[g]=n[f+g];o.length=r}function vS(n,e,t,r,i){let s=n[e],o=n[e+1];for(e+=r;e<t;e+=r){const a=n[e],l=n[e+1],u=co(s,o,a,l);u>i&&(i=u),s=a,o=l}return i}function xS(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];i=vS(n,e,a,r,i),e=a}return i}function TY(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];i=xS(n,e,a,r,i),e=a[a.length-1]}return i}function _S(n,e,t,r,i,s,o,a,l,u,d){if(e==t)return u;let f,g;if(i===0){if(g=co(o,a,n[e],n[e+1]),g<u){for(f=0;f<r;++f)l[f]=n[e+f];return l.length=r,g}return u}d=d||[NaN,NaN];let m=e+r;for(;m<t;)if(rR(n,m-r,m,r,o,a,d),g=co(o,a,d[0],d[1]),g<u){for(u=g,f=0;f<r;++f)l[f]=d[f];l.length=r,m+=r}else m+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(rR(n,t-r,e,r,o,a,d),g=co(o,a,d[0],d[1]),g<u)){for(u=g,f=0;f<r;++f)l[f]=d[f];l.length=r}return u}function wS(n,e,t,r,i,s,o,a,l,u,d){d=d||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const m=t[f];u=_S(n,e,m,r,i,s,o,a,l,u,d),e=m}return u}function kY(n,e,t,r,i,s,o,a,l,u,d){d=d||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const m=t[f];u=wS(n,e,m,r,i,s,o,a,l,u,d),e=m[m.length-1]}return u}function vD(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Ny(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const o=t[i];for(let a=0;a<r;++a)n[e++]=o[a]}return e}function CS(n,e,t,r,i){i=i||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Ny(n,e,t[o],r);i[s++]=l,e=l}return i.length=s,i}function RY(n,e,t,r,i){i=i||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=CS(n,e,t[o],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function jy(n,e,t,r,i,s,o){const a=(t-e)/r;if(a<3){for(;e<t;e+=r)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-r];let d=0;for(;u.length>0;){const f=u.pop(),g=u.pop();let m=0;const v=n[g],x=n[g+1],w=n[f],C=n[f+1];for(let b=g+r;b<f;b+=r){const k=n[b],R=n[b+1],P=zX(k,R,v,x,w,C);P>m&&(d=b,m=P)}m>i&&(l[(d-e)/r]=1,g+r<d&&u.push(g,d),d+r<f&&u.push(d,f))}for(let f=0;f<a;++f)l[f]&&(s[o++]=n[e+f*r],s[o++]=n[e+f*r+1]);return o}function xD(n,e,t,r,i,s,o,a){for(let l=0,u=t.length;l<u;++l){const d=t[l];o=jy(n,e,d,r,i,s,o),a.push(o),e=d}return o}function rl(n,e){return e*Math.round(n/e)}function PY(n,e,t,r,i,s,o){if(e==t)return o;let a=rl(n[e],i),l=rl(n[e+1],i);e+=r,s[o++]=a,s[o++]=l;let u,d;do if(u=rl(n[e],i),d=rl(n[e+1],i),e+=r,e==t)return s[o++]=u,s[o++]=d,o;while(u==a&&d==l);for(;e<t;){const f=rl(n[e],i),g=rl(n[e+1],i);if(e+=r,f==u&&g==d)continue;const m=u-a,v=d-l,x=f-a,w=g-l;if(m*w==v*x&&(m<0&&x<m||m==x||m>0&&x>m)&&(v<0&&w<v||v==w||v>0&&w>v)){u=f,d=g;continue}s[o++]=u,s[o++]=d,a=u,l=d,u=f,d=g}return s[o++]=u,s[o++]=d,o}function SS(n,e,t,r,i,s,o,a){for(let l=0,u=t.length;l<u;++l){const d=t[l];o=PY(n,e,d,r,i,s,o),a.push(o),e=d}return o}function IY(n,e,t,r,i,s,o,a){for(let l=0,u=t.length;l<u;++l){const d=t[l],f=[];o=SS(n,e,d,r,i,s,o,f),a.push(f),e=d[d.length-1]}return o}function ga(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let o=e;o<t;o+=r)i[s++]=n.slice(o,o+r);return i.length=s,i}function vd(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];i[s++]=ga(n,e,l,r,i[s]),e=l}return i.length=s,i}function mw(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];i[s++]=l.length===1&&l[0]===e?[]:vd(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function _D(n,e,t,r){let i=0,s=n[t-r],o=n[t-r+1];for(;e<t;e+=r){const a=n[e],l=n[e+1];i+=o*a-s*l,s=a,o=l}return i/2}function wD(n,e,t,r){let i=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];i+=_D(n,e,a,r),e=a}return i}function MY(n,e,t,r){let i=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];i+=wD(n,e,a,r),e=a[a.length-1]}return i}class xd extends ja{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new xd(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Rl(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_S(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return _D(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=jy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new xd(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ny(this.flatCoordinates,0,e,this.stride),this.changed()}}class xa extends ja{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new xa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,o=co(e,t,s[0],s[1]);if(o<i){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return nD(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return sS(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vD(this.flatCoordinates,0,e,this.stride),this.changed()}}function AY(n,e,t,r,i){return!aS(i,function(o){return!cl(n,e,t,r,o[0],o[1])})}function cl(n,e,t,r,i,s){let o=0,a=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],d=n[e+1];l<=s?d>s&&(u-a)*(s-l)-(i-a)*(d-l)>0&&o++:d<=s&&(u-a)*(s-l)-(i-a)*(d-l)<0&&o--,a=u,l=d}return o!==0}function bS(n,e,t,r,i,s){if(t.length===0||!cl(n,e,t[0],r,i,s))return!1;for(let o=1,a=t.length;o<a;++o)if(cl(n,t[o-1],t[o],r,i,s))return!1;return!0}function OY(n,e,t,r,i,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(bS(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function ES(n,e,t,r,i,s,o){let a,l,u,d,f,g,m;const v=i[s+1],x=[];for(let b=0,k=t.length;b<k;++b){const R=t[b];for(d=n[R-r],g=n[R-r+1],a=e;a<R;a+=r)f=n[a],m=n[a+1],(v<=g&&m<=v||g<=v&&v<=m)&&(u=(v-g)/(m-g)*(f-d)+d,x.push(u)),d=f,g=m}let w=NaN,C=-1/0;for(x.sort(lo),d=x[0],a=1,l=x.length;a<l;++a){f=x[a];const b=Math.abs(f-d);b>C&&(u=(d+f)/2,bS(n,e,t,r,u,v)&&(w=u,C=b)),d=f}return isNaN(w)&&(w=i[s]),o?(o.push(w,v,C),o):[w,v,C]}function CD(n,e,t,r,i){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=ES(n,e,l,r,i,2*o,s),e=l[l.length-1]}return s}function SD(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function zy(n,e,t,r,i){const s=iD(ii(),n,e,t,r);return pr(i,s)?Pc(i,s)||s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:SD(n,e,t,r,function(o,a){return eY(i,o,a)}):!1}function DY(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){if(zy(n,e,t[s],r,i))return!0;e=t[s]}return!1}function bD(n,e,t,r,i){return!!(zy(n,e,t,r,i)||cl(n,e,t,r,i[0],i[1])||cl(n,e,t,r,i[0],i[3])||cl(n,e,t,r,i[2],i[1])||cl(n,e,t,r,i[2],i[3]))}function ED(n,e,t,r,i){if(!bD(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(AY(n,t[s-1],t[s],r,i)&&!zy(n,t[s-1],t[s],r,i))return!1;return!0}function LY(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(ED(n,e,a,r,i))return!0;e=a[a.length-1]}return!1}function FY(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function TS(n,e,t,r){let i=0,s=n[t-r],o=n[t-r+1];for(;e<t;e+=r){const a=n[e],l=n[e+1];i+=(a-s)*(l+o),s=a,o=l}return i===0?void 0:i>0}function TD(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=TS(n,e,a,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function NY(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!TD(n,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function yw(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=TS(n,e,a,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&FY(n,e,a,r),e=a}return e}function iR(n,e,t,r,i){for(let s=0,o=t.length;s<o;++s)e=yw(n,e,t[s],r,i);return e}function jY(n,e){const t=[];let r=0,i=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=TS(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=o+1,r=l}return t}class bo extends ja{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Ci(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new bo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Rl(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xS(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wS(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return bS(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return wD(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),yw(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,vd(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Pa(this.getExtent());this.flatInteriorPoint_=ES(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new xa(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new xd(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=new xd(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;TD(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=yw(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=SS(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new bo(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return ED(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=CS(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function sR(n){if(Ly(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new bo(s,"XY",[s.length])}const kx=0;class gs extends Os{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=fS(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&aY(),e.center&&(e.center=Ni(e.center,this.projection_)),e.extent&&(e.extent=ll(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Di)delete t[a];this.setProperties(t,!0);const r=VY(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=zY(e),s=r.constraint,o=BY(e);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-t[3]+t[1]-i[1]),a=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Ni(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Ni(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const d=arguments[i];d.center&&this.setCenterInternal(d.center),d.zoom!==void 0?this.setZoom(d.zoom):d.resolution&&this.setResolution(d.resolution),d.rotation!==void 0&&this.setRotation(d.rotation)}if(i===t){r&&rp(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const d=arguments[i],f={start:s,complete:!1,anchor:d.anchor,duration:d.duration!==void 0?d.duration:1e3,easing:d.easing||yY,callback:r};if(d.center&&(f.sourceCenter=o,f.targetCenter=d.center.slice(),o=f.targetCenter),d.zoom!==void 0?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(d.zoom),a=f.targetResolution):d.resolution&&(f.sourceResolution=a,f.targetResolution=d.resolution,a=f.targetResolution),d.rotation!==void 0){f.sourceRotation=l;const g=fl(d.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+g,l=f.targetRotation}GY(f)?f.complete=!0:s+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(Zn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Zn.ANIMATING]>0}getInteracting(){return this.hints_[Zn.INTERACTING]>0}cancelAnimations(){this.setHint(Zn.ANIMATING,-this.hints_[Zn.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&rp(i[0].callback,!1),!e)for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l.complete)continue;const u=e-l.start;let d=l.duration>0?u/l.duration:1;d>=1?(l.complete=!0,d=1):s=!1;const f=l.easing(d);if(l.sourceCenter){const g=l.sourceCenter[0],m=l.sourceCenter[1],v=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;const w=g+f*(v-g),C=m+f*(x-m);this.targetCenter_=[w,C]}if(l.sourceResolution&&l.targetResolution){const g=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const m=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(g,0,m,!0);this.targetCenter_=this.calculateCenterZoom(v,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=f===1?fl(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const m=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(m,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Zn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&rp(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],lS(r,e-this.getRotation()),tY(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-i[0])/s,a=t[1]-e*(t[1]-i[1])/s;r=[o,a]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&pw(e,this.getProjection())}getCenterInternal(){return this.get(Di.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return gD(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();yt(t,"The view center is not defined");const r=this.getResolution();yt(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return yt(i!==void 0,"The view rotation is not defined"),hw(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Di.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(ll(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Et(e)/t[0],i=Jn(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(Di.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(o){return Math.log(r/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();i=Rx(i,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=rS(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=un(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,un(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(yt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){yt(!Ly(e),"Cannot fit empty extent provided as `geometry`");const i=ll(e,this.getProjection());r=sR(i)}else if(e.getType()==="Circle"){const i=ll(e.getExtent(),this.getProjection());r=sR(i),r.rotate(this.getRotation(),Pa(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,d=-1/0;for(let f=0,g=s.length;f<g;f+=o){const m=s[f]*r-s[f+1]*i,v=s[f]*i+s[f+1]*r;a=Math.min(a,m),l=Math.min(l,v),u=Math.max(u,m),d=Math.max(d,v)}return[a,l,u,d]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),d=Math.sin(u),f=Math.cos(u),g=Pa(a);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const m=g[0]*f-g[1]*d,v=g[1]*f+g[0]*d,x=this.getConstrainedCenter([m,v],l),w=t.callback?t.callback:Qc;t.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:t.duration,easing:t.easing},w):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),rp(w,!0))}centerOn(e,t,r){this.centerOnInternal(Ni(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(Rx(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=Rx(e,i,[a[0]/2+o[3],a[1]/2+o[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=pw(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ni(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ni(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ni(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(Di.ROTATION)!==i&&this.set(Di.ROTATION,i),this.get(Di.RESOLUTION)!==o&&(this.set(Di.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Di.CENTER)||!Cm(this.get(Di.CENTER),a))&&this.set(Di.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Cm(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:Cu,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Zn.INTERACTING,1)}endInteraction(e,t,r){r=r&&Ni(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Zn.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function rp(n,e){setTimeout(function(){n(e)},0)}function zY(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Jk(n.extent,n.constrainOnlyCenter,t)}const e=fS(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Jk(t,!1,!1)}return dY}function VY(n){let e,t,r,o=n.minZoom!==void 0?n.minZoom:kx,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,d=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,f=n.showFullExtent!==void 0?n.showFullExtent:!1,g=fS(n.projection,"EPSG:3857"),m=g.getExtent();let v=n.constrainOnlyCenter,x=n.extent;if(!u&&!x&&g.isGlobal()&&(v=!1,x=m),n.resolutions!==void 0){const w=n.resolutions;t=w[o],r=w[a]!==void 0?w[a]:w[w.length-1],n.constrainResolution?e=fY(w,d,!v&&x,f):e=Qk(t,r,d,!v&&x,f)}else{const C=(m?Math.max(Et(m),Jn(m)):360*tu.degrees/g.getMetersPerUnit())/iS/Math.pow(2,kx),b=C/Math.pow(2,28-kx);t=n.maxResolution,t!==void 0?o=0:t=C/Math.pow(l,o),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,a):r=C/Math.pow(l,a):r=b),a=o+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,a-o),n.constrainResolution?e=gY(l,t,r,d,!v&&x,f):e=Qk(t,r,d,!v&&x,f)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:o,zoomFactor:l}}function BY(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?mY():t===!1?eR:typeof t=="number"?pY(t):eR}return mS}function GY(n){return!(n.sourceCenter&&n.targetCenter&&!Cm(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Rx(n,e,t,r,i){const s=Math.cos(-i);let o=Math.sin(-i),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,o=-o;const u=a*s-l*o,d=l*s+a*o;return[u,d]}class Vy extends QO{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Pt.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Pt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Vt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=dt(e,tt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof gs?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;t.layerStatesArray?i=t.layerStatesArray.find(o=>o.layer===this):i=this.getLayerState();const s=this.getExtent();return kS(i,t.viewState)&&(!s||pr(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const r=this.getSource();if(r&&(t=r.getAttributions()),!t)return[];const i=e instanceof gs?e.getViewStateAndExtent():e;let s=t(i);return Array.isArray(s)||(s=[s]),s}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Pt.MAP,e)}getMapInternal(){return this.get(Pt.MAP)}setMap(e){this.mapPrecomposeKey_&&(Vt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Vt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=dt(e,xi.PRECOMPOSE,function(t){const i=t.frameState.layerStatesArray,s=this.getLayerState(!1);yt(!i.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(s)},this),this.mapRenderKey_=dt(this,tt.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Pt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function kS(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function WY(n,e,t,r,i){kD(n,e,t||0,r||n.length-1,i||$Y)}function kD(n,e,t,r,i){for(;r>t;){if(r-t>600){var s=r-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),d=Math.max(t,Math.floor(e-o*l/s+u)),f=Math.min(r,Math.floor(e+(s-o)*l/s+u));kD(n,e,d,f,i)}var g=n[e],m=t,v=r;for(xh(n,t,e),i(n[r],g)>0&&xh(n,t,r);m<v;){for(xh(n,m,v),m++,v--;i(n[m],g)<0;)m++;for(;i(n[v],g)>0;)v--}i(n[t],g)===0?xh(n,t,v):(v++,xh(n,v,r)),v<=e&&(t=v+1),e<=v&&(r=v-1)}}function xh(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}function $Y(n,e){return n<e?-1:n>e?1:0}let RD=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!sp(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?i(a):a;sp(e,l)&&(t.leaf?r.push(a):Ix(e,l)?this._all(a,r):s.push(a))}t=s.pop()}return r}collides(e){let t=this.data;if(!sp(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],o=t.leaf?this.toBBox(s):s;if(sp(e,o)){if(t.leaf||Ix(e,o))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=wc([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],o=[];let a,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),r.leaf){const d=UY(e,r.children,t);if(d!==-1)return r.children.splice(d,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&Ix(r,i)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let o=this._maxEntries,a;if(s<=o)return a=wc(e.slice(t,r+1)),uc(a,this.toBBox),a;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),a=wc([]),a.leaf=!1,a.height=i;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));oR(e,t,r,u,this.compareMinX);for(let d=t;d<=r;d+=u){const f=Math.min(d+u-1,r);oR(e,d,f,l,this.compareMinY);for(let g=d;g<=f;g+=l){const m=Math.min(g+l-1,f);a.children.push(this._build(e,g,m,i-1))}}return uc(a,this.toBBox),a}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],d=Px(u),f=YY(e,u)-d;f<o?(o=f,s=d<s?d:s,a=u):f===o&&d<s&&(s=d,a=u)}t=a||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(e),Fh(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const o=this._chooseSplitIndex(r,s,i),a=wc(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,uc(r,this.toBBox),uc(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,t){this.data=wc([e,t]),this.data.height=e.height+1,this.data.leaf=!1,uc(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,o=1/0;for(let a=t;a<=r-t;a++){const l=Lh(e,0,a,this.toBBox),u=Lh(e,a,r,this.toBBox),d=KY(l,u),f=Px(l)+Px(u);d<s?(s=d,i=a,o=f<o?f:o):d===s&&f<o&&(o=f,i=a)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:HY,s=e.leaf?this.compareMinY:XY,o=this._allDistMargin(e,t,r,i),a=this._allDistMargin(e,t,r,s);o<a&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,o=Lh(e,0,t,s),a=Lh(e,r-t,r,s);let l=ip(o)+ip(a);for(let u=t;u<r-t;u++){const d=e.children[u];Fh(o,e.leaf?s(d):d),l+=ip(o)}for(let u=r-t-1;u>=t;u--){const d=e.children[u];Fh(a,e.leaf?s(d):d),l+=ip(a)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Fh(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():uc(e[t],this.toBBox)}};function UY(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function uc(n,e){Lh(n,0,n.children.length,e,n)}function Lh(n,e,t,r,i){i||(i=wc(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];Fh(i,n.leaf?r(o):o)}return i}function Fh(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function HY(n,e){return n.minX-e.minX}function XY(n,e){return n.minY-e.minY}function Px(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function ip(n){return n.maxX-n.minX+(n.maxY-n.minY)}function YY(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function KY(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function Ix(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function sp(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function wc(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oR(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const o=e+Math.ceil((t-e)/r/2)*r;WY(n,o,e,t,i),s.push(e,o,o,t)}}const ot={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function aR(n){return n[0]>0&&n[1]>0}function qY(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ei(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class By{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ei(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new By({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return wt()}getImage(e){return wt()}getHitDetectionImage(){return wt()}getPixelRatio(e){return 1}getImageState(){return wt()}getImageSize(){return wt()}getOrigin(){return wt()}getSize(){return wt()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ei(e)}listenImageChange(e){wt()}load(){wt()}unlistenImageChange(e){wt()}ready(){return Promise.resolve()}}const _d={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Qn={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Qn.max=Qn.whitepoint[2].D65;Qn.rgb=function(n,e){e=e||Qn.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],s,o,a;return s=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,o=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,a=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};_d.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=t*.41239079926595+r*.35758433938387+i*.18048078840183,o=t*.21263900587151+r*.71516867876775+i*.072192315360733,a=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Qn.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};var RS={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,s,o,a,l,u,d,f,g,m,v,x;if(s=n[0],o=n[1],a=n[2],s===0)return[0,0,0];var w=.0011070564598794539;return e=e||"D65",t=t||2,f=Qn.whitepoint[t][e][0],g=Qn.whitepoint[t][e][1],m=Qn.whitepoint[t][e][2],v=4*f/(f+15*g+3*m),x=9*g/(f+15*g+3*m),r=o/(13*s)+v||0,i=a/(13*s)+x||0,u=s>8?g*Math.pow((s+16)/116,3):g*s*w,l=u*9*r/(4*i)||0,d=u*(12-3*r-20*i)/(4*i)||0,[l,u,d]}};Qn.luv=function(n,e,t){var r,i,s,o,a,l,u,d,f,g,m,v,x,w=.008856451679035631,C=903.2962962962961;e=e||"D65",t=t||2,f=Qn.whitepoint[t][e][0],g=Qn.whitepoint[t][e][1],m=Qn.whitepoint[t][e][2],v=4*f/(f+15*g+3*m),x=9*g/(f+15*g+3*m),l=n[0],u=n[1],d=n[2],r=4*l/(l+15*u+3*d)||0,i=9*u/(l+15*u+3*d)||0;var b=u/g;return s=b<=w?C*b:116*Math.pow(b,1/3)-16,o=13*s*(r-v),a=13*s*(i-x),[s,o,a]};var PD={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,s,o;return o=r/360*2*Math.PI,i=t*Math.cos(o),s=t*Math.sin(o),[e,i,s]},xyz:function(n){return RS.xyz(PD.luv(n))}};RS.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,i,o]};Qn.lchuv=function(n){return RS.lchuv(Qn.luv(n))};const lR={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var cR={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function ZY(n){var d,f;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),lR[n])t=lR[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),o=s.length,a=o<=4;r=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var l=e[1];i=l.replace(/a$/,"");var u=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(g,m){if(g[g.length-1]==="%")return g=parseFloat(g)/100,m===3?g:i==="rgb"?g*255:i[0]==="h"||i[0]==="l"&&!m?g*100:i==="lab"?g*125:i==="lch"?m<2?g*150:g*360:i[0]==="o"&&!m?g:i==="oklab"?g*.4:i==="oklch"?m<2?g*.4:g*360:g;if(i[m]==="h"||m===2&&i[i.length-1]==="h"){if(cR[g]!==void 0)return cR[g];if(g.endsWith("deg"))return parseFloat(g);if(g.endsWith("turn"))return parseFloat(g)*360;if(g.endsWith("grad"))return parseFloat(g)*360/400;if(g.endsWith("rad"))return parseFloat(g)*180/Math.PI}return g==="none"?0:parseFloat(g)}),r=t.length>u?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),i=((f=(d=n.match(/([a-z])/ig))==null?void 0:d.join(""))==null?void 0:f.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}var Mx={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,s,o,a,l,u=0;if(t===0)return l=r*255,[l,l,l];for(s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?i+(s-i)*6*o:2*o<1?s:3*o<2?i+(s-i)*(2/3-o)*6:i,a[u++]=l*255;return a}};_d.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=s-i,a,l,u;return s===i?a=0:e===s?a=(t-r)/o:t===s?a=2+(r-e)/o:r===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(i+s)/2,s===i?l=0:u<=.5?l=o/(s+i):l=o/(2-s-i),[a,l*100,u*100]};function JY(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=ZY(n);if(!t.space)return[];const r=t.space[0]==="h"?Mx.min:_d.min,i=t.space[0]==="h"?Mx.max:_d.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=Mx.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function QY(n){return typeof n=="string"?n:IS(n)}const e9=1024,_h={};let Ax=0;function t9(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function uR(n){const e=Qn.lchuv(_d.xyz(n));return e[3]=n[3],e}function n9(n){const e=Qn.rgb(PD.xyz(n));return e[3]=n[3],e}function PS(n){if(_h.hasOwnProperty(n))return _h[n];if(Ax>=e9){let t=0;for(const r in _h)(t++&3)===0&&(delete _h[r],--Ax)}const e=JY(n);if(e.length!==4)throw new Error('Failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+n+'" as color');return ID(e),_h[n]=e,++Ax,e}function wd(n){return Array.isArray(n)?n:PS(n)}function ID(n){return n[0]=un(n[0]+.5|0,0,255),n[1]=un(n[1]+.5|0,0,255),n[2]=un(n[2]+.5|0,0,255),n[3]=un(n[3],0,1),n}function IS(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function r9(n){try{return PS(n),!0}catch{return!1}}const Ia=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",i9=Ia.includes("firefox"),s9=Ia.includes("safari")&&!Ia.includes("chrom");s9&&(Ia.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ia));const o9=Ia.includes("webkit")&&!Ia.includes("edge"),MD=Ia.includes("macintosh"),AD=typeof devicePixelRatio<"u"?devicePixelRatio:1,OD=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,DD=typeof Image<"u"&&Image.prototype.decode,LD=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Bn(n,e,t,r){let i;return t&&t.length?i=t.shift():OD?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let Ox;function Tm(){return Ox||(Ox=Bn(1,1)),Ox}function Gy(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function hR(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function vw(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function a9(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function l9(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function c9(n,e,t){const r=n;let i=!0,s=!1,o=!1;const a=[_m(r,tt.LOAD,function(){o=!0,s||e()})];return r.src&&DD?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(o?e():t())})):a.push(_m(r,tt.ERROR,t)),function(){i=!1,a.forEach(Vt)}}function u9(n,e){return new Promise((t,r)=>{function i(){o(),t(n)}function s(){o(),r(new Error("Image load error"))}function o(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function h9(n,e){return e&&(n.src=e),n.src&&DD?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):u9(n)}class d9{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=Dx(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=Dx(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const o=Dx(e,t,r),a=o in this.cache_;this.cache_[o]=i,s&&(i.getImageState()===ot.IDLE&&i.load(),i.getImageState()===ot.LOADING?i.ready().then(()=>{this.patternCache_[o]=Tm().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=Tm().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Dx(n,e,t){const r=t?wd(t):"null";return e+":"+n+":"+r}const xs=new d9;let wh=null;class f9 extends My{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?ot.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ot.LOADED){wh||(wh=Bn(1,1,void 0,{willReadFrequently:!0})),wh.drawImage(this.image_,0,0);try{wh.getImageData(0,0,1,1),this.tainted_=!1}catch{wh=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(tt.CHANGE)}handleImageError_(){this.imageState_=ot.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ot.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Bn(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ot.IDLE){this.image_||this.initializeImage_(),this.imageState_=ot.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&h9(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ot.LOADED)return;const t=this.image_,r=document.createElement("canvas");r.width=Math.ceil(t.width*e),r.height=Math.ceil(t.height*e);const i=r.getContext("2d");i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=QY(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===ot.LOADED||this.imageState_===ot.ERROR?e():this.addEventListener(tt.CHANGE,function t(){(this.imageState_===ot.LOADED||this.imageState_===ot.ERROR)&&(this.removeEventListener(tt.CHANGE,t),e())})})),this.ready_}}function MS(n,e,t,r,i,s){let o=e===void 0?void 0:xs.get(e,t,i);return o||(o=new f9(n,n&&"src"in n?n.src||void 0:e,t,r,i),xs.set(e,t,i,o,s)),s&&o&&!xs.getPattern(e,t,i)&&xs.set(e,t,i,o,s),o}function _s(n){return n?Array.isArray(n)?IS(n):typeof n=="object"&&"src"in n?g9(n):n:null}function g9(n){if(!n.offset||!n.size)return xs.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=xs.getPattern(e,void 0,n.color);if(t)return t;const r=xs.get(n.src,"anonymous",null);if(r.getImageState()!==ot.LOADED)return null;const i=Bn(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),MS(i.canvas,e,void 0,ot.LOADED,n.color,!0),xs.getPattern(e,void 0,n.color)}const op="ol-hidden",Jd="ol-unselectable",AS="ol-control",dR="ol-collapsed",p9=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fR=["style","variant","weight","size","lineHeight","family"],FD=function(n){const e=n.match(p9);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=fR.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[fR[r]]=s)}return t.families=t.family.split(/,\s?/),t},ND="10px sans-serif",Mr="#000",ru="round",uo=[],ho=0,iu="round",Cd=10,Sd="#000",bd="center",km="middle",ul=[0,0,0,0],Ed=1,Ys=new Os;let Cc=null,xw;const _w={},m9=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,d,f){let g=!0;for(let m=0;m<r;++m){const v=t[m];if(o=Rm(u+" "+d+" "+e+v,i),f!=v){const x=Rm(u+" "+d+" "+e+f+","+v,i);g=g&&x!=o}}return!!g}function l(){let u=!0;const d=Ys.getKeys();for(let f=0,g=d.length;f<g;++f){const m=d[f];Ys.get(m)<100&&(a.apply(this,m.split(`
`))?(wu(_w),Cc=null,xw=void 0,Ys.set(m,100)):(Ys.set(m,Ys.get(m)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const d=FD(u);if(!d)return;const f=d.families;for(let g=0,m=f.length;g<m;++g){const v=f[g],x=d.style+`
`+d.weight+`
`+v;Ys.get(x)===void 0&&(Ys.set(x,100,!0),a(d.style,d.weight,v)||(Ys.set(x,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),y9=function(){let n;return function(e){let t=_w[e];if(t==null){if(OD){const r=FD(e),i=jD(e,"Žg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);_w[e]=t}return t}}();function jD(n,e){return Cc||(Cc=Bn(1,1)),n!=xw&&(Cc.font=n,xw=Cc.font),Cc.measureText(e)}function Rm(n,e){return jD(n,e).width}function gR(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,Rm(n,s)),0);return t[e]=r,r}function v9(n,e){const t=[],r=[],i=[];let s=0,o=0,a=0,l=0;for(let u=0,d=e.length;u<=d;u+=2){const f=e[u];if(f===`
`||u===d){s=Math.max(s,o),i.push(o),o=0,a+=l,l=0;continue}const g=e[u+1]||n.font,m=Rm(g,f);t.push(m),o+=m;const v=y9(g);r.push(v),l=Math.max(l,v)}return{width:s,height:a,widths:t,heights:r,lineWidths:i}}function x9(n,e,t,r,i,s,o,a,l,u,d){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=f=>f.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(d[0],d[1]),_9(r,n)):d[0]<0||d[1]<0?(n.translate(l,u),n.scale(d[0],d[1]),n.drawImage(r,i,s,o,a,0,0,o,a)):n.drawImage(r,i,s,o,a,l,u,o*d[0],a*d[1]),n.restore()}function _9(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class Wy extends By{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ot.LOADING:ot.LOADED,this.imageState_===ot.LOADING&&this.ready().then(()=>this.imageState_=ot.LOADED),this.render()}clone(){const e=this.getScale(),t=new Wy({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const r=this.renderOptions_,i=Bn(r.size*e,r.size*e);this.draw_(r,i,e),t=i.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius_,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const A=i;i=s,s=A}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),d=i-u,f=Math.sqrt(l*l+d*d),g=f/l;if(e==="miter"&&g<=r)return g*t;const m=t/2/g,v=t/2*(d/f),w=Math.sqrt((i+m)*(i+m)+v*v)-i;if(this.radius2_===void 0||e==="bevel")return w*2;const C=i*Math.sin(a),b=Math.sqrt(i*i-C*C),k=s-b,P=Math.sqrt(C*C+k*k)/C;if(P<=r){const A=P*t/2-s-i;return 2*Math.max(w,A)}return w*2}createRenderOptions(){let e=ru,t=iu,r=0,i=null,s=0,o,a=0;this.stroke_&&(o=_s(this.stroke_.getColor()??Sd),a=this.stroke_.getWidth()??Ed,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??iu,e=this.stroke_.getLineCap()??ru,r=this.stroke_.getMiterLimit()??Cd);const l=this.calculateLineJoinSize_(t,a,r),u=Math.max(this.radius_,this.radius2_||0),d=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:d,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=Mr),t.fillStyle=_s(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=wd(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Bn(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius_;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,u=a%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Mr,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Qd extends Wy{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Qd({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class Cl{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Cl({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=MS(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ot.IDLE&&t.load(),t.getImageState()===ot.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class gl{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new gl({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Ui{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=pR,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Ui({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=pR,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function w9(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(yt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let Lx=null;function zD(n,e){if(!Lx){const t=new Cl({color:"rgba(255,255,255,0.4)"}),r=new gl({color:"#3399CC",width:1.25});Lx=[new Ui({image:new Qd({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return Lx}function VD(){const n={},e=[255,255,255,1],t=[0,153,255,1],r=3;return n.Polygon=[new Ui({fill:new Cl({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new Ui({stroke:new gl({color:e,width:r+2})}),new Ui({stroke:new gl({color:t,width:r})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new Ui({image:new Qd({radius:r*2,fill:new Cl({color:t}),stroke:new gl({color:e,width:r/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function pR(n){return n.getGeometry()}function mR(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}class $y extends By{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;yt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||ft(o)),yt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),yt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ot.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?ot.LOADED:ot.IDLE:l=ot.LOADING:l=ot.LOADED),this.color_=e.color!==void 0?wd(e.color):null,this.iconImage_=MS(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,d;if(e.size)[u,d]=e.size;else{const f=this.getImage(1);if(f.width&&f.height)u=f.width,d=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const m=this.iconImage_.getSize();this.setScale(mR(m[0],m[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(mR(u,d,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new $y({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ot.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ot.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(tt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(tt.CHANGE,e)}ready(){return this.iconImage_.ready()}}const C9="#333";class OS{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=ei(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Cl({color:C9}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new OS({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ei(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let Il=0;const Su=0,Qt=1<<Il++,ze=1<<Il++,Qr=1<<Il++,An=1<<Il++,Ss=1<<Il++,Zh=1<<Il++,Kn=Math.pow(2,Il)-1,BD={[Qt]:"boolean",[ze]:"number",[Qr]:"string",[An]:"color",[Ss]:"number[]",[Zh]:"size"},S9=Object.keys(BD).map(Number).sort(lo);function nr(n){const e=[];for(const t of S9)b9(n,t)&&e.push(BD[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function b9(n,e){return(n&e)===e}function bs(n,e){return!!(n&e)}function Uy(n,e){return n===e}class pa{constructor(e,t){this.type=e,this.value=t}}class E9{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function GD(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function T9(n){switch(n){case"string":return Qr;case"color":return An;case"number":return ze;case"boolean":return Qt;case"number[]":return Ss;default:throw new Error(`Unrecognized type hint: ${n}`)}}function bt(n,e,t){switch(typeof n){case"boolean":return new pa(Qt,n);case"number":return new pa(t===Zh?Zh:ze,n);case"string":{let i=Qr;return r9(n)&&(i|=An),Uy(i&t,Su)||(i&=t),new pa(i,n)}}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return j9(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("Expected an array of numbers");let r=Ss;return n.length===2?r|=Zh:(n.length===3||n.length===4)&&(r|=An),t&&(r&=t),new pa(r,n)}const de={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},k9={[de.Get]:et(([n,e])=>e!==void 0?T9(e.value):Kn,it(1,2),R9),[de.Var]:et(([n])=>n.type,it(1,1),P9),[de.Id]:et(ze|Qr,Ch,I9),[de.Concat]:et(Qr,it(2,1/0),pt(Kn)),[de.GeometryType]:et(Qr,Ch,M9),[de.Resolution]:et(ze,Ch),[de.Zoom]:et(ze,Ch),[de.Time]:et(ze,Ch),[de.Any]:et(Qt,it(2,1/0),pt(Qt)),[de.All]:et(Qt,it(2,1/0),pt(Qt)),[de.Not]:et(Qt,it(1,1),pt(Qt)),[de.Equal]:et(Qt,it(2,2),pt(Kn),Jo),[de.NotEqual]:et(Qt,it(2,2),pt(Kn),Jo),[de.GreaterThan]:et(Qt,it(2,2),pt(Kn),Jo),[de.GreaterThanOrEqualTo]:et(Qt,it(2,2),pt(Kn),Jo),[de.LessThan]:et(Qt,it(2,2),pt(Kn),Jo),[de.LessThanOrEqualTo]:et(Qt,it(2,2),pt(Kn),Jo),[de.Multiply]:et(n=>{let e=ze|An;for(let t=0;t<n.length;t++)e&=n[t].type;return e},it(2,1/0),pt(ze|An),Jo),[de.Coalesce]:et(n=>{let e=Kn;for(let t=1;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},it(2,1/0),pt(Kn),Jo),[de.Divide]:et(ze,it(2,2),pt(ze)),[de.Add]:et(ze,it(2,1/0),pt(ze)),[de.Subtract]:et(ze,it(2,2),pt(ze)),[de.Clamp]:et(ze,it(3,3),pt(ze)),[de.Mod]:et(ze,it(2,2),pt(ze)),[de.Pow]:et(ze,it(2,2),pt(ze)),[de.Abs]:et(ze,it(1,1),pt(ze)),[de.Floor]:et(ze,it(1,1),pt(ze)),[de.Ceil]:et(ze,it(1,1),pt(ze)),[de.Round]:et(ze,it(1,1),pt(ze)),[de.Sin]:et(ze,it(1,1),pt(ze)),[de.Cos]:et(ze,it(1,1),pt(ze)),[de.Atan]:et(ze,it(1,2),pt(ze)),[de.Sqrt]:et(ze,it(1,1),pt(ze)),[de.Match]:et(n=>{let e=Kn;for(let t=2;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},it(4,1/0),yR,O9),[de.Between]:et(Qt,it(3,3),pt(ze)),[de.Interpolate]:et(n=>{let e=An|ze;for(let t=3;t<n.length;t+=2)e&=n[t].type;return e},it(6,1/0),yR,D9),[de.Case]:et(n=>{let e=Kn;for(let t=1;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},it(3,1/0),A9,L9),[de.In]:et(Qt,it(2,2),F9),[de.Number]:et(ze,it(1,1/0),pt(Kn)),[de.String]:et(Qr,it(1,1/0),pt(Kn)),[de.Array]:et(n=>n.length===2?Ss|Zh:n.length===3||n.length===4?Ss|An:Ss,it(1,1/0),pt(ze)),[de.Color]:et(An,it(1,4),pt(ze)),[de.Band]:et(ze,it(1,3),pt(ze)),[de.Palette]:et(An,it(2,2),N9),[de.ToString]:et(Qr,it(1,1),pt(Qt|ze|Qr|An))};function R9(n,e){const t=bt(n[1],e);if(!(t instanceof pa))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),n.length===3){const r=bt(n[2],e);return[t,r]}return[t]}function P9(n,e,t,r){const i=n[1];if(typeof i!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(i),!("variables"in e.style)||e.style.variables[i]===void 0)return[new pa(Kn,i)];const s=e.style.variables[i],o=bt(s,e);if(o.value=i,r&&!bs(r,o.type))throw new Error(`The variable ${i} has type ${nr(o.type)} but the following type was expected: ${nr(r)}`);return[o]}function I9(n,e){e.featureId=!0}function M9(n,e){e.geometryType=!0}function Ch(n,e){const t=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function it(n,e){return function(t,r){const i=t[0],s=t.length-1;if(n===e){if(s!==n){const o=n===1?"":"s";throw new Error(`Expected ${n} argument${o} for ${i}, got ${s}`)}}else if(s<n||s>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`Expected ${o} arguments for ${i}, got ${s}`)}}}function pt(n){return function(e,t){const r=e[0],i=e.length-1,s=new Array(i);for(let o=0;o<i;++o){const a=bt(e[o+1],t);if(!bs(n,a.type)){const l=nr(n),u=nr(a.type);throw new Error(`Unexpected type for argument ${o} of ${r} operation, got ${l} but expected ${u}`)}a.type&=n,s[o]=a}return s}}function Jo(n,e,t){const r=n[0],i=n.length-1;let s=Kn;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===Su)throw new Error(`No common type could be found for arguments of ${r} operation`);const o=new Array(i);for(let a=0;a<i;++a)o[a]=bt(n[a+1],e,s);return o}function A9(n,e){const t=n[0],r=n.length-1;if(r%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(r)} instead`)}function yR(n,e){const t=n[0],r=n.length-1;if(r%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(r)} instead`)}function O9(n,e,t,r){const i=n.length-1;let o=bt(n[1],e).type;const a=bt(n[n.length-1],e);let l=r!==void 0?r&a.type:a.type;const u=new Array(i-2);for(let f=0;f<i-2;f+=2){const g=bt(n[f+2],e),m=bt(n[f+3],e);o&=g.type,l&=m.type,u[f]=g,u[f+1]=m}const d=Qr|ze|Qt;if(!bs(d,o))throw new Error(`Expected an input of type ${nr(d)} for the interpolate operation, got ${nr(o)} instead`);if(o&=d,Uy(l,Su))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(n));for(let f=0;f<i-2;f+=2){const g=bt(n[f+2],e,o),m=bt(n[f+3],e,l);u[f]=g,u[f+1]=m}return[bt(n[1],e,o),...u,bt(n[n.length-1],e,l)]}function D9(n,e,t,r){const i=n[1];let s;switch(i[0]){case"linear":s=1;break;case"exponential":if(s=i[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(i)}`);s=bt(s,e);let o=bt(n[2],e);if(!bs(ze,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${nr(o.type)} instead`);o=bt(n[2],e,ze);const a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){let u=bt(n[l+3],e);if(!bs(ze,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${nr(u.type)} at position ${l+2} instead`);let d=bt(n[l+4],e);if(!bs(ze|An,d.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${nr(d.type)} at position ${l+3} instead`);u=bt(n[l+3],e,ze),d=bt(n[l+4],e,ze|An),a[l]=u,a[l+1]=d}return[s,o,...a]}function L9(n,e,t,r){const i=bt(n[n.length-1],e,r);let s=r!==void 0?r&i.type:i.type;const o=new Array(n.length-1);for(let a=0;a<o.length-1;a+=2){const l=bt(n[a+1],e),u=bt(n[a+2],e,r);if(!bs(Qt,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${nr(l.type)} at position ${a} instead`);s&=u.type,o[a]=l,o[a+1]=u}if(Uy(s,Su))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(n));for(let a=0;a<o.length-1;a+=2)o[a+1]=bt(n[a+2],e,s);return o[o.length-1]=bt(n[n.length-1],e,s),o}function F9(n,e){let t=n[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let r=Qr|ze;const i=new Array(t.length);for(let o=0;o<i.length;o++){const a=bt(t[o],e);r&=a.type,i[o]=a}if(Uy(r,Su))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(n));return[bt(n[1],e,r),...i]}function N9(n,e){const t=bt(n[1],e,ze);if(t.type!==ze)throw new Error(`The first argument of palette must be an number, got ${nr(t.type)} instead`);const r=n[2];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");const i=new Array(r.length);for(let s=0;s<i.length;s++){const o=bt(r[s],e,An);if(!(o instanceof pa))throw new Error(`The palette color at index ${s} must be a literal value`);if(!bs(o.type,An))throw new Error(`The palette color at index ${s} should be of type color, got ${nr(o.type)} instead`);i[s]=o}return[t,...i]}function et(n,...e){return function(t,r,i){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,r,o,i)||o;let a=typeof n=="function"?n(o):n;if(i!==void 0){if(!bs(a,i))throw new Error(`The following expression was expected to return ${nr(i)}, but returns ${nr(a)} instead: ${JSON.stringify(t)}`);a&=i}if(a===Su)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new E9(a,s,...o)}}function j9(n,e,t){const r=n[0],i=k9[r];if(!i)throw new Error(`Unknown operator: ${r}`);return i(n,e,t)}function WD(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return WD(n.getGeometries()[0]);default:return""}}function $D(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ro(n,e,t){const r=bt(n,t);if(!bs(e,r.type)){const i=nr(e),s=nr(r.type);throw new Error(`Expected expression to be of type ${i}, got ${s}`)}return Qi(r)}function Qi(n,e){if(n instanceof pa){if(n.type===An&&typeof n.value=="string"){const r=PS(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case de.Number:case de.String:case de.Coalesce:return z9(n);case de.Get:case de.Var:return V9(n);case de.Id:return r=>r.featureId;case de.GeometryType:return r=>r.geometryType;case de.Concat:{const r=n.args.map(i=>Qi(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case de.Resolution:return r=>r.resolution;case de.Any:case de.All:case de.Between:case de.In:case de.Not:return G9(n);case de.Equal:case de.NotEqual:case de.LessThan:case de.LessThanOrEqualTo:case de.GreaterThan:case de.GreaterThanOrEqualTo:return B9(n);case de.Multiply:case de.Divide:case de.Add:case de.Subtract:case de.Clamp:case de.Mod:case de.Pow:case de.Abs:case de.Floor:case de.Ceil:case de.Round:case de.Sin:case de.Cos:case de.Atan:case de.Sqrt:return W9(n);case de.Case:return $9(n);case de.Match:return U9(n);case de.Interpolate:return H9(n);case de.ToString:return X9(n);default:throw new Error(`Unsupported operator ${t}`)}}function z9(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qi(n.args[s]);switch(t){case de.Coalesce:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case de.Number:case de.String:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function V9(n,e){const r=n.args[0].value;switch(n.operator){case de.Get:return i=>i.properties[r];case de.Var:return i=>i.variables[r];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function B9(n,e){const t=n.operator,r=Qi(n.args[0]),i=Qi(n.args[1]);switch(t){case de.Equal:return s=>r(s)===i(s);case de.NotEqual:return s=>r(s)!==i(s);case de.LessThan:return s=>r(s)<i(s);case de.LessThanOrEqualTo:return s=>r(s)<=i(s);case de.GreaterThan:return s=>r(s)>i(s);case de.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function G9(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qi(n.args[s]);switch(t){case de.Any:return s=>{for(let o=0;o<r;++o)if(i[o](s))return!0;return!1};case de.All:return s=>{for(let o=0;o<r;++o)if(!i[o](s))return!1;return!0};case de.Between:return s=>{const o=i[0](s),a=i[1](s),l=i[2](s);return o>=a&&o<=l};case de.In:return s=>{const o=i[0](s);for(let a=1;a<r;++a)if(o===i[a](s))return!0;return!1};case de.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function W9(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qi(n.args[s]);switch(t){case de.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=i[a](s);return o};case de.Divide:return s=>i[0](s)/i[1](s);case de.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=i[a](s);return o};case de.Subtract:return s=>i[0](s)-i[1](s);case de.Clamp:return s=>{const o=i[0](s),a=i[1](s);if(o<a)return a;const l=i[2](s);return o>l?l:o};case de.Mod:return s=>i[0](s)%i[1](s);case de.Pow:return s=>Math.pow(i[0](s),i[1](s));case de.Abs:return s=>Math.abs(i[0](s));case de.Floor:return s=>Math.floor(i[0](s));case de.Ceil:return s=>Math.ceil(i[0](s));case de.Round:return s=>Math.round(i[0](s));case de.Sin:return s=>Math.sin(i[0](s));case de.Cos:return s=>Math.cos(i[0](s));case de.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case de.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function $9(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qi(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function U9(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qi(n.args[i]);return i=>{const s=r[0](i);for(let o=1;o<t;o+=2)if(s===r[o](i))return r[o+1](i);return r[t-1](i)}}function H9(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qi(n.args[i]);return i=>{const s=r[0](i),o=r[1](i);let a,l;for(let u=2;u<t;u+=2){const d=r[u](i);let f=r[u+1](i);const g=Array.isArray(f);if(g&&(f=t9(f)),d>=o)return u===2?f:g?Y9(s,o,a,l,d,f):Nh(s,o,a,l,d,f);a=d,l=f}return l}}function X9(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Qi(n.args[s]);switch(t){case de.ToString:return s=>{const o=i[0](s);return n.args[0].type===An?IS(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Nh(n,e,t,r,i,s){const o=i-t;if(o===0)return r;const a=e-t,l=n===1?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1);return r+l*(s-r)}function Y9(n,e,t,r,i,s){if(i-t===0)return r;const a=uR(r),l=uR(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const d=[Nh(n,e,t,a[0],i,l[0]),Nh(n,e,t,a[1],i,l[1]),a[2]+Nh(n,e,t,0,i,u),Nh(n,e,t,r[3],i,s[3])];return ID(n9(d))}function K9(n){return!0}function q9(n){const e=GD(),t=Z9(n,e),r=$D();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=WD(i.getGeometry())),t(r)}}function vR(n){const e=GD(),t=n.length,r=new Array(t);for(let o=0;o<t;++o)r[o]=ww(n[o],e);const i=$D(),s=new Array(t);return function(o,a){if(i.properties=o.getPropertiesInternal(),i.resolution=a,e.featureId){const u=o.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const d=r[u](i);d&&(s[l]=d,l+=1)}return s.length=l,s}}function Z9(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],o="filter"in s?Ro(s.filter,Qt,e):K9;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=ww(s.style[u],e)}else a=[ww(s.style,e)];r[i]={filter:o,styles:a}}return function(i){const s=[];let o=!1;for(let a=0;a<t;++a){const l=r[a].filter;if(l(i)&&!(n[a].else&&o)){o=!0;for(const u of r[a].styles){const d=u(i);d&&s.push(d)}}}return s}}function ww(n,e){const t=Td(n,"",e),r=kd(n,"",e),i=J9(n,e),s=Q9(n,e),o=Ar(n,"z-index",e);if(!t&&!r&&!i&&!s&&!eu(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new Ui;return function(l){let u=!0;if(t){const d=t(l);d&&(u=!1),a.setFill(d)}if(r){const d=r(l);d&&(u=!1),a.setStroke(d)}if(i){const d=i(l);d&&(u=!1),a.setText(d)}if(s){const d=s(l);d&&(u=!1),a.setImage(d)}return o&&a.setZIndex(o(l)),u?null:a}}function Td(n,e,t){let r;if(e+"fill-pattern-src"in n?r=r8(n,e+"fill-",t):r=DS(n,e+"fill-color",t),!r)return null;const i=new Cl;return function(s){const o=r(s);return o==="none"?null:(i.setColor(o),i)}}function kd(n,e,t){const r=Ar(n,e+"stroke-width",t),i=DS(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Js(n,e+"stroke-line-cap",t),o=Js(n,e+"stroke-line-join",t),a=UD(n,e+"stroke-line-dash",t),l=Ar(n,e+"stroke-line-dash-offset",t),u=Ar(n,e+"stroke-miter-limit",t),d=new gl;return function(f){if(i){const g=i(f);if(g==="none")return null;d.setColor(g)}if(r&&d.setWidth(r(f)),s){const g=s(f);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");d.setLineCap(g)}if(o){const g=o(f);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");d.setLineJoin(g)}return a&&d.setLineDash(a(f)),l&&d.setLineDashOffset(l(f)),u&&d.setMiterLimit(u(f)),d}}function J9(n,e){const t="text-",r=Js(n,t+"value",e);if(!r)return null;const i=Td(n,t,e),s=Td(n,t+"background-",e),o=kd(n,t,e),a=kd(n,t+"background-",e),l=Js(n,t+"font",e),u=Ar(n,t+"max-angle",e),d=Ar(n,t+"offset-x",e),f=Ar(n,t+"offset-y",e),g=Rd(n,t+"overflow",e),m=Js(n,t+"placement",e),v=Ar(n,t+"repeat",e),x=Hy(n,t+"scale",e),w=Rd(n,t+"rotate-with-view",e),C=Ar(n,t+"rotation",e),b=Js(n,t+"align",e),k=Js(n,t+"justify",e),R=Js(n,t+"baseline",e),P=UD(n,t+"padding",e),A=Xy(n,t+"declutter-mode"),O=new OS({declutterMode:A});return function(D){if(O.setText(r(D)),i&&O.setFill(i(D)),s&&O.setBackgroundFill(s(D)),o&&O.setStroke(o(D)),a&&O.setBackgroundStroke(a(D)),l&&O.setFont(l(D)),u&&O.setMaxAngle(u(D)),d&&O.setOffsetX(d(D)),f&&O.setOffsetY(f(D)),g&&O.setOverflow(g(D)),m){const j=m(D);if(j!=="point"&&j!=="line")throw new Error("Expected point or line for text-placement");O.setPlacement(j)}if(v&&O.setRepeat(v(D)),x&&O.setScale(x(D)),w&&O.setRotateWithView(w(D)),C&&O.setRotation(C(D)),b){const j=b(D);if(j!=="left"&&j!=="center"&&j!=="right"&&j!=="end"&&j!=="start")throw new Error("Expected left, right, center, start, or end for text-align");O.setTextAlign(j)}if(k){const j=k(D);if(j!=="left"&&j!=="right"&&j!=="center")throw new Error("Expected left, right, or center for text-justify");O.setJustify(j)}if(R){const j=R(D);if(j!=="bottom"&&j!=="top"&&j!=="middle"&&j!=="alphabetic"&&j!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");O.setTextBaseline(j)}return P&&O.setPadding(P(D)),O}}function Q9(n,e){return"icon-src"in n?e8(n,e):"shape-points"in n?t8(n,e):"circle-radius"in n?n8(n,e):null}function e8(n,e){const t="icon-",r=t+"src",i=HD(n[r],r),s=Pm(n,t+"anchor",e),o=Hy(n,t+"scale",e),a=Ar(n,t+"opacity",e),l=Pm(n,t+"displacement",e),u=Ar(n,t+"rotation",e),d=Rd(n,t+"rotate-with-view",e),f=_R(n,t+"anchor-origin"),g=wR(n,t+"anchor-x-units"),m=wR(n,t+"anchor-y-units"),v=a8(n,t+"color"),x=s8(n,t+"cross-origin"),w=o8(n,t+"offset"),C=_R(n,t+"offset-origin"),b=Im(n,t+"width"),k=Im(n,t+"height"),R=i8(n,t+"size"),P=Xy(n,t+"declutter-mode"),A=new $y({src:i,anchorOrigin:f,anchorXUnits:g,anchorYUnits:m,color:v,crossOrigin:x,offset:w,offsetOrigin:C,height:k,width:b,size:R,declutterMode:P});return function(O){return a&&A.setOpacity(a(O)),l&&A.setDisplacement(l(O)),u&&A.setRotation(u(O)),d&&A.setRotateWithView(d(O)),o&&A.setScale(o(O)),s&&A.setAnchor(s(O)),A}}function t8(n,e){const t="shape-",r=t+"points",i=t+"radius",s=Cw(n[r],r),o=Cw(n[i],i),a=Td(n,t,e),l=kd(n,t,e),u=Hy(n,t+"scale",e),d=Pm(n,t+"displacement",e),f=Ar(n,t+"rotation",e),g=Rd(n,t+"rotate-with-view",e),m=Im(n,t+"radius2"),v=Im(n,t+"angle"),x=Xy(n,t+"declutter-mode"),w=new Wy({points:s,radius:o,radius2:m,angle:v,declutterMode:x});return function(C){return a&&w.setFill(a(C)),l&&w.setStroke(l(C)),d&&w.setDisplacement(d(C)),f&&w.setRotation(f(C)),g&&w.setRotateWithView(g(C)),u&&w.setScale(u(C)),w}}function n8(n,e){const t="circle-",r=Td(n,t,e),i=kd(n,t,e),s=Ar(n,t+"radius",e),o=Hy(n,t+"scale",e),a=Pm(n,t+"displacement",e),l=Ar(n,t+"rotation",e),u=Rd(n,t+"rotate-with-view",e),d=Xy(n,t+"declutter-mode"),f=new Qd({radius:5,declutterMode:d});return function(g){return s&&f.setRadius(s(g)),r&&f.setFill(r(g)),i&&f.setStroke(i(g)),a&&f.setDisplacement(a(g)),l&&f.setRotation(l(g)),u&&f.setRotateWithView(u(g)),o&&f.setScale(o(g)),f}}function Ar(n,e,t){if(!(e in n))return;const r=Ro(n[e],ze,t);return function(i){return Cw(r(i),e)}}function Js(n,e,t){if(!(e in n))return null;const r=Ro(n[e],Qr,t);return function(i){return HD(r(i),e)}}function r8(n,e,t){const r=Js(n,e+"pattern-src",t),i=xR(n,e+"pattern-offset",t),s=xR(n,e+"pattern-size",t),o=DS(n,e+"color",t);return function(a){return{src:r(a),offset:i&&i(a),size:s&&s(a),color:o&&o(a)}}}function Rd(n,e,t){if(!(e in n))return null;const r=Ro(n[e],Qt,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function DS(n,e,t){if(!(e in n))return null;const r=Ro(n[e],An|Qr,t);return function(i){return XD(r(i),e)}}function UD(n,e,t){if(!(e in n))return null;const r=Ro(n[e],Ss,t);return function(i){return ef(r(i),e)}}function Pm(n,e,t){if(!(e in n))return null;const r=Ro(n[e],Ss,t);return function(i){const s=ef(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function xR(n,e,t){if(!(e in n))return null;const r=Ro(n[e],Ss,t);return function(i){return YD(r(i),e)}}function Hy(n,e,t){if(!(e in n))return null;const r=Ro(n[e],Ss|ze,t);return function(i){return l8(r(i),e)}}function Im(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function i8(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return ei(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function s8(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function _R(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function wR(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function o8(n,e){const t=n[e];if(t!==void 0)return ef(t,e)}function Xy(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function a8(n,e){const t=n[e];if(t!==void 0)return XD(t,e)}function ef(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function HD(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function Cw(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function XD(n,e){if(typeof n=="string")return n;const t=ef(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function YD(n,e){const t=ef(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function l8(n,e){return typeof n=="number"?n:YD(n,e)}const CR={RENDER_ORDER:"renderOrder"};class KD extends Vy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(CR.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new RD(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(CR.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?zD:e;const t=c8(e);this.styleFunction_=e===null?void 0:w9(t),this.changed()}}function c8(n){if(n===void 0)return zD;if(!n)return null;if(typeof n=="function"||n instanceof Ui)return n;if(!Array.isArray(n))return vR([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Ui){const i=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!(o instanceof Ui))throw new Error("Expected a list of style instances");i[s]=o}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[s]=o}return q9(i)}return vR(n)}class u8 extends nS{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){wt()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;So(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),mD(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,o,a,l){let u;const d=t.viewState;function f(R,P,A,O){return s.call(o,P,R?A:null,O)}const g=d.projection,m=cS(e.slice(),g),v=[[0,0]];if(g.canWrapX()&&i){const R=g.getExtent(),P=Et(R);v.push([-P,0],[P,0])}const x=t.layerStatesArray,w=x.length,C=[],b=[];for(let R=0;R<v.length;R++)for(let P=w-1;P>=0;--P){const A=x[P],O=A.layer;if(O.hasRenderer()&&kS(A,d)&&a.call(l,O)){const D=O.getRenderer(),j=O.getSource();if(D&&j){const Q=j.getWrapX()?m:e,X=f.bind(null,A.managed);b[0]=Q[0]+v[R][0],b[1]=Q[1]+v[R][1],u=D.forEachFeatureAtCoordinate(b,t,r,X,C)}if(u)return u}}if(C.length===0)return;const k=1/C.length;return C.forEach((R,P)=>R.distanceSq+=P*k),C.sort((R,P)=>R.distanceSq-P.distanceSq),C.some(R=>u=R.callback(R.feature,R.layer,R.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,o){return this.forEachFeatureAtCoordinate(e,t,r,i,Ra,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){wt()}scheduleExpireIconCache(e){xs.canExpireCache()&&e.postRenderFunctions.push(h8)}}function h8(n,e){xs.expire()}class qD extends ts{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class d8 extends u8{constructor(e){super(e),this.fontChangeListenerKey_=dt(Ys,Jc.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Jd+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new qD(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Vt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(xi.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});t.some(a=>a.layer instanceof KD&&a.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=t.length;a<l;++a){const u=t[a];e.layerIndex=a;const d=u.layer,f=d.getSourceState();if(!kS(u,i)||f!="ready"&&f!="undefined"){d.unrender();continue}const g=d.render(e,o);g&&(g!==o&&(this.children_.push(g),o=g),s.push(u))}this.declutter(e,s),l9(this.element_,this.children_),this.dispatchRenderEvent(xi.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}class la extends ts{constructor(e,t){super(e),this.layer=t}}const Fx={LAYERS:"layers"};class bu extends QO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Fx.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new $i(r.slice(),{unique:!0}):yt(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new $i(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Vt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(dt(e,On.ADD,this.handleLayersAdd_,this),dt(e,On.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Vt);wu(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new la("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[dt(e,Jc.PROPERTYCHANGE,this.handleLayerChange_,this),dt(e,tt.CHANGE,this.handleLayerChange_,this)];e instanceof bu&&t.push(dt(e,"addlayer",this.handleLayerGroupAdd_,this),dt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ft(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new la("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new la("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new la("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=ft(t);this.listenerKeys_[r].forEach(Vt),delete this.listenerKeys_[r],this.dispatchEvent(new la("removelayer",t)),this.changed()}getLayers(){return this.get(Fx.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new la("removelayer",r[i]))}this.set(Fx.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let o=r,a=t.length;o<a;o++){const l=t[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=qh(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class Sc extends ts{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class qs extends Sc{constructor(e,t,r,i,s,o){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const _t={SINGLECLICK:"singleclick",CLICK:tt.CLICK,DBLCLICK:tt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Pd={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTEROUT:"pointerout"};class f8 extends My{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=dt(r,Pd.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=dt(r,Pd.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(tt.TOUCHMOVE,this.boundHandleTouchMove_,LD?{passive:!1}:!1)}emulateClick_(e){let t=new qs(_t.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new qs(_t.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new qs(_t.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==_t.POINTERUP||t.type==_t.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==_t.POINTERDOWN||t.type==_t.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new qs(_t.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Vt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new qs(_t.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(dt(r,_t.POINTERMOVE,this.handlePointerMove_,this),dt(r,_t.POINTERUP,this.handlePointerUp_,this),dt(this.element_,_t.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(dt(this.element_.getRootNode(),_t.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new qs(_t.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new qs(_t.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Vt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(tt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Vt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Vt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const sa={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},qn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Mm=1/0;class g8{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,wu(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){yt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Mm?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],o=r[e],a=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),d=u<i&&r[u]<r[l]?u:l;t[e]=t[d],r[e]=r[d],e=d}t[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],o=i[t];for(;t>e;){const a=this.getParentIndex_(t);if(i[a]>o)r[t]=r[a],i[t]=i[a],t=a;else break}r[t]=s,i[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==Mm?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=l,t[i++]=o);t.length=i,r.length=i,this.heapify_()}}const $e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class p8 extends g8{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(tt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===$e.LOADED||r===$e.ERROR||r===$e.EMPTY){r!==$e.ERROR&&t.removeEventListener(tt.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0,i,s,o;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),i=s.getState(),i===$e.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,s.load())}}function m8(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Mm;const s=n.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(o*o+a*a)/i}class tf extends Os{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){vw(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&vw(this.element);for(let t=0,r=this.listenerKeys.length;t<r;++t)Vt(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Qc&&this.listenerKeys.push(dt(e,sa.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class y8 extends tf{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(tt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Jd+" "+AS+(this.collapsed_&&this.collapsible_?" "+dR:"")+(this.collapsible_?"":" ol-uncollapsible"),d=this.element;d.className=u,d.appendChild(this.toggleButton_),d.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(i=>i.getAttributions(e)))),r=!this.getMap().getAllLayers().some(i=>i.getSource()&&i.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(r),t}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>FX(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Na(t,this.renderedAttributions_)){a9(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const o=document.createElement("li");o.innerHTML=t[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(dR),this.collapsed_?hR(this.collapseLabel_,this.label_):hR(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class v8 extends tf{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(tt.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Jd+" "+AS,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(op)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Cu}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(op);!s&&r===0?this.element.classList.add(op):s&&r!==0&&this.element.classList.remove(op)}this.label_.style.transform=i}this.rotation_=r}}class x8 extends tf{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=i,d.setAttribute("type","button"),d.title=l,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(tt.CLICK,this.handleClick_.bind(this,r),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=u,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(tt.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Jd+" "+AS,m=this.element;m.className=g,m.appendChild(d),m.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Cu})):r.setZoom(s)}}}function ZD(n){n=n||{};const e=new $i;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new x8(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new v8(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new y8(n.attributionOptions)),e}const Sw={ACTIVE:"active"};class Eu extends Os{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Sw.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Sw.ACTIVE,e)}setMap(e){this.map_=e}}function _8(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:vY,center:n.getConstrainedCenter(i)})}}function LS(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:r!==void 0?r:250,easing:Cu})}class w8 extends Eu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==_t.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=i.getView();LS(a,o,s,this.duration_),r.preventDefault(),t=!0}return!t}}class Tu extends Eu{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==_t.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==_t.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==_t.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==_t.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function FS(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}function bw(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const C8=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},S8=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},JD=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?S8(n):!0},Ew=Ra,b8=function(n){return n.type==_t.CLICK},QD=function(n){const e=n.originalEvent;return e.button==0&&!(o9&&MD&&e.ctrlKey)},Tw=_u,E8=function(n){return n.type==_t.SINGLECLICK},NS=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},T8=function(n){const e=n.originalEvent;return MD?e.metaKey:e.ctrlKey},jS=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},eL=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Nx=function(n){const e=n.originalEvent;return yt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},k8=function(n){const e=n.originalEvent;return yt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class R8 extends Tu{constructor(e){super({stopDown:_u}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:bw(NS,k8);this.condition_=e.onFocusOnly?bw(JD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(FS(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();iY(s,a.getResolution()),lS(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-i*Math.cos(s),a[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Cu})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class P8 extends Tu{constructor(e){e=e||{},super({stopDown:_u}),this.condition_=e.condition?e.condition:C8,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Nx(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===mS)return;const i=t.getSize(),s=e.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Nx(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Nx(e)&&QD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class I8 extends nS{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new bo([i])}getGeometry(){return this.geometry_}}const Sh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ap extends ts{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class tL extends Tu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new I8(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:QD,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ap(Sh.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new ap(t?Sh.BOXEND:Sh.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ap(Sh.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ap(Sh.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}}class M8 extends tL{constructor(e){e=e||{};const t=e.condition?e.condition:jS;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:Cu})}}const nl={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class A8 extends Eu{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return NS(t)&&eL(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==tt.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==nl.DOWN||i==nl.LEFT||i==nl.RIGHT||i==nl.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;i==nl.DOWN?u=-a:i==nl.LEFT?l=-a:i==nl.RIGHT?l=a:u=a;const d=[l,u];lS(d,o.getRotation()),_8(o,d,this.duration_),r.preventDefault(),t=!0}}return!t}}class O8 extends Eu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!T8(t)&&eL(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==tt.KEYDOWN||e.type==tt.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,o=i==="+"?this.delta_:-this.delta_,a=s.getView();LS(a,o,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class D8{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],o=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class L8 extends Eu{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Ew;this.condition_=e.onFocusOnly?bw(JD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==tt.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==tt.WHEEL&&(s=i.deltaY,i9&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=AD),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-un(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),LS(t,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class F8 extends Tu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=_u),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==mS&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(FS(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class N8 extends Tu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=_u),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,o=r.clientY-i.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(FS(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function j8(n){n=n||{};const e=new $i,t=new D8(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new P8),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new w8({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new R8({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new F8),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new N8({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new A8),e.push(new O8({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new L8({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new M8({duration:n.zoomDuration})),e}function nL(n){if(n instanceof Vy){n.setMapInternal(null);return}n instanceof bu&&n.getLayers().forEach(nL)}function rL(n,e){if(n instanceof Vy){n.setMapInternal(e);return}if(n instanceof bu){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)rL(t[r],e)}}let z8=class extends Os{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=V8(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:AD,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yi(),this.pixelToCoordinateTransform_=Yi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||ZD(),this.interactions=t.interactions||j8({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new p8(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(qn.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(qn.VIEW,this.handleViewChanged_),this.addChangeListener(qn.SIZE,this.handleSizeChanged_),this.addChangeListener(qn.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof gs)&&e.view.then(function(i){r.setView(new gs(i))}),this.controls.addEventListener(On.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(On.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(On.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(On.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(On.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(On.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){rL(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Ra,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof bu?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Ra,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],o=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(qn.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return pw(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Nn(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(qn.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof $i){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ni(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Nn(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(qn.SIZE)}getView(){return this.get(qn.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return m8(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new qs(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===Pd.POINTERDOWN||r===tt.WHEEL||r===tt.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===i?i.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const o=e.viewHints;if(o[Zn.ANIMATING]||o[Zn.INTERACTING]){const a=Date.now()-e.time>8;i=a?0:8,s=a?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(xi.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xi.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Sc(sa.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Sc(sa.LOADSTART,this,e))));const r=this.postRenderFunctions_;for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Vt(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(tt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(tt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,vw(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new d8(this)),this.mapBrowserEventHandler_=new f8(this,this.moveTolerance_);for(const s in _t)this.mapBrowserEventHandler_.addEventListener(_t[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(tt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(tt.WHEEL,this.boundHandleBrowserEvent_,LD?{passive:!1}:!1);const r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[dt(r,tt.KEYDOWN,this.handleBrowserEvent,this),dt(r,tt.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Vt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Vt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=dt(e,Jc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=dt(e,tt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Vt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new la("addlayer",e)),this.layerGroupPropertyListenerKeys_=[dt(e,Jc.PROPERTYCHANGE,this.render,this),dt(e,tt.CHANGE,this.render,this),dt(e,"addlayer",this.handleLayerAdd_,this),dt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){nL(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&aR(t)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:hw(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ft(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=hw(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Ly(this.previousExtent_)&&!yd(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Sc(sa.MOVESTART,this,i)),this.previousExtent_=Zd(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Zn.ANIMATING]&&!s.viewHints[Zn.INTERACTING]&&!yd(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Sc(sa.MOVEEND,this,s)),tD(s.extent,this.previousExtent_))),this.dispatchEvent(new Sc(sa.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(sa.LOADSTART)||this.hasListener(sa.LOADEND)||this.hasListener(xi.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new la("removelayer",t)),this.set(qn.LAYERGROUP,e)}setSize(e){this.set(qn.SIZE,e)}setTarget(e){this.set(qn.TARGET,e)}setView(e){if(!e||e instanceof gs){this.set(qn.VIEW,e);return}this.set(qn.VIEW,new gs);const t=this;e.then(function(r){t.setView(new gs(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),o=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!aR(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&dD("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!Na(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function V8(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new bu({layers:n.layers});t[qn.LAYERGROUP]=r,t[qn.TARGET]=n.target,t[qn.VIEW]=n.view instanceof gs?n.view:new gs;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new $i(n.controls.slice()):(yt(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new $i(n.interactions.slice()):(yt(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new $i(n.overlays.slice()):(yt(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new $i,{controls:i,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const jx="projection",SR="coordinateFormat";class B8 extends tf{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(jx,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(SR)}getProjection(){return this.get(jx)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(dt(t,Pd.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(dt(t,Pd.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(SR,e)}setProjection(e){this.set(jx,zr(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=Fy(this.mapProjection_,s):this.transform_=dS}const i=this.getMap().getCoordinateFromPixelInternal(e);if(i){if(this.transform_(i,i),this.wrapX_){const o=this.getProjection()||this.mapProjection_;cS(i,o)}const s=this.getCoordinateFormat();s?t=s(i):t=i.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const zx="units",G8=[1,2,5],bh=25.4/.28;class W8 extends tf{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Jd,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(zx,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(zx)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(zx,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let o=Sm(r,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||bh)/bh,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||bh)/bh:void 0;let u=a*o,d="";if(i=="degrees"){const k=tu.degrees;u*=k,u<k/60?(d="″",o*=3600):u<k?(d="′",o*=60):d="°"}else if(i=="imperial")u<.9144?(d="in",o/=.0254):u<1609.344?(d="ft",o/=.3048):(d="mi",o/=1609.344);else if(i=="nautical")o/=1852,d="NM";else if(i=="metric")u<1e-6?(d="nm",o*=1e9):u<.001?(d="μm",o*=1e6):u<1?(d="mm",o*=1e3):u<1e3?d="m":(d="km",o/=1e3);else if(i=="us")u<.9144?(d="in",o*=39.37):u<1609.344?(d="ft",o/=.30480061):(d="mi",o/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(a*o)/Math.log(10)),g,m,v,x,w,C;for(;;){v=Math.floor(f/3);const k=Math.pow(10,v);if(g=G8[(f%3+3)%3]*k,m=Math.round(g/o),isNaN(m)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&m>=l){g=x,m=w,v=C;break}else if(m>=a)break;x=g,w=m,C=v,++f}const b=this.scaleBar_?this.createScaleBar(m,g,d):g.toFixed(v<0?-v:0)+" "+d;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let d=0;d<o;++d){const f=d%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(d%2===0||o===2?this.createStepText(d,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const a=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=Sm(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||bh,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}class Yy extends ja{constructor(e,t,r){super(),r!==void 0&&t===void 0?this.setFlatCoordinates(r,e):(t=t||0,this.setCenterAndRadius(e,t,r))}clone(){const e=new Yy(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<i){if(l===0)for(let u=0;u<this.stride;++u)r[u]=s[u];else{const u=this.getRadius()/Math.sqrt(l);r[0]=s[0]+u*o,r[1]=s[1]+u*a;for(let d=2;d<this.stride;++d)r[d]=s[d]}return r.length=this.stride,l}return i}containsXY(e,t){const r=this.flatCoordinates,i=e-r[0],s=t-r[1];return i*i+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,r=t[this.stride]-t[0];return Co(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(pr(e,t)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:aS(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],i=e.slice();i[t]=i[0]+r;for(let s=1;s<t;++s)i[t+s]=e[s];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let s=vD(i,0,e,this.stride);i[s++]=i[0]+t;for(let o=1,a=this.stride;o<a;++o)i[s++]=i[o];i.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const r=this.getCenter(),i=this.getStride();this.setCenter(yS(r,0,r.length,i,e,t,r)),this.changed()}}Yy.prototype.transform;class Qs extends Os{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Qs(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Vt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=dt(e,tt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?$8(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function $8(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(yt(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}class Am extends yD{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Vt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(dt(e[t],tt.CHANGE,this.changed,this))}clone(){const e=new Am(Vx(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Rl(this.getExtent(),e,t))return i;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)i=s[o].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Zd(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)rD(e,t[r].getExtent());return e}getGeometries(){return Vx(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(i=!0)}return i?new Am(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Pa(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(Vx(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Vx(n){return n.map(e=>e.clone())}function Om(n,e,t,r,i,s,o){let a,l;const u=(t-e)/r;if(u===1)a=e;else if(u===2)a=e,l=i;else if(u!==0){let d=n[e],f=n[e+1],g=0;const m=[0];for(let w=e+r;w<t;w+=r){const C=n[w],b=n[w+1];g+=Math.sqrt((C-d)*(C-d)+(b-f)*(b-f)),m.push(g),d=C,f=b}const v=i*g,x=OX(m,v);x<0?(l=(v-m[-x-2])/(m[-x-1]-m[-x-2]),a=e+(-x-2)*r):a=e+x*r}o=o>1?o:2,s=s||new Array(o);for(let d=0;d<o;++d)s[d]=a===void 0?NaN:l===void 0?n[a+d]:Jr(n[a+d],n[a+r+d],l);return s}function kw(n,e,t,r,i,s){if(t==e)return null;let o;if(i<n[e+r-1])return s?(o=n.slice(e,e+r),o[r-1]=i,o):null;if(n[t-1]<i)return s?(o=n.slice(t-r,t),o[r-1]=i,o):null;if(i==n[e+r-1])return n.slice(e,e+r);let a=e/r,l=t/r;for(;a<l;){const g=a+l>>1;i<n[(g+1)*r-1]?l=g:a=g+1}const u=n[a*r-1];if(i==u)return n.slice((a-1)*r,(a-1)*r+r);const d=n[(a+1)*r-1],f=(i-u)/(d-u);o=[];for(let g=0;g<r-1;++g)o.push(Jr(n[(a-1)*r+g],n[a*r+g],f));return o.push(i),o}function U8(n,e,t,r,i,s,o){if(o)return kw(n,e,t[t.length-1],r,i,s);let a;if(i<n[r-1])return s?(a=n.slice(0,r),a[r-1]=i,a):null;if(n[n.length-1]<i)return s?(a=n.slice(n.length-r),a[r-1]=i,a):null;for(let l=0,u=t.length;l<u;++l){const d=t[l];if(e!=d){if(i<n[e+r-1])return null;if(i<=n[d-1])return kw(n,e,d,r,i,!1);e=d}}return null}function iL(n,e,t,r){let i=n[e],s=n[e+1],o=0;for(let a=e+r;a<t;a+=r){const l=n[a],u=n[a+1];o+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return o}class fo extends ja{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Ci(this.flatCoordinates,e),this.changed()}clone(){const e=new fo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Rl(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_S(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return SD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,kw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Om(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return iL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=jy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new fo(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return zy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ny(this.flatCoordinates,0,e,this.stride),this.changed()}}class Id extends ja{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],o=[];for(let l=0,u=i.length;l<u;++l){const d=i[l];Ci(s,d.getFlatCoordinates()),o.push(s.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Ci(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Id(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Rl(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xS(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),wS(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,U8(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return vd(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new fo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],u=new fo(e.slice(s,l),r);i.push(u),s=l}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let o=0,a=i.length;o<a;++o){const l=i[o],u=Om(t,r,l,s,.5);Ci(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=xD(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new Id(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return DY(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=CS(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Ky extends ja{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Ci(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Ky(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Rl(this.getExtent(),e,t))return i;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=co(e,t,s[a],s[a+1]);if(u<i){i=u;for(let d=0;d<o;++d)r[d]=s[a+d];r.length=o}}return i}getCoordinates(){return ga(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new xa(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,o=e.length;s<o;s+=r){const a=new xa(e.slice(s,s+r),t);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const o=t[i],a=t[i+1];if(sS(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ny(this.flatCoordinates,0,e,this.stride),this.changed()}}function sL(n,e,t,r){const i=[];let s=ii();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=oS(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}class Md extends ja{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],o=[];for(let a=0,l=i.length;a<l;++a){const u=i[a],d=s.length,f=u.getEnds();for(let g=0,m=f.length;g<m;++g)f[g]+=d;Ci(s,u.getFlatCoordinates()),o.push(f)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=o}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Ci(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new Md(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Rl(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TY(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return OY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return MY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),iR(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,mw(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=sL(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=CD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Ky(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;NY(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=iR(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=IY(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new Md(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=t;return new bo(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),u=l[l.length-1];if(s!==0)for(let f=0,g=l.length;f<g;++f)l[f]-=s;const d=new bo(t.slice(s,u),e,l);i.push(d),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return LY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=RY(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const Be={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},lp=[Be.FILL],ma=[Be.STROKE],hl=[Be.BEGIN_PATH],bR=[Be.CLOSE_PATH];class oL{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class nf extends oL{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)i[0]=e[a],i[1]=e[a+1],nu(r,i)&&(s[o++]=i[0],s[o++]=i[1]);return o}appendFlatLineCoordinates(e,t,r,i,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=i);let d=e[t],f=e[t+1];const g=this.tmpCoordinate_;let m=!0,v,x,w;for(v=t+i;v<r;v+=i)g[0]=e[v],g[1]=e[v+1],w=cw(u,g),w!==x?(m&&(a[l++]=d,a[l++]=f,m=!1),a[l++]=g[0],a[l++]=g[1]):w===Mn.INTERSECTING?(a[l++]=g[0],a[l++]=g[1],m=!1):m=!0,d=g[0],f=g[1],x=w;return(s&&m||v===t+i)&&(a[l++]=d,a[l++]=f),l}drawCustomCoordinates_(e,t,r,i,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,d,f,g,m;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const v=e.getEndss();m=0;for(let x=0,w=v.length;x<w;++x){const C=[];m=this.drawCustomCoordinates_(u,m,v[x],a,C),g.push(C)}this.instructions.push([Be.CUSTOM,l,g,e,r,mw,s]),this.hitDetectionInstructions.push([Be.CUSTOM,l,g,e,i||r,mw,s]);break;case"Polygon":case"MultiLineString":f=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),m=this.drawCustomCoordinates_(u,0,e.getEnds(),a,f),this.instructions.push([Be.CUSTOM,l,f,e,r,vd,s]),this.hitDetectionInstructions.push([Be.CUSTOM,l,f,e,i||r,vd,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),d=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([Be.CUSTOM,l,d,e,r,ga,s]),this.hitDetectionInstructions.push([Be.CUSTOM,l,d,e,i||r,ga,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),d=this.appendFlatPointCoordinates(u,a),d>l&&(this.instructions.push([Be.CUSTOM,l,d,e,r,ga,s]),this.hitDetectionInstructions.push([Be.CUSTOM,l,d,e,i||r,ga,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),d=this.coordinates.length,this.instructions.push([Be.CUSTOM,l,d,e,r,void 0,s]),this.hitDetectionInstructions.push([Be.CUSTOM,l,d,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Be.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Be.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,o=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Be.END_GEOMETRY?o=t:s==Be.BEGIN_GEOMETRY&&(i[2]=t,DX(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const i=e.getColor();r.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,r.fillStyle=_s(i||Mr)}else r.fillStyle=void 0;if(t){const i=t.getColor();r.strokeStyle=_s(i||Sd);const s=t.getLineCap();r.lineCap=s!==void 0?s:ru;const o=t.getLineDash();r.lineDash=o?o.slice():uo;const a=t.getLineDashOffset();r.lineDashOffset=a||ho;const l=t.getLineJoin();r.lineJoin=l!==void 0?l:iu;const u=t.getWidth();r.lineWidth=u!==void 0?u:Ed;const d=t.getMiterLimit();r.miterLimit=d!==void 0?d:Cd,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[Be.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Be.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Na(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Be.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=tD(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;md(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class H8 extends nf{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!nu(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,s);this.instructions.push([Be.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||nu(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([Be.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class X8 extends nf{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),a=[Be.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,uo,ho],hl);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(ma),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,uo,ho],hl);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let d=0;for(let f=0,g=a.length;f<g;++f)d=this.drawFlatCoordinates_(l,d,a[f],u);this.hitDetectionInstructions.push(ma),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ma),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ma),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(hl)}}class ER extends nf{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(hl),this.hitDetectionInstructions.push(hl);for(let u=0;u<l;++u){const d=r[u],f=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,d,i,!0,!a),m=[Be.MOVE_TO_LINE_TO,f,g];this.instructions.push(m),this.hitDetectionInstructions.push(m),a&&(this.instructions.push(bR),this.hitDetectionInstructions.push(bR)),t=d}return o&&(this.instructions.push(lp),this.hitDetectionInstructions.push(lp)),a&&(this.instructions.push(ma),this.hitDetectionInstructions.push(ma)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,Mr]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,uo,ho]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const d=[Be.CIRCLE,u];this.instructions.push(hl,d),this.hitDetectionInstructions.push(hl,d),i.fillStyle!==void 0&&(this.instructions.push(lp),this.hitDetectionInstructions.push(lp)),i.strokeStyle!==void 0&&(this.instructions.push(ma),this.hitDetectionInstructions.push(ma)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,Mr]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,uo,ho]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_FILL_STYLE,Mr]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Be.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,uo,ho]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let d=0;for(let f=0,g=a.length;f<g;++f)d=this.drawFlatCoordinatess_(l,d,a[f],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=rl(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Y8(n,e,t,r,i){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+i<r;){const[u,d]=l.slice(-2),f=e[o+i],g=e[o+i+1],m=Math.sqrt((f-u)*(f-u)+(g-d)*(g-d));if(a+=m,a>=n){const v=(n-a+m)/m,x=Jr(u,f,v),w=Jr(d,g,v);l.push(x,w),s.push(l),l=[x,w],a==n&&(o+=i),a=0}else if(a<n)l.push(e[o+i],e[o+i+1]),o+=i;else{const v=m-a,x=Jr(u,f,v/m),w=Jr(d,g,v/m);l.push(x,w),s.push(l),l=[x,w],a=0,o+=i}}return a>0&&s.push(l),s}function K8(n,e,t,r,i){let s=t,o=t,a=0,l=0,u=t,d,f,g,m,v,x,w,C,b,k;for(f=t;f<r;f+=i){const R=e[f],P=e[f+1];v!==void 0&&(b=R-v,k=P-x,m=Math.sqrt(b*b+k*k),w!==void 0&&(l+=g,d=Math.acos((w*b+C*k)/(g*m)),d>n&&(l>a&&(a=l,s=u,o=f),l=0,u=f-i)),g=m,w=b,C=k),v=R,x=P}return l+=m,l>a?[u,f]:[s,o]}const Dm={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class q8 extends nf{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Mr]={fillStyle:Mr},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!s)return;const a=this.coordinates;let l=a.length;const u=e.getType();let d=null,f=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!pr(this.maxExtent,e.getExtent()))return;let g;if(d=e.getFlatCoordinates(),u=="LineString")g=[d.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const w=e.getEndss();g=[];for(let C=0,b=w.length;C<b;++C)g.push(w[C][0])}this.beginGeometry(e,t,r);const m=o.repeat,v=m?void 0:o.textAlign;let x=0;for(let w=0,C=g.length;w<C;++w){let b;m?b=Y8(m*this.resolution,d,x,g[w],f):b=[d.slice(x,g[w])];for(let k=0,R=b.length;k<R;++k){const P=b[k];let A=0,O=P.length;if(v==null){const j=K8(o.maxAngle,P,0,P.length,2);A=j[0],O=j[1]}for(let j=A;j<O;j+=f)a.push(P[j],P[j+1]);const D=a.length;x=g[w],this.drawChars_(l,D),l=D}}this.endGeometry(t)}else{let g=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":d=e.getFlatCoordinates();break;case"LineString":d=e.getFlatMidpoint();break;case"Circle":d=e.getCenter();break;case"MultiLineString":d=e.getFlatMidpoints(),f=2;break;case"Polygon":d=e.getFlatInteriorPoint(),o.overflow||g.push(d[2]/this.resolution),f=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();d=[];for(let k=0,R=b.length;k<R;k+=3)o.overflow||g.push(b[k+2]/this.resolution),d.push(b[k],b[k+1]);if(d.length===0)return;f=2;break}const m=this.appendFlatPointCoordinates(d,f);if(m===l)return;if(g&&(m-l)/2!==d.length/f){let b=l/2;g=g.filter((k,R)=>{const P=a[(b+R)*2]===d[R*f]&&a[(b+R)*2+1]===d[R*f+1];return P||--b,P})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let v=o.padding;if(v!=ul&&(o.scale[0]<0||o.scale[1]<0)){let b=o.padding[0],k=o.padding[1],R=o.padding[2],P=o.padding[3];o.scale[0]<0&&(k=-k,P=-P),o.scale[1]<0&&(b=-b,R=-R),v=[b,k,R,P]}const x=this.pixelRatio;this.instructions.push([Be.DRAW_IMAGE,l,m,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,v==ul?ul:v.map(function(b){return b*x}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const w=1/x,C=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Mr,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Be.DRAW_IMAGE,l,m,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,this.declutterMode_,this.declutterImageWithText_,v,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Mr:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),o.backgroundFill&&(this.state.fillStyle=C,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||bd,justify:t.justify,textBaseline:t.textBaseline||km,scale:t.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Dm[i.textBaseline],d=this.textOffsetY_*l,f=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Be.DRAW_CHARS,e,t,u,i.overflow,a,i.maxAngle,l,d,s,g*l,f,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Be.DRAW_CHARS,e,t,u,i.overflow,a&&Mr,i.maxAngle,l,d,s,g*l,f,o,1/l,this.declutterMode_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=_s(o.getColor()||Mr)):(i=null,this.textFillState_=i);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=a.getLineDash(),x=a.getLineDashOffset(),w=a.getWidth(),C=a.getMiterLimit();s.lineCap=a.getLineCap()||ru,s.lineDash=v?v.slice():uo,s.lineDashOffset=x===void 0?ho:x,s.lineJoin=a.getLineJoin()||iu,s.lineWidth=w===void 0?Ed:w,s.miterLimit=C===void 0?Cd:C,s.strokeStyle=_s(a.getColor()||Sd)}r=this.textState_;const l=e.getFont()||ND;m9(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||km,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||ul,r.scale=u===void 0?[1,1]:u;const d=e.getOffsetX(),f=e.getOffsetY(),g=e.getRotateWithView(),m=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=d===void 0?0:d,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=g===void 0?!1:g,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ft(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+ft(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Z8={Circle:ER,Default:nf,Image:H8,LineString:X8,Polygon:ER,Text:q8};class J8{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const o=Z8[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}class Q8 extends Yd{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return wt()}getData(e){return null}prepareFrame(e){return wt()}renderFrame(e,t){return wt()}loadedTileCallback(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}createLoadedTileFinder(e,t,r){return(i,s)=>{const o=this.loadedTileCallback.bind(this,r,i);return e.forEachLoadedTile(t,i,s,o)}}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ot.LOADED||t.getState()===ot.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ot.LOADED&&t!=ot.ERROR&&e.addEventListener(tt.CHANGE,this.boundHandleImageChange_),t==ot.IDLE&&(e.load(),t=e.getState()),t==ot.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class aL{constructor(){GE(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Tm(),{get:(e,t)=>{if(typeof Tm()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const o=t[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const TR=[];let bc=null;function eK(){bc=Bn(1,1,void 0,{willReadFrequently:!0})}class lL extends Q8{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Yi(),this.pixelTransform=Yi(),this.inversePixelTransform=Yi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,r){bc||eK(),bc.clearRect(0,0,1,1);let i;try{bc.drawImage(e,t,r,1,1,0,0,1,1),i=bc.getImageData(0,0,1,1).data}catch{return bc=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Na(wd(e.style.backgroundColor),wd(r)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Bn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Pl(r),s=Dy(r),o=Oy(r),a=Ay(r);Nn(t.coordinateToPixelTransform,i),Nn(t.coordinateToPixelTransform,s),Nn(t.coordinateToPixelTransform,o),Nn(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Nn(l,i),Nn(l,s),Nn(l,o),Nn(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Et(r)/i*o),l=Math.round(Jn(r)/i*o);So(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),mD(this.inversePixelTransform,this.pixelTransform);const u=wY(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const d=this.context.canvas;d.width!=a||d.height!=l?(d.width=a,d.height=l):this.context.clearRect(0,0,a,l),u!==d.style.transform&&(d.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new qD(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(xi.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(xi.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new aL),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(xi.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(xi.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,o,a){const l=s/2,u=o/2,d=i/t,f=-d,g=-e[0]+a,m=-e[1];return So(this.tempTransform,l,u,d,f,-r,g,m)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function tK(n,e,t,r,i,s,o,a,l,u,d,f){let g=n[e],m=n[e+1],v=0,x=0,w=0,C=0;function b(){v=g,x=m,e+=r,g=n[e],m=n[e+1],C+=w,w=Math.sqrt((g-v)*(g-v)+(m-x)*(m-x))}do b();while(e<t-r&&C+w<s);let k=w===0?0:(s-C)/w;const R=Jr(v,g,k),P=Jr(x,m,k),A=e-r,O=C,D=s+a*l(u,i,d);for(;e<t-r&&C+w<D;)b();k=w===0?0:(D-C)/w;const j=Jr(v,g,k),Q=Jr(x,m,k);let X;if(f){const U=[R,P,j,Q];yS(U,0,4,2,f,U,U),X=U[0]>U[2]}else X=R>j;const W=Math.PI,G=[],V=A+r===e;e=A,w=0,C=O,g=n[e],m=n[e+1];let ne;if(V){b(),ne=Math.atan2(m-x,g-v),X&&(ne+=ne>0?-W:W);const U=(j+R)/2,oe=(Q+P)/2;return G[0]=[U,oe,(D-s)/2,ne,i],G}i=i.replace(/\n/g," ");for(let U=0,oe=i.length;U<oe;){b();let F=Math.atan2(m-x,g-v);if(X&&(F+=F>0?-W:W),ne!==void 0){let ee=F-ne;if(ee+=ee>W?-2*W:ee<-W?2*W:0,Math.abs(ee)>o)return null}ne=F;const K=U;let I=0;for(;U<oe;++U){const ee=X?oe-U-1:U,be=a*l(u,i[ee],d);if(e+r<t&&C+w<s+I+be/2)break;I+=be}if(U===K)continue;const N=X?i.substring(oe-K,oe-U):i.substring(K,U);k=w===0?0:(s+I/2-C)/w;const q=Jr(v,g,k),L=Jr(x,m,k);G.push([q,L,I/2,F,N]),s+=I}return G}const hc=ii(),Qo=[],$s=[],Us=[],ea=[];function kR(n){return n[3].declutterBox}const RR=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Bx(n,e){return e==="start"?e=RR.test(n)?"right":"left":e==="end"&&(e=RR.test(n)?"left":"right"),Dm[e]}function nK(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class rK{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Yi(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new aL:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const o=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,d=[l.scale[0]*u,l.scale[1]*u],f=Array.isArray(e),g=l.justify?Dm[l.justify]:Bx(Array.isArray(e)?e[0]:e,l.textAlign||bd),m=i&&o.lineWidth?o.lineWidth:0,v=f?e:e.split(`
`).reduce(nK,[]),{width:x,height:w,widths:C,heights:b,lineWidths:k}=v9(l,v),R=x+m,P=[],A=(R+2)*d[0],O=(w+m)*d[1],D={width:A<0?Math.floor(A):Math.ceil(A),height:O<0?Math.floor(O):Math.ceil(O),contextInstructions:P};(d[0]!=1||d[1]!=1)&&P.push("scale",d),i&&(P.push("strokeStyle",o.strokeStyle),P.push("lineWidth",m),P.push("lineCap",o.lineCap),P.push("lineJoin",o.lineJoin),P.push("miterLimit",o.miterLimit),P.push("setLineDash",[o.lineDash]),P.push("lineDashOffset",o.lineDashOffset)),r&&P.push("fillStyle",a.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");const j=.5-g;let Q=g*R+j*m;const X=[],W=[];let G=0,V=0,ne=0,U=0,oe;for(let F=0,K=v.length;F<K;F+=2){const I=v[F];if(I===`
`){V+=G,G=0,Q=g*R+j*m,++U;continue}const N=v[F+1]||l.font;N!==oe&&(i&&X.push("font",N),r&&W.push("font",N),oe=N),G=Math.max(G,b[ne]);const q=[I,Q+j*C[ne]+g*(C[ne]-k[U]),.5*(m+G)+V];Q+=C[ne],i&&X.push("strokeText",q),r&&W.push("fillText",q),++ne}return Array.prototype.push.apply(P,X),Array.prototype.push.apply(P,W),this.labels_[s]=D,D}replayTextBackground_(e,t,r,i,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,o,a,l,u,d,f,g,m,v,x,w){a*=g[0],l*=g[1];let C=r-a,b=i-l;const k=s+u>e?e-u:s,R=o+d>t?t-d:o,P=v[3]+k*g[0]+v[1],A=v[0]+R*g[1]+v[2],O=C-v[3],D=b-v[0];(x||f!==0)&&(Qo[0]=O,ea[0]=O,Qo[1]=D,$s[1]=D,$s[0]=O+P,Us[0]=$s[0],Us[1]=D+A,ea[1]=Us[1]);let j;return f!==0?(j=So(Yi(),r,i,1,1,f,-r,-i),Nn(j,Qo),Nn(j,$s),Nn(j,Us),Nn(j,ea),Co(Math.min(Qo[0],$s[0],Us[0],ea[0]),Math.min(Qo[1],$s[1],Us[1],ea[1]),Math.max(Qo[0],$s[0],Us[0],ea[0]),Math.max(Qo[1],$s[1],Us[1],ea[1]),hc)):Co(Math.min(O,O+P),Math.min(D,D+A),Math.max(O,O+P),Math.max(D,D+A),hc),m&&(C=Math.round(C),b=Math.round(b)),{drawImageX:C,drawImageY:b,drawImageW:k,drawImageH:R,originX:u,originY:d,declutterBox:{minX:hc[0],minY:hc[1],maxX:hc[2],maxY:hc[3],value:w},canvasTransform:j,scale:g}}replayImageOrLabel_(e,t,r,i,s,o,a){const l=!!(o||a),u=i.declutterBox,d=a?a[2]*i.scale[0]/2:0;return u.minX-d<=t[0]&&u.maxX+d>=0&&u.minY-d<=t[1]&&u.maxY+d>=0&&(l&&this.replayTextBackground_(e,Qo,$s,Us,ea,o,a),x9(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=Nn(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],o=this.createLabel(e,t,i,r),a=this.strokeStates[r],l=this.pixelRatio,u=Bx(Array.isArray(e)?e[0]:e,s.textAlign||bd),d=Dm[s.textBaseline||km],f=a&&a.lineWidth?a.lineWidth:0,g=o.width/l-2*s.scale[0],m=u*g+2*(.5-u)*f,v=d*o.height/l+2*(.5-d)*f;return{label:o,anchorX:m,anchorY:v}}execute_(e,t,r,i,s,o,a,l){const u=this.zIndexContext_;let d;this.pixelCoordinates_&&Na(r,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=va(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),xY(this.renderedTransform_,r));let f=0;const g=i.length;let m=0,v,x,w,C,b,k,R,P,A,O,D,j,Q,X=0,W=0,G=null,V=null;const ne=this.coordinateCache_,U=this.viewRotation_,oe=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:U},K=this.instructions!=i||this.overlaps?0:200;let I,N,q,L;for(;f<g;){const ee=i[f];switch(ee[0]){case Be.BEGIN_GEOMETRY:I=ee[1],L=ee[3],I.getGeometry()?a!==void 0&&!pr(a,L.getExtent())?f=ee[2]+1:++f:f=ee[2],u&&(u.zIndex=ee[4]);break;case Be.BEGIN_PATH:X>K&&(this.fill_(e),X=0),W>K&&(e.stroke(),W=0),!X&&!W&&(e.beginPath(),b=NaN,k=NaN),++f;break;case Be.CIRCLE:m=ee[1];const pe=d[m],ce=d[m+1],ve=d[m+2],Se=d[m+3],Ce=ve-pe,Ue=Se-ce,Ke=Math.sqrt(Ce*Ce+Ue*Ue);e.moveTo(pe+Ke,ce),e.arc(pe,ce,Ke,0,2*Math.PI,!0),++f;break;case Be.CLOSE_PATH:e.closePath(),++f;break;case Be.CUSTOM:m=ee[1],v=ee[2];const Dt=ee[3],Mt=ee[4],xn=ee[5];F.geometry=Dt,F.feature=I,f in ne||(ne[f]=[]);const Ht=ne[f];xn?xn(d,m,v,2,Ht):(Ht[0]=d[m],Ht[1]=d[m+1],Ht.length=2),u&&(u.zIndex=ee[6]),Mt(Ht,F),++f;break;case Be.DRAW_IMAGE:m=ee[1],v=ee[2],A=ee[3],x=ee[4],w=ee[5];let nn=ee[6];const Br=ee[7],Dn=ee[8],rn=ee[9],Bt=ee[10];let B=ee[11];const ie=ee[12];let ue=ee[13];C=ee[14]||"declutter";const Ee=ee[15];if(!A&&ee.length>=20){O=ee[19],D=ee[20],j=ee[21],Q=ee[22];const or=this.drawLabelWithPointPlacement_(O,D,j,Q);A=or.label,ee[3]=A;const rs=ee[23];x=(or.anchorX-rs)*this.pixelRatio,ee[4]=x;const Gn=ee[24];w=(or.anchorY-Gn)*this.pixelRatio,ee[5]=w,nn=A.height,ee[6]=nn,ue=A.width,ee[13]=ue}let H;ee.length>25&&(H=ee[25]);let te,he,_e;ee.length>17?(te=ee[16],he=ee[17],_e=ee[18]):(te=ul,he=!1,_e=!1),Bt&&oe?B+=U:!Bt&&!oe&&(B-=U);let Ve=0;for(;m<v;m+=2){if(H&&H[Ve++]<ue/this.pixelRatio)continue;const or=this.calculateImageOrLabelDimensions_(A.width,A.height,d[m],d[m+1],ue,nn,x,w,Dn,rn,B,ie,s,te,he||_e,I),rs=[e,t,A,or,Br,he?G:null,_e?V:null];if(l){let Gn,Gr,Tn;if(Ee){const Gt=v-m;if(!Ee[Gt]){Ee[Gt]={args:rs,declutterMode:C};continue}const sn=Ee[Gt];Gn=sn.args,Gr=sn.declutterMode,delete Ee[Gt],Tn=kR(Gn)}let Wr,ar;if(Gn&&(Gr!=="declutter"||!l.collides(Tn))&&(Wr=!0),(C!=="declutter"||!l.collides(or.declutterBox))&&(ar=!0),Gr==="declutter"&&C==="declutter"){const Gt=Wr&&ar;Wr=Gt,ar=Gt}Wr&&(Gr!=="none"&&l.insert(Tn),this.replayImageOrLabel_.apply(this,Gn)),ar&&(C!=="none"&&l.insert(or.declutterBox),this.replayImageOrLabel_.apply(this,rs))}else this.replayImageOrLabel_.apply(this,rs)}++f;break;case Be.DRAW_CHARS:const ut=ee[1],xr=ee[2],dn=ee[3],_r=ee[4];Q=ee[5];const Ei=ee[6],Xt=ee[7],sr=ee[8];j=ee[9];const fn=ee[10];O=ee[11],D=ee[12];const Al=[ee[13],ee[13]];C=ee[14]||"declutter";const Va=this.textStates[D],si=Va.font,oi=[Va.scale[0]*Xt,Va.scale[1]*Xt];let Po;si in this.widths_?Po=this.widths_[si]:(Po={},this.widths_[si]=Po);const Pu=iL(d,ut,xr,2),Iu=Math.abs(oi[0])*gR(si,O,Po);if(_r||Iu<=Pu){const or=this.textStates[D].textAlign,rs=(Pu-Iu)*Bx(O,or),Gn=tK(d,ut,xr,2,O,rs,Ei,Math.abs(oi[0]),gR,si,Po,oe?0:this.viewRotation_);e:if(Gn){const Gr=[];let Tn,Wr,ar,Gt,sn;if(j)for(Tn=0,Wr=Gn.length;Tn<Wr;++Tn){sn=Gn[Tn],ar=sn[4],Gt=this.createLabel(ar,D,"",j),x=sn[2]+(oi[0]<0?-fn:fn),w=dn*Gt.height+(.5-dn)*2*fn*oi[1]/oi[0]-sr;const wr=this.calculateImageOrLabelDimensions_(Gt.width,Gt.height,sn[0],sn[1],Gt.width,Gt.height,x,w,0,0,sn[3],Al,!1,ul,!1,I);if(l&&C==="declutter"&&l.collides(wr.declutterBox))break e;Gr.push([e,t,Gt,wr,1,null,null])}if(Q)for(Tn=0,Wr=Gn.length;Tn<Wr;++Tn){sn=Gn[Tn],ar=sn[4],Gt=this.createLabel(ar,D,Q,""),x=sn[2],w=dn*Gt.height-sr;const wr=this.calculateImageOrLabelDimensions_(Gt.width,Gt.height,sn[0],sn[1],Gt.width,Gt.height,x,w,0,0,sn[3],Al,!1,ul,!1,I);if(l&&C==="declutter"&&l.collides(wr.declutterBox))break e;Gr.push([e,t,Gt,wr,1,null,null])}l&&C!=="none"&&l.load(Gr.map(kR));for(let wr=0,Ol=Gr.length;wr<Ol;++wr)this.replayImageOrLabel_.apply(this,Gr[wr])}}++f;break;case Be.END_GEOMETRY:if(o!==void 0){I=ee[1];const or=o(I,L,C);if(or)return or}++f;break;case Be.FILL:K?X++:this.fill_(e),++f;break;case Be.MOVE_TO_LINE_TO:for(m=ee[1],v=ee[2],N=d[m],q=d[m+1],e.moveTo(N,q),b=N+.5|0,k=q+.5|0,m+=2;m<v;m+=2)N=d[m],q=d[m+1],R=N+.5|0,P=q+.5|0,(m==v-2||R!==b||P!==k)&&(e.lineTo(N,q),b=R,k=P);++f;break;case Be.SET_FILL_STYLE:G=ee,this.alignAndScaleFill_=ee[2],X&&(this.fill_(e),X=0,W&&(e.stroke(),W=0)),e.fillStyle=ee[1],++f;break;case Be.SET_STROKE_STYLE:V=ee,W&&(e.stroke(),W=0),this.setStrokeStyle_(e,ee),++f;break;case Be.STROKE:K?W++:e.stroke(),++f;break;default:++f;break}}X&&this.fill_(e),W&&e.stroke()}execute(e,t,r,i,s,o){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const Ic=["Polygon","Circle","LineString","Image","Text","Default"],cL=["Image","Text"],iK=Ic.filter(n=>!cL.includes(n));class sK{constructor(e,t,r,i,s,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const o in s){const a=s[o];i[o]=new rK(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,o){i=Math.round(i);const a=i*2+1,l=So(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Bn(a,a,void 0,{willReadFrequently:!0}));const d=this.hitDetectionContext_;d.canvas.width!==a||d.canvas.height!==a?(d.canvas.width=a,d.canvas.height=a):u||d.clearRect(0,0,a,a);let f;this.renderBuffer_!==void 0&&(f=ii(),Kh(f,e),md(f,t*(this.renderBuffer_+i),f));const g=oK(i);let m;function v(P,A,O){const D=d.getImageData(0,0,a,a).data;for(let j=0,Q=g.length;j<Q;j++)if(D[g[j]]>0){if(!o||O==="none"||m!=="Image"&&m!=="Text"||o.includes(P)){const X=(g[j]-3)/4,W=i-X%a,G=i-(X/a|0),V=s(P,A,W*W+G*G);if(V)return V}d.clearRect(0,0,a,a);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(lo);let w,C,b,k,R;for(w=x.length-1;w>=0;--w){const P=x[w].toString();for(b=this.executorsByZIndex_[P],C=Ic.length-1;C>=0;--C)if(m=Ic[C],k=b[m],k!==void 0&&(R=k.executeHitDetection(d,l,r,v,f),R))return R}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],o=t[3],a=[r,i,r,o,s,o,s,i];return va(a,0,8,2,e,a),a}isEmpty(){return eu(this.executorsByZIndex_)}execute(e,t,r,i,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(lo),o=o||Ic;const u=Ic.length;let d,f,g,m,v;for(a&&l.reverse(),d=0,f=l.length;d<f;++d){const x=l[d].toString();for(v=this.executorsByZIndex_[x],g=0,m=o.length;g<m;++g){const w=o[g],C=v[w];if(C!==void 0){const b=a===null?void 0:C.getZIndexContext(),k=b?b.getContext():e,R=this.maxExtent_&&w!=="Image"&&w!=="Text";if(R&&(k.save(),this.clip(k,r)),!b||w==="Text"||w==="Image"?C.execute(k,t,r,i,s,a):b.pushFunction(P=>C.execute(P,t,r,i,s,a)),R&&k.restore(),b){b.offset();const P=l[d]*u+g;this.deferredZIndexContexts_[P]||(this.deferredZIndexContexts_[P]=[]),this.deferredZIndexContexts_[P].push(b)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(lo);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const Gx={};function oK(n){if(Gx[n]!==void 0)return Gx[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=r[a];l||(l=[],r[a]=l),l.push(((n+s)*e+(n+o))*4+3),s>0&&l.push(((n-s)*e+(n+o))*4+3),o>0&&(l.push(((n+s)*e+(n-o))*4+3),s>0&&l.push(((n-s)*e+(n-o))*4+3))}const i=[];for(let s=0,o=r.length;s<o;++s)r[s]&&i.push(...r[s]);return Gx[n]=i,i}class aK extends oL{constructor(e,t,r,i,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Kd(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yi()}drawImages_(e,t,r,i){if(!this.image_)return;const s=va(e,t,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let d=0,f=s.length;d<f;d+=2){const g=s[d]-this.imageAnchorX_,m=s[d+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=g+this.imageAnchorX_,x=m+this.imageAnchorY_;So(a,v,x,1,1,u,-v,-x),o.save(),o.transform.apply(o,a),o.translate(v,x),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=va(e,t,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const o=this.context_,a=va(e,t,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),r}drawRings_(e,t,r,i){for(let s=0,o=r.length;s<o;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pr(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=EY(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pr(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(pr(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(i,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!pr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];i=this.drawRings_(r,i,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Na(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:bd;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:_s(r||Mr)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),d=s||uo;this.strokeState_={lineCap:i!==void 0?i:ru,lineDash:this.pixelRatio_===1?d:d.map(f=>f*this.pixelRatio_),lineDashOffset:(o||ho)*this.pixelRatio_,lineJoin:a!==void 0?a:iu,lineWidth:(l!==void 0?l:Ed)*this.pixelRatio_,miterLimit:u!==void 0?u:Cd,strokeStyle:_s(r||Sd)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const m=t.getColor();this.textFillState_={fillStyle:_s(m||Mr)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const m=r.getColor(),v=r.getLineCap(),x=r.getLineDash(),w=r.getLineDashOffset(),C=r.getLineJoin(),b=r.getWidth(),k=r.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:ru,lineDash:x||uo,lineDashOffset:w||ho,lineJoin:C!==void 0?C:iu,lineWidth:b!==void 0?b:Ed,miterLimit:k!==void 0?k:Cd,strokeStyle:_s(m||Sd)}}const i=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),d=e.getText(),f=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:ND,textAlign:f!==void 0?f:bd,textBaseline:g!==void 0?g:km},this.text_=d!==void 0?Array.isArray(d)?d.reduce((m,v,x)=>m+=x%2?" ":v,""):d:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const ps=.5;function lK(n,e,t,r,i,s,o,a,l){const u=i,d=n[0]*ps,f=n[1]*ps,g=Bn(d,f);g.imageSmoothingEnabled=!1;const m=g.canvas,v=new aK(g,ps,i,null,o,a,null),x=t.length,w=Math.floor((256*256*256-1)/x),C={};for(let k=1;k<=x;++k){const R=t[k-1],P=R.getStyleFunction()||r;if(!P)continue;let A=P(R,s);if(!A)continue;Array.isArray(A)||(A=[A]);const D=(k*w).toString(16).padStart(7,"#00000");for(let j=0,Q=A.length;j<Q;++j){const X=A[j],W=X.getGeometryFunction()(R);if(!W||!pr(u,W.getExtent()))continue;const G=X.clone(),V=G.getFill();V&&V.setColor(D);const ne=G.getStroke();ne&&(ne.setColor(D),ne.setLineDash(null)),G.setText(void 0);const U=X.getImage();if(U){const I=U.getImageSize();if(!I)continue;const N=Bn(I[0],I[1],void 0,{alpha:!1}),q=N.canvas;N.fillStyle=D,N.fillRect(0,0,q.width,q.height),G.setImage(new $y({img:q,anchor:U.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:U.getOrigin(),opacity:1,size:U.getSize(),scale:U.getScale(),rotation:U.getRotation(),rotateWithView:U.getRotateWithView()}))}const oe=G.getZIndex()||0;let F=C[oe];F||(F={},C[oe]=F,F.Polygon=[],F.Circle=[],F.LineString=[],F.Point=[]);const K=W.getType();if(K==="GeometryCollection"){const I=W.getGeometriesArrayRecursive();for(let N=0,q=I.length;N<q;++N){const L=I[N];F[L.getType().replace("Multi","")].push(L,G)}}else F[K.replace("Multi","")].push(W,G)}}const b=Object.keys(C).map(Number).sort(lo);for(let k=0,R=b.length;k<R;++k){const P=C[b[k]];for(const A in P){const O=P[A];for(let D=0,j=O.length;D<j;D+=2){v.setStyle(O[D+1]);for(let Q=0,X=e.length;Q<X;++Q)v.setTransform(e[Q]),v.drawGeometry(O[D])}}}return g.getImageData(0,0,m.width,m.height)}function cK(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*ps),s=Math.floor(Math.round(n[1])*ps),o=(un(i,0,t.width-1)+un(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],d=t.data[o+2]+256*(l+256*a),f=Math.floor((256*256*256-1)/e.length);d&&d%f===0&&r.push(e[d/f-1])}return r}const uK=.5,uL={Point:vK,LineString:pK,Polygon:_K,MultiPoint:xK,MultiLineString:mK,MultiPolygon:yK,GeometryCollection:gK,Circle:dK};function hK(n,e){return parseInt(ft(n),10)-parseInt(ft(e),10)}function PR(n,e){const t=hL(n,e);return t*t}function hL(n,e){return uK*n/e}function dK(n,e,t,r,i){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,i)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function IR(n,e,t,r,i,s,o,a){const l=[],u=t.getImage();if(u){let g=!0;const m=u.getImageState();m==ot.LOADED||m==ot.ERROR?g=!1:m==ot.IDLE&&u.load(),g&&l.push(u.ready())}const d=t.getFill();d&&d.loading()&&l.push(d.ready());const f=l.length>0;return f&&Promise.all(l).then(()=>i(null)),fK(n,e,t,r,s,o,a),f}function fK(n,e,t,r,i,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,i);if(t.getRenderer())dL(n,l,t,e,o);else{const d=uL[l.getType()];d(n,l,t,e,o,s)}}function dL(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)dL(n,o[a],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function gK(n,e,t,r,i,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=uL[o[a].getType()];u(n,o[a],t,r,i,s)}}function pK(n,e,t,r,i){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,i)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function mK(n,e,t,r,i){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,i)}const o=t.getText();if(o&&o.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function yK(n,e,t,r,i){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,i)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function vK(n,e,t,r,i,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=ot.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(o,u),d.drawPoint(e,r,i)}if(l){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(a,u),d.drawText(e,r,i)}}function xK(n,e,t,r,i,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),d=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=ot.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(o,d),f.drawMultiPoint(e,r,i)}if(u){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(l,d),f.drawText(e,r,i)}}function _K(n,e,t,r,i){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,i)}const a=t.getText();if(a&&a.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}class wK extends lL{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ii(),this.wrappedRenderedExtent_=ii(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,d=l.getExtent(),f=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),m=t.pixelRatio,v=t.viewHints,x=!(v[Zn.ANIMATING]||v[Zn.INTERACTING]),w=this.context,C=Math.round(Et(i)/a*m),b=Math.round(Jn(i)/a*m),k=f.getWrapX()&&l.canWrapX(),R=k?Et(d):null,P=k?Math.ceil((i[2]-d[2])/R)+1:1;let A=k?Math.floor((i[0]-d[0])/R):0;do{let O=this.getRenderTransform(o,a,0,m,C,b,A*R);t.declutter&&(O=O.slice(0)),e.execute(w,[w.canvas.width,w.canvas.height],O,u,x,r===void 0?Ic:r?cL:iK,r?g&&t.declutter[g]:void 0)}while(++A<P)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Bn(this.context.canvas.width,this.context.canvas.height,TR))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Gy(this.context),TR.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(xi.PRERENDER)||this.getLayer().hasListener(xi.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=ll(r.extent);a=pr(l,e.extent),this.clipped_=a&&!Pc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),d=[],f=r[0]*ps,g=r[1]*ps;d.push(this.getRenderTransform(i,s,o,ps,f,g,0).slice());const m=u.getSource(),v=a.getExtent();if(m.getWrapX()&&a.canWrapX()&&!Pc(v,l)){let x=l[0];const w=Et(v);let C=0,b;for(;x<v[0];)--C,b=w*C,d.push(this.getRenderTransform(i,s,o,ps,f,g,b).slice()),x+=w;for(C=0,x=l[2];x>v[2];)++C,b=w*C,d.push(this.getRenderTransform(i,s,o,ps,f,g,b).slice()),x-=w}this.hitDetectionImageData_=lK(r,d,this.renderedFeatures_,u.getStyleFunction(),l,s,o,PR(s,this.renderedPixelRatio_))}t(cK(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},d=function(v,x,w){const C=ft(v),b=u[C];if(b){if(b!==!0&&w<b.distanceSq){if(w===0)return u[C]=!0,s.splice(s.lastIndexOf(b),1),i(v,l,x);b.geometry=x,b.distanceSq=w}}else{if(w===0)return u[C]=!0,i(v,l,x);s.push(u[C]={feature:v,layer:l,geometry:x,distanceSq:w,callback:i})}};let f;const g=[this.replayGroup_],m=this.getLayer().getDeclutter();return g.some(v=>f=v.forEachFeatureAtCoordinate(e,o,a,r,d,m&&t.declutter[m]?t.declutter[m].all().map(x=>x.value):null)),f}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Zn.ANIMATING],s=e.viewHints[Zn.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,d=u.projection,f=u.resolution,g=e.pixelRatio,m=t.getRevision(),v=t.getRenderBuffer();let x=t.getRenderOrder();x===void 0&&(x=hK);const w=u.center.slice(),C=md(l,v*f),b=C.slice(),k=[C.slice()],R=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!Pc(R,e.extent)){const V=Et(R),ne=Math.max(Et(C)/2,V);C[0]=R[0]-ne,C[2]=R[2]+ne,cS(w,d);const U=sD(k[0],d);U[0]<R[0]&&U[2]<R[2]?k.push([U[0]+V,U[1],U[2]+V,U[3]]):U[0]>R[0]&&U[2]>R[2]&&k.push([U[0]-V,U[1],U[2]-V,U[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==m&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!e.declutter&&Pc(this.wrappedRenderedExtent_,C))return Na(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const P=new J8(hL(f,g),C,f,g);let A;for(let V=0,ne=k.length;V<ne;++V)r.loadFeatures(k[V],f,d);const O=PR(f,g);let D=!0;const j=(V,ne)=>{let U;const oe=V.getStyleFunction()||t.getStyleFunction();if(oe&&(U=oe(V,f)),U){const F=this.renderFeature(V,O,U,P,A,this.getLayer().getDeclutter(),ne);D=D&&!F}},Q=gD(C),X=r.getFeaturesInExtent(Q);x&&X.sort(x);for(let V=0,ne=X.length;V<ne;++V)j(X[V],V);this.renderedFeatures_=X,this.ready=D;const W=P.finish(),G=new sK(C,f,g,r.getOverlaps(),W,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=f,this.renderedRevision_=m,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=b,this.wrappedRenderedExtent_=C,this.renderedCenter_=w,this.renderedProjection_=d,this.renderedPixelRatio_=g,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,d=r.length;u<d;++u)l=IR(i,e,r[u],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=IR(i,e,r,t,this.boundHandleStyleImageChange_,s,o,a);return l}}class zS extends KD{constructor(e){super(e)}createRenderer(){return new wK(this)}}class MR{constructor(e){this.rbush_=new RD(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[ft(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const o=e[i],a=t[i],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[i]=l,this.items_[ft(a)]=l}this.rbush_.load(r)}remove(e){const t=ft(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[ft(t)],i=[r.minX,r.minY,r.maxX,r.maxY];yd(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return eu(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Co(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const AR=Yi();class mi{constructor(e,t,r,i,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?nD(this.flatCoordinates_):oS(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Pa(this.getExtent());this.flatInteriorPoints_=ES(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=jY(this.flatCoordinates_,this.ends_),t=sL(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=CD(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Om(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const o=r[i],a=Om(e,t,o,2,.5);Ci(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=zr(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Jn(r)/Jn(t);So(AR,r[0],r[3],i,-i,0,0,0),va(this.flatCoordinates_,0,this.flatCoordinates_.length,2,AR,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new mi(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=JO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=jy(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=xD(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=SS(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new mi(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}mi.prototype.getFlatCoordinates=mi.prototype.getOrientedFlatCoordinates;class fL extends Os{constructor(e){super(),this.projection=zr(e.projection),this.attributions_=OR(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=OR(e),this.changed()}setState(e){this.state_=e,this.changed()}}function OR(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}const gi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function CK(n,e){return[[-1/0,-1/0,1/0,1/0]]}let SK=!1;function bK(n,e,t,r,i,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=SK,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let d;u=="text"||u=="json"?d=a.responseText:u=="xml"?d=a.responseXML||a.responseText:u=="arraybuffer"&&(d=a.response),d?s(e.readFeatures(d,{extent:t,featureProjection:i}),e.readProjection(d)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function DR(n,e){return function(t,r,i,s,o){const a=this;bK(n,e,t,r,i,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||Qc)}}class ta extends ts{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class gL extends fL{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Qc,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(yt(this.format_,"`format` must be set when `url` is set"),this.loader_=DR(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:CK;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new MR:null,this.loadedExtentsRtree_=new MR,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new $i(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ft(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new ta(gi.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof mi||(this.featureChangeKeys_[e]=[dt(t,tt.CHANGE,this.handleFeatureChange_,this),dt(t,Jc.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof mi){const s=this.idIndex_[i];s instanceof mi?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(yt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=ft(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=ft(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const d=u.getExtent();t.push(d),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(gi.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new ta(gi.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(gi.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(gi.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(On.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(On.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Vt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const r=i=>{this.removeFeatureInternal(i)};this.featuresRtree_.forEach(r);for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new ta(gi.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof mi||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof mi||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),eu(this.nullGeometryFeatures_)||Ci(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=oD(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Ra,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const d=u.getGeometry(),f=a;if(a=d instanceof mi?0:d.closestPointXY(r,i,o,a),a<f){s=u;const g=Math.sqrt(a);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=ft(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new ta(gi.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ft(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&eu(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];i.forEachInExtent(l,function(d){return Pc(d.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ta(gi.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,d=>{--this.loadingExtentsCount_,this.dispatchEvent(new ta(gi.FEATURESLOADEND,void 0,d))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ta(gi.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let r;t.forEachInExtent(e,function(i){if(yd(i.extent,e))return r=i,!0}),r&&t.remove(r)}removeFeatures(e){const t=[];for(let r=0,i=e.length;r<i;++r){const s=e[r],o=this.removeFeatureInternal(s);o&&t.push(o)}t.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ft(e);if(!(t in this.uidIndex_))return;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(Vt),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(gi.REMOVEFEATURE)&&this.dispatchEvent(new ta(gi.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const r in this.idIndex_){const i=this.idIndex_[r];if(e instanceof mi&&Array.isArray(i)&&i.includes(e))i.splice(i.indexOf(e),1);else if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){yt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(DR(e,this.format_))}}const cp={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class up extends ts{constructor(e,t){super(e),this.feature=t}}function EK(n,e){const t=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();pL(n,s,t)}return t}function hp(n,e){return co(n[0],n[1],e[0],e[1])}function Mc(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function dp(n,e,t){let r,i;e<t?(r=e,i=t):(r=t,i=e);const s=Math.ceil(r),o=Math.floor(i);if(s>o){const l=Ac(n,r),u=Ac(n,i);return hp(l,u)}let a=0;if(r<s){const l=Ac(n,r),u=Mc(n,s);a+=hp(l,u)}if(o<i){const l=Mc(n,o),u=Ac(n,i);a+=hp(l,u)}for(let l=s;l<o-1;++l){const u=Mc(n,l),d=Mc(n,l+1);a+=hp(u,d)}return a}function pL(n,e,t){if(e instanceof fo){fp(n,e.getCoordinates(),!1,t);return}if(e instanceof Id){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)fp(n,r[i],!1,t);return}if(e instanceof bo){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)fp(n,r[i],!0,t);return}if(e instanceof Md){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a)fp(n,o[a],!0,t)}return}if(e instanceof Am){const r=e.getGeometries();for(let i=0;i<r.length;++i)pL(n,r[i],t);return}}const Wx={index:-1,endIndex:NaN};function TK(n,e,t,r){const i=n[0],s=n[1];let o=1/0,a=-1,l=NaN;for(let f=0;f<e.targets.length;++f){const g=e.targets[f],m=g.coordinates;let v=1/0,x;for(let w=0;w<m.length-1;++w){const C=m[w],b=m[w+1],k=mL(i,s,C,b);k.squaredDistance<v&&(v=k.squaredDistance,x=w+k.along)}v<o&&(o=v,g.ring&&e.targetIndex===f&&(g.endIndex>g.startIndex?x<g.startIndex&&(x+=m.length):g.endIndex<g.startIndex&&x>g.startIndex&&(x-=m.length)),l=x,a=f)}const u=e.targets[a];let d=u.ring;if(e.targetIndex===a&&d){const f=Ac(u.coordinates,l),g=t.getPixelFromCoordinate(f);cD(g,e.startPx)>r&&(d=!1)}if(d){const f=u.coordinates,g=f.length,m=u.startIndex,v=l;if(m<v){const x=dp(f,m,v);dp(f,m,v-g)<x&&(l-=g)}else{const x=dp(f,m,v);dp(f,m,v+g)<x&&(l+=g)}}return Wx.index=a,Wx.endIndex=l,Wx}function fp(n,e,t,r){const i=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],u=e[o+1],d=mL(i,s,l,u);if(d.squaredDistance===0){const f=o+d.along;r.push({coordinates:e,ring:t,startIndex:f,endIndex:f});return}}}const $x={along:0,squaredDistance:0};function mL(n,e,t,r){const i=t[0],s=t[1],o=r[0],a=r[1],l=o-i,u=a-s;let d=0,f=i,g=s;return(l!==0||u!==0)&&(d=un(((n-i)*l+(e-s)*u)/(l*l+u*u),0,1),f+=l*d,g+=u*d),$x.along=d,$x.squaredDistance=Kd(co(n,e,f,g),10),$x}function Ac(n,e){const t=n.length;let r=Math.floor(e);const i=e-r;r>=t?r-=t:r<0&&(r+=t);let s=r+1;s>=t&&(s-=t);const o=n[r],a=o[0],l=o[1],u=n[s],d=u[0]-a,f=u[1]-l;return[a+d*i,l+f*i]}class LR extends Tu{constructor(e){const t=e;t.stopDown||(t.stopDown=_u),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=RK(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Ra,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=function(s,o,a){const l=o||new Yy([NaN,NaN]),u=Ni(s[0]),d=lD(u,Ni(s[s.length-1]));return l.setCenterAndRadius(u,Math.sqrt(d),this.geometryLayout_),l};else{let s;i==="Point"?s=xa:i==="LineString"?s=fo:i==="Polygon"&&(s=bo),r=function(o,a,l){return a?i==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new zS({source:new gL({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:kK(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:NS,this.freehandCondition_,e.freehand?this.freehandCondition_=Ew:this.freehandCondition_=e.freehandCondition?e.freehandCondition:jS,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Sw.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Ew:t=e:t=Tw,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===tt.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===_t.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===_t.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===_t.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===_t.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===_t.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===_t.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===_t.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new qs(_t.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=lw([r,i]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=EK(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const r=e.startIndex<=e.endIndex,i=e.startIndex<=t;r===i?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){const i=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),r=i-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,t,r){if(t===r)return;const i=[];if(t<r){const s=Math.ceil(t);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(Mc(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(Mc(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&cD(t.startPx,e.pixel)<this.snapTolerance_)return;const r=TK(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}t.targetIndex=r.index;const i=t.targets[t.targetIndex];i.endIndex=r.endIndex;const s=Ac(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,r=e.pixel,i=t[0]-r[0],s=t[1]-r[1],o=i*i+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let r=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")i=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(i){const a=this.getMap();for(let l=0,u=s.length;l<u;l++){const d=s[l],f=a.getPixelFromCoordinate(d),g=e[0]-f[0],m=e[1]-f[1],v=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(g*g+m*m)<=v,r){this.finishCoordinate_=d;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Qs(new xa(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Qs);const t=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new fo(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const t=this.getMap().getView().getProjection(),r=Em(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Qs(new fo(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Qs,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new up(cp.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),r=this.sketchFeature_.getGeometry(),i=t.getView().getProjection(),s=Em(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),this.geometryFunction_(s,t,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),i&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let s=0;s<e;++s){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,r),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,r,i)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,r,i),t=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Ky([t])):this.type_==="MultiLineString"?e.setGeometry(new Id([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Md([t])),this.dispatchEvent(new up(cp.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new up(cp.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(t==="LineString"||t==="Circle")i=this.sketchCoords_;else if(t==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Qs(new xa(i)),this.updateSketchFeatures_(),this.dispatchEvent(new up(cp.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function kK(){const n=VD();return function(e,t){return n[e.getGeometry().getType()]}}function RK(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}const PK={SELECT:"select"};class IK extends ts{constructor(e,t,r,i){super(e),this.selected=t,this.deselected=r,this.mapBrowserEvent=i}}const gp={};let FR=class yL extends Eu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:E8,this.addCondition_=e.addCondition?e.addCondition:Tw,this.removeCondition_=e.removeCondition?e.removeCondition:Tw,this.toggleCondition_=e.toggleCondition?e.toggleCondition:jS,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Ra,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:MK(),this.features_=e.features||new $i;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const r=e.layers;t=function(i){return r.includes(i)}}else t=Ra;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[ft(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[ft(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(On.ADD,this.boundAddFeature_),this.features_.addEventListener(On.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(On.ADD,this.boundAddFeature_),this.features_.removeEventListener(On.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const r=this.getMap().getAllLayers().find(function(i){if(i instanceof zS&&i.getSource()&&i.getSource().hasFeature(t))return i});r&&this.addFeatureLayerAssociation_(t,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=ft(e);t in gp||(gp[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const s=t[i];if(s!==this&&s instanceof yL&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const r=ft(e);e.setStyle(gp[r]),delete gp[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[ft(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),s=!t&&!r&&!i,o=e.map,a=this.getFeatures(),l=[],u=[];if(s){wu(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(d,f)=>{if(!(!(d instanceof Qs)||!this.filter_(d,f)))return this.addFeatureLayerAssociation_(d,f),u.push(d),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let d=a.getLength()-1;d>=0;--d){const f=a.item(d),g=u.indexOf(f);g>-1?u.splice(g,1):(a.remove(f),l.push(f))}u.length!==0&&a.extend(u)}else{o.forEachFeatureAtPixel(e.pixel,(d,f)=>{if(!(!(d instanceof Qs)||!this.filter_(d,f)))return(t||i)&&!a.getArray().includes(d)?(this.addFeatureLayerAssociation_(d,f),u.push(d)):(r||i)&&a.getArray().includes(d)&&(l.push(d),this.removeFeatureLayerAssociation_(d)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let d=l.length-1;d>=0;--d)a.remove(l[d]);a.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new IK(PK.SELECT,u,l,e)),!0}};function MK(){const n=VD();return Ci(n.Polygon,n.LineString),Ci(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}const AK=()=>{const[n,e]=E.useState(null),t=E.useCallback(r=>{if(!r){e(null);return}if(typeof r!="function")throw new Error("O argumento deve ser uma função.");e(()=>r)},[]);return[n,t]};class OK{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return yt(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return yt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){yt(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}class vL extends My{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(tt.CHANGE)}release(){this.state===$e.ERROR&&this.setState($e.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==$e.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==$e.LOADED){e.interimTile=null;break}e.getState()==$e.LOADING?t=e:e.getState()==$e.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==$e.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){wt()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:pD(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class xL extends vL{constructor(e,t,r,i,s,o){super(e,t,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=$e.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=$e.ERROR,this.unlistenImage_(),this.image_=DK(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=$e.LOADED:this.state=$e.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==$e.ERROR&&(this.state=$e.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==$e.IDLE&&(this.state=$e.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=c9(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function DK(){const n=Bn(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const LK=.5,FK=10,NR=.25;class NK{constructor(e,t,r,i,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=bm(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const k=b[0]+"/"+b[1];return a[k]||(a[k]=l(b)),a[k]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Et(i)>=Et(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Et(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Et(this.targetProj_.getExtent()):null;const u=Pl(r),d=Dy(r),f=Oy(r),g=Ay(r),m=this.transformInv_(u),v=this.transformInv_(d),x=this.transformInv_(f),w=this.transformInv_(g),C=FK+(o?Math.max(0,Math.ceil(Math.log2(uw(r)/(o*o*256*256)))):0);if(this.addQuad_(u,d,f,g,m,v,x,w,C),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(k,R,P){b=Math.min(b,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-b>this.sourceWorldWidth_/2){const R=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];R[0][0]-b>this.sourceWorldWidth_/2&&(R[0][0]-=this.sourceWorldWidth_),R[1][0]-b>this.sourceWorldWidth_/2&&(R[1][0]-=this.sourceWorldWidth_),R[2][0]-b>this.sourceWorldWidth_/2&&(R[2][0]-=this.sourceWorldWidth_);const P=Math.min(R[0][0],R[1][0],R[2][0]);Math.max(R[0][0],R[1][0],R[2][0])-P<this.sourceWorldWidth_/2&&(k.source=R)}})}a={}}addTriangle_(e,t,r,i,s,o){this.triangles_.push({source:[i,s,o],target:[e,t,r]})}addQuad_(e,t,r,i,s,o,a,l,u){const d=lw([s,o,a,l]),f=this.sourceWorldWidth_?Et(d)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,m=this.sourceProj_.canWrapX()&&f>.5&&f<1;let v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=lw([e,t,r,i]);v=Et(w)/this.targetWorldWidth_>NR||v}!m&&this.sourceProj_.isGlobal()&&f&&(v=f>NR||v)}if(!v&&this.maxSourceExtent_&&isFinite(d[0])&&isFinite(d[1])&&isFinite(d[2])&&isFinite(d[3])&&!pr(d,this.maxSourceExtent_))return;let x=0;if(!v&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(u>0){if(!v){const w=[(e[0]+r[0])/2,(e[1]+r[1])/2],C=this.transformInv_(w);let b;m?b=(fl(s[0],g)+fl(a[0],g))/2-fl(C[0],g):b=(s[0]+a[0])/2-C[0];const k=(s[1]+a[1])/2-C[1];v=b*b+k*k>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const w=[(t[0]+r[0])/2,(t[1]+r[1])/2],C=this.transformInv_(w),b=[(i[0]+e[0])/2,(i[1]+e[1])/2],k=this.transformInv_(b);this.addQuad_(e,t,w,b,s,o,C,k,u-1),this.addQuad_(b,w,r,i,k,C,a,l,u-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(w),b=[(r[0]+i[0])/2,(r[1]+i[1])/2],k=this.transformInv_(b);this.addQuad_(e,w,b,i,s,C,k,l,u-1),this.addQuad_(w,t,r,b,C,o,a,k,u-1)}return}}if(m){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,i,s,a,l),(x&14)==0&&this.addTriangle_(e,r,t,s,a,o),x&&((x&13)==0&&this.addTriangle_(t,i,e,o,l,s),(x&7)==0&&this.addTriangle_(t,i,r,o,l,a))}calculateSourceExtent(){const e=ii();return this.triangles_.forEach(function(t,r,i){const s=t.source;Kh(e,s[0]),Kh(e,s[1]),Kh(e,s[2])}),e}getTriangles(){return this.triangles_}}let Ux;const Bc=[];function jR(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function Hx(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function jK(){if(Ux===void 0){const n=Bn(6,6,Bc);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",jR(n,4,5,4,0),jR(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;Ux=Hx(e,0)||Hx(e,4)||Hx(e,8),Gy(n),Bc.push(n.canvas)}return Ux}function Rw(n,e,t,r){const i=fD(t,e,n);let s=Sm(e,r,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||nu(l,i)){const u=Sm(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function zK(n,e,t,r){const i=Pa(t);let s=Rw(n,e,i,r);return(!isFinite(s)||s<=0)&&aS(t,function(o){return s=Rw(n,e,o,r),isFinite(s)&&s>0}),s}function VK(n,e,t,r,i,s,o,a,l,u,d,f,g,m){const v=Bn(Math.round(t*n),Math.round(t*e),Bc);if(f||(v.imageSmoothingEnabled=!1),l.length===0)return v.canvas;v.scale(t,t);function x(P){return Math.round(P*t)/t}v.globalCompositeOperation="lighter";const w=ii();l.forEach(function(P,A,O){rD(w,P.extent)});let C;const b=t/r,k=(f?1:1+Math.pow(2,-24))/b;C=Bn(Math.round(Et(w)*b),Math.round(Jn(w)*b),Bc),f||(C.imageSmoothingEnabled=!1),l.forEach(function(P,A,O){if(P.image.width>0&&P.image.height>0){if(P.clipExtent){C.save();const W=(P.clipExtent[0]-w[0])*b,G=-(P.clipExtent[3]-w[3])*b,V=Et(P.clipExtent)*b,ne=Jn(P.clipExtent)*b;C.rect(f?W:Math.round(W),f?G:Math.round(G),f?V:Math.round(W+V)-Math.round(W),f?ne:Math.round(G+ne)-Math.round(G)),C.clip()}const D=(P.extent[0]-w[0])*b,j=-(P.extent[3]-w[3])*b,Q=Et(P.extent)*b,X=Jn(P.extent)*b;C.drawImage(P.image,u,u,P.image.width-2*u,P.image.height-2*u,f?D:Math.round(D),f?j:Math.round(j),f?Q:Math.round(D+Q)-Math.round(D),f?X:Math.round(j+X)-Math.round(j)),P.clipExtent&&C.restore()}});const R=Pl(o);return a.getTriangles().forEach(function(P,A,O){const D=P.source,j=P.target;let Q=D[0][0],X=D[0][1],W=D[1][0],G=D[1][1],V=D[2][0],ne=D[2][1];const U=x((j[0][0]-R[0])/s),oe=x(-(j[0][1]-R[1])/s),F=x((j[1][0]-R[0])/s),K=x(-(j[1][1]-R[1])/s),I=x((j[2][0]-R[0])/s),N=x(-(j[2][1]-R[1])/s),q=Q,L=X;Q=0,X=0,W-=q,G-=L,V-=q,ne-=L;const ee=[[W,G,0,0,F-U],[V,ne,0,0,I-U],[0,0,W,G,K-oe],[0,0,V,ne,N-oe]],be=VX(ee);if(!be)return;if(v.save(),v.beginPath(),jK()||!f){v.moveTo(F,K);const ce=4,ve=U-F,Se=oe-K;for(let Ce=0;Ce<ce;Ce++)v.lineTo(F+x((Ce+1)*ve/ce),K+x(Ce*Se/(ce-1))),Ce!=ce-1&&v.lineTo(F+x((Ce+1)*ve/ce),K+x((Ce+1)*Se/(ce-1)));v.lineTo(I,N)}else v.moveTo(F,K),v.lineTo(U,oe),v.lineTo(I,N);v.clip(),v.transform(be[0],be[2],be[1],be[3],U,oe),v.translate(w[0]-q,w[3]-L);let pe;if(C)pe=C.canvas,v.scale(k,-k);else{const ce=l[0],ve=ce.extent;pe=ce.image,v.scale(Et(ve)/pe.width,-Jn(ve)/pe.height)}v.drawImage(pe,0,0),v.restore()}),C&&(Gy(C),Bc.push(C.canvas)),d&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,a.getTriangles().forEach(function(P,A,O){const D=P.target,j=(D[0][0]-R[0])/s,Q=-(D[0][1]-R[1])/s,X=(D[1][0]-R[0])/s,W=-(D[1][1]-R[1])/s,G=(D[2][0]-R[0])/s,V=-(D[2][1]-R[1])/s;v.beginPath(),v.moveTo(X,W),v.lineTo(j,Q),v.lineTo(G,V),v.closePath(),v.stroke()}),v.restore()),v.canvas}class Pw extends vL{constructor(e,t,r,i,s,o,a,l,u,d,f,g){super(s,$e.IDLE,g),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const m=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const w=v?qh(m,v):m;if(uw(w)===0){this.state=$e.EMPTY;return}const C=e.getExtent();C&&(x?x=qh(x,C):x=C);const b=i.getResolution(this.wrappedTileCoord_[0]),k=zK(e,r,w,b);if(!isFinite(k)||k<=0){this.state=$e.EMPTY;return}const R=d!==void 0?d:LK;if(this.triangulation_=new NK(e,r,w,x,k*R,b),this.triangulation_.getTriangles().length===0){this.state=$e.EMPTY;return}this.sourceZ_=t.getZForResolution(k);let P=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(P[1]=un(P[1],x[1],x[3]),P[3]=un(P[3],x[1],x[3])):P=qh(P,x)),!uw(P))this.state=$e.EMPTY;else{let A=0,O=0;e.canWrapX()&&(A=Et(C),O=Math.floor((P[0]-C[0])/A)),oD(P.slice(),e,!0).forEach(j=>{const Q=t.getTileRangeForExtentAndZ(j,this.sourceZ_);for(let X=Q.minX;X<=Q.maxX;X++)for(let W=Q.minY;W<=Q.maxY;W++){const G=u(this.sourceZ_,X,W,a);if(G){const V=O*A;this.sourceTiles_.push({tile:G,offset:V})}}++O}),this.sourceTiles_.length===0&&(this.state=$e.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==$e.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(i=this.clipExtent_)==null?void 0:i.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=$e.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=VK(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=$e.LOADED}this.changed()}load(){if(this.state==$e.IDLE){this.state=$e.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==$e.IDLE||r==$e.LOADING){e++;const i=dt(t,tt.CHANGE,function(s){const o=t.getState();(o==$e.LOADED||o==$e.ERROR||o==$e.EMPTY)&&(Vt(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==$e.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Vt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Gy(this.canvas_.getContext("2d")),Bc.push(this.canvas_),this.canvas_=null),super.release()}}function zR(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function qy(n,e,t){return n+"/"+e+"/"+t}function _L(n){return qy(n[0],n[1],n[2])}function BK(n){return n.split("/").map(Number)}function wL(n){return(n[1]<<n[0])+n[2]}function GK(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class CL extends OK{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),r=BK(e)[0];this.forEach(i=>{i.tileCoord[0]!==r&&(this.remove(_L(i.tileCoord)),i.release())})}}const Xx={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class VS{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function dc(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new VS(n,e,t,r)}const fc=[0,0,0],na=5;class SL{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,yt(LX(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,yt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Pl(r)),yt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,yt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:iS,yt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const o=new VS(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,o=i.maxX;s<=o;++s)for(let a=i.minY,l=i.maxY;a<=l;++a)r([t,s,a])}forEachTileCoordParentTileRange(e,t,r,i){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=dc(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return dc(s,s+1,o,o+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],o=e[2];if(t===i)return dc(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),d=Math.floor(o*l);if(t<i)return dc(u,u,d,d,r);const f=Math.floor(l*(s+1))-1,g=Math.floor(l*(o+1))-1;return dc(u,f,d,g,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,fc);const i=fc[1],s=fc[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,fc);const o=fc[1],a=fc[2];return dc(i,o,s,a,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ei(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=ei(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*i,a=r[1]-(e[2]+1)*s[1]*i,l=o+s[0]*i,u=a+s[1]*i;return Co(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),u=ei(this.getTileSize(o),this.tmpSize_);let d=a*(e-l[0])/r/u[0],f=a*(l[1]-t)/r/u[1];return i?(d=ep(d,na)-1,f=ep(f,na)-1):(d=Qg(d,na),f=Qg(f,na)),zR(o,d,f,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const o=this.getOrigin(r),a=this.getResolution(r),l=ei(this.getTileSize(r),this.tmpSize_);let u=(e-o[0])/a/l[0],d=(o[1]-t)/a/l[1];return i?(u=ep(u,na)-1,d=ep(d,na)-1):(u=Qg(u,na),d=Qg(d,na)),zR(r,u,d,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=rS(this.resolutions_,e,t||0);return un(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return bD(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function bL(n){let e=n.getDefaultTileGrid();return e||(e=HK(n),n.setDefaultTileGrid(e)),e}function WK(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=BS(t);if(!nu(s,i)){const o=Et(s),a=Math.ceil((s[0]-i[0])/o);return i[0]+=o*a,n.getTileCoordForCoordAndZ(i,r)}return e}function $K(n,e,t,r){r=r!==void 0?r:"top-left";const i=EL(n,e,t);return new SL({extent:n,origin:JX(n,r),resolutions:i,tileSize:t})}function UK(n){const e=n||{},t=e.extent||zr("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:EL(t,e.maxZoom,e.tileSize,e.maxResolution)};return new SL(r)}function EL(n,e,t,r){e=e!==void 0?e:BX,t=ei(t!==void 0?t:iS);const i=Jn(n),s=Et(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function HK(n,e,t,r){const i=BS(n);return $K(i,e,t,r)}function BS(n){n=zr(n);let e=n.getExtent();if(!e){const t=180*tu.degrees/n.getMetersPerUnit();e=Co(-t,-t,t,t)}return e}class XK extends fL{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ei(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new CL(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}forEachLoadedTile(e,t,r,i){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,u;for(let d=r.minX;d<=r.maxX;++d)for(let f=r.minY;f<=r.maxY;++f)l=qy(t,d,f),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===$e.LOADED,u&&(u=i(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return wt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:bL(e)}getTileCacheForProjection(e){const t=this.getProjection();return yt(t===null||_c(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),o=ei(i.getTileSize(e),this.tmpSize);return s==1?o:qY(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=WK(r,e,t)),GK(e,r)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}useTile(e,t,r,i){}}class YK extends ts{constructor(e,t){super(e),this.tile=t}}function KK(n,e){const t=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(t,o[0].toString()).replace(r,o[1].toString()).replace(i,o[2].toString()).replace(s,function(){const u=o[0],d=e.getFullTileRange(u);if(!d)throw new Error("The {-y} placeholder requires a tile grid with extent");return(d.getHeight()-o[2]-1).toString()})}}function qK(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=KK(n[i],e);return ZK(r)}function ZK(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=wL(e),s=fl(i,n.length);return n[s](e,t,r)}}function JK(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}class GS extends XK{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===GS.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=ft(t),i=t.getState();let s;i==$e.LOADING?(this.tileLoadingKeys_[r]=!0,s=Xx.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==$e.ERROR?Xx.TILELOADERROR:i==$e.LOADED?Xx.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new YK(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=JK(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(qK(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}useTile(e,t,r){const i=qy(e,t,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}class TL extends GS{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:QK,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:xL,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const r=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==r?t:{});for(const i in this.tileCacheForProjection){const s=this.tileCacheForProjection[i];s.expireCache(s==r?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!_c(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!_c(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||_c(t,e)))return this.tileGrid;const r=ft(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=bL(e)),this.tileGridForProjection[r]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||_c(t,e))return this.tileCache;const r=ft(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new CL(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}createTile_(e,t,r,i,s,o){const a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,i,s):void 0,d=new this.tileClass(a,u!==void 0?$e.IDLE:$e.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=o,d.addEventListener(tt.CHANGE,this.handleTileChange.bind(this)),d}getTile(e,t,r,i,s){const o=this.getProjection();if(!o||!s||_c(o,s))return this.getTileInternal(e,t,r,i,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,r];let u;const d=_L(l);a.containsKey(d)&&(u=a.get(d));const f=this.getKey();if(u&&u.key==f)return u;const g=this.getTileGridForProjection(o),m=this.getTileGridForProjection(s),v=this.getTileCoordForTileUrlFunction(l,s),x=new Pw(o,g,s,m,l,v,this.getTilePixelRatio(i),this.getGutter(),(w,C,b,k)=>this.getTileInternal(w,C,b,k,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=f,u?(x.interimTile=u,x.refreshInterimChain(),a.replace(d,x)):a.set(d,x),x}getTileInternal(e,t,r,i,s){let o=null;const a=qy(e,t,r),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,r,i,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,r,i,s,l),u.getState()==$e.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const r=zr(e);if(r){const i=ft(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function QK(n,e){n.getImage().src=e}class jh extends TL{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:UK({extent:BS(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const VR=4;function kL(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const Iw="1.3.0";function e7(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation();let o;const a=aD(i.VERSION,"1.3")>=0;return i[a?"CRS":"SRS"]=r.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,i.BBOX=o.join(","),kL(n,i)}function t7(n,e,t,r,i,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[Xk(Et(n)/a,VR),Xk(Jn(n)/a,VR)];if(t!=1)switch(o){case"geoserver":const d=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+d:s.FORMAT_OPTIONS="dpi:"+d;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return e7(i,n,l,r,s)}function BR(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Iw,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},n)}const n7='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class r7 extends jh{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[n7];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const pp={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class i7 extends Vy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(pp.PRELOAD)}setPreload(e){this.set(pp.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(pp.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(pp.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class s7 extends lL{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=ii(),this.tmpTileRange_=new VS(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==$e.LOADED||r==$e.EMPTY||r==$e.ERROR&&!i}getTile(e,t,r,i){const s=i.pixelRatio,o=i.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,r,s,o);return u.getState()==$e.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=Nn(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!nu(s,i))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=r.getRenderSource(),d=u.getTileGridForProjection(l.projection),f=u.getTilePixelRatio(t.pixelRatio);for(let g=d.getZForResolution(l.resolution);g>=d.getMinZoom();--g){const m=d.getTileCoordForCoordAndZ(i,g),v=u.getTile(g,m[1],m[2],o,a);if(!(v instanceof xL||v instanceof Pw)||v instanceof Pw&&v.getState()===$e.EMPTY)return null;if(v.getState()!==$e.LOADED)continue;const x=d.getOrigin(g),w=ei(d.getTileSize(g)),C=d.getResolution(g),b=Math.floor(f*((i[0]-x[0])/C-m[1]*w[0])),k=Math.floor(f*((x[1]-i[1])/C-m[2]*w[1])),R=Math.round(f*u.getGutterForProjection(l.projection));return this.getImageData(v.getImage(),b+R,k+R)}return null}loadedTileCallback(e,t,r){return this.isDrawableTile(r)?super.loadedTileCallback(e,t,r):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,o=i.resolution,a=i.center,l=i.rotation,u=e.pixelRatio,d=this.getLayer(),f=d.getSource(),g=f.getRevision(),m=f.getTileGridForProjection(s),v=m.getZForResolution(o,f.zDirection),x=m.getResolution(v);let w=e.extent;const C=e.viewState.resolution,b=f.getTilePixelRatio(u);this.prepareContainer(e,t);const k=this.context.canvas.width,R=this.context.canvas.height,P=r.extent&&ll(r.extent);P&&(w=qh(w,ll(r.extent)));const A=x*k/2/b,O=x*R/2/b,D=[a[0]-A,a[1]-O,a[0]+A,a[1]+O],j=m.getTileRangeForExtentAndZ(w,v),Q={};Q[v]={};const X=this.createLoadedTileFinder(f,s,Q),W=this.tmpExtent,G=this.tmpTileRange_;this.newTiles_=!1;const V=l?dw(i.center,C,l,e.size):void 0;for(let N=j.minX;N<=j.maxX;++N)for(let q=j.minY;q<=j.maxY;++q){if(l&&!m.tileCoordIntersectsViewport([v,N,q],V))continue;const L=this.getTile(v,N,q,e);if(this.isDrawableTile(L)){const pe=ft(this);if(L.getState()==$e.LOADED){Q[v][L.tileCoord.toString()]=L;let ce=L.inTransition(pe);ce&&r.opacity!==1&&(L.endTransition(pe),ce=!1),!this.newTiles_&&(ce||!this.renderedTiles.includes(L))&&(this.newTiles_=!0)}if(L.getAlpha(pe,e.time)===1)continue}const ee=m.getTileCoordChildTileRange(L.tileCoord,G,W);let be=!1;ee&&(be=X(v+1,ee)),be||m.forEachTileCoordParentTileRange(L.tileCoord,X,G,W)}const ne=x/o*u/b,U=this.getRenderContext(e);So(this.tempTransform,k/2,R/2,ne,ne,0,-k/2,-R/2),P&&this.clipUnrotated(U,e,P),f.getInterpolate()||(U.imageSmoothingEnabled=!1),this.preRender(U,e),this.renderedTiles.length=0;let oe=Object.keys(Q).map(Number);oe.sort(lo);let F,K,I;r.opacity===1&&(!this.containerReused||f.getOpaque(e.viewState.projection))?oe=oe.reverse():(F=[],K=[]);for(let N=oe.length-1;N>=0;--N){const q=oe[N],L=f.getTilePixelSize(q,u,s),be=m.getResolution(q)/x,pe=L[0]*be*ne,ce=L[1]*be*ne,ve=m.getTileCoordForCoordAndZ(Pl(D),q),Se=m.getTileCoordExtent(ve),Ce=Nn(this.tempTransform,[b*(Se[0]-D[0])/x,b*(D[3]-Se[3])/x]),Ue=b*f.getGutterForProjection(s),Ke=Q[q];for(const Dt in Ke){const Mt=Ke[Dt],xn=Mt.tileCoord,Ht=ve[1]-xn[1],nn=Math.round(Ce[0]-(Ht-1)*pe),Br=ve[2]-xn[2],Dn=Math.round(Ce[1]-(Br-1)*ce),rn=Math.round(Ce[0]-Ht*pe),Bt=Math.round(Ce[1]-Br*ce),B=nn-rn,ie=Dn-Bt,ue=v===q,Ee=ue&&Mt.getAlpha(ft(this),e.time)!==1;let H=!1;if(!Ee)if(F){I=[rn,Bt,rn+B,Bt,rn+B,Bt+ie,rn,Bt+ie];for(let te=0,he=F.length;te<he;++te)if(v!==q&&q<K[te]){const _e=F[te];pr([rn,Bt,rn+B,Bt+ie],[_e[0],_e[3],_e[4],_e[7]])&&(H||(U.save(),H=!0),U.beginPath(),U.moveTo(I[0],I[1]),U.lineTo(I[2],I[3]),U.lineTo(I[4],I[5]),U.lineTo(I[6],I[7]),U.moveTo(_e[6],_e[7]),U.lineTo(_e[4],_e[5]),U.lineTo(_e[2],_e[3]),U.lineTo(_e[0],_e[1]),U.clip())}F.push(I),K.push(q)}else U.clearRect(rn,Bt,B,ie);this.drawTileImage(Mt,e,rn,Bt,B,ie,Ue,ue),F&&!Ee?(H&&U.restore(),this.renderedTiles.unshift(Mt)):this.renderedTiles.push(Mt),this.updateUsedTiles(e.usedTiles,f,Mt)}}return this.renderedRevision=g,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!yd(this.renderedExtent_,D),this.renderedExtent_=D,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(e,f,m,u,s,w,v,d.getPreload()),this.scheduleExpireCache(e,f),this.postRender(this.context,e),r.extent&&U.restore(),U.imageSmoothingEnabled=!0,this.container}drawTileImage(e,t,r,i,s,o,a,l){const u=this.getTileImage(e);if(!u)return;const d=this.getRenderContext(t),f=ft(this),g=t.layerStatesArray[t.layerIndex],m=g.opacity*(l?e.getAlpha(f,t.time):1),v=m!==d.globalAlpha;v&&(d.save(),d.globalAlpha=m),d.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,i,s,o),v&&d.restore(),m!==g.opacity?t.animate=!0:l&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const r=(function(i,s,o){const a=ft(i);a in o.usedTiles&&i.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(r)}}updateUsedTiles(e,t,r){const i=ft(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}manageTilePyramid(e,t,r,i,s,o,a,l,u){const d=ft(t);d in e.wantedTiles||(e.wantedTiles[d]={});const f=e.wantedTiles[d],g=e.tileQueue,m=r.getMinZoom(),v=e.viewState.rotation,x=v?dw(e.viewState.center,e.viewState.resolution,v,e.size):void 0;let w=0,C,b,k,R,P,A;for(A=m;A<=a;++A)for(b=r.getTileRangeForExtentAndZ(o,A,b),k=r.getResolution(A),R=b.minX;R<=b.maxX;++R)for(P=b.minY;P<=b.maxY;++P)v&&!r.tileCoordIntersectsViewport([A,R,P],x)||(a-A<=l?(++w,C=t.getTile(A,R,P,i,s),C.getState()==$e.IDLE&&(f[C.getKey()]=!0,g.isKeyQueued(C.getKey())||g.enqueue([C,d,r.getTileCoordCenter(C.tileCoord),k])),u!==void 0&&u(C)):t.useTile(A,R,P,s));t.updateCacheSize(w,s)}}class gc extends i7{constructor(e){super(e)}createRenderer(){return new s7(this)}}class o7 extends TL{constructor(e){e=e||{};const t=Object.assign({},e.params),r="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!r,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=ii(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=zr(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=fD(e,s,o),u=Rw(o,s,e,t),d=a.getZForResolution(u,this.zDirection),f=a.getResolution(d),g=a.getTileCoordForCoordAndZ(l,d);if(a.getResolutions().length<=g[0])return;let m=a.getTileCoordExtent(g,this.tmpExtent_);const v=this.gutter_;v!==0&&(m=md(m,f*v,m));const x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,BR(this.params_,"GetFeatureInfo"),i);const w=Math.floor((l[0]-m[0])/f),C=Math.floor((m[3]-l[1])/f);return x[this.v13_?"I":"X"]=w,x[this.v13_?"J":"Y"]=C,this.getRequestUrl_(g,m,1,o||s,x)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:Iw,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),kL(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=fl(wL(e),o.length);a=o[l]}return t7(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||Iw;this.v13_=aD(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let o=i.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=md(o,s*a,o));const l=Object.assign({},BR(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,r,l)}}class a7{constructor(){this.base_layers=[],this.org_layers=[],this.feact_layers=[],this.drawSource=new gL,this.drawLayer=new zS({source:this.drawSource,title:"draw"}),this.initializeLayers()}initializeLayers(){const e=new gc({source:new jh({url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&key=AIzaSyDv9tONOEg0imtjNV2g6TrE0udYcYVB3TU",crossOrigin:"anonymous"}),visible:!0,title:"roadmap"}),t=new gc({source:new jh({url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}&key=AIzaSyDv9tONOEg0imtjNV2g6TrE0udYcYVB3TU",crossOrigin:"anonymous"}),visible:!1,title:"satellite"}),r=new gc({source:new jh({url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}&key=AIzaSyDv9tONOEg0imtjNV2g6TrE0udYcYVB3TU",crossOrigin:"anonymous"}),visible:!1,title:"hybrid"}),i=new gc({source:new jh({url:"https://mt1.google.com/vt/lyrs=t&x={x}&y={y}&z={z}&key=AIzaSyDv9tONOEg0imtjNV2g6TrE0udYcYVB3TU",crossOrigin:"anonymous"}),visible:!1,title:"terrain"}),s=new gc({source:new r7,visible:!1,title:"osm"}),o="https://terrabrasilis.dpi.inpe.br/geoserver/prodes-pantanal-nb/hydrography/ows",a=new gc({source:new o7({url:o}),visible:!1,params:{LAYERS:"wms",TILED:!0},serverType:"mapserver",transition:0,title:"inp1"});this.base_layers=[e,t,r,s],this.org_layers=[a],this.feact_layers=[this.drawLayer],this.key_layer={roadmap:e,satellite:t,hybrid:r,terrain:i,osm:s,wms:a}}getKeyLayers(){return Object.keys(this.key_layer)}getBaseLayers(){return this.base_layers}getDrawLayer(){return this.drawLayer}getDrawSource(){return this.drawSource}setCurrBaseLayer(e,t){var r=e.getLayers().getArray();for(const s of r){var i=s.get("title");i===t||i==="draw"?s.setVisible(!0):s.setVisible(!1)}}}const RL=E.createContext({});function l7({children:n}){const[e,t]=AK(),r=new a7,i=E.useRef(r.getDrawSource()),s=E.useRef(r.getDrawLayer()),[o,a]=E.useState("roadmap"),[l,u]=E.useState(""),[d,f]=E.useState({}),g=r.getBaseLayers();g.push(s.current);const m=E.useRef(),v=E.useRef(),x=E.useRef(),w=E.useRef(),C=E.useRef(),b=E.useRef(),[k,R]=E.useState(!1),[P,A]=E.useState([]),[O,D]=E.useState(null);E.useEffect(()=>{f(r.getKeyLayers());const F=new z8({target:m.current,layers:g,view:new gs({center:[-47.882777939356146,-15.793934129610017],zoom:5,projection:"EPSG:4326"}),controls:ZD({zoom:!1})});v.current=F;const K=new W8({units:"metric",bar:!0,steps:4,text:!0,minWidth:100,target:document.getElementById("scale-line")});K.setMap(v.current),v.current.addControl(K),navigator.geolocation.getCurrentPosition(N=>{const{latitude:q,longitude:L}=N.coords;v.current.getView().setCenter([L,q]),v.current.getView().setZoom(15)});const I=new B8({coordinateFormat:nY(8),projection:"EPSG:4326",className:"mouse-position",target:document.getElementById("mouse-position"),undefinedHTML:"&nbsp;"});return v.current.addControl(I),t(async()=>{const N=document.createElement("canvas");N.width=F.getSize()[0],N.height=F.getSize()[1];const q=N.getContext("2d");return Array.from(document.querySelectorAll(".ol-layer canvas")).forEach(ee=>{q.drawImage(ee,0,0)}),N.toDataURL("image/png")}),()=>{v.current.setTarget(null)}},[]),E.useEffect(()=>{r.setCurrBaseLayer(v.current,o)},[o,d]),E.useEffect(()=>{const F=K=>{K.key==="Escape"&&x.current&&x.current.abortDrawing()};return x.current&&v.current.removeInteraction(x.current),l&&l!=="Select"&&l!=="SelectRectangle"&&l!=="Measure"?(x.current=new LR({source:i.current,type:l}),x.current.on("drawend",K=>{const I=K.feature,N=I.getGeometry().getCoordinates();console.log(N),console.log(Array.isArray(N[0]));let q=[];Array.isArray(N[0])?N.length>1?q=N:q=N[0]:q=[N],A(q),D(I),R(!0)}),v.current.addInteraction(x.current),window.addEventListener("keydown",F)):window.removeEventListener("keydown",F),()=>{x.current&&window.removeEventListener("keydown",F)}},[l]),E.useEffect(()=>{w.current&&v.current.removeInteraction(w.current),C.current&&v.current.removeInteraction(C.current),l==="Select"?(w.current=new FR({condition:b8}),w.current.on("select",F=>{F.mapBrowserEvent.originalEvent.shiftKey||w.current.getFeatures().clear(),F.selected.forEach(K=>{w.current.getFeatures().getArray().includes(K)||w.current.getFeatures().push(K)})}),v.current.addInteraction(w.current)):l==="SelectRectangle"?(w.current=new FR,v.current.addInteraction(w.current),C.current=new tL,C.current.on("boxend",()=>{const F=C.current.getGeometry().getExtent(),K=w.current.getFeatures();i.current.forEachFeatureIntersectingExtent(F,I=>{K.getArray().includes(I)||K.push(I)})}),v.current.addInteraction(C.current)):l==="Measure"&&(b.current&&v.current.removeInteraction(b.current),b.current=new LR({source:i.current,type:"LineString"}),b.current.on("drawend",F=>{const K=F.feature.getGeometry(),I=F.feature;let N;K.getType()==="Polygon"?N=`Area: ${hD(K).toFixed(2)} square meters`:K.getType()==="LineString"&&(N=`Length: ${uD(K).toFixed(2)} meters`),alert(N),i.current.removeFeature(I),i.current.removeFeature(O)}),v.current.addInteraction(b.current))},[l]);const oe={clearDrawLayer:()=>{i.current.clear()},mapInstance:v,screenshotFunction:e,mapRef:m,dialogOpen:k,handleDialogClose:F=>{R(!1),i.current.removeFeature(O),F&&i.current.addFeature(O),D(null),A([])},currentPoints:P,selectedLayer:o,setSelectedLayer:a,drawType:l,toggleDrawSelect:()=>{u(F=>F==="Select"?"":"Select")},toggleDrawRectangle:()=>{u(F=>F==="SelectRectangle"?"":"SelectRectangle")},toggleDrawMeasure:()=>{u(F=>F==="Measure"?"":"Measure")},toggleDrawPoint:()=>{u(F=>F==="Point"?"":"Point")},toggleDrawLineString:()=>{u(F=>F==="LineString"?"":"LineString")},toggleDrawPolygon:()=>{u(F=>F==="Polygon"?"":"Polygon")}};return _.jsx(RL.Provider,{value:oe,children:n})}function WS(){return E.useContext(RL)}const c7=jd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Mw=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>_.jsx("button",{className:Vn(c7({variant:e,size:t,className:n})),ref:s,...i}));Mw.displayName="Button";var $S="Dialog",[PL,Oee]=Ms($S),[u7,ns]=PL($S),IL=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=E.useRef(null),l=E.useRef(null),[u=!1,d]=ml({prop:r,defaultProp:i,onChange:s});return _.jsx(u7,{scope:e,triggerRef:a,contentRef:l,contentId:ya(),titleId:ya(),descriptionId:ya(),open:u,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(f=>!f),[d]),modal:o,children:t})};IL.displayName=$S;var ML="DialogTrigger",h7=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ns(ML,t),s=kt(e,i.triggerRef);return _.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":XS(i.open),...r,ref:s,onClick:ke(n.onClick,i.onOpenToggle)})});h7.displayName=ML;var US="DialogPortal",[d7,AL]=PL(US,{forceMount:void 0}),OL=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=ns(US,e);return _.jsx(d7,{scope:e,forceMount:t,children:E.Children.map(r,o=>_.jsx(es,{present:t||s.open,children:_.jsx(Nd,{asChild:!0,container:i,children:o})}))})};OL.displayName=US;var Lm="DialogOverlay",DL=E.forwardRef((n,e)=>{const t=AL(Lm,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=ns(Lm,n.__scopeDialog);return s.modal?_.jsx(es,{present:r||s.open,children:_.jsx(g7,{...i,ref:e})}):null});DL.displayName=Lm;var f7=pl("DialogOverlay.RemoveScroll"),g7=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ns(Lm,t);return _.jsx(yy,{as:f7,allowPinchZoom:!0,shards:[i.contentRef],children:_.jsx(Qe.div,{"data-state":XS(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Sl="DialogContent",LL=E.forwardRef((n,e)=>{const t=AL(Sl,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=ns(Sl,n.__scopeDialog);return _.jsx(es,{present:r||s.open,children:s.modal?_.jsx(p7,{...i,ref:e}):_.jsx(m7,{...i,ref:e})})});LL.displayName=Sl;var p7=E.forwardRef((n,e)=>{const t=ns(Sl,n.__scopeDialog),r=E.useRef(null),i=kt(e,t.contentRef,r);return E.useEffect(()=>{const s=r.current;if(s)return VC(s)},[]),_.jsx(FL,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(n.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ke(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ke(n.onFocusOutside,s=>s.preventDefault())})}),m7=E.forwardRef((n,e)=>{const t=ns(Sl,n.__scopeDialog),r=E.useRef(!1),i=E.useRef(!1);return _.jsx(FL,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,s),s.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),FL=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=ns(Sl,t),l=E.useRef(null),u=kt(e,l);return IC(),_.jsxs(_.Fragment,{children:[_.jsx(cy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:_.jsx(Fd,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":XS(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(v7,{titleId:a.titleId}),_.jsx(_7,{contentRef:l,descriptionId:a.descriptionId})]})]})}),HS="DialogTitle",NL=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ns(HS,t);return _.jsx(Qe.h2,{id:i.titleId,...r,ref:e})});NL.displayName=HS;var jL="DialogDescription",zL=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ns(jL,t);return _.jsx(Qe.p,{id:i.descriptionId,...r,ref:e})});zL.displayName=jL;var VL="DialogClose",y7=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=ns(VL,t);return _.jsx(Qe.button,{type:"button",...r,ref:e,onClick:ke(n.onClick,()=>i.onOpenChange(!1))})});y7.displayName=VL;function XS(n){return n?"open":"closed"}var BL="DialogTitleWarning",[Dee,GL]=zz(BL,{contentName:Sl,titleName:HS,docsSlug:"dialog"}),v7=({titleId:n})=>{const e=GL(BL),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},x7="DialogDescriptionWarning",_7=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GL(x7).contentName}}.`;return E.useEffect(()=>{var s;const i=(s=n.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},w7=IL,C7=OL,WL=DL,$L=LL,UL=NL,HL=zL;const S7=w7,b7=C7,XL=E.forwardRef(({className:n,...e},t)=>_.jsx(WL,{ref:t,className:Vn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));XL.displayName=WL.displayName;const YL=E.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(b7,{children:[_.jsx(XL,{}),_.jsx($L,{ref:r,className:Vn("fixed left-[50%] top-[50%] z-50 grid translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:e})]}));YL.displayName=$L.displayName;const KL=({className:n,...e})=>_.jsx("div",{className:Vn("flex flex-col text-center sm:text-left",n),...e});KL.displayName="DialogHeader";const qL=({className:n,...e})=>_.jsx("div",{className:Vn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});qL.displayName="DialogFooter";const ZL=E.forwardRef(({className:n,...e},t)=>_.jsx(UL,{ref:t,className:Vn("text-lg font-semibold leading-none tracking-tight",n),...e}));ZL.displayName=UL.displayName;const E7=E.forwardRef(({className:n,...e},t)=>_.jsx(HL,{ref:t,className:Vn("text-sm text-muted-foreground",n),...e}));E7.displayName=HL.displayName;const T7=E.forwardRef(({className:n,type:e,...t},r)=>_.jsx("input",{type:e,className:Vn("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));T7.displayName="Input";const k7=jd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R7=E.forwardRef(({className:n,...e},t)=>_.jsx("label",{ref:t,className:Vn(k7(),n),...e}));R7.displayName="Label";function P7(){const{dialogOpen:n,handleDialogClose:e,currentPoints:t,drawType:r}=WS();return _.jsx(S7,{open:n,onOpenChange:i=>i===!1&&e(!1),children:_.jsxs(YL,{children:[_.jsx(KL,{children:_.jsx(ZL,{children:"Adicionar feição"})}),_.jsxs(qL,{children:[_.jsx(Mw,{variant:"destructive",onClick:()=>e(!1),children:"Cancelar"}),_.jsx(Mw,{onClick:()=>e(!0),children:"Inserir"})]})]})})}function I7(){const{mapRef:n}=WS();return _.jsxs(_.Fragment,{children:[_.jsx("div",{ref:n,style:{width:"100%",height:"100%",...!1}}),_.jsx(P7,{})]})}const M7={Point:{icon:_.jsx(L3,{className:"size-8 text-secondary"}),onClickKey:"toggleDrawPoint"},LineString:{icon:_.jsx(U3,{className:"size-6 text-secondary"}),onClickKey:"toggleDrawLineString"},Polygon:{icon:_.jsx(F3,{className:"size-6 text-secondary"}),onClickKey:"toggleDrawPolygon"},Select:{icon:_.jsx(z3,{className:"size-6 text-secondary"}),onClickKey:"toggleDrawSelect"},Rectangle:{icon:_.jsx(H3,{className:"size-6 text-secondary"}),onClickKey:"toggleDrawRectangle"},Camera:{icon:_.jsx(I3,{className:"size-6 text-secondary"}),onClickKey:"handleCapture"}};function A7({enabledTools:n=["Point","LineString","Polygon","Select","Rectangle"],onCapture:e}){const{drawType:t,setSelectedLayer:r,toggleDrawPoint:i,toggleDrawLineString:s,toggleDrawPolygon:o,toggleDrawSelect:a,toggleDrawRectangle:l,mapInstance:u,screenshotFunction:d,clearDrawLayer:f}=WS(),m={toggleDrawPoint:i,toggleDrawLineString:s,toggleDrawPolygon:o,toggleDrawSelect:a,toggleDrawRectangle:l,handleCapture:async()=>{const v=await d(),[x,w]=u.current.getView().getCenter();f(),e({imageUrl:v,coords:{latitude:w,longitude:x}})}};return _.jsxs("section",{className:"ml-[260px] flex flex-row gap-3 w-[430px]",children:[_.jsxs(AO,{onValueChange:v=>r(v),children:[_.jsx(ZC,{className:"w-[180px] bg-foreground text-white",children:_.jsx(DO,{placeholder:"Selecione o Layer"})}),_.jsx(JC,{children:_.jsxs(OO,{className:"bg-foreground text-white",children:[_.jsx(NO,{children:"Maps"}),_.jsx(Ir,{value:"roadmap",children:"Google Street"}),_.jsx(Ir,{value:"satellite",children:"Google Satélite"}),_.jsx(Ir,{value:"hybrid",children:"Google Híbrido"}),_.jsx(Ir,{value:"osm",children:"Open StreetMap"}),_.jsx(Ir,{value:"wms",children:"INPE"})]})})]}),_.jsx("div",{className:"w-[250px] flex flex-row gap-0",children:n.map(v=>{const x=M7[v],w=t===v,C=m[x.onClickKey];return _.jsx("button",{"data-selected":w,"data-camera":x.onClickKey==="handleCapture",onClick:C,className:"bg-foreground size-9 data-[camera=true]:bg-green-500 data-[selected=true]:bg-stone-900 flex items-center justify-center",children:x.icon},v)})})]})}function O7({formData:n,updateFormData:e}){const{id:t}=Eo(),[r,i]=E.useState((n==null?void 0:n.geolocations)??[]),[s,o]=E.useState("form"),[a,l]=E.useState((n==null?void 0:n.pdf)??null),u=s==="map",f=!!(n!=null&&n.id)&&(n!=null&&n.pdfUrl)?decodeURIComponent(n.pdfUrl.split("/").pop()):null,g=()=>{o("map")},m=async({imageUrl:x,coords:w})=>{const C=`${Date.now()}-${Math.floor(Math.random()*1e3)}`,b={id:C,latitude:w.latitude,longitude:w.longitude,imagemNome:C,url:x},k=[...r,b];i(k),o("form"),e({geolocations:k});const R=AX(x,C),P=await er(`/api/v2/relatorios/${t}/geolocation/signed-url`,"POST",{latitude:b.latitude,longitude:b.longitude,imagemNome:R.name});if(P){const A=new XMLHttpRequest;A.upload.onprogress=function(O){const D=O.loaded/O.total*100;console.log(`Progresso: ${D.toFixed(2)}%`)},A.open("PUT",P.signedUrl),A.setRequestHeader("Content-Type",R.type),A.send(R)}},v=async x=>{const w=x.target.files[0];if(w&&w.type==="application/pdf"){l(w),console.log("Arquivo PDF carregado:",w.name),e({pdf:w,pdfNome:w.name});const C=await er(`/api/v2/relatorios/${t}/pdf/signed-url`,"POST",{pdfNome:w.name});if(C){const b=new XMLHttpRequest;b.upload.onprogress=function(k){const R=k.loaded/k.total*100;console.log(`Progresso: ${R.toFixed(2)}%`)},b.open("PUT",C.signedUrl),b.setRequestHeader("Content-Type",w.type),b.send(w)}}else l(null),alert("Por favor, envie apenas arquivos PDF.")};return _.jsx(_.Fragment,{children:_.jsxs(l7,{children:[_.jsxs("div",{"data-open":u,className:"relative w-full h-[34rem] overflow-x-hidden hidden data-[open=true]:block",children:[_.jsx(I7,{}),_.jsx("div",{className:"absolute flex flex-row left-[50%] -translate-x-[70%] bottom-0 pb-4 z-30",children:_.jsx(A7,{enabledTools:["Point","LineString","Polygon","Camera"],onCapture:m})})]}),!u&&_.jsx("div",{className:"space-y-6",children:_.jsxs("div",{className:"grid gap-6",children:[_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"location",children:"Localização geográfica"}),_.jsxs("div",{className:"flex gap-2",children:[r.map(x=>_.jsx(YA,{onRemove:()=>{const w=r.filter(C=>C.id!==x.id);i(w),e({geolocations:w})},url:x.url},x.id)),_.jsx("button",{onClick:g,className:"flex items-center justify-center size-14 rounded-sm border border-gray-300 text-gray-300 cursor-pointer",children:_.jsx(nd,{className:"size-10"})})]})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"pdf-upload",children:"Plantas"}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx("input",{type:"file",id:"pdf-upload",accept:"application/pdf",onChange:v,className:`block w-full text-sm text-gray-700\r
                   file:mr-4 file:py-2 file:px-4\r
                   file:rounded-md file:border-0\r
                   file:text-sm file:font-semibold\r
                   file:bg-gray-100 file:text-gray-700\r
                   hover:file:bg-gray-200\r
                   cursor-pointer`}),(a||f)&&_.jsxs("p",{className:"text-sm text-green-600",children:["Arquivo selecionado: ",_.jsx("span",{className:"font-medium",children:(a==null?void 0:a.name)??f})]})]})]})]})})]})})}function D7({formData:n}){var C,b;const[e,t]=E.useState(!1),[r,i]=E.useState(!1),[s,o]=E.useState(((C=n.conclusao)==null?void 0:C.conclusao)??""),[a,l]=E.useState(null),[u,d]=E.useState("idle"),{id:f}=Eo(),g=!!a,m=s!==((b=n==null?void 0:n.conclusao)==null?void 0:b.conclusao),v=async()=>{t(!0);const k=await er(`/api/v2/relatorios/${f}/ai-conclusao`,"POST");k!=null&&k.conclusao&&l(k==null?void 0:k.conclusao),t(!1)},x=()=>{const k=s?`${s}
${a}`:a;o(k),l(null)},w=async()=>{i(!0),await er(`/api/v2/relatorios/${f}/conclusao`,"POST",{conclusao:s}),i(!1),d("success")};return _.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-700 font-normal",children:"Insira sua conclusão e utilize a nossa IA para complementar sua análise."}),_.jsxs("div",{className:"mt-4 space-y-2",children:[_.jsxs("div",{className:"flex flex-row justify-between items-center",children:[_.jsx(Ot,{className:"font-medium",children:"Conclusão do relatório"}),_.jsxs(tn,{onClick:v,disabled:e,size:"sm",variant:"outline",className:"border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-800",children:[e?_.jsx(Sp,{className:"w-4 h-4 mr-2 animate-spin"}):_.jsx(dT,{className:"w-4 h-4 mr-2"}),e?"Analisando...":"Complementar com IA"]})]}),_.jsx("textarea",{className:"block w-full text-sm text-gray-700 border border-gray-300 rounded-md p-2 mt-2",rows:"4",placeholder:"Insira sua conclusão aqui...",value:s,onChange:k=>o(k.target.value)}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("p",{className:"text-xs text-slate-500",children:[s.length," caracteres"]}),e&&_.jsxs("div",{className:"text-xs text-blue-600 flex items-center",children:[_.jsx(Sp,{className:"w-3 h-3 mr-1 animate-spin"}),"A IA está analisando os dados do relatório..."]})]})]}),g&&_.jsxs(fr,{className:"border-blue-200 bg-blue-50/50",children:[_.jsxs(Xm,{className:"pb-3",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs(Ym,{className:"text-lg flex items-center gap-2 text-blue-800",children:[_.jsx(dT,{className:"w-5 h-5"}),"Sugestão da IA"]}),_.jsx("div",{className:"bg-blue-100 text-blue-700",children:"Gerado por IA"})]}),_.jsx(Km,{className:"text-blue-600",children:"Revise o conteúdo sugerido antes de adicionar à sua conclusão"})]}),_.jsxs(Uc,{className:"space-y-4",children:[_.jsx("div",{className:"bg-white p-4 rounded-lg border border-blue-200",children:_.jsx("p",{className:"text-slate-700 whitespace-pre-line leading-relaxed",children:a})}),_.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[_.jsxs(tn,{onClick:x,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[_.jsx(nd,{className:"w-4 h-4 mr-2"}),"Adicionar à Conclusão"]}),_.jsx(tn,{onClick:()=>l(null),variant:"outline",className:"flex-1 sm:flex-none",children:"Descartar"})]})]})]}),u==="success"&&_.jsxs(fr,{className:"p-2 mt-4 text-green-600 border-green-200",children:[_.jsx(A3,{className:"w-4 h-4 inline-block mr-2"}),"Conclusão salva com sucesso!"]}),_.jsx(tn,{disabled:g||!s||r||!m,onClick:w,className:"mt-5 w-full bg-slate-700 hover:bg-slate-800 text-white",children:r?_.jsxs(_.Fragment,{children:[_.jsx(Sp,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar Conclusão"})]})}var YS="Checkbox",[L7,Lee]=Ms(YS),[F7,N7]=L7(YS),JL=E.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:d,...f}=n,[g,m]=E.useState(null),v=kt(e,R=>m(R)),x=E.useRef(!1),w=g?d||!!g.closest("form"):!0,[C=!1,b]=ml({prop:i,defaultProp:s,onChange:u}),k=E.useRef(C);return E.useEffect(()=>{const R=g==null?void 0:g.form;if(R){const P=()=>b(k.current);return R.addEventListener("reset",P),()=>R.removeEventListener("reset",P)}},[g,b]),_.jsxs(F7,{scope:t,state:C,disabled:a,children:[_.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":_a(C)?"mixed":C,"aria-required":o,"data-state":tF(C),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:v,onKeyDown:ke(n.onKeyDown,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:ke(n.onClick,R=>{b(P=>_a(P)?!0:!P),w&&(x.current=R.isPropagationStopped(),x.current||R.stopPropagation())})}),w&&_.jsx(j7,{control:g,bubbles:!x.current,name:r,value:l,checked:C,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:_a(s)?!1:s})]})});JL.displayName=YS;var QL="CheckboxIndicator",eF=E.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,s=N7(QL,t);return _.jsx(es,{present:r||_a(s.state)||s.state===!0,children:_.jsx(Qe.span,{"data-state":tF(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});eF.displayName=QL;var j7=n=>{const{control:e,checked:t,bubbles:r=!0,defaultChecked:i,...s}=n,o=E.useRef(null),a=KA(t),l=bM(e);E.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==t&&m){const v=new Event("click",{bubbles:r});d.indeterminate=_a(t),m.call(d,_a(t)?!1:t),d.dispatchEvent(v)}},[a,t,r]);const u=E.useRef(_a(t)?!1:t);return _.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...s,tabIndex:-1,ref:o,style:{...n.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function _a(n){return n==="indeterminate"}function tF(n){return _a(n)?"indeterminate":n?"checked":"unchecked"}var nF=JL,z7=eF;const Aw=E.forwardRef(({className:n,...e},t)=>_.jsx(nF,{ref:t,className:ct("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:_.jsx(z7,{className:ct("flex items-center justify-center text-current"),children:_.jsx(zd,{className:"h-4 w-4"})})}));Aw.displayName=nF.displayName;const Yx=EO,Kx=TO,Fp=E.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(Sy,{ref:r,className:ct("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,_.jsx(kO,{asChild:!0,children:_.jsx(Hm,{className:"h-4 w-4 opacity-50"})})]}));Fp.displayName=Sy.displayName;const rF=E.forwardRef(({className:n,...e},t)=>_.jsx(ky,{ref:t,className:ct("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(xP,{className:"h-4 w-4"})}));rF.displayName=ky.displayName;const iF=E.forwardRef(({className:n,...e},t)=>_.jsx(Ry,{ref:t,className:ct("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(Hm,{className:"h-4 w-4"})}));iF.displayName=Ry.displayName;const Np=E.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>_.jsx(RO,{children:_.jsxs(by,{ref:i,className:ct("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[_.jsx(rF,{}),_.jsx(PO,{className:ct("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),_.jsx(iF,{})]})}));Np.displayName=by.displayName;const V7=E.forwardRef(({className:n,...e},t)=>_.jsx(Ey,{ref:t,className:ct("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));V7.displayName=Ey.displayName;const pi=E.forwardRef(({className:n,children:e,...t},r)=>_.jsxs(Ty,{ref:r,className:ct("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(MO,{children:_.jsx(zd,{className:"h-4 w-4"})})}),_.jsx(IO,{children:e})]}));pi.displayName=Ty.displayName;const B7=E.forwardRef(({className:n,...e},t)=>_.jsx(Py,{ref:t,className:ct("-mx-1 my-1 h-px bg-muted",n),...e}));B7.displayName=Py.displayName;const sF=E.forwardRef(({className:n,...e},t)=>_.jsx("textarea",{className:ct("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));sF.displayName="Textarea";function G7({formData:n,updateFormData:e}){return _.jsxs("div",{className:"space-y-8",children:[_.jsxs("section",{className:"space-y-4",children:[_.jsx("h2",{className:"text-lg font-medium",children:"Dados Gerais da Vistoria"}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"idImovel",children:"ID do Imóvel"}),_.jsx(In,{id:"idImovel",placeholder:"Número de referência",value:n.idImovel,onChange:t=>e({idImovel:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"acompanhante",children:"Acompanhante"}),_.jsx(In,{id:"acompanhante",placeholder:"Nome do acompanhante",value:n.acompanhante,onChange:t=>e({acompanhante:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"perito",children:"Perito"}),_.jsx(In,{id:"perito",placeholder:"Nome do perito",value:n.perito,onChange:t=>e({perito:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"proprietario",children:"Proprietário"}),_.jsx(In,{id:"proprietario",placeholder:"Nome do proprietário",value:n.proprietario,onChange:t=>e({proprietario:t.target.value})})]})]}),_.jsxs("section",{className:"space-y-4",children:[_.jsx("h2",{className:"text-lg font-medium",children:"Identificação do Imóvel"}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"endereco",children:"Endereço"}),_.jsx(sF,{id:"endereco",placeholder:"Rua, número, bairro, UF",value:n.endereco,onChange:t=>e({endereco:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"estadoOcupacao",children:"Estado de Ocupação"}),_.jsxs(Yx,{value:n.estadoOcupacao,onValueChange:t=>e({estadoOcupacao:t}),children:[_.jsx(Fp,{id:"estadoOcupacao",children:_.jsx(Kx,{placeholder:"Selecione"})}),_.jsxs(Np,{children:[_.jsx(pi,{value:"ocupado",children:"Ocupado"}),_.jsx(pi,{value:"ocupante",children:"Ocupante"}),_.jsx(pi,{value:"inquilino",children:"Inquilino"})]})]})]})]}),_.jsxs("section",{className:"space-y-4",children:[_.jsx("h2",{className:"text-lg font-medium",children:"Caracterização da Região"}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"usoPredominante",children:"Uso Predominante"}),_.jsx(In,{id:"usoPredominante",placeholder:"Ex: residencial unifamiliar",value:n.usoPredominante,onChange:t=>e({usoPredominante:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{children:"Infraestrutura Urbana"}),_.jsx("div",{className:"flex flex-wrap gap-3",children:["Água encanada","Esgoto","Energia elétrica","Iluminação pública","Pavimentação"].map(t=>{var r;return _.jsxs("label",{className:"flex items-center gap-2",children:[_.jsx(Aw,{checked:(r=n.infraestruturas)==null?void 0:r.includes(t),onCheckedChange:i=>e({infraestruturas:i?[...n.infraestruturas||[],t]:n.infraestruturas.filter(s=>s!==t)})}),t]},t)})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{children:"Serviços Comunitários"}),_.jsx("div",{className:"flex flex-wrap gap-3",children:["Escola","Posto de saúde","Comércio","Transporte público","Áreas de lazer"].map(t=>{var r;return _.jsxs("label",{className:"flex items-center gap-2",children:[_.jsx(Aw,{checked:(r=n.servicosComunitarios)==null?void 0:r.includes(t),onCheckedChange:i=>e({servicosComunitarios:i?[...n.servicosComunitarios||[],t]:n.servicosComunitarios.filter(s=>s!==t)})}),t]},t)})})]})]}),_.jsxs("section",{className:"space-y-4",children:[_.jsx("h2",{className:"text-lg font-medium",children:"Caracterização do Imóvel"}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"dimensoes",children:"Dimensões"}),_.jsx(In,{id:"dimensoes",placeholder:"Ex: 10m x 15m",value:n.dimensoes,onChange:t=>e({dimensoes:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"forma",children:"Forma"}),_.jsx(In,{id:"forma",placeholder:"Ex: retangular",value:n.forma,onChange:t=>e({forma:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"area",children:"Área"}),_.jsx(In,{id:"area",type:"number",step:"0.01",placeholder:"Ex: 70m²",value:n.area,onChange:t=>e({area:parseFloat(t.target.value)})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"fracaoIdeal",children:"Fração Ideal"}),_.jsx(In,{id:"fracaoIdeal",placeholder:"Ex: 1/4",value:n.fracaoIdeal,onChange:t=>e({fracaoIdeal:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"estadoConservacao",children:"Estado de Conservação"}),_.jsxs(Yx,{value:n.estadoConservacao,onValueChange:t=>e({estadoConservacao:t}),children:[_.jsx(Fp,{id:"estadoConservacao",children:_.jsx(Kx,{placeholder:"Selecione"})}),_.jsxs(Np,{children:[_.jsx(pi,{value:"Excelente",children:"Excelente"}),_.jsx(pi,{value:"Bom",children:"Bom"}),_.jsx(pi,{value:"Regular",children:"Regular"}),_.jsx(pi,{value:"Ruim",children:"Ruim"}),_.jsx(pi,{value:"Péssimo",children:"Péssimo"})]})]})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"idadeReal",children:"Idade Real"}),_.jsx(In,{id:"idadeReal",type:"number",placeholder:"Ex: 20 anos",value:n.idadeReal,onChange:t=>e({idadeReal:parseInt(t.target.value)})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"idadeAparente",children:"Idade Aparente"}),_.jsx(In,{id:"idadeAparente",type:"number",placeholder:"Ex: 15 anos",value:n.idadeAparente,onChange:t=>e({idadeAparente:parseInt(t.target.value)})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"padraoConstrucao",children:"Padrão de Construção"}),_.jsxs(Yx,{value:n.padraoConstrucao,onValueChange:t=>e({padraoConstrucao:t}),children:[_.jsx(Fp,{id:"padraoConstrucao",children:_.jsx(Kx,{placeholder:"Selecione"})}),_.jsxs(Np,{children:[_.jsx(pi,{value:"Alto",children:"Alto"}),_.jsx(pi,{value:"Medio",children:"Médio"}),_.jsx(pi,{value:"Baixo",children:"Baixo"})]})]})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"fundacoes",children:"Fundações"}),_.jsx(In,{id:"fundacoes",placeholder:"Ex: alvenaria de pedra",value:n.fundacoes,onChange:t=>e({fundacoes:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"estrutura",children:"Estrutura"}),_.jsx(In,{id:"estrutura",placeholder:"Ex: alvenaria",value:n.estrutura,onChange:t=>e({estrutura:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"fechamento",children:"Fechamento"}),_.jsx(In,{id:"fechamento",placeholder:"Ex: alvenaria com reboco",value:n.fechamento,onChange:t=>e({fechamento:t.target.value})})]}),_.jsxs("div",{className:"grid gap-3",children:[_.jsx(Ot,{htmlFor:"cobertura",children:"Cobertura"}),_.jsx(In,{id:"cobertura",placeholder:"Ex: telha cerâmica",value:n.cobertura,onChange:t=>e({cobertura:t.target.value})})]})]})]})}function W7({initialData:n,onSubmit:e}){const{toast:t}=H2(),{id:r}=Eo(),[i,s]=E.useState(0),[o]=Kw(),[a,l]=E.useState(n??{id:r,acompanhante:"",area:"",cobertura:"",dimensoes:"",endereco:"",estadoConservacao:"",estadoOcupacao:"",estrutura:"",evidencias:[],fechamento:"",forma:"",fracaoIdeal:"",fundacoes:"",geolocations:[],idImovel:"",idadeAparente:"",idadeReal:"",infraestruturaUrbana:[],locationsImage:[],padraoConstrucao:"",pdfNome:"",proprietario:"",servicosComunitarios:[],tipoImovel:"",usoImovel:"",usoPredominante:""}),u=[{name:"Localização",icon:j3,component:O7},{name:"Características Gerais",icon:CP,component:G7},{name:"Evidências",icon:hT,component:MX},{name:"Conclusão",icon:hT,component:D7}];E.useEffect(()=>{o.get("step")&&i!==parseInt(o.get("step"))&&s(parseInt(o.get("step")))},[]);const d=u[i].component,f=x=>{l(w=>({...w,...x}))},g=async()=>{if(!(i<u.length-1))return;const x=i+1;if(s(x),x===2){const w={idImovel:a.idImovel,acompanhante:a.acompanhante,perito:a.perito,proprietario:a.proprietario,endereco:a.endereco,estadoOcupacao:a.estadoOcupacao,usoPredominante:a.usoPredominante,infraestruturas:a.infraestruturas,servicosComunitarios:a.servicosComunitarios,dimensoes:a.dimensoes,forma:a.forma,area:a.area,fracaoIdeal:a.fracaoIdeal,estadoConservacao:a.estadoConservacao,idadeReal:a.idadeReal,idadeAparente:a.idadeAparente,padraoConstrucao:a.padraoConstrucao,fundacoes:a.fundacoes,estrutura:a.estrutura,fechamento:a.fechamento,cobertura:a.cobertura};await er(`/api/v2/relatorios/${r}`,"PATCH",w)}},m=()=>{i>0&&s(i-1)},v=async()=>{try{await e(a)}catch(x){console.log(x),t({title:"Erro",description:x.message||"Ocorreu um erro ao processar seu relatório. Por favor, tente novamente.",variant:"destructive"})}};return _.jsxs("div",{className:"flex min-h-screen flex-col md:flex-row",children:[_.jsx("aside",{className:"w-full border-r bg-muted/40 md:w-64",children:_.jsxs("div",{className:"flex flex-col p-4 md:p-6",children:[_.jsx("h2",{className:"mb-6 text-xl font-semibold",children:"Criar relatório"}),_.jsx("nav",{className:"space-y-1",children:u.map((x,w)=>{const C=x.icon;return _.jsxs("button",{className:`flex w-full items-center space-x-3 rounded-md px-3 py-2 text-left text-sm ${i===w?"bg-primary text-primary-foreground":i>w?"text-muted-foreground":"text-foreground/60"}`,onClick:()=>{s(w)},children:[_.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full border",children:i>w?_.jsx(zd,{className:"h-4 w-4"}):_.jsx(C,{className:"h-4 w-4"})}),_.jsx("span",{children:x.name})]},x.name)})})]})}),_.jsx("main",{className:"flex-1 p-2 md:p-4",children:_.jsxs(fr,{className:"p-2 md:p-4",children:[_.jsx("h1",{className:"mb-6 text-2xl font-bold",children:u[i].name}),_.jsx(d,{formData:a,updateFormData:f}),_.jsxs("div",{className:"mt-8 flex justify-between",children:[_.jsxs(tn,{variant:"outline",onClick:m,disabled:i===0,children:[_.jsx(M3,{className:"mr-2 h-4 w-4"}),"Voltar"]}),i<u.length-1?_.jsxs(tn,{onClick:g,children:["Proximo",_.jsx(vP,{className:"ml-2 h-4 w-4"})]}):_.jsx(tn,{onClick:v,children:"Ir para o relatório"})]})]})})]})}function GR(){const n=bl(),{id:e}=Eo(),[t,r]=E.useState(null),i=async()=>{const o=await er(`/api/v2/relatorios/${e}`),a=o.evidencias.map(d=>{var m;const f=d.arquivos,g=[];return f.forEach(v=>{const x=v.nome;g.push({name:x,vectors:v.vetores||[],url:v.url,id:v.id})}),{id:d.id,environment:d.ambiente,location:d.local,description:d.descricao,date:(m=d.date)==null?void 0:m.split("T")[0],attachments:g}}),l=o.infraestruturas.map(d=>d.tipo),u=o.servicosComunitarios.map(d=>d.tipo);r({...o,evidencias:a,infraestruturas:l,servicosComunitarios:u})};E.useEffect(()=>{i()},[e]);const s=async o=>{n(`/reports/${o==null?void 0:o.id}/view`)};return t?_.jsx(W7,{onSubmit:s,initialData:t}):_.jsx("div",{children:"Carregando..."})}const $7=[{accessorKey:"idImovel",header:"ID "},{accessorKey:"proprietario",header:"Proprietario"},{accessorKey:"createdAt",header:({column:n})=>_.jsxs(tn,{variant:"ghost",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Data da vistoria",_.jsx(yP,{className:"ml-2 h-4 w-4"})]}),cell:({row:n})=>{const e=n.getValue("createdAt");if(!e)return"-";const t=new Date(e);return new Intl.DateTimeFormat("pt-BR",{timeZone:"UTC",day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}}];function U7(){const[n,e]=E.useState([]),t=bl();E.useEffect(()=>{er("/api/relatorios").then(s=>e(s))},[]);const r=({id:s})=>{t(`/reports/${s}/view`)},i=async()=>{const s=await er("/api/v2/relatorios/","POST"),o=s==null?void 0:s.relatorioId;t(`/reports/${o}/create`)};return _.jsxs("div",{className:"flex min-h-screen w-full flex-col bg-gray-50",children:[_.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center gap-4 border-b bg-white px-4 md:px-6",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(D3,{className:"h-6 w-6 text-blue-800"}),_.jsx("h1",{className:"text-lg font-semibold",children:"Sistema de Vistorias"})]}),_.jsx("div",{className:"ml-auto flex items-center gap-4",children:_.jsxs(tn,{onClick:i,children:[_.jsx(O3,{className:"mr-2 h-4 w-4"}),"Novo Relatório"]})})]}),_.jsx("main",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:_.jsxs(fr,{children:[_.jsxs(Xm,{className:"pb-2",children:[_.jsx(Ym,{children:"Relatórios de Vistoria"}),_.jsx(Km,{children:"Gerencie todos os relatórios de vistoria de imóveis."})]}),_.jsx(Uc,{children:_.jsx("div",{className:"overflow-auto",children:_.jsx(ZO,{columns:$7,data:n,onSelect:r})})})]})})]})}var H7="Separator",WR="horizontal",X7=["horizontal","vertical"],oF=E.forwardRef((n,e)=>{const{decorative:t,orientation:r=WR,...i}=n,s=Y7(r)?r:WR,a=t?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return _.jsx(Qe.div,{"data-orientation":s,...a,...i,ref:e})});oF.displayName=H7;function Y7(n){return X7.includes(n)}var aF=oF;const oa=E.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},i)=>_.jsx(aF,{ref:i,decorative:t,orientation:e,className:ct("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));oa.displayName=aF.displayName;var KS="Tabs",[K7,Fee]=Ms(KS,[py]),lF=py(),[q7,qS]=K7(KS),cF=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=n,d=ly(a),[f,g]=ml({prop:r,onChange:i,defaultProp:s});return _.jsx(q7,{scope:t,baseId:ya(),value:f,onValueChange:g,orientation:o,dir:d,activationMode:l,children:_.jsx(Qe.div,{dir:d,"data-orientation":o,...u,ref:e})})});cF.displayName=KS;var uF="TabsList",hF=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,s=qS(uF,t),o=lF(t);return _.jsx(WM,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:_.jsx(Qe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});hF.displayName=uF;var dF="TabsTrigger",fF=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...s}=n,o=qS(dF,t),a=lF(t),l=mF(o.baseId,r),u=yF(o.baseId,r),d=r===o.value;return _.jsx($M,{asChild:!0,...a,focusable:!i,active:d,children:_.jsx(Qe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:ke(n.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:ke(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:ke(n.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})})});fF.displayName=dF;var gF="TabsContent",pF=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:s,...o}=n,a=qS(gF,t),l=mF(a.baseId,r),u=yF(a.baseId,r),d=r===a.value,f=E.useRef(d);return E.useEffect(()=>{const g=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(g)},[]),_.jsx(es,{present:i||d,children:({present:g})=>_.jsx(Qe.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!g,id:u,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:g&&s})})});pF.displayName=gF;function mF(n,e){return`${n}-trigger-${e}`}function yF(n,e){return`${n}-content-${e}`}var Z7=cF,vF=hF,xF=fF,_F=pF;const J7=Z7,wF=E.forwardRef(({className:n,...e},t)=>_.jsx(vF,{ref:t,className:ct("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...e}));wF.displayName=vF.displayName;const CF=E.forwardRef(({className:n,...e},t)=>_.jsx(xF,{ref:t,className:ct("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...e}));CF.displayName=xF.displayName;const SF=E.forwardRef(({className:n,...e},t)=>_.jsx(_F,{ref:t,className:ct("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));SF.displayName=_F.displayName;function Q7(){const{id:n}=Eo();return _.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b p-4 hidden md:flex justify-between items-center",children:[_.jsx("h1",{className:"text-xl font-semibold text-gray-700",children:"Visualização do Laudo"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx($c,{to:`/reports/${n}/update`,children:_.jsxs(tn,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[_.jsx(wP,{className:"h-4 w-4"}),_.jsx("span",{children:"Editar"})]})}),_.jsx($c,{to:`${iC}/api/relatorios/${n}/generate`,target:"_blank",children:_.jsxs(tn,{variant:"default",size:"sm",className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-900",children:[_.jsx(m_,{className:"h-4 w-4"}),_.jsx("span",{children:"Exportar DOCX"})]})})]})]})}function eq(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const tq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rq={};function $R(n,e){return(rq.jsx?nq:tq).test(n)}const iq=/[ \t\n\f\r]/g;function sq(n){return typeof n=="object"?n.type==="text"?UR(n.value):!1:UR(n)}function UR(n){return n.replace(iq,"")===""}class rf{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}rf.prototype.normal={};rf.prototype.property={};rf.prototype.space=void 0;function bF(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new rf(t,r,e)}function Ow(n){return n.toLowerCase()}class Vr{constructor(e,t){this.attribute=t,this.property=e}}Vr.prototype.attribute="";Vr.prototype.booleanish=!1;Vr.prototype.boolean=!1;Vr.prototype.commaOrSpaceSeparated=!1;Vr.prototype.commaSeparated=!1;Vr.prototype.defined=!1;Vr.prototype.mustUseProperty=!1;Vr.prototype.number=!1;Vr.prototype.overloadedBoolean=!1;Vr.prototype.property="";Vr.prototype.spaceSeparated=!1;Vr.prototype.space=void 0;let oq=0;const rt=Ml(),pn=Ml(),Dw=Ml(),xe=Ml(),Ft=Ml(),Gc=Ml(),Kr=Ml();function Ml(){return 2**++oq}const Lw=Object.freeze(Object.defineProperty({__proto__:null,boolean:rt,booleanish:pn,commaOrSpaceSeparated:Kr,commaSeparated:Gc,number:xe,overloadedBoolean:Dw,spaceSeparated:Ft},Symbol.toStringTag,{value:"Module"})),qx=Object.keys(Lw);class ZS extends Vr{constructor(e,t,r,i){let s=-1;if(super(e,t),HR(this,"space",i),typeof r=="number")for(;++s<qx.length;){const o=qx[s];HR(this,qx[s],(r&Lw[o])===Lw[o])}}}ZS.prototype.defined=!0;function HR(n,e,t){t&&(n[e]=t)}function ku(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const s=new ZS(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,t[Ow(r)]=r,t[Ow(s.attribute)]=r}return new rf(e,t,n.space)}const EF=ku({properties:{ariaActiveDescendant:null,ariaAtomic:pn,ariaAutoComplete:null,ariaBusy:pn,ariaChecked:pn,ariaColCount:xe,ariaColIndex:xe,ariaColSpan:xe,ariaControls:Ft,ariaCurrent:null,ariaDescribedBy:Ft,ariaDetails:null,ariaDisabled:pn,ariaDropEffect:Ft,ariaErrorMessage:null,ariaExpanded:pn,ariaFlowTo:Ft,ariaGrabbed:pn,ariaHasPopup:null,ariaHidden:pn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ft,ariaLevel:xe,ariaLive:null,ariaModal:pn,ariaMultiLine:pn,ariaMultiSelectable:pn,ariaOrientation:null,ariaOwns:Ft,ariaPlaceholder:null,ariaPosInSet:xe,ariaPressed:pn,ariaReadOnly:pn,ariaRelevant:null,ariaRequired:pn,ariaRoleDescription:Ft,ariaRowCount:xe,ariaRowIndex:xe,ariaRowSpan:xe,ariaSelected:pn,ariaSetSize:xe,ariaSort:null,ariaValueMax:xe,ariaValueMin:xe,ariaValueNow:xe,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function TF(n,e){return e in n?n[e]:e}function kF(n,e){return TF(n,e.toLowerCase())}const aq=ku({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Gc,acceptCharset:Ft,accessKey:Ft,action:null,allow:null,allowFullScreen:rt,allowPaymentRequest:rt,allowUserMedia:rt,alt:null,as:null,async:rt,autoCapitalize:null,autoComplete:Ft,autoFocus:rt,autoPlay:rt,blocking:Ft,capture:null,charSet:null,checked:rt,cite:null,className:Ft,cols:xe,colSpan:null,content:null,contentEditable:pn,controls:rt,controlsList:Ft,coords:xe|Gc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rt,defer:rt,dir:null,dirName:null,disabled:rt,download:Dw,draggable:pn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rt,formTarget:null,headers:Ft,height:xe,hidden:Dw,high:xe,href:null,hrefLang:null,htmlFor:Ft,httpEquiv:Ft,id:null,imageSizes:null,imageSrcSet:null,inert:rt,inputMode:null,integrity:null,is:null,isMap:rt,itemId:null,itemProp:Ft,itemRef:Ft,itemScope:rt,itemType:Ft,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rt,low:xe,manifest:null,max:null,maxLength:xe,media:null,method:null,min:null,minLength:xe,multiple:rt,muted:rt,name:null,nonce:null,noModule:rt,noValidate:rt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rt,optimum:xe,pattern:null,ping:Ft,placeholder:null,playsInline:rt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rt,referrerPolicy:null,rel:Ft,required:rt,reversed:rt,rows:xe,rowSpan:xe,sandbox:Ft,scope:null,scoped:rt,seamless:rt,selected:rt,shadowRootClonable:rt,shadowRootDelegatesFocus:rt,shadowRootMode:null,shape:null,size:xe,sizes:null,slot:null,span:xe,spellCheck:pn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xe,step:null,style:null,tabIndex:xe,target:null,title:null,translate:null,type:null,typeMustMatch:rt,useMap:null,value:pn,width:xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ft,axis:null,background:null,bgColor:null,border:xe,borderColor:null,bottomMargin:xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rt,declare:rt,event:null,face:null,frame:null,frameBorder:null,hSpace:xe,leftMargin:xe,link:null,longDesc:null,lowSrc:null,marginHeight:xe,marginWidth:xe,noResize:rt,noHref:rt,noShade:rt,noWrap:rt,object:null,profile:null,prompt:null,rev:null,rightMargin:xe,rules:null,scheme:null,scrolling:pn,standby:null,summary:null,text:null,topMargin:xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rt,disableRemotePlayback:rt,prefix:null,property:null,results:xe,security:null,unselectable:null},space:"html",transform:kF}),lq=ku({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Kr,accentHeight:xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xe,amplitude:xe,arabicForm:null,ascent:xe,attributeName:null,attributeType:null,azimuth:xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xe,by:null,calcMode:null,capHeight:xe,className:Ft,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xe,diffuseConstant:xe,direction:null,display:null,dur:null,divisor:xe,dominantBaseline:null,download:rt,dx:null,dy:null,edgeMode:null,editable:null,elevation:xe,enableBackground:null,end:null,event:null,exponent:xe,externalResourcesRequired:null,fill:null,fillOpacity:xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Gc,g2:Gc,glyphName:Gc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xe,horizOriginX:xe,horizOriginY:xe,id:null,ideographic:xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xe,k:xe,k1:xe,k2:xe,k3:xe,k4:xe,kernelMatrix:Kr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xe,overlineThickness:xe,paintOrder:null,panose1:null,path:null,pathLength:xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ft,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xe,pointsAtY:xe,pointsAtZ:xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Kr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Kr,rev:Kr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Kr,requiredFeatures:Kr,requiredFonts:Kr,requiredFormats:Kr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xe,specularExponent:xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xe,strikethroughThickness:xe,string:null,stroke:null,strokeDashArray:Kr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xe,strokeOpacity:xe,strokeWidth:null,style:null,surfaceScale:xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Kr,tabIndex:xe,tableValues:null,target:null,targetX:xe,targetY:xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Kr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xe,underlineThickness:xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xe,values:null,vAlphabetic:xe,vMathematical:xe,vectorEffect:null,vHanging:xe,vIdeographic:xe,version:null,vertAdvY:xe,vertOriginX:xe,vertOriginY:xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:TF}),RF=ku({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),PF=ku({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:kF}),IF=ku({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),cq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},uq=/[A-Z]/g,XR=/-[a-z]/g,hq=/^data[-\w.:]+$/i;function dq(n,e){const t=Ow(e);let r=e,i=Vr;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&hq.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(XR,gq);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!XR.test(s)){let o=s.replace(uq,fq);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=ZS}return new i(r,e)}function fq(n){return"-"+n.toLowerCase()}function gq(n){return n.charAt(1).toUpperCase()}const pq=bF([EF,aq,RF,PF,IF],"html"),JS=bF([EF,lq,RF,PF,IF],"svg");function mq(n){return n.join(" ").trim()}var pc={},Zx,YR;function yq(){if(YR)return Zx;YR=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,u="/",d="*",f="",g="comment",m="declaration";Zx=function(x,w){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];w=w||{};var C=1,b=1;function k(G){var V=G.match(e);V&&(C+=V.length);var ne=G.lastIndexOf(l);b=~ne?G.length-ne:b+G.length}function R(){var G={line:C,column:b};return function(V){return V.position=new P(G),D(),V}}function P(G){this.start=G,this.end={line:C,column:b},this.source=w.source}P.prototype.content=x;function A(G){var V=new Error(w.source+":"+C+":"+b+": "+G);if(V.reason=G,V.filename=w.source,V.line=C,V.column=b,V.source=x,!w.silent)throw V}function O(G){var V=G.exec(x);if(V){var ne=V[0];return k(ne),x=x.slice(ne.length),V}}function D(){O(t)}function j(G){var V;for(G=G||[];V=Q();)V!==!1&&G.push(V);return G}function Q(){var G=R();if(!(u!=x.charAt(0)||d!=x.charAt(1))){for(var V=2;f!=x.charAt(V)&&(d!=x.charAt(V)||u!=x.charAt(V+1));)++V;if(V+=2,f===x.charAt(V-1))return A("End of comment missing");var ne=x.slice(2,V-2);return b+=2,k(ne),x=x.slice(V),b+=2,G({type:g,comment:ne})}}function X(){var G=R(),V=O(r);if(V){if(Q(),!O(i))return A("property missing ':'");var ne=O(s),U=G({type:m,property:v(V[0].replace(n,f)),value:ne?v(ne[0].replace(n,f)):f});return O(o),U}}function W(){var G=[];j(G);for(var V;V=X();)V!==!1&&(G.push(V),j(G));return G}return D(),W()};function v(x){return x?x.replace(a,f):f}return Zx}var KR;function vq(){if(KR)return pc;KR=1;var n=pc&&pc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pc,"__esModule",{value:!0}),pc.default=t;var e=n(yq());function t(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,e.default)(r),a=typeof i=="function";return o.forEach(function(l){if(l.type==="declaration"){var u=l.property,d=l.value;a?i(u,d,l):d&&(s=s||{},s[u]=d)}}),s}return pc}var Eh={},qR;function xq(){if(qR)return Eh;qR=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(u){return!u||t.test(u)||n.test(u)},o=function(u,d){return d.toUpperCase()},a=function(u,d){return"".concat(d,"-")},l=function(u,d){return d===void 0&&(d={}),s(u)?u:(u=u.toLowerCase(),d.reactCompat?u=u.replace(i,a):u=u.replace(r,a),u.replace(e,o))};return Eh.camelCase=l,Eh}var Th,ZR;function _q(){if(ZR)return Th;ZR=1;var n=Th&&Th.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(vq()),t=xq();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,t.camelCase)(a,s)]=l)}),o}return r.default=r,Th=r,Th}var wq=_q();const Cq=jm(wq),MF=AF("end"),QS=AF("start");function AF(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Sq(n){const e=QS(n),t=MF(n);if(e&&t)return{start:e,end:t}}function Jh(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?JR(n.position):"start"in n||"end"in n?JR(n):"line"in n||"column"in n?Fw(n):""}function Fw(n){return QR(n&&n.line)+":"+QR(n&&n.column)}function JR(n){return Fw(n&&n.start)+"-"+Fw(n&&n.end)}function QR(n){return n&&typeof n=="number"?n:1}class ir extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",s={},o=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Jh(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ir.prototype.file="";ir.prototype.name="";ir.prototype.reason="";ir.prototype.message="";ir.prototype.stack="";ir.prototype.column=void 0;ir.prototype.line=void 0;ir.prototype.ancestors=void 0;ir.prototype.cause=void 0;ir.prototype.fatal=void 0;ir.prototype.place=void 0;ir.prototype.ruleId=void 0;ir.prototype.source=void 0;const e1={}.hasOwnProperty,bq=new Map,Eq=/[A-Z]/g,Tq=new Set(["table","tbody","thead","tfoot","tr"]),kq=new Set(["td","th"]),OF="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Rq(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Fq(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Lq(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?JS:pq,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=DF(i,n,void 0);return s&&typeof s!="string"?s:i.create(n,i.Fragment,{children:s||void 0},void 0)}function DF(n,e,t){if(e.type==="element")return Pq(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Iq(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Aq(n,e,t);if(e.type==="mdxjsEsm")return Mq(n,e);if(e.type==="root")return Oq(n,e,t);if(e.type==="text")return Dq(n,e)}function Pq(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=JS,n.schema=i),n.ancestors.push(e);const s=FF(n,e.tagName,!1),o=Nq(n,e);let a=n1(n,e);return Tq.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!sq(l):!0})),LF(n,o,s,e),t1(o,a),n.ancestors.pop(),n.schema=r,n.create(e,s,o,t)}function Iq(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}Ad(n,e.position)}function Mq(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);Ad(n,e.position)}function Aq(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=JS,n.schema=i),n.ancestors.push(e);const s=e.name===null?n.Fragment:FF(n,e.name,!0),o=jq(n,e),a=n1(n,e);return LF(n,o,s,e),t1(o,a),n.ancestors.pop(),n.schema=r,n.create(e,s,o,t)}function Oq(n,e,t){const r={};return t1(r,n1(n,e)),n.create(e,n.Fragment,r,t)}function Dq(n,e){return e.value}function LF(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function t1(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function Lq(n,e,t){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?t:e;return a?u(s,o,a):u(s,o)}}function Fq(n,e){return t;function t(r,i,s,o){const a=Array.isArray(s.children),l=QS(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function Nq(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&e1.call(e.properties,i)){const s=zq(n,i,e.properties[i]);if(s){const[o,a]=s;n.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&kq.has(e.tagName)?r=a:t[o]=a}}if(r){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function jq(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else Ad(n,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const a=r.value.data.estree.body[0];a.type,s=n.evaluater.evaluateExpression(a.expression)}else Ad(n,e.position);else s=r.value===null?!0:r.value;t[i]=s}return t}function n1(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:bq;for(;++r<e.children.length;){const s=e.children[r];let o;if(n.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=DF(n,s,o);a!==void 0&&t.push(a)}return t}function zq(n,e,t){const r=dq(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?eq(t):mq(t)),r.property==="style"){let i=typeof t=="object"?t:Vq(n,String(t));return n.stylePropertyNameCase==="css"&&(i=Bq(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?cq[r.property]||r.property:r.attribute,t]}}function Vq(n,e){try{return Cq(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new ir("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=OF+"#cannot-parse-style-attribute",i}}function FF(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=$R(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=$R(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return e1.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);Ad(n)}function Ad(n,e){const t=new ir("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=OF+"#cannot-handle-mdx-estrees-without-createevaluater",t}function Bq(n){const e={};let t;for(t in n)e1.call(n,t)&&(e[Gq(t)]=n[t]);return e}function Gq(n){let e=n.replace(Eq,Wq);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Wq(n){return"-"+n.toLowerCase()}const Jx={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},$q={};function Uq(n,e){const t=$q,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return NF(n,r,i)}function NF(n,e,t){if(Hq(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return e2(n.children,e,t)}return Array.isArray(n)?e2(n,e,t):""}function e2(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=NF(n[i],e,t);return r.join("")}function Hq(n){return!!(n&&typeof n=="object")}const t2=document.createElement("i");function r1(n){const e="&"+n+";";t2.innerHTML=e;const t=t2.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Rs(n,e,t,r){const i=n.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),n.splice(...o),s+=1e4,e+=1e4}function yi(n,e){return n.length>0?(Rs(n,n.length,0,e),n):e}const n2={}.hasOwnProperty;function Xq(n){const e={};let t=-1;for(;++t<n.length;)Yq(e,n[t]);return e}function Yq(n,e){let t;for(t in e){const i=(n2.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let o;if(s)for(o in s){n2.call(i,o)||(i[o]=[]);const a=s[o];Kq(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Kq(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Rs(n,0,0,r)}function jF(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function Wc(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ms=za(/[A-Za-z]/),ti=za(/[\dA-Za-z]/),qq=za(/[#-'*+\--9=?A-Z^-~]/);function Nw(n){return n!==null&&(n<32||n===127)}const jw=za(/\d/),Zq=za(/[\dA-Fa-f]/),Jq=za(/[!-/:-@[-`{-~]/);function Ze(n){return n!==null&&n<-2}function Fr(n){return n!==null&&(n<0||n===32)}function Ct(n){return n===-2||n===-1||n===32}const Qq=za(new RegExp("\\p{P}|\\p{S}","u")),eZ=za(/\s/);function za(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Ru(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const s=n.charCodeAt(t);let o="";if(s===37&&ti(n.charCodeAt(t+1))&&ti(n.charCodeAt(t+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=n.charCodeAt(t+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(n.slice(r,t),encodeURIComponent(o)),r=t+i+1,o=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function Nt(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Ct(l)?(n.enter(t),a(l)):e(l)}function a(l){return Ct(l)&&s++<i?(n.consume(l),a):(n.exit(t),e(l))}}const tZ={tokenize:nZ};function nZ(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Nt(n,e,"linePrefix")}function i(a){return n.enter("paragraph"),s(a)}function s(a){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,o(a)}function o(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Ze(a)?(n.consume(a),n.exit("chunkText"),s):(n.consume(a),o)}}const rZ={tokenize:iZ},r2={tokenize:sZ};function iZ(n){const e=this,t=[];let r=0,i,s,o;return a;function a(k){if(r<t.length){const R=t[r];return e.containerState=R[1],n.attempt(R[0].continuation,l,u)(k)}return u(k)}function l(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const R=e.events.length;let P=R,A;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){A=e.events[P][1].end;break}C(r);let O=R;for(;O<e.events.length;)e.events[O][1].end={...A},O++;return Rs(e.events,P+1,0,e.events.slice(R)),e.events.length=O,u(k)}return a(k)}function u(k){if(r===t.length){if(!i)return g(k);if(i.currentConstruct&&i.currentConstruct.concrete)return v(k);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(r2,d,f)(k)}function d(k){return i&&b(),C(r),g(k)}function f(k){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,v(k)}function g(k){return e.containerState={},n.attempt(r2,m,v)(k)}function m(k){return r++,t.push([e.currentConstruct,e.containerState]),g(k)}function v(k){if(k===null){i&&b(),C(0),n.consume(k);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(k)}function x(k){if(k===null){w(n.exit("chunkFlow"),!0),C(0),n.consume(k);return}return Ze(k)?(n.consume(k),w(n.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(n.consume(k),x)}function w(k,R){const P=e.sliceStream(k);if(R&&P.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write(P),e.parser.lazy[k.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const O=e.events.length;let D=O,j,Q;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(j){Q=e.events[D][1].end;break}j=!0}for(C(r),A=O;A<e.events.length;)e.events[A][1].end={...Q},A++;Rs(e.events,D+1,0,e.events.slice(O)),e.events.length=A}}function C(k){let R=t.length;for(;R-- >k;){const P=t[R];e.containerState=P[1],P[0].exit.call(e,n)}t.length=k}function b(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function sZ(n,e,t){return Nt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function i2(n){if(n===null||Fr(n)||eZ(n))return 1;if(Qq(n))return 2}function i1(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const s=n[i].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const zw={name:"attention",resolveAll:oZ,tokenize:aZ};function oZ(n,e){let t=-1,r,i,s,o,a,l,u,d;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const f={...n[r][1].end},g={...n[t][1].start};s2(f,-l),s2(g,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...n[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:g},s={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},n[r][1].end={...o.start},n[t][1].start={...a.end},u=[],n[r][1].end.offset-n[r][1].start.offset&&(u=yi(u,[["enter",n[r][1],e],["exit",n[r][1],e]])),u=yi(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=yi(u,i1(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),u=yi(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(d=2,u=yi(u,[["enter",n[t][1],e],["exit",n[t][1],e]])):d=0,Rs(n,r-1,t-r+3,u),t=r+u.length-d-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function aZ(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=i2(r);let s;return o;function o(l){return s=l,n.enter("attentionSequence"),a(l)}function a(l){if(l===s)return n.consume(l),a;const u=n.exit("attentionSequence"),d=i2(l),f=!d||d===2&&i||t.includes(l),g=!i||i===2&&d||t.includes(r);return u._open=!!(s===42?f:f&&(i||!g)),u._close=!!(s===42?g:g&&(d||!f)),e(l)}}function s2(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const lZ={name:"autolink",tokenize:cZ};function cZ(n,e,t){let r=0;return i;function i(m){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(m){return ms(m)?(n.consume(m),o):m===64?t(m):u(m)}function o(m){return m===43||m===45||m===46||ti(m)?(r=1,a(m)):u(m)}function a(m){return m===58?(n.consume(m),r=0,l):(m===43||m===45||m===46||ti(m))&&r++<32?(n.consume(m),a):(r=0,u(m))}function l(m){return m===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):m===null||m===32||m===60||Nw(m)?t(m):(n.consume(m),l)}function u(m){return m===64?(n.consume(m),d):qq(m)?(n.consume(m),u):t(m)}function d(m){return ti(m)?f(m):t(m)}function f(m){return m===46?(n.consume(m),r=0,d):m===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):g(m)}function g(m){if((m===45||ti(m))&&r++<63){const v=m===45?g:f;return n.consume(m),v}return t(m)}}const Zy={partial:!0,tokenize:uZ};function uZ(n,e,t){return r;function r(s){return Ct(s)?Nt(n,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ze(s)?e(s):t(s)}}const zF={continuation:{tokenize:dZ},exit:fZ,name:"blockQuote",tokenize:hZ};function hZ(n,e,t){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return t(o)}function s(o){return Ct(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function dZ(n,e,t){const r=this;return i;function i(o){return Ct(o)?Nt(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt(zF,e,t)(o)}}function fZ(n){n.exit("blockQuote")}const VF={name:"characterEscape",tokenize:gZ};function gZ(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),i}function i(s){return Jq(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const BF={name:"characterReference",tokenize:pZ};function pZ(n,e,t){const r=this;let i=0,s,o;return a;function a(f){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(f),n.exit("characterReferenceMarker"),l}function l(f){return f===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(f),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),s=31,o=ti,d(f))}function u(f){return f===88||f===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(f),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=Zq,d):(n.enter("characterReferenceValue"),s=7,o=jw,d(f))}function d(f){if(f===59&&i){const g=n.exit("characterReferenceValue");return o===ti&&!r1(r.sliceSerialize(g))?t(f):(n.enter("characterReferenceMarker"),n.consume(f),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(f)&&i++<s?(n.consume(f),d):t(f)}}const o2={partial:!0,tokenize:yZ},a2={concrete:!0,name:"codeFenced",tokenize:mZ};function mZ(n,e,t){const r=this,i={partial:!0,tokenize:P};let s=0,o=0,a;return l;function l(A){return u(A)}function u(A){const O=r.events[r.events.length-1];return s=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,a=A,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(A)}function d(A){return A===a?(o++,n.consume(A),d):o<3?t(A):(n.exit("codeFencedFenceSequence"),Ct(A)?Nt(n,f,"whitespace")(A):f(A))}function f(A){return A===null||Ze(A)?(n.exit("codeFencedFence"),r.interrupt?e(A):n.check(o2,x,R)(A)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||Ze(A)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),f(A)):Ct(A)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Nt(n,m,"whitespace")(A)):A===96&&A===a?t(A):(n.consume(A),g)}function m(A){return A===null||Ze(A)?f(A):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),v(A))}function v(A){return A===null||Ze(A)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),f(A)):A===96&&A===a?t(A):(n.consume(A),v)}function x(A){return n.attempt(i,R,w)(A)}function w(A){return n.enter("lineEnding"),n.consume(A),n.exit("lineEnding"),C}function C(A){return s>0&&Ct(A)?Nt(n,b,"linePrefix",s+1)(A):b(A)}function b(A){return A===null||Ze(A)?n.check(o2,x,R)(A):(n.enter("codeFlowValue"),k(A))}function k(A){return A===null||Ze(A)?(n.exit("codeFlowValue"),b(A)):(n.consume(A),k)}function R(A){return n.exit("codeFenced"),e(A)}function P(A,O,D){let j=0;return Q;function Q(ne){return A.enter("lineEnding"),A.consume(ne),A.exit("lineEnding"),X}function X(ne){return A.enter("codeFencedFence"),Ct(ne)?Nt(A,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ne):W(ne)}function W(ne){return ne===a?(A.enter("codeFencedFenceSequence"),G(ne)):D(ne)}function G(ne){return ne===a?(j++,A.consume(ne),G):j>=o?(A.exit("codeFencedFenceSequence"),Ct(ne)?Nt(A,V,"whitespace")(ne):V(ne)):D(ne)}function V(ne){return ne===null||Ze(ne)?(A.exit("codeFencedFence"),O(ne)):D(ne)}}}function yZ(n,e,t){const r=this;return i;function i(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const Qx={name:"codeIndented",tokenize:xZ},vZ={partial:!0,tokenize:_Z};function xZ(n,e,t){const r=this;return i;function i(u){return n.enter("codeIndented"),Nt(n,s,"linePrefix",5)(u)}function s(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):t(u)}function o(u){return u===null?l(u):Ze(u)?n.attempt(vZ,o,l)(u):(n.enter("codeFlowValue"),a(u))}function a(u){return u===null||Ze(u)?(n.exit("codeFlowValue"),o(u)):(n.consume(u),a)}function l(u){return n.exit("codeIndented"),e(u)}}function _Z(n,e,t){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?t(o):Ze(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),i):Nt(n,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Ze(o)?i(o):t(o)}}const wZ={name:"codeText",previous:SZ,resolve:CZ,tokenize:bZ};function CZ(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function SZ(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bZ(n,e,t){let r=0,i,s;return o;function o(f){return n.enter("codeText"),n.enter("codeTextSequence"),a(f)}function a(f){return f===96?(n.consume(f),r++,a):(n.exit("codeTextSequence"),l(f))}function l(f){return f===null?t(f):f===32?(n.enter("space"),n.consume(f),n.exit("space"),l):f===96?(s=n.enter("codeTextSequence"),i=0,d(f)):Ze(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),l):(n.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||Ze(f)?(n.exit("codeTextData"),l(f)):(n.consume(f),u)}function d(f){return f===96?(n.consume(f),i++,d):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(f)):(s.type="codeTextData",u(f))}}class EZ{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&kh(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),kh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),kh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);kh(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);kh(this.left,t.reverse())}}}function kh(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function GF(n){const e={};let t=-1,r,i,s,o,a,l,u;const d=new EZ(n);for(;++t<d.length;){for(;t in e;)t=e[t];if(r=d.get(t),t&&r[1].type==="chunkFlow"&&d.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,TZ(d,t)),t=e[t],u=!0);else if(r[1]._container){for(s=t,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,t),a.unshift(r),d.splice(i,t-i+1,a))}}return Rs(n,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function TZ(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const s=[];let o=t._tokenizer;o||(o=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let d,f,g=-1,m=t,v=0,x=0;const w=[x];for(;m;){for(;n.get(++i)[1]!==m;);s.push(i),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),f&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=t;++g<a.length;)a[g][0]==="exit"&&a[g-1][0]==="enter"&&a[g][1].type===a[g-1][1].type&&a[g][1].start.line!==a[g][1].end.line&&(x=g+1,w.push(x),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):w.pop(),g=w.length;g--;){const C=a.slice(w[g],w[g+1]),b=s.pop();l.push([b,b+C.length-1]),n.splice(b,2,C)}for(l.reverse(),g=-1;++g<l.length;)u[v+l[g][0]]=v+l[g][1],v+=l[g][1]-l[g][0]-1;return u}const kZ={resolve:PZ,tokenize:IZ},RZ={partial:!0,tokenize:MZ};function PZ(n){return GF(n),n}function IZ(n,e){let t;return r;function r(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Ze(a)?n.check(RZ,o,s)(a):(n.consume(a),i)}function s(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function o(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function MZ(n,e,t){const r=this;return i;function i(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Nt(n,s,"linePrefix")}function s(o){if(o===null||Ze(o))return t(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function WF(n,e,t,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let d=0;return f;function f(C){return C===60?(n.enter(r),n.enter(i),n.enter(s),n.consume(C),n.exit(s),g):C===null||C===32||C===41||Nw(C)?t(C):(n.enter(r),n.enter(o),n.enter(a),n.enter("chunkString",{contentType:"string"}),x(C))}function g(C){return C===62?(n.enter(s),n.consume(C),n.exit(s),n.exit(i),n.exit(r),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===62?(n.exit("chunkString"),n.exit(a),g(C)):C===null||C===60||Ze(C)?t(C):(n.consume(C),C===92?v:m)}function v(C){return C===60||C===62||C===92?(n.consume(C),m):m(C)}function x(C){return!d&&(C===null||C===41||Fr(C))?(n.exit("chunkString"),n.exit(a),n.exit(o),n.exit(r),e(C)):d<u&&C===40?(n.consume(C),d++,x):C===41?(n.consume(C),d--,x):C===null||C===32||C===40||Nw(C)?t(C):(n.consume(C),C===92?w:x)}function w(C){return C===40||C===41||C===92?(n.consume(C),x):x(C)}}function $F(n,e,t,r,i,s){const o=this;let a=0,l;return u;function u(m){return n.enter(r),n.enter(i),n.consume(m),n.exit(i),n.enter(s),d}function d(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?t(m):m===93?(n.exit(s),n.enter(i),n.consume(m),n.exit(i),n.exit(r),e):Ze(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||Ze(m)||a++>999?(n.exit("chunkString"),d(m)):(n.consume(m),l||(l=!Ct(m)),m===92?g:f)}function g(m){return m===91||m===92||m===93?(n.consume(m),a++,f):f(m)}}function UF(n,e,t,r,i,s){let o;return a;function a(g){return g===34||g===39||g===40?(n.enter(r),n.enter(i),n.consume(g),n.exit(i),o=g===40?41:g,l):t(g)}function l(g){return g===o?(n.enter(i),n.consume(g),n.exit(i),n.exit(r),e):(n.enter(s),u(g))}function u(g){return g===o?(n.exit(s),l(o)):g===null?t(g):Ze(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),Nt(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===o||g===null||Ze(g)?(n.exit("chunkString"),u(g)):(n.consume(g),g===92?f:d)}function f(g){return g===o||g===92?(n.consume(g),d):d(g)}}function Qh(n,e){let t;return r;function r(i){return Ze(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):Ct(i)?Nt(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const AZ={name:"definition",tokenize:DZ},OZ={partial:!0,tokenize:LZ};function DZ(n,e,t){const r=this;let i;return s;function s(m){return n.enter("definition"),o(m)}function o(m){return $F.call(r,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=Wc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(n.enter("definitionMarker"),n.consume(m),n.exit("definitionMarker"),l):t(m)}function l(m){return Fr(m)?Qh(n,u)(m):u(m)}function u(m){return WF(n,d,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return n.attempt(OZ,f,f)(m)}function f(m){return Ct(m)?Nt(n,g,"whitespace")(m):g(m)}function g(m){return m===null||Ze(m)?(n.exit("definition"),r.parser.defined.push(i),e(m)):t(m)}}function LZ(n,e,t){return r;function r(a){return Fr(a)?Qh(n,i)(a):t(a)}function i(a){return UF(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ct(a)?Nt(n,o,"whitespace")(a):o(a)}function o(a){return a===null||Ze(a)?e(a):t(a)}}const FZ={name:"hardBreakEscape",tokenize:NZ};function NZ(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),i}function i(s){return Ze(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const jZ={name:"headingAtx",resolve:zZ,tokenize:VZ};function zZ(n,e){let t=n.length-2,r=3,i,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Rs(n,r,t-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),n}function VZ(n,e,t){let r=0;return i;function i(d){return n.enter("atxHeading"),s(d)}function s(d){return n.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(n.consume(d),o):d===null||Fr(d)?(n.exit("atxHeadingSequence"),a(d)):t(d)}function a(d){return d===35?(n.enter("atxHeadingSequence"),l(d)):d===null||Ze(d)?(n.exit("atxHeading"),e(d)):Ct(d)?Nt(n,a,"whitespace")(d):(n.enter("atxHeadingText"),u(d))}function l(d){return d===35?(n.consume(d),l):(n.exit("atxHeadingSequence"),a(d))}function u(d){return d===null||d===35||Fr(d)?(n.exit("atxHeadingText"),a(d)):(n.consume(d),u)}}const BZ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],l2=["pre","script","style","textarea"],GZ={concrete:!0,name:"htmlFlow",resolveTo:UZ,tokenize:HZ},WZ={partial:!0,tokenize:YZ},$Z={partial:!0,tokenize:XZ};function UZ(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function HZ(n,e,t){const r=this;let i,s,o,a,l;return u;function u(L){return d(L)}function d(L){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(L),f}function f(L){return L===33?(n.consume(L),g):L===47?(n.consume(L),s=!0,x):L===63?(n.consume(L),i=3,r.interrupt?e:I):ms(L)?(n.consume(L),o=String.fromCharCode(L),w):t(L)}function g(L){return L===45?(n.consume(L),i=2,m):L===91?(n.consume(L),i=5,a=0,v):ms(L)?(n.consume(L),i=4,r.interrupt?e:I):t(L)}function m(L){return L===45?(n.consume(L),r.interrupt?e:I):t(L)}function v(L){const ee="CDATA[";return L===ee.charCodeAt(a++)?(n.consume(L),a===ee.length?r.interrupt?e:W:v):t(L)}function x(L){return ms(L)?(n.consume(L),o=String.fromCharCode(L),w):t(L)}function w(L){if(L===null||L===47||L===62||Fr(L)){const ee=L===47,be=o.toLowerCase();return!ee&&!s&&l2.includes(be)?(i=1,r.interrupt?e(L):W(L)):BZ.includes(o.toLowerCase())?(i=6,ee?(n.consume(L),C):r.interrupt?e(L):W(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(L):s?b(L):k(L))}return L===45||ti(L)?(n.consume(L),o+=String.fromCharCode(L),w):t(L)}function C(L){return L===62?(n.consume(L),r.interrupt?e:W):t(L)}function b(L){return Ct(L)?(n.consume(L),b):Q(L)}function k(L){return L===47?(n.consume(L),Q):L===58||L===95||ms(L)?(n.consume(L),R):Ct(L)?(n.consume(L),k):Q(L)}function R(L){return L===45||L===46||L===58||L===95||ti(L)?(n.consume(L),R):P(L)}function P(L){return L===61?(n.consume(L),A):Ct(L)?(n.consume(L),P):k(L)}function A(L){return L===null||L===60||L===61||L===62||L===96?t(L):L===34||L===39?(n.consume(L),l=L,O):Ct(L)?(n.consume(L),A):D(L)}function O(L){return L===l?(n.consume(L),l=null,j):L===null||Ze(L)?t(L):(n.consume(L),O)}function D(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||Fr(L)?P(L):(n.consume(L),D)}function j(L){return L===47||L===62||Ct(L)?k(L):t(L)}function Q(L){return L===62?(n.consume(L),X):t(L)}function X(L){return L===null||Ze(L)?W(L):Ct(L)?(n.consume(L),X):t(L)}function W(L){return L===45&&i===2?(n.consume(L),U):L===60&&i===1?(n.consume(L),oe):L===62&&i===4?(n.consume(L),N):L===63&&i===3?(n.consume(L),I):L===93&&i===5?(n.consume(L),K):Ze(L)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(WZ,q,G)(L)):L===null||Ze(L)?(n.exit("htmlFlowData"),G(L)):(n.consume(L),W)}function G(L){return n.check($Z,V,q)(L)}function V(L){return n.enter("lineEnding"),n.consume(L),n.exit("lineEnding"),ne}function ne(L){return L===null||Ze(L)?G(L):(n.enter("htmlFlowData"),W(L))}function U(L){return L===45?(n.consume(L),I):W(L)}function oe(L){return L===47?(n.consume(L),o="",F):W(L)}function F(L){if(L===62){const ee=o.toLowerCase();return l2.includes(ee)?(n.consume(L),N):W(L)}return ms(L)&&o.length<8?(n.consume(L),o+=String.fromCharCode(L),F):W(L)}function K(L){return L===93?(n.consume(L),I):W(L)}function I(L){return L===62?(n.consume(L),N):L===45&&i===2?(n.consume(L),I):W(L)}function N(L){return L===null||Ze(L)?(n.exit("htmlFlowData"),q(L)):(n.consume(L),N)}function q(L){return n.exit("htmlFlow"),e(L)}}function XZ(n,e,t){const r=this;return i;function i(o){return Ze(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):t(o)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function YZ(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(Zy,e,t)}}const KZ={name:"htmlText",tokenize:qZ};function qZ(n,e,t){const r=this;let i,s,o;return a;function a(I){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(I),l}function l(I){return I===33?(n.consume(I),u):I===47?(n.consume(I),P):I===63?(n.consume(I),k):ms(I)?(n.consume(I),D):t(I)}function u(I){return I===45?(n.consume(I),d):I===91?(n.consume(I),s=0,v):ms(I)?(n.consume(I),b):t(I)}function d(I){return I===45?(n.consume(I),m):t(I)}function f(I){return I===null?t(I):I===45?(n.consume(I),g):Ze(I)?(o=f,oe(I)):(n.consume(I),f)}function g(I){return I===45?(n.consume(I),m):f(I)}function m(I){return I===62?U(I):I===45?g(I):f(I)}function v(I){const N="CDATA[";return I===N.charCodeAt(s++)?(n.consume(I),s===N.length?x:v):t(I)}function x(I){return I===null?t(I):I===93?(n.consume(I),w):Ze(I)?(o=x,oe(I)):(n.consume(I),x)}function w(I){return I===93?(n.consume(I),C):x(I)}function C(I){return I===62?U(I):I===93?(n.consume(I),C):x(I)}function b(I){return I===null||I===62?U(I):Ze(I)?(o=b,oe(I)):(n.consume(I),b)}function k(I){return I===null?t(I):I===63?(n.consume(I),R):Ze(I)?(o=k,oe(I)):(n.consume(I),k)}function R(I){return I===62?U(I):k(I)}function P(I){return ms(I)?(n.consume(I),A):t(I)}function A(I){return I===45||ti(I)?(n.consume(I),A):O(I)}function O(I){return Ze(I)?(o=O,oe(I)):Ct(I)?(n.consume(I),O):U(I)}function D(I){return I===45||ti(I)?(n.consume(I),D):I===47||I===62||Fr(I)?j(I):t(I)}function j(I){return I===47?(n.consume(I),U):I===58||I===95||ms(I)?(n.consume(I),Q):Ze(I)?(o=j,oe(I)):Ct(I)?(n.consume(I),j):U(I)}function Q(I){return I===45||I===46||I===58||I===95||ti(I)?(n.consume(I),Q):X(I)}function X(I){return I===61?(n.consume(I),W):Ze(I)?(o=X,oe(I)):Ct(I)?(n.consume(I),X):j(I)}function W(I){return I===null||I===60||I===61||I===62||I===96?t(I):I===34||I===39?(n.consume(I),i=I,G):Ze(I)?(o=W,oe(I)):Ct(I)?(n.consume(I),W):(n.consume(I),V)}function G(I){return I===i?(n.consume(I),i=void 0,ne):I===null?t(I):Ze(I)?(o=G,oe(I)):(n.consume(I),G)}function V(I){return I===null||I===34||I===39||I===60||I===61||I===96?t(I):I===47||I===62||Fr(I)?j(I):(n.consume(I),V)}function ne(I){return I===47||I===62||Fr(I)?j(I):t(I)}function U(I){return I===62?(n.consume(I),n.exit("htmlTextData"),n.exit("htmlText"),e):t(I)}function oe(I){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(I),n.exit("lineEnding"),F}function F(I){return Ct(I)?Nt(n,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):K(I)}function K(I){return n.enter("htmlTextData"),o(I)}}const s1={name:"labelEnd",resolveAll:eJ,resolveTo:tJ,tokenize:nJ},ZZ={tokenize:rJ},JZ={tokenize:iJ},QZ={tokenize:sJ};function eJ(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&Rs(n,0,n.length,t),n}function tJ(n,e){let t=n.length,r=0,i,s,o,a;for(;t--;)if(i=n[t][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=t);const l={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[s][1].start},end:{...n[o][1].end}},d={type:"labelText",start:{...n[s+r+2][1].end},end:{...n[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=yi(a,n.slice(s+1,s+r+3)),a=yi(a,[["enter",d,e]]),a=yi(a,i1(e.parser.constructs.insideSpan.null,n.slice(s+r+4,o-3),e)),a=yi(a,[["exit",d,e],n[o-2],n[o-1],["exit",u,e]]),a=yi(a,n.slice(o+1)),a=yi(a,[["exit",l,e]]),Rs(n,s,n.length,a),n}function nJ(n,e,t){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(g){return s?s._inactive?f(g):(o=r.parser.defined.includes(Wc(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),l):t(g)}function l(g){return g===40?n.attempt(ZZ,d,o?d:f)(g):g===91?n.attempt(JZ,d,o?u:f)(g):o?d(g):f(g)}function u(g){return n.attempt(QZ,d,f)(g)}function d(g){return e(g)}function f(g){return s._balanced=!0,t(g)}}function rJ(n,e,t){return r;function r(f){return n.enter("resource"),n.enter("resourceMarker"),n.consume(f),n.exit("resourceMarker"),i}function i(f){return Fr(f)?Qh(n,s)(f):s(f)}function s(f){return f===41?d(f):WF(n,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Fr(f)?Qh(n,l)(f):d(f)}function a(f){return t(f)}function l(f){return f===34||f===39||f===40?UF(n,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return Fr(f)?Qh(n,d)(f):d(f)}function d(f){return f===41?(n.enter("resourceMarker"),n.consume(f),n.exit("resourceMarker"),n.exit("resource"),e):t(f)}}function iJ(n,e,t){const r=this;return i;function i(a){return $F.call(r,n,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Wc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function o(a){return t(a)}}function sJ(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),i}function i(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const oJ={name:"labelStartImage",resolveAll:s1.resolveAll,tokenize:aJ};function aJ(n,e,t){const r=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),s}function s(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),o):t(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const lJ={name:"labelStartLink",resolveAll:s1.resolveAll,tokenize:cJ};function cJ(n,e,t){const r=this;return i;function i(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const e_={name:"lineEnding",tokenize:uJ};function uJ(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Nt(n,e,"linePrefix")}}const jp={name:"thematicBreak",tokenize:hJ};function hJ(n,e,t){let r=0,i;return s;function s(u){return n.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(n.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Ze(u))?(n.exit("thematicBreak"),e(u)):t(u)}function l(u){return u===i?(n.consume(u),r++,l):(n.exit("thematicBreakSequence"),Ct(u)?Nt(n,a,"whitespace")(u):a(u))}}const Rr={continuation:{tokenize:pJ},exit:yJ,name:"list",tokenize:gJ},dJ={partial:!0,tokenize:vJ},fJ={partial:!0,tokenize:mJ};function gJ(n,e,t){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const v=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:jw(m)){if(r.containerState.type||(r.containerState.type=v,n.enter(v,{_container:!0})),v==="listUnordered")return n.enter("listItemPrefix"),m===42||m===45?n.check(jp,t,u)(m):u(m);if(!r.interrupt||m===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(m)}return t(m)}function l(m){return jw(m)&&++o<10?(n.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(n.exit("listItemValue"),u(m)):t(m)}function u(m){return n.enter("listItemMarker"),n.consume(m),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,n.check(Zy,r.interrupt?t:d,n.attempt(dJ,g,f))}function d(m){return r.containerState.initialBlankLine=!0,s++,g(m)}function f(m){return Ct(m)?(n.enter("listItemPrefixWhitespace"),n.consume(m),n.exit("listItemPrefixWhitespace"),g):t(m)}function g(m){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(m)}}function pJ(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(Zy,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nt(n,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ct(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(fJ,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nt(n,n.attempt(Rr,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function mJ(n,e,t){const r=this;return Nt(n,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):t(s)}}function yJ(n){n.exit(this.containerState.type)}function vJ(n,e,t){const r=this;return Nt(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ct(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const c2={name:"setextUnderline",resolveTo:xJ,tokenize:_J};function xJ(n,e){let t=n.length,r,i,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",s?(n.splice(i,0,["enter",o,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end={...n[s][1].end}):n[r][1]=o,n.push(["exit",o,e]),n}function _J(n,e,t){const r=this;let i;return s;function s(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(n.enter("setextHeadingLine"),i=u,o(u)):t(u)}function o(u){return n.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(n.consume(u),a):(n.exit("setextHeadingLineSequence"),Ct(u)?Nt(n,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Ze(u)?(n.exit("setextHeadingLine"),e(u)):t(u)}}const wJ={tokenize:CJ};function CJ(n){const e=this,t=n.attempt(Zy,r,n.attempt(this.parser.constructs.flowInitial,i,Nt(n,n.attempt(this.parser.constructs.flow,i,n.attempt(kZ,i)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const SJ={resolveAll:XF()},bJ=HF("string"),EJ=HF("text");function HF(n){return{resolveAll:XF(n==="text"?TJ:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],s=t.attempt(i,o,a);return o;function o(d){return u(d)?s(d):a(d)}function a(d){if(d===null){t.consume(d);return}return t.enter("data"),t.consume(d),l}function l(d){return u(d)?(t.exit("data"),s(d)):(t.consume(d),l)}function u(d){if(d===null)return!0;const f=i[d];let g=-1;if(f)for(;++g<f.length;){const m=f[g];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function XF(n){return e;function e(t,r){let i=-1,s;for(;++i<=t.length;)s===void 0?t[i]&&t[i][1].type==="data"&&(s=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return n?n(t,r):t}}function TJ(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const u={type:t===n.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(n.splice(t,0,["enter",u,e],["exit",u,e]),t+=2)}t++}return n}const kJ={42:Rr,43:Rr,45:Rr,48:Rr,49:Rr,50:Rr,51:Rr,52:Rr,53:Rr,54:Rr,55:Rr,56:Rr,57:Rr,62:zF},RJ={91:AZ},PJ={[-2]:Qx,[-1]:Qx,32:Qx},IJ={35:jZ,42:jp,45:[c2,jp],60:GZ,61:c2,95:jp,96:a2,126:a2},MJ={38:BF,92:VF},AJ={[-5]:e_,[-4]:e_,[-3]:e_,33:oJ,38:BF,42:zw,60:[lZ,KZ],91:lJ,92:[FZ,VF],93:s1,95:zw,96:wZ},OJ={null:[zw,SJ]},DJ={null:[42,95]},LJ={null:[]},FJ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:DJ,contentInitial:RJ,disable:LJ,document:kJ,flow:IJ,flowInitial:PJ,insideSpan:OJ,string:MJ,text:AJ},Symbol.toStringTag,{value:"Module"}));function NJ(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:O(P),check:O(A),consume:b,enter:k,exit:R,interrupt:O(A,{interrupt:!0})},u={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:n,previous:null,sliceSerialize:g,sliceStream:m,write:f};let d=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function f(X){return o=yi(o,X),w(),o[o.length-1]!==null?[]:(D(e,0),u.events=i1(s,u.events,u),u.events)}function g(X,W){return zJ(m(X),W)}function m(X){return jJ(o,X)}function v(){const{_bufferIndex:X,_index:W,line:G,column:V,offset:ne}=r;return{_bufferIndex:X,_index:W,line:G,column:V,offset:ne}}function x(X){i[X.line]=X.column,Q()}function w(){let X;for(;r._index<o.length;){const W=o[r._index];if(typeof W=="string")for(X=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===X&&r._bufferIndex<W.length;)C(W.charCodeAt(r._bufferIndex));else C(W)}}function C(X){d=d(X)}function b(X){Ze(X)?(r.line++,r.column=1,r.offset+=X===-3?2:1,Q()):X!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=X}function k(X,W){const G=W||{};return G.type=X,G.start=v(),u.events.push(["enter",G,u]),a.push(G),G}function R(X){const W=a.pop();return W.end=v(),u.events.push(["exit",W,u]),W}function P(X,W){D(X,W.from)}function A(X,W){W.restore()}function O(X,W){return G;function G(V,ne,U){let oe,F,K,I;return Array.isArray(V)?q(V):"tokenize"in V?q([V]):N(V);function N(pe){return ce;function ce(ve){const Se=ve!==null&&pe[ve],Ce=ve!==null&&pe.null,Ue=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return q(Ue)(ve)}}function q(pe){return oe=pe,F=0,pe.length===0?U:L(pe[F])}function L(pe){return ce;function ce(ve){return I=j(),K=pe,pe.partial||(u.currentConstruct=pe),pe.name&&u.parser.constructs.disable.null.includes(pe.name)?be():pe.tokenize.call(W?Object.assign(Object.create(u),W):u,l,ee,be)(ve)}}function ee(pe){return X(K,I),ne}function be(pe){return I.restore(),++F<oe.length?L(oe[F]):U}}}function D(X,W){X.resolveAll&&!s.includes(X)&&s.push(X),X.resolve&&Rs(u.events,W,u.events.length-W,X.resolve(u.events.slice(W),u)),X.resolveTo&&(u.events=X.resolveTo(u.events,u))}function j(){const X=v(),W=u.previous,G=u.currentConstruct,V=u.events.length,ne=Array.from(a);return{from:V,restore:U};function U(){r=X,u.previous=W,u.currentConstruct=G,u.events.length=V,a=ne,Q()}}function Q(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function jJ(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(t===i)o=[n[t].slice(r,s)];else{if(o=n.slice(t,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(n[i].slice(0,s))}return o}function zJ(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const s=n[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function VJ(n){const r={constructs:Xq([FJ,...(n||{}).extensions||[]]),content:i(tZ),defined:[],document:i(rZ),flow:i(wJ),lazy:{},string:i(bJ),text:i(EJ)};return r;function i(s){return o;function o(a){return NJ(r,s,a)}}}function BJ(n){for(;!GF(n););return n}const u2=/[\0\t\n\r]/g;function GJ(){let n=1,e="",t=!0,r;return i;function i(s,o,a){const l=[];let u,d,f,g,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",t&&(s.charCodeAt(0)===65279&&f++,t=void 0);f<s.length;){if(u2.lastIndex=f,u=u2.exec(s),g=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(g),!u){e=s.slice(f);break}if(m===10&&f===g&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<g&&(l.push(s.slice(f,g)),n+=g-f),m){case 0:{l.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,l.push(-2);n++<d;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}f=g+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const WJ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function $J(n){return n.replace(WJ,UJ)}function UJ(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),s=i===120||i===88;return jF(t.slice(s?2:1),s?16:10)}return r1(t)||n}const YF={}.hasOwnProperty;function HJ(n,e,t){return typeof e!="string"&&(t=e,e=void 0),XJ(t)(BJ(VJ(t).document().write(GJ()(n,e,!0))))}function XJ(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Dn),autolinkProtocol:j,autolinkEmail:j,atxHeading:s(xn),blockQuote:s(Ce),characterEscape:j,characterReference:j,codeFenced:s(Ue),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ue,o),codeText:s(Ke,o),codeTextData:j,data:j,codeFlowValue:j,definition:s(Dt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Mt),hardBreakEscape:s(Ht),hardBreakTrailing:s(Ht),htmlFlow:s(nn,o),htmlFlowData:j,htmlText:s(nn,o),htmlTextData:j,image:s(Br),label:o,link:s(Dn),listItem:s(Bt),listItemValue:g,listOrdered:s(rn,f),listUnordered:s(rn),paragraph:s(B),reference:L,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(xn),strong:s(ie),thematicBreak:s(Ee)},exit:{atxHeading:l(),atxHeadingSequence:P,autolink:l(),autolinkEmail:Se,autolinkProtocol:ve,blockQuote:l(),characterEscapeValue:Q,characterReferenceMarkerHexadecimal:be,characterReferenceMarkerNumeric:be,characterReferenceValue:pe,characterReference:ce,codeFenced:l(w),codeFencedFence:x,codeFencedFenceInfo:m,codeFencedFenceMeta:v,codeFlowValue:Q,codeIndented:l(C),codeText:l(ne),codeTextData:Q,data:Q,definition:l(),definitionDestinationString:R,definitionLabelString:b,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(W),hardBreakTrailing:l(W),htmlFlow:l(G),htmlFlowData:Q,htmlText:l(V),htmlTextData:Q,image:l(oe),label:K,labelText:F,lineEnding:X,link:l(U),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ee,resourceDestinationString:I,resourceTitleString:N,resource:q,setextHeading:l(D),setextHeadingLineSequence:O,setextHeadingText:A,strong:l(),thematicBreak:l()}};KF(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(H){let te={type:"root",children:[]};const he={stack:[te],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:d,data:t},_e=[];let Ve=-1;for(;++Ve<H.length;)if(H[Ve][1].type==="listOrdered"||H[Ve][1].type==="listUnordered")if(H[Ve][0]==="enter")_e.push(Ve);else{const ut=_e.pop();Ve=i(H,ut,Ve)}for(Ve=-1;++Ve<H.length;){const ut=e[H[Ve][0]];YF.call(ut,H[Ve][1].type)&&ut[H[Ve][1].type].call(Object.assign({sliceSerialize:H[Ve][2].sliceSerialize},he),H[Ve][1])}if(he.tokenStack.length>0){const ut=he.tokenStack[he.tokenStack.length-1];(ut[1]||h2).call(he,void 0,ut[0])}for(te.position={start:ra(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:ra(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},Ve=-1;++Ve<e.transforms.length;)te=e.transforms[Ve](te)||te;return te}function i(H,te,he){let _e=te-1,Ve=-1,ut=!1,xr,dn,_r,Ei;for(;++_e<=he;){const Xt=H[_e];switch(Xt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xt[0]==="enter"?Ve++:Ve--,Ei=void 0;break}case"lineEndingBlank":{Xt[0]==="enter"&&(xr&&!Ei&&!Ve&&!_r&&(_r=_e),Ei=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ei=void 0}if(!Ve&&Xt[0]==="enter"&&Xt[1].type==="listItemPrefix"||Ve===-1&&Xt[0]==="exit"&&(Xt[1].type==="listUnordered"||Xt[1].type==="listOrdered")){if(xr){let sr=_e;for(dn=void 0;sr--;){const fn=H[sr];if(fn[1].type==="lineEnding"||fn[1].type==="lineEndingBlank"){if(fn[0]==="exit")continue;dn&&(H[dn][1].type="lineEndingBlank",ut=!0),fn[1].type="lineEnding",dn=sr}else if(!(fn[1].type==="linePrefix"||fn[1].type==="blockQuotePrefix"||fn[1].type==="blockQuotePrefixWhitespace"||fn[1].type==="blockQuoteMarker"||fn[1].type==="listItemIndent"))break}_r&&(!dn||_r<dn)&&(xr._spread=!0),xr.end=Object.assign({},dn?H[dn][1].start:Xt[1].end),H.splice(dn||_e,0,["exit",xr,Xt[2]]),_e++,he++}if(Xt[1].type==="listItemPrefix"){const sr={type:"listItem",_spread:!1,start:Object.assign({},Xt[1].start),end:void 0};xr=sr,H.splice(_e,0,["enter",sr,Xt[2]]),_e++,he++,_r=void 0,Ei=!0}}}return H[te][1]._spread=ut,he}function s(H,te){return he;function he(_e){a.call(this,H(_e),_e),te&&te.call(this,_e)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(H,te,he){this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([te,he||void 0]),H.position={start:ra(te.start),end:void 0}}function l(H){return te;function te(he){H&&H.call(this,he),u.call(this,he)}}function u(H,te){const he=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==H.type&&(te?te.call(this,H,_e[0]):(_e[1]||h2).call(this,H,_e[0]));else throw new Error("Cannot close `"+H.type+"` ("+Jh({start:H.start,end:H.end})+"): it’s not open");he.position.end=ra(H.end)}function d(){return Uq(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function g(H){if(this.data.expectingFirstListItemValue){const te=this.stack[this.stack.length-2];te.start=Number.parseInt(this.sliceSerialize(H),10),this.data.expectingFirstListItemValue=void 0}}function m(){const H=this.resume(),te=this.stack[this.stack.length-1];te.lang=H}function v(){const H=this.resume(),te=this.stack[this.stack.length-1];te.meta=H}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const H=this.resume(),te=this.stack[this.stack.length-1];te.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const H=this.resume(),te=this.stack[this.stack.length-1];te.value=H.replace(/(\r?\n|\r)$/g,"")}function b(H){const te=this.resume(),he=this.stack[this.stack.length-1];he.label=te,he.identifier=Wc(this.sliceSerialize(H)).toLowerCase()}function k(){const H=this.resume(),te=this.stack[this.stack.length-1];te.title=H}function R(){const H=this.resume(),te=this.stack[this.stack.length-1];te.url=H}function P(H){const te=this.stack[this.stack.length-1];if(!te.depth){const he=this.sliceSerialize(H).length;te.depth=he}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function O(H){const te=this.stack[this.stack.length-1];te.depth=this.sliceSerialize(H).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function j(H){const he=this.stack[this.stack.length-1].children;let _e=he[he.length-1];(!_e||_e.type!=="text")&&(_e=ue(),_e.position={start:ra(H.start),end:void 0},he.push(_e)),this.stack.push(_e)}function Q(H){const te=this.stack.pop();te.value+=this.sliceSerialize(H),te.position.end=ra(H.end)}function X(H){const te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const he=te.children[te.children.length-1];he.position.end=ra(H.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(te.type)&&(j.call(this,H),Q.call(this,H))}function W(){this.data.atHardBreak=!0}function G(){const H=this.resume(),te=this.stack[this.stack.length-1];te.value=H}function V(){const H=this.resume(),te=this.stack[this.stack.length-1];te.value=H}function ne(){const H=this.resume(),te=this.stack[this.stack.length-1];te.value=H}function U(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const te=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=te,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function oe(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const te=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=te,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function F(H){const te=this.sliceSerialize(H),he=this.stack[this.stack.length-2];he.label=$J(te),he.identifier=Wc(te).toLowerCase()}function K(){const H=this.stack[this.stack.length-1],te=this.resume(),he=this.stack[this.stack.length-1];if(this.data.inReference=!0,he.type==="link"){const _e=H.children;he.children=_e}else he.alt=te}function I(){const H=this.resume(),te=this.stack[this.stack.length-1];te.url=H}function N(){const H=this.resume(),te=this.stack[this.stack.length-1];te.title=H}function q(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function ee(H){const te=this.resume(),he=this.stack[this.stack.length-1];he.label=te,he.identifier=Wc(this.sliceSerialize(H)).toLowerCase(),this.data.referenceType="full"}function be(H){this.data.characterReferenceType=H.type}function pe(H){const te=this.sliceSerialize(H),he=this.data.characterReferenceType;let _e;he?(_e=jF(te,he==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=r1(te);const Ve=this.stack[this.stack.length-1];Ve.value+=_e}function ce(H){const te=this.stack.pop();te.position.end=ra(H.end)}function ve(H){Q.call(this,H);const te=this.stack[this.stack.length-1];te.url=this.sliceSerialize(H)}function Se(H){Q.call(this,H);const te=this.stack[this.stack.length-1];te.url="mailto:"+this.sliceSerialize(H)}function Ce(){return{type:"blockquote",children:[]}}function Ue(){return{type:"code",lang:null,meta:null,value:""}}function Ke(){return{type:"inlineCode",value:""}}function Dt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Mt(){return{type:"emphasis",children:[]}}function xn(){return{type:"heading",depth:0,children:[]}}function Ht(){return{type:"break"}}function nn(){return{type:"html",value:""}}function Br(){return{type:"image",title:null,url:"",alt:null}}function Dn(){return{type:"link",title:null,url:"",children:[]}}function rn(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function Bt(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function B(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function ue(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function ra(n){return{line:n.line,column:n.column,offset:n.offset}}function KF(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?KF(n,r):YJ(n,r)}}function YJ(n,e){let t;for(t in e)if(YF.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function h2(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Jh({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Jh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Jh({start:e.start,end:e.end})+") is still open")}function KJ(n){const e=this;e.parser=t;function t(r){return HJ(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qJ(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function ZJ(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function JJ(n,e){const t=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),n.patch(e,i),i=n.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},n.patch(e,i),i}function QJ(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function eQ(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function tQ(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Ru(r.toLowerCase()),s=n.footnoteOrder.indexOf(r);let o,a=n.footnoteCounts.get(r);a===void 0?(a=0,n.footnoteOrder.push(r),o=n.footnoteOrder.length):o=s+1,a+=1,n.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,u),n.applyData(e,u)}function nQ(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function rQ(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function qF(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function iQ(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return qF(n,e);const i={src:Ru(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,s),n.applyData(e,s)}function sQ(n,e){const t={src:Ru(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function oQ(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function aQ(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return qF(n,e);const i={href:Ru(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function lQ(n,e){const t={href:Ru(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function cQ(n,e,t){const r=n.all(e),i=t?uQ(t):ZF(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return n.patch(e,u),n.applyData(e,u)}function uQ(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=ZF(t[r])}return e}function ZF(n){const e=n.spread;return e??n.children.length>1}function hQ(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function dQ(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function fQ(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function gQ(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function pQ(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],o),i.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=QS(e.children[1]),l=MF(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function mQ(n,e,t){const r=t?t.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const f=e.children[l],g={},m=o?o[l]:void 0;m&&(g.align=m);let v={type:"element",tagName:s,properties:g,children:[]};f&&(v.children=n.all(f),n.patch(f,v),v=n.applyData(f,v)),u.push(v)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(u,!0)};return n.patch(e,d),n.applyData(e,d)}function yQ(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const d2=9,f2=32;function vQ(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const s=[];for(;r;)s.push(g2(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return s.push(g2(e.slice(i),i>0,!1)),s.join("")}function g2(n,e,t){let r=0,i=n.length;if(e){let s=n.codePointAt(r);for(;s===d2||s===f2;)r++,s=n.codePointAt(r)}if(t){let s=n.codePointAt(i-1);for(;s===d2||s===f2;)i--,s=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function xQ(n,e){const t={type:"text",value:vQ(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function _Q(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const wQ={blockquote:qJ,break:ZJ,code:JJ,delete:QJ,emphasis:eQ,footnoteReference:tQ,heading:nQ,html:rQ,imageReference:iQ,image:sQ,inlineCode:oQ,linkReference:aQ,link:lQ,listItem:cQ,list:hQ,paragraph:dQ,root:fQ,strong:gQ,table:pQ,tableCell:yQ,tableRow:mQ,text:xQ,thematicBreak:_Q,toml:mp,yaml:mp,definition:mp,footnoteDefinition:mp};function mp(){}const JF=-1,Jy=0,ed=1,Fm=2,o1=3,a1=4,l1=5,c1=6,QF=7,eN=8,p2=typeof self=="object"?self:globalThis,CQ=(n,e)=>{const t=(i,s)=>(n.set(s,i),i),r=i=>{if(n.has(i))return n.get(i);const[s,o]=e[i];switch(s){case Jy:case JF:return t(o,i);case ed:{const a=t([],i);for(const l of o)a.push(r(l));return a}case Fm:{const a=t({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case o1:return t(new Date(o),i);case a1:{const{source:a,flags:l}=o;return t(new RegExp(a,l),i)}case l1:{const a=t(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case c1:{const a=t(new Set,i);for(const l of o)a.add(r(l));return a}case QF:{const{name:a,message:l}=o;return t(new p2[a](l),i)}case eN:return t(BigInt(o),i);case"BigInt":return t(Object(BigInt(o)),i);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return t(new DataView(a),o)}}return t(new p2[s](o),i)};return r},m2=n=>CQ(new Map,n)(0),mc="",{toString:SQ}={},{keys:bQ}=Object,Rh=n=>{const e=typeof n;if(e!=="object"||!n)return[Jy,e];const t=SQ.call(n).slice(8,-1);switch(t){case"Array":return[ed,mc];case"Object":return[Fm,mc];case"Date":return[o1,mc];case"RegExp":return[a1,mc];case"Map":return[l1,mc];case"Set":return[c1,mc];case"DataView":return[ed,t]}return t.includes("Array")?[ed,t]:t.includes("Error")?[QF,t]:[Fm,t]},yp=([n,e])=>n===Jy&&(e==="function"||e==="symbol"),EQ=(n,e,t,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return t.set(a,l),l},s=o=>{if(t.has(o))return t.get(o);let[a,l]=Rh(o);switch(a){case Jy:{let d=o;switch(l){case"bigint":a=eN,d=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([JF],o)}return i([a,d],o)}case ed:{if(l){let g=o;return l==="DataView"?g=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(g=new Uint8Array(o)),i([l,[...g]],o)}const d=[],f=i([a,d],o);for(const g of o)d.push(s(g));return f}case Fm:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],f=i([a,d],o);for(const g of bQ(o))(n||!yp(Rh(o[g])))&&d.push([s(g),s(o[g])]);return f}case o1:return i([a,o.toISOString()],o);case a1:{const{source:d,flags:f}=o;return i([a,{source:d,flags:f}],o)}case l1:{const d=[],f=i([a,d],o);for(const[g,m]of o)(n||!(yp(Rh(g))||yp(Rh(m))))&&d.push([s(g),s(m)]);return f}case c1:{const d=[],f=i([a,d],o);for(const g of o)(n||!yp(Rh(g)))&&d.push(s(g));return f}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},y2=(n,{json:e,lossy:t}={})=>{const r=[];return EQ(!(e||t),!!e,new Map,r)(n),r},Nm=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?m2(y2(n,e)):structuredClone(n):(n,e)=>m2(y2(n,e));function TQ(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function kQ(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function RQ(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||TQ,r=n.options.footnoteBackLabel||kQ,i=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<n.footnoteOrder.length;){const u=n.footnoteById.get(n.footnoteOrder[l]);if(!u)continue;const d=n.all(u),f=String(u.identifier).toUpperCase(),g=Ru(f.toLowerCase());let m=0;const v=[],x=n.footnoteCounts.get(f);for(;x!==void 0&&++m<=x;){v.length>0&&v.push({type:"text",value:" "});let b=typeof t=="string"?t:t(l,m);typeof b=="string"&&(b={type:"text",value:b}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const b=w.children[w.children.length-1];b&&b.type==="text"?b.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...v)}else d.push(...v);const C={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:n.wrap(d,!0)};n.patch(u,C),a.push(C)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Nm(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const tN=function(n){if(n==null)return AQ;if(typeof n=="function")return Qy(n);if(typeof n=="object")return Array.isArray(n)?PQ(n):IQ(n);if(typeof n=="string")return MQ(n);throw new Error("Expected function, string, or object as test")};function PQ(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=tN(n[t]);return Qy(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function IQ(n){const e=n;return Qy(t);function t(r){const i=r;let s;for(s in n)if(i[s]!==e[s])return!1;return!0}}function MQ(n){return Qy(e);function e(t){return t&&t.type===n}}function Qy(n){return e;function e(t,r,i){return!!(OQ(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function AQ(){return!0}function OQ(n){return n!==null&&typeof n=="object"&&"type"in n}const nN=[],DQ=!0,v2=!1,LQ="skip";function FQ(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const s=tN(i),o=r?-1:1;a(n,void 0,[])();function a(l,u,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return g;function g(){let m=nN,v,x,w;if((!e||s(l,u,d[d.length-1]||void 0))&&(m=NQ(t(l,d)),m[0]===v2))return m;if("children"in l&&l.children){const C=l;if(C.children&&m[0]!==LQ)for(x=(r?C.children.length:-1)+o,w=d.concat(C);x>-1&&x<C.children.length;){const b=C.children[x];if(v=a(b,x,w)(),v[0]===v2)return v;x=typeof v[1]=="number"?v[1]:x+o}}return m}}}function NQ(n){return Array.isArray(n)?n:typeof n=="number"?[DQ,n]:n==null?nN:[n]}function rN(n,e,t,r){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=t):(s=e,o=t,i=r),FQ(n,s,a,i);function a(l,u){const d=u[u.length-1],f=d?d.children.indexOf(l):void 0;return o(l,f,d)}}const Vw={}.hasOwnProperty,jQ={};function zQ(n,e){const t=e||jQ,r=new Map,i=new Map,s=new Map,o={...wQ,...t.handlers},a={all:u,applyData:BQ,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:t,patch:VQ,wrap:WQ};return rN(n,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,g=String(d.identifier).toUpperCase();f.has(g)||f.set(g,d)}}),a;function l(d,f){const g=d.type,m=a.handlers[g];if(Vw.call(a.handlers,g)&&m)return m(a,d,f);if(a.options.passThrough&&a.options.passThrough.includes(g)){if("children"in d){const{children:x,...w}=d,C=Nm(w);return C.children=a.all(d),C}return Nm(d)}return(a.options.unknownHandler||GQ)(a,d,f)}function u(d){const f=[];if("children"in d){const g=d.children;let m=-1;for(;++m<g.length;){const v=a.one(g[m],d);if(v){if(m&&g[m-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=x2(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=x2(x.value))}Array.isArray(v)?f.push(...v):f.push(v)}}}return f}}function VQ(n,e){n.position&&(e.position=Sq(n))}function BQ(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,s=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const o="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:o}}t.type==="element"&&s&&Object.assign(t.properties,Nm(s)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function GQ(n,e){const t=e.data||{},r="value"in e&&!(Vw.call(t,"hProperties")||Vw.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function WQ(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function x2(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function _2(n,e){const t=zQ(n,e),r=t.one(n,void 0),i=RQ(t),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function $Q(n,e){return n&&"run"in n?async function(t,r){const i=_2(t,{file:r,...e});await n.run(i,r)}:function(t,r){return _2(t,{file:r,...n||e})}}function w2(n){if(n)throw n}var t_,C2;function UQ(){if(C2)return t_;C2=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var d=n.call(u,"constructor"),f=u.constructor&&u.constructor.prototype&&n.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!f)return!1;var g;for(g in u);return typeof g>"u"||n.call(u,g)},o=function(u,d){t&&d.name==="__proto__"?t(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},a=function(u,d){if(d==="__proto__")if(n.call(u,d)){if(r)return r(u,d).value}else return;return u[d]};return t_=function l(){var u,d,f,g,m,v,x=arguments[0],w=1,C=arguments.length,b=!1;for(typeof x=="boolean"&&(b=x,x=arguments[1]||{},w=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});w<C;++w)if(u=arguments[w],u!=null)for(d in u)f=a(x,d),g=a(u,d),x!==g&&(b&&g&&(s(g)||(m=i(g)))?(m?(m=!1,v=f&&i(f)?f:[]):v=f&&s(f)?f:{},o(x,{name:d,newValue:l(b,v,g)})):typeof g<"u"&&o(x,{name:d,newValue:g}));return x},t_}var HQ=UQ();const n_=jm(HQ);function Bw(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function XQ(){const n=[],e={run:t,use:r};return e;function t(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const d=n[++s];let f=-1;if(l){o(l);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,d?YQ(d,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function YQ(n,e){let t;return r;function r(...o){const a=n.length>o.length;let l;a&&o.push(i);try{l=n.apply(this,o)}catch(u){const d=u;if(a&&t)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){t||(t=!0,e(o,...a))}function s(o){i(null,o)}}const cs={basename:KQ,dirname:qQ,extname:ZQ,join:JQ,sep:"/"};function KQ(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');sf(n);let t=0,r=-1,i=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,a=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(s){t=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(n.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function qQ(n){if(sf(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function ZQ(n){sf(n);let e=n.length,t=-1,r=0,i=-1,s=0,o;for(;e--;){const a=n.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||t<0||s===0||s===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function JQ(...n){let e=-1,t;for(;++e<n.length;)sf(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":QQ(t)}function QQ(n){sf(n);const e=n.codePointAt(0)===47;let t=eee(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function eee(n,e){let t="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=n.length;){if(o<n.length)a=n.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=o,s=0;continue}}else if(t.length>0){t="",r=0,i=o,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,o):t=n.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return t}function sf(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const tee={cwd:nee};function nee(){return"/"}function Gw(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function ree(n){if(typeof n=="string")n=new URL(n);else if(!Gw(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return iee(n)}function iee(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const r_=["history","path","basename","stem","extname","dirname"];class iN{constructor(e){let t;e?Gw(e)?t={path:e}:typeof e=="string"||see(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":tee.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<r_.length;){const s=r_[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let i;for(i in t)r_.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?cs.basename(this.path):void 0}set basename(e){s_(e,"basename"),i_(e,"basename"),this.path=cs.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?cs.dirname(this.path):void 0}set dirname(e){S2(this.basename,"dirname"),this.path=cs.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?cs.extname(this.path):void 0}set extname(e){if(i_(e,"extname"),S2(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=cs.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Gw(e)&&(e=ree(e)),s_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?cs.basename(this.path,this.extname):void 0}set stem(e){s_(e,"stem"),i_(e,"stem"),this.path=cs.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new ir(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function i_(n,e){if(n&&n.includes(cs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+cs.sep+"`")}function s_(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function S2(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function see(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const oee=function(n){const r=this.constructor.prototype,i=r[n],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},aee={}.hasOwnProperty;class u1 extends oee{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=XQ()}copy(){const e=new u1;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(n_(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(l_("data",this.frozen),this.namespace[e]=t,this):aee.call(this.namespace,e)&&this.namespace[e]||void 0:e?(l_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=vp(e),r=this.parser||this.Parser;return o_("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),o_("process",this.parser||this.Parser),a_("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(s,o){const a=vp(e),l=r.parse(a);r.run(l,a,function(d,f,g){if(d||!f||!g)return u(d);const m=f,v=r.stringify(m,g);uee(v)?g.value=v:g.result=v,u(d,g)});function u(d,f){d||!f?o(d):s?s(f):t(void 0,f)}}}processSync(e){let t=!1,r;return this.freeze(),o_("processSync",this.parser||this.Parser),a_("processSync",this.compiler||this.Compiler),this.process(e,i),E2("processSync","process",t),r;function i(s,o){t=!0,w2(s),r=o}}run(e,t,r){b2(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=vp(t);i.run(e,l,u);function u(d,f,g){const m=f||e;d?a(d):o?o(m):r(void 0,m,g)}}}runSync(e,t){let r=!1,i;return this.run(e,t,s),E2("runSync","run",r),i;function s(o,a){w2(o),i=a,r=!0}}stringify(e,t){this.freeze();const r=vp(t),i=this.compiler||this.Compiler;return a_("stringify",i),b2(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(l_("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;l(d,f)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=n_(!0,i.settings,u.settings))}function a(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];s(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,d){let f=-1,g=-1;for(;++f<r.length;)if(r[f][0]===u){g=f;break}if(g===-1)r.push([u,...d]);else if(d.length>0){let[m,...v]=d;const x=r[g][1];Bw(x)&&Bw(m)&&(m=n_(!0,x,m)),r[g]=[u,m,...v]}}}}const lee=new u1().freeze();function o_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function a_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function l_(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function b2(n){if(!Bw(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function E2(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function vp(n){return cee(n)?n:new iN(n)}function cee(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function uee(n){return typeof n=="string"||hee(n)}function hee(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const dee="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",T2=[],k2={allowDangerousHtml:!0},fee=/^(https?|ircs?|mailto|xmpp)$/i,gee=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function pee(n){const e=mee(n),t=yee(n);return vee(e.runSync(e.parse(t),t),n)}function mee(n){const e=n.rehypePlugins||T2,t=n.remarkPlugins||T2,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...k2}:k2;return lee().use(KJ).use(t).use($Q,r).use(e)}function yee(n){const e=n.children||"",t=new iN;return typeof e=="string"&&(t.value=e),t}function vee(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||xee;for(const d of gee)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+dee+d.id,void 0);return rN(n,u),Rq(n,{Fragment:_.Fragment,components:i,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function u(d,f,g){if(d.type==="raw"&&g&&typeof f=="number")return o?g.children.splice(f,1):g.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let m;for(m in Jx)if(Object.hasOwn(Jx,m)&&Object.hasOwn(d.properties,m)){const v=d.properties[m],x=Jx[m];(x===null||x.includes(d.tagName))&&(d.properties[m]=l(String(v||""),m,d))}}if(d.type==="element"){let m=t?!t.includes(d.tagName):s?s.includes(d.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(d,f,g)),m&&g&&typeof f=="number")return a&&d.children?g.children.splice(f,1,...d.children):g.children.splice(f,1),f}}}function xee(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||fee.test(n.slice(0,e))?n:""}const _ee={h1:({node:n,...e})=>_.jsx("h1",{className:"text-2xl font-bold my-4",...e}),h2:({node:n,...e})=>_.jsx("h2",{className:"text-xl font-semibold my-3",...e}),h3:({node:n,...e})=>_.jsx("h2",{className:"text-2xl font-semibold my-3",...e}),p:({node:n,...e})=>_.jsx("p",{className:"mb-4 leading-relaxed text-gray-700",...e}),ul:({node:n,...e})=>_.jsx("ul",{className:"list-disc ml-6 mb-4",...e}),ol:({node:n,...e})=>_.jsx("ol",{className:"list-decimal ml-6 mb-4",...e}),li:({node:n,...e})=>_.jsx("li",{className:"mb-1",...e}),strong:({node:n,...e})=>_.jsx("strong",{className:"font-semibold",...e}),em:({node:n,...e})=>_.jsx("em",{className:"italic",...e})};function wee({data:n}){const e=(n==null?void 0:n.conclusao)??null,t=bl(),{id:r}=Eo(),i=()=>{const s=`/reports/${r}/update?step=3`;t(s)};return _.jsxs("section",{id:"evidencias",className:"mb-8",children:[_.jsxs("div",{className:"flex flex-row justify-between items-center",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Conclusão"}),e&&_.jsxs(tn,{onClick:i,children:[_.jsx(B3,{})," Editar"]})]}),e?_.jsxs(fr,{className:"mt-4 p-2 max-w-full overflow-hidden",children:[_.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[_.jsx(__,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Gerado por IA"}),_.jsx(__,{className:"bg-blue-100 text-blue-800 border-blue-200",children:e==null?void 0:e.iaVersion}),_.jsx("span",{className:"text-xs text-gray-500",children:new Date(e==null?void 0:e.criadoEm).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),_.jsx("div",{className:"mt-4 max-w-[600px] overflow-x-auto break-words",children:_.jsx(pee,{components:_ee,children:e.conclusao})}),_.jsx("span",{className:"text-xs italic text-gray-500",children:"Esta é uma avaliação gerada por IA baseada em evidências fotográficas. Recomenda-se uma inspeção profissional no local para confirmar estas conclusões."})]}):_.jsxs(fr,{className:"border-gray-200 shadow-md",children:[_.jsxs(Xm,{className:"pb-4",children:[_.jsx(Ym,{className:"text-xl text-gray-700",children:"Gerar conclusão"}),_.jsx(Km,{children:"Gere uma conclusão baseada nos dados e análises do seu relatório com o uso de inteligência artificial."})]}),_.jsx(Uc,{children:_.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-dashed border-gray-300 flex flex-col items-center justify-center min-h-[180px]",children:[_.jsx(CP,{className:"h-12 w-12 text-gray-400 mb-3"}),_.jsx("p",{className:"text-gray-600 text-center max-w-md",children:"Clique no botão abaixo para criar sua conclusão."})]})}),_.jsx(VP,{className:"flex justify-center pt-2 pb-6",children:_.jsx(tn,{size:"lg",onClick:i,className:"px-8 py-6 rounded-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 transition-all shadow-md hover:shadow-lg",children:"Criar conclusão"})})]})]})}function Cee(){return _.jsx("div",{className:"md:w-64 p-4 border-r hidden md:block",children:_.jsx("nav",{className:"sticky top-24",children:_.jsxs("ul",{className:"space-y-2",children:[_.jsx("li",{children:_.jsx("a",{href:"#cabecalho",className:"block text-blue-800 hover:text-blue-600",children:"Cabeçalho"})}),_.jsx("li",{children:_.jsx("a",{href:"#informacoes",className:"block text-blue-800 hover:text-blue-600",children:"Informações do Imóvel"})}),_.jsx("li",{children:_.jsx("a",{href:"#caracteristicas",className:"block text-blue-800 hover:text-blue-600",children:"Características Gerais"})}),_.jsx("li",{children:_.jsx("a",{href:"#infraestrutura",className:"block text-blue-800 hover:text-blue-600",children:"Infraestrutura Urbana"})}),_.jsx("li",{children:_.jsx("a",{href:"#localizacoes",className:"block text-blue-800 hover:text-blue-600",children:"Localizações"})}),_.jsx("li",{children:_.jsx("a",{href:"#evidencias",className:"block text-blue-800 hover:text-blue-600",children:"Evidências"})}),_.jsx("li",{children:_.jsx("a",{href:"#arquivos",className:"block text-blue-800 hover:text-blue-600",children:"Arquivos"})})]})})})}const R2={pdf:{bg:"bg-red-100",text:"text-red-600"},png:{bg:"bg-yellow-100",text:"text-yellow-600"},jpg:{bg:"bg-yellow-100",text:"text-yellow-600"},docx:{bg:"bg-blue-100",text:"text-blue-600"},xls:{bg:"bg-green-100",text:"text-green-600"},default:{bg:"bg-gray-100",text:"text-gray-600"}};function See(){var w,C,b,k,R,P,A;const{id:n}=Eo(),e=bl(),[t,r]=E.useState(null),{currentAttachment:i,deselectAttachment:s,selectAttachment:o}=rC();if(E.useEffect(()=>{er(`/api/v2/relatorios/${n}`).then(O=>{r(O)})},[]),!t)return _.jsx("div",{children:"Carregando..."});const a=t==null?void 0:t.geolocations.map(O=>{var D,j;return{id:O.id,url:O.url,filename:(D=O.url.split("/"))==null?void 0:D.pop(),extension:(j=O.url.split("."))==null?void 0:j.pop()}}),l=t!=null&&t.pdfUrl?{url:t.pdfUrl,filename:(C=(w=t.pdfUrl)==null?void 0:w.split("/"))==null?void 0:C.pop(),extension:(k=(b=t.pdfUrl)==null?void 0:b.split("."))==null?void 0:k.pop()}:null,u=(R=t.evidencias.map(O=>O.arquivos))==null?void 0:R.flat().map(O=>{var D,j,Q,X;return{id:O.id,url:O.url,filename:(j=(D=O.url)==null?void 0:D.split("/"))==null?void 0:j.pop(),extension:(X=(Q=O.url)==null?void 0:Q.split("."))==null?void 0:X.pop()}}),d=async(O,D)=>{const j=await fetch(O);if(!j.ok)throw new Error("Erro ao baixar arquivo");const Q=await j.blob(),X=document.createElement("a");X.href=URL.createObjectURL(Q),X.download=D,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(X.href)},f=()=>{const O=({id:D,url:j,filename:Q,extension:X})=>{const{bg:W,text:G}=R2[X]??R2.default;return _.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-gray-50",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:`${W} w-10 h-10 rounded flex items-center justify-center`,children:_.jsx("span",{className:`${G} text-xs font-medium`,children:X.toUpperCase()})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-medium",children:decodeURIComponent(Q)}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Adicionado em ",new Date(t.createdAt).toLocaleDateString()]})]})]}),_.jsxs(tn,{onClick:()=>d(j,Q),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[_.jsx(m_,{className:"h-4 w-4"}),_.jsx("span",{children:"Download"})]})]},D)};return[l,...a,...u].map(O)},g=[...new Set((P=t==null?void 0:t.evidencias)==null?void 0:P.map(O=>O.ambiente))],m=(A=t==null?void 0:t.evidencias)==null?void 0:A.reduce((O,D)=>(O[D.ambiente]||(O[D.ambiente]=[]),O[D.ambiente].push(D),O),{}),v=g==null?void 0:g.map(O=>m[O]).flat(),x=O=>{if(!O)return;const D=`/reports/${n}/update?evidenciaId=${O.id}&step=2`;e(D)};return _.jsxs(_.Fragment,{children:[!!(i!=null&&i.url)&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white rounded-lg p-6 w-[90%] h-[90%] relative",children:[_.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:"✕"}),_.jsx("div",{className:"h-full w-full",children:_.jsx(qI,{sidebarEnabled:!1,imageUrl:i==null?void 0:i.url,vectors:i==null?void 0:i.vetores})})]})}),_.jsx("div",{className:"min-h-screen bg-gray-100 py-8 px-4 sm:px-6 lg:px-8 font-serif",children:_.jsxs("div",{className:"max-w-5xl mx-auto bg-white shadow-md",children:[_.jsx(Q7,{}),_.jsxs("div",{className:"flex flex-col md:flex-row",children:[_.jsx(Cee,{}),_.jsxs("div",{className:"flex-1 p-6",children:[_.jsx("section",{id:"cabecalho",className:"mb-8",children:_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsx("div",{className:"flex items-center gap-4",children:_.jsxs("div",{children:[_.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Laudo de Vistoria Técnica"}),_.jsxs("p",{className:"text-gray-600",children:["Perito: ",t.perito||"Não especificado"]}),_.jsxs("p",{className:"text-gray-600",children:["Data: ",new Date(t.createdAt).toLocaleDateString()]})]})}),_.jsx("div",{className:"text-right",children:_.jsxs("p",{className:"text-sm text-gray-500",children:["Cód: ",t.id]})})]})}),_.jsx(oa,{className:"my-6"}),_.jsxs("section",{id:"informacoes",className:"mb-8",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Informações do Imóvel"}),_.jsx(fr,{className:"p-4",children:_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Proprietário"}),_.jsx("p",{className:"font-medium",children:t.proprietario})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"ID do Imóvel"}),_.jsx("p",{className:"font-medium",children:t.idImovel})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Tipo do Imóvel"}),_.jsx("p",{className:"font-medium",children:t.tipoImovel||"Não especificado"})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Acompanhante"}),_.jsx("p",{className:"font-medium",children:t.acompanhante})]}),_.jsxs("div",{className:"col-span-1 md:col-span-2",children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Endereço Completo"}),_.jsx("p",{className:"font-medium",children:t.endereco})]})]})})]}),_.jsx(oa,{className:"my-6"}),_.jsxs("section",{id:"caracteristicas",className:"mb-8",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Características Gerais"}),_.jsx(fr,{className:"p-4",children:_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Área do Terreno"}),_.jsxs("p",{className:"font-medium",children:[t.area," m²"]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Dimensões"}),_.jsx("p",{className:"font-medium",children:t.dimensoes})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Forma do Terreno"}),_.jsx("p",{className:"font-medium",children:t.forma||"Não especificado"})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Cobertura"}),_.jsx("p",{className:"font-medium",children:t.cobertura||"Não especificado"})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Estrutura"}),_.jsx("p",{className:"font-medium",children:t.estrutura||"Não especificado"})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Fundações"}),_.jsx("p",{className:"font-medium",children:t.fundacoes||"Não especificado"})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Estado de Conservação"}),_.jsx("p",{className:"font-medium",children:t.estadoConservacao})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Estado de Ocupação"}),_.jsx("p",{className:"font-medium",children:t.estadoOcupacao})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Idade Aparente"}),_.jsxs("p",{className:"font-medium",children:[t.idadeAparente," anos"]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Idade Real"}),_.jsxs("p",{className:"font-medium",children:[t.idadeReal," anos"]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Padrão Construtivo"}),_.jsx("p",{className:"font-medium",children:t.padraoConstrucao||"Não especificado"})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500",children:"Uso Predominante"}),_.jsx("p",{className:"font-medium",children:t.usoPredominante||"Não especificado"})]})]})})]}),_.jsx(oa,{className:"my-6"}),_.jsxs("section",{id:"infraestrutura",className:"mb-8",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Infraestrutura Urbana"}),_.jsx(fr,{className:"p-4",children:_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-medium mb-2",children:"Serviços Disponíveis"}),_.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:t.infraestruturas.map(O=>_.jsx("li",{children:O.tipo},O.id))})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-medium mb-2",children:"Serviços Comunitários Próximos"}),_.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:t.servicosComunitarios.map(O=>_.jsx("li",{children:O.tipo},O.id))})]})]})})]}),_.jsx(oa,{className:"my-6"}),_.jsxs("section",{id:"localizacoes",className:"mb-8",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Localizações"}),_.jsx(fr,{className:"p-4",children:_.jsx("div",{className:"space-y-4",children:t.geolocations.map((O,D)=>_.jsxs("div",{className:"flex flex-col md:flex-row gap-4 border-b pb-4",children:[_.jsx("div",{className:"w-full md:w-32 h-24 bg-gray-200 flex-shrink-0",children:_.jsx("img",{src:O.url,alt:`Localização ${D+1}`,width:128,height:96,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"font-medium",children:"Localização Principal"}),_.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Coordenadas: ",O.latitude,", ",O.longitude]}),_.jsx(tn,{variant:"link",onClick:()=>window.open(`https://www.google.com/maps?q=${O.latitude},${O.longitude}`,"_blank"),size:"sm",className:"p-0 h-auto text-blue-800",children:"Ver no mapa"})]})]},O==null?void 0:O.id))})})]}),_.jsx(oa,{className:"my-6"}),_.jsxs("section",{id:"evidencias",className:"mb-8",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Evidências"}),_.jsxs(J7,{defaultValue:"sala",className:"w-full",children:[_.jsx(wF,{className:"grid grid-cols-4 mb-2",children:g==null?void 0:g.map(O=>_.jsx(CF,{value:O,children:O},O))}),v==null?void 0:v.map(O=>_.jsx(SF,{value:O.ambiente,className:"mt-2",children:_.jsxs(fr,{className:"p-4",children:[_.jsxs("div",{className:"mb-4",children:[_.jsxs("p",{className:"text-sm text-gray-600",children:["Data: ",new Date(O.date).toLocaleDateString()]}),_.jsx("p",{className:"text-sm text-gray-700 mt-2",children:O.descricao})]}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:O.arquivos.map(D=>_.jsxs("div",{className:"aspect-square bg-gray-200 relative group",children:[_.jsx("img",{src:D.url,alt:"Evidência",width:150,height:150,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:_.jsx(tn,{variant:"secondary",size:"sm",className:"text-xs",onClick:()=>x(O),children:"Editar"})})]},D.id))})]})},O.ambiente))]})]}),_.jsx(oa,{className:"my-6"}),_.jsx(wee,{data:t}),_.jsx(oa,{className:"my-6"}),_.jsxs("section",{id:"arquivos",className:"mb-8",children:[_.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"Arquivos"}),_.jsx(fr,{className:"p-4",children:_.jsx("div",{className:"space-y-3",children:f()})})]}),_.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-3 flex justify-end gap-2 md:hidden",children:[_.jsxs(tn,{onClick:()=>e(`/reports/${n}/update`),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[_.jsx(wP,{className:"h-4 w-4"}),_.jsx("span",{children:"Editar"})]}),_.jsx($c,{to:`${iC}/api/relatorios/${n}/generate`,target:"_blank",children:_.jsxs(tn,{variant:"default",size:"sm",className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-900",children:[_.jsx(m_,{className:"h-4 w-4"}),_.jsx("span",{children:"Exportar DOCX"})]})})]})]})]})]})})]})}function bee(){return _.jsx(L4,{children:_.jsxs(_.Fragment,{children:[_.jsx(Sz,{children:_.jsxs(Q5,{children:[_.jsx(yc,{path:"/",element:_.jsx(U7,{})}),_.jsx(yc,{path:"/reports/:id/create",element:_.jsx(GR,{})}),_.jsx(yc,{path:"/reports/:id/view",element:_.jsx(See,{})}),_.jsx(yc,{path:"/reports/:id/conclusion",element:_.jsx(z4,{})}),_.jsx(yc,{path:"/reports/:id/update",element:_.jsx(GR,{})})]})}),_.jsx(A4,{})]})})}l5.createRoot(document.getElementById("root")).render(_.jsx(bee,{}));
